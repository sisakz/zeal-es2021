<html><!-- Mirrored from laravel.com/docs/9.x/upgrade by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 24 Mar 2022 16:17:07 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->

    <meta charset="utf-8">
    <title>Upgrade Guide</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

        <link rel="canonical" href="upgrade.html">
    
    <!-- Primary Meta Tags -->
    <meta name="title" content="Laravel - The PHP Framework For Web Artisans">
    <meta name="description" content="Laravel is a PHP web application framework with expressive, elegant syntax. We’ve already laid the foundation — freeing you to create without sweating the small things.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://laravel.com/">
    <meta property="og:title" content="Laravel - The PHP Framework For Web Artisans">
    <meta property="og:description" content="Laravel is a PHP web application framework with expressive, elegant syntax. We’ve already laid the foundation — freeing you to create without sweating the small things.">
    <meta property="og:image" content="../../img/og-image.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://laravel.com/">
    <meta property="twitter:title" content="Laravel - The PHP Framework For Web Artisans">
    <meta property="twitter:description" content="Laravel is a PHP web application framework with expressive, elegant syntax. We’ve already laid the foundation — freeing you to create without sweating the small things.">
    <meta property="twitter:image" content="../../img/og-image.jpg">

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="../../img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../img/favicon/favicon-16x16.png">
    <link rel="manifest" href="https://laravel.com/img/favicon/site.webmanifest">
    <link rel="mask-icon" href="../../img/favicon/safari-pinned-tab.svg" color="#ff2d20">
    <link rel="shortcut icon" href="../../img/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#ff2d20">
    <meta name="msapplication-config" content="https://laravel.com/img/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="../../../use.typekit.net/ins2wgm.css">
    <link rel="stylesheet" type="text/css" href="../../css/app091f.css?id=b59affd817f095c5db73">

    <script src="//www.google-analytics.com/ga.js"></script><script src="//www.google-analytics.com/ga.js"></script><script>
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
        if (localStorage.theme === 'system') {
            if (e.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        }
    });

    function updateTheme() {
        if (!('theme' in localStorage)) {
            localStorage.theme = 'system';
        }

        switch (localStorage.theme) {
            case 'system':
                if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
                document.documentElement.setAttribute('color-theme', 'system');
                break;

            case 'dark':
                document.documentElement.classList.add('dark');
                document.documentElement.setAttribute('color-theme', 'dark');
                break;

            case 'light':
                document.documentElement.classList.remove('dark');
                document.documentElement.setAttribute('color-theme', 'light');
                break;
        }
    }

    updateTheme();
</script>
</head>
<body x-data="{
        navIsOpen: false,
        searchIsOpen: false,
        search: '',
    }" class="language-php h-full w-full font-sans text-gray-900 antialiased">

    <a id="skip-to-content-link" href="#main-content" class="absolute bg-gray-100 px-4 py-2 top-3 left-3 text-gray-700 shadow-xl">
    Skip to content
</a>
    <div class="relative overflow-auto dark:bg-dark-700" id="docsScreen">
        <div class="relative lg:flex lg:items-start">
            <aside x-data="{
                    navIsOpen: false,
                    init() {
                        this.$watch('navIsOpen', (val) => {
                            if (val) {
                                document.body.classList.add('overflow-hidden');
                            } else {
                                document.body.classList.remove('overflow-hidden');
                            }
                        });
                    }
                }" class="hidden fixed top-0 bottom-0 left-0 z-20 h-full w-16 bg-gradient-to-b from-gray-100 to-white transition-all duration-300 overflow-hidden lg:sticky lg:w-80 lg:shrink-0 lg:flex lg:flex-col lg:justify-end lg:items-end 2xl:max-w-lg 2xl:w-full dark:from-dark-800 dark:to-dark-700" :class="{ 'w-64': navIsOpen }" @click.away="navIsOpen = false" @keydown.window.escape="navIsOpen = false">
                <div class="relative min-h-0 flex-1 flex flex-col xl:w-80">
                    <a href="https://laravel.com/" class="flex items-center py-8 px-4 lg:px-8 xl:px-16">
                        <img class="w-8 h-8 shrink-0 transition-all duration-300 lg:w-12 lg:h-12" :class="{ 'w-12 h-12': navIsOpen }" src="../../img/logomark.min.svg" alt="Laravel" width="50" height="52">
                        <img x-show="navIsOpen" x-cloak="" class="ml-4 transition-all duration-300 lg:hidden" x-transition:enter="duration-250 ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="duration-250 ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" src="../../img/logotype.min.svg" alt="Laravel" width="114" height="29">
                        <img src="../../img/logotype.min.svg" alt="Laravel" class="hidden ml-4 lg:block" width="114" height="29">
                    </a>
                    <div class="overflow-y-auto overflow-x-hidden px-4 lg:overflow-hidden lg:px-8 xl:px-16">
                        
                        

                        
                                                    <div :class="{ 'hidden': !navIsOpen }" x-cloak="" class="mt-4 px-3 py-2 border-dashed border-gray-200 border rounded-lg text-xs leading-loose text-gray-700 lg:block dark:border-gray-400 dark:text-gray-200">
                                <span class="font-medium">Laravel Forge:</span> create and manage PHP 8 servers. Deploy your Laravel applications in seconds. <a class="underline text-red-600" href="https://forge.laravel.com/">Sign up now!</a>.
                            </div>
                        
                        
                                            </div>
                    <div class="sticky bottom-0 flex-1 flex flex-col justify-end lg:hidden">
                        <div class="py-4 px-4 bg-white">
                            <button class="relative ml-1 w-6 h-6 text-red-600 lg:hidden focus:outline-none focus:shadow-outline" aria-label="Menu" @click.prevent="navIsOpen = !navIsOpen">
                                <svg x-show="! navIsOpen" x-transition.opacity="" class="absolute inset-0 w-6 h-6" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                                <svg x-show="navIsOpen" x-transition.opacity="" x-cloak="" class="absolute inset-0 w-6 h-6" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                            </button>
                        </div>
                    </div>
                </div>
            </aside>

            <header class="lg:hidden" @keydown.window.escape="navIsOpen = false" @click.away="navIsOpen = false">
                <div class="relative mx-auto w-full py-10 bg-white transition duration-200 dark:bg-dark-700">
                    <div class="mx-auto px-8 sm:px-16 flex items-center justify-between">
                        <a href="https://laravel.com/" class="flex items-center">
                            <img class="" src="../../img/logomark.min.svg" alt="Laravel">
                            <img class="hidden ml-5 sm:block" src="../../img/logotype.min.svg" alt="Laravel">
                        </a>
                        <div class="flex-1 flex items-center justify-end">
                            <button id="header__sun" onclick="toSystemMode()" title="Switch to system theme" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <circle cx="12" cy="12" r="4"></circle>
                                    <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path>
                                 </svg>
                            </button>
                            <button id="header__moon" onclick="toLightMode()" title="Switch to light mode" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z"></path>
                                </svg>
                            </button>
                            <button id="header__indeterminate" onclick="toDarkMode()" title="Switch to dark mode" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 2A10 10 0 0 0 2 12A10 10 0 0 0 12 22A10 10 0 0 0 22 12A10 10 0 0 0 12 2M12 4A8 8 0 0 1 20 12A8 8 0 0 1 12 20V4Z"></path>
                                </svg>
                            </button>
                            <button class="ml-2 relative w-10 h-10 p-2 text-red-600 lg:hidden focus:outline-none focus:shadow-outline" aria-label="Menu" @click.prevent="navIsOpen = !navIsOpen">
                                <svg x-show="! navIsOpen" x-transition.opacity="" class="absolute inset-0 mt-2 ml-2 w-6 h-6" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                                <svg x-show="navIsOpen" x-transition.opacity="" x-cloak="" class="absolute inset-0 mt-2 ml-2 w-6 h-6" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                            </button>
                        </div>
                    </div>
                    <span :class="{ 'shadow-sm': navIsOpen }" class="absolute inset-0 z-20 pointer-events-none"></span>
                </div>
                <div x-show="navIsOpen" x-transition:enter="duration-150" x-transition:leave="duration-100 ease-in" x-cloak="">
                    
                </div>
            </header>

            <section class="flex-1 dark:bg-dark-700">
                <div class="max-w-screen-lg px-8 sm:px-16 lg:px-24">
                    <div class="flex flex-col items-end border-b border-gray-200 py-1 transition-colors dark:border-gray-700 lg:mt-8 lg:flex-row-reverse">
                        <div class="hidden lg:flex items-center justify-center ml-8">
                            <button id="header__sun" onclick="toSystemMode()" title="Switch to system theme" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <circle cx="12" cy="12" r="4"></circle>
                                    <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path>
                                 </svg>
                            </button>
                            <button id="header__moon" onclick="toLightMode()" title="Switch to light mode" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z"></path>
                                </svg>
                            </button>
                            <button id="header__indeterminate" onclick="toDarkMode()" title="Switch to dark mode" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 2A10 10 0 0 0 2 12A10 10 0 0 0 12 22A10 10 0 0 0 22 12A10 10 0 0 0 12 2M12 4A8 8 0 0 1 20 12A8 8 0 0 1 12 20V4Z"></path>
                                </svg>
                            </button>
                        </div>
                        <div class="w-full lg:w-40 lg:pl-12">
                            <div>
                                <label class="text-gray-600 text-xs tracking-widest uppercase dark:text-gray-500" for="version-switcher">Version</label>
                                <div x-data="" class="relative w-full bg-white transition-all duration-500 focus-within:border-gray-600 dark:bg-gray-800">
                                    <select id="version-switcher" aria-label="Laravel version" class="appearance-none flex-1 w-full px-0 py-1 placeholder-gray-900 tracking-wide bg-white focus:outline-none dark:bg-dark-700 dark:text-gray-400 dark:placeholder-gray-500" @change="window.location = $event.target.value">
                                                                                    <option value="https://laravel.com/docs/master/upgrade">Master</option>
                                                                                    <option selected="" value="upgrade.html">9.x</option>
                                                                                    <option value="https://laravel.com/docs/8.x/upgrade">8.x</option>
                                                                                    <option value="https://laravel.com/docs/7.x/upgrade">7.x</option>
                                                                                    <option value="https://laravel.com/docs/6.x/upgrade">6.x</option>
                                                                                    <option value="https://laravel.com/docs/5.8/upgrade">5.8</option>
                                                                                    <option value="https://laravel.com/docs/5.7/upgrade">5.7</option>
                                                                                    <option value="https://laravel.com/docs/5.6/upgrade">5.6</option>
                                                                                    <option value="https://laravel.com/docs/5.5/upgrade">5.5</option>
                                                                                    <option value="https://laravel.com/docs/5.4/upgrade">5.4</option>
                                                                                    <option value="https://laravel.com/docs/5.3/upgrade">5.3</option>
                                                                                    <option value="https://laravel.com/docs/5.2/upgrade">5.2</option>
                                                                                    <option value="https://laravel.com/docs/5.1/upgrade">5.1</option>
                                                                                    <option value="https://laravel.com/docs/5.0/upgrade">5.0</option>
                                                                                    <option value="https://laravel.com/docs/4.2/upgrade">4.2</option>
                                                                            </select>
                                    <img class="absolute inset-y-0 right-0 mt-2.5 w-2.5 h-2.5 text-gray-900 pointer-events-none" id="docs_search__version_arrow" src="../../img/icons/drop_arrow.min.svg" alt="">
                                    <img class="absolute inset-y-0 right-0 mt-2.5 w-2.5 h-2.5 text-gray-900 pointer-events-none" id="docs_search__version_arrow_dark" src="../../img/icons/drop_arrow.dark.min.svg" alt="">
                                </div>
                            </div>
                        </div>
                        <div class="relative mt-8 flex items-center justify-end w-full h-10 lg:mt-0">
                            <div class="flex-1 flex items-center">
                                <button class="relative inline-flex items-center text-gray-800 transition-colors dark:text-gray-400 w-full" @click.prevent="$dispatch('toggle-search-modal')">
                                    <svg class="w-5 h-5 text-gray-700 pointer-events-none transition-colors dark:text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                                    <span class="ml-3">Search</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <section class="mt-8 md:mt-16">
                        <section class="docs_main max-w-prose">
                            
                                                        <div id="main-content">
    <h1>Upgrade Guide</h1>
<ul>
<li>
<a href="#upgrade-9.0">Upgrading To 9.0 From 8.x</a>
</li>
</ul>
<p><a name="high-impact-changes"></a></p>
<h2>High Impact Changes</h2>
<div class="content-list" markdown="1">
<ul>
<li>
<a href="#updating-dependencies">Updating Dependencies</a>
</li>
<li>
<a href="#flysystem-3">Flysystem 3.x</a>
</li>
<li>
<a href="#symfony-mailer">Symfony Mailer</a>
</li>
</ul>
</div>
<p><a name="medium-impact-changes"></a></p>
<h2>Medium Impact Changes</h2>
<div class="content-list" markdown="1">
<ul>
<li>
<a href="#belongs-to-many-first-or-new">Belongs To Many <code>firstOrNew</code>, <code>firstOrCreate</code>, and <code>updateOrCreate</code> methods</a>
</li>
<li>
<a href="#custom-casts-and-null">Custom Casts &amp; <code>null</code></a>
</li>
<li>
<a href="#http-client-default-timeout">Default HTTP Client Timeout</a>
</li>
<li>
<a href="#php-return-types">PHP Return Types</a>
</li>
<li>
<a href="#postgres-schema-configuration">Postgres "Schema" Configuration</a>
</li>
<li>
<a href="#the-assert-deleted-method">The <code>assertDeleted</code> Method</a>
</li>
<li>
<a href="#the-lang-directory">The <code>lang</code> Directory</a>
</li>
<li>
<a href="#the-password-rule">The <code>password</code> Rule</a>
</li>
<li>
<a href="#when-and-unless-methods">The <code>when</code> / <code>unless</code> Methods</a>
</li>
<li>
<a href="#unvalidated-array-keys">Unvalidated Array Keys</a>
</li>
</ul>
</div>
<p><a class="dashAnchor" name="//apple_ref/Section/Upgrading%20To%209%2E0%20From%208%2Ex"></a><a name="upgrade-9.0"></a></p>
<h2>Upgrading To 9.0 From 8.x</h2>
<p><a name="estimated-upgrade-time-10-minutes"></a></p>
<h4>Estimated Upgrade Time: 30 Minutes</h4>
<blockquote>
<p>{tip} We attempt to document every possible breaking change. Since some of these breaking changes are in obscure parts of the framework only a portion of these changes may actually affect your application. Want to save time? You can use <a href="https://laravelshift.com/">Laravel Shift</a> to help automate your application upgrades.</p>
</blockquote>
<p><a name="updating-dependencies"></a></p>
<h3>Updating Dependencies</h3>
<p><strong>Likelihood Of Impact: High</strong></p>
<h4>PHP 8.0.2 Required</h4>
<p>Laravel now requires PHP 8.0.2 or greater.</p>
<h4>Composer Dependencies</h4>
<p>You should update the following dependencies in your application's <code>composer.json</code> file:</p>
<div class="content-list" markdown="1">
<ul>
<li>
<code>laravel/framework</code> to <code>^9.0</code>
</li>
<li>
<code>nunomaduro/collision</code> to <code>^6.1</code>
</li>
</ul>
</div>
<p>In addition, please replace <code>facade/ignition</code> with <code>"spatie/laravel-ignition": "^1.0"</code> in your application's <code>composer.json</code> file.</p>
<p>Furthermore, the following first-party packages have received new major releases to support Laravel 9.x. If applicable, you should read their individual upgrade guides before upgrading:</p>
<div class="content-list" markdown="1">
<ul>
<li>
<a href="https://github.com/laravel/vonage-notification-channel/blob/3.x/UPGRADE.md">Vonage Notification Channel (v3.0)</a> (Replaces Nexmo)</li>
</ul>
</div>
<p>Finally, examine any other third-party packages consumed by your application and verify you are using the proper version for Laravel 9 support.</p>
<p><a name="php-return-types"></a></p>
<h4>PHP Return Types</h4>
<p>PHP is beginning to transition to requiring return type definitions on PHP methods such as <code>offsetGet</code>, <code>offsetSet</code>, etc. In light of this, Laravel 9 has implemented these return types in its code base. Typically, this should not affect user written code; however, if you are overriding one of these methods by extending Laravel's core classes, you will need to add these return types to your own application or package code:</p>
<div class="content-list" markdown="1">
<ul>
<li>
<code>count(): int</code>
</li>
<li>
<code>getIterator(): Traversable</code>
</li>
<li>
<code>getSize(): int</code>
</li>
<li>
<code>jsonSerialize(): array</code>
</li>
<li>
<code>offsetExists($key): bool</code>
</li>
<li>
<code>offsetGet($key): mixed</code>
</li>
<li>
<code>offsetSet($key, $value): void</code>
</li>
<li>
<code>offsetUnset($key): void</code>
</li>
</ul>
</div>
<p>In addition, return types were added to methods implementing PHP's <code>SessionHandlerInterface</code>. Again, it is unlikely that this change affects your own application or package code:</p>
<div class="content-list" markdown="1">
<ul>
<li>
<code>open($savePath, $sessionName): bool</code>
</li>
<li>
<code>close(): bool</code>
</li>
<li>
<code>read($sessionId): string|false</code>
</li>
<li>
<code>write($sessionId, $data): bool</code>
</li>
<li>
<code>destroy($sessionId): bool</code>
</li>
<li>
<code>gc($lifetime): int</code>
</li>
</ul>
</div>
<p><a name="application"></a></p>
<h3>Application</h3>
<p><a name="the-application-contract"></a></p>
<h4>The <code>Application</code> Contract</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>The <code>storagePath</code> method of the <code>Illuminate\Contracts\Foundation\Application</code> interface has been updated to accept a <code>$path</code> argument. If you are implementing this interface you should update your implementation accordingly:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">storagePath</span><span style="color: #D9F5DD;">(</span><span style="color: #BEC5D4;">$path</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">''</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;">;</span></div></code></pre>
<p>Similarly, the <code>langPath</code> method of the <code>Illuminate\Foundation\Application</code> class has been updated to accept a <code>$path</code> argument:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">langPath</span><span style="color: #D9F5DD;">(</span><span style="color: #BEC5D4;">$path</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">''</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;">;</span></div></code></pre>
<h4>Exception Handler <code>ignore</code> Method</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>The exception handler's <code>ignore</code> method is now <code>public</code> instead of <code>protected</code>. This method is not included in the default application skeleton; however, if you have manually defined this method you should update its visibility to <code>public</code>:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">ignore</span><span style="color: #D9F5DD;">(</span><span style="color: #C792EA;">string</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$class</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;">;</span></div></code></pre>
<h3>Blade</h3>
<h4>Lazy Collections &amp; The <code>$loop</code> Variable</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>When iterating over a <code>LazyCollection</code> instance within a Blade template, the <code>$loop</code> variable is no longer available, as accessing this variable causes the entire <code>LazyCollection</code> to be loaded into memory, thus rendering the usage of lazy collections pointless in this scenario.</p>
<h4>Checked / Disabled / Selected Blade Directives</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>The new <code>@checked</code>, <code>@disabled</code>, and <code>@selected</code> Blade directives may conflict with Vue events of the same name. You may use <code>@@</code> to escape the directives and avoid this conflict: <code>@@selected</code>.</p>
<h3>Collections</h3>
<h4>The <code>Enumerable</code> Contract</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>The <code>Illuminate\Support\Enumerable</code> contract now defines a <code>sole</code> method. If you are manually implementing this interface, you should update your implementation to reflect this new method:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">sole</span><span style="color: #D9F5DD;">(</span><span style="color: #BEC5D4;">$key</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">null</span><span style="color: #BFC7D5;">, </span><span style="color: #BEC5D4;">$operator</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">null</span><span style="color: #BFC7D5;">, </span><span style="color: #BEC5D4;">$value</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">null</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;">;</span></div></code></pre>
<h4>The <code>reduceWithKeys</code> Method</h4>
<p>The <code>reduceWithKeys</code> method has been removed as the <code>reduce</code> method provides the same functionality. You may simply update your code to call <code>reduce</code> instead of <code>reduceWithKeys</code>.</p>
<h4>The <code>reduceMany</code> Method</h4>
<p>The <code>reduceMany</code> method has been renamed to <code>reduceSpread</code> for naming consistency with other similar methods.</p>
<h3>Container</h3>
<h4>The <code>Container</code> Contract</h4>
<p><strong>Likelihood Of Impact: Very Low</strong></p>
<p>The <code>Illuminate\Contracts\Container\Container</code> contract has received two method definitions: <code>scoped</code> and <code>scopedIf</code>. If you are manually implementing this contract, you should update your implementation to reflect these new methods.</p>
<h4>The <code>ContextualBindingBuilder</code> Contract</h4>
<p><strong>Likelihood Of Impact: Very Low</strong></p>
<p>The <code>Illuminate\Contracts\Container\ContextualBindingBuilder</code> contract now defines a <code>giveConfig</code> method. If you are manually implementing this interface, you should update your implementation to reflect this new method:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">giveConfig</span><span style="color: #D9F5DD;">(</span><span style="color: #BEC5D4;">$key</span><span style="color: #BFC7D5;">, </span><span style="color: #BEC5D4;">$default</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">null</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;">;</span></div></code></pre>
<h3>Database</h3>
<p><a name="postgres-schema-configuration"></a></p>
<h4>Postgres "Schema" Configuration</h4>
<p><strong>Likelihood Of Impact: Medium</strong></p>
<p>The <code>schema</code> configuration option used to configure Postgres connection search paths in your application's <code>config/database.php</code> configuration file should be renamed to <code>search_path</code>.</p>
<p><a name="schema-builder-doctrine-method"></a></p>
<h4>Schema Builder <code>registerCustomDoctrineType</code> Method</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>The <code>registerCustomDoctrineType</code> method has been removed from the <code>Illuminate\Database\Schema\Builder</code> class. You may use the <code>registerDoctrineType</code> method on the <code>DB</code> facade instead, or register custom Doctrine types in the <code>config/database.php</code> configuration file.</p>
<h3>Eloquent</h3>
<p><a name="custom-casts-and-null"></a></p>
<h4>Custom Casts &amp; <code>null</code></h4>
<p><strong>Likelihood Of Impact: Medium</strong></p>
<p>In previous releases of Laravel, the <code>set</code> method of custom cast classes was not invoked if the cast attribute was being set to <code>null</code>. However, this behavior was inconsistent with the Laravel documentation. In Laravel 9.x, the <code>set</code> method of the cast class will be invoked with <code>null</code> as the provided <code>$value</code> argument. Therefore, you should ensure your custom casts are able to sufficiently handle this scenario:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #697098;">/**</span></div><div class="line"><span style="color: #697098;"> * Prepare the given value for storage.</span></div><div class="line"><span style="color: #697098;"> *</span></div><div class="line"><span style="color: #697098;"> * </span><span style="color: #C792EA;">@param</span><span style="color: #697098;">  </span><span style="color: #697098;">\</span><span style="color: #697098;">Illuminate</span><span style="color: #697098;">\</span><span style="color: #697098;">Database</span><span style="color: #697098;">\</span><span style="color: #697098;">Eloquent</span><span style="color: #697098;">\</span><span style="color: #FFCB8B;">Model</span><span style="color: #697098;">  $model</span></div><div class="line"><span style="color: #697098;"> * </span><span style="color: #C792EA;">@param</span><span style="color: #697098;">  </span><span style="color: #C792EA;">string</span><span style="color: #697098;">  $key</span></div><div class="line"><span style="color: #697098;"> * </span><span style="color: #C792EA;">@param</span><span style="color: #697098;">  </span><span style="color: #FFCB8B;">AddressModel</span><span style="color: #697098;">  $value</span></div><div class="line"><span style="color: #697098;"> * </span><span style="color: #C792EA;">@param</span><span style="color: #697098;">  </span><span style="color: #C792EA;">array</span><span style="color: #697098;">  $attributes</span></div><div class="line"><span style="color: #697098;"> * </span><span style="color: #C792EA;">@return</span><span style="color: #697098;"> </span><span style="color: #C792EA;">array</span></div><div class="line"><span style="color: #697098;"> </span><span style="color: #697098;">*/</span></div><div class="line"><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">set</span><span style="color: #D9F5DD;">(</span><span style="color: #BEC5D4;">$model</span><span style="color: #BFC7D5;">, </span><span style="color: #BEC5D4;">$key</span><span style="color: #BFC7D5;">, </span><span style="color: #BEC5D4;">$value</span><span style="color: #BFC7D5;">, </span><span style="color: #BEC5D4;">$attributes</span><span style="color: #D9F5DD;">)</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">if</span><span style="color: #BFC7D5;"> (</span><span style="color: #C792EA;">!</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$value</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">instanceof</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">AddressModel</span><span style="color: #BFC7D5;">) {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #C792EA;">throw</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">new</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">InvalidArgumentException</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">The given value is not an Address instance.</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> [</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">address_line_one</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$value</span><span style="color: #89DDFF;">-&gt;lineOne</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">address_line_two</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$value</span><span style="color: #89DDFF;">-&gt;lineTwo</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">    ];</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre>
<p><a name="belongs-to-many-first-or-new"></a></p>
<h4>Belongs To Many <code>firstOrNew</code>, <code>firstOrCreate</code>, and <code>updateOrCreate</code> Methods</h4>
<p><strong>Likelihood Of Impact: Medium</strong></p>
<p>The <code>belongsToMany</code> relationship's <code>firstOrNew</code>, <code>firstOrCreate</code>, and <code>updateOrCreate</code> methods all accept an array of attributes as their first argument. In previous releases of Laravel, this array of attributes was compared against the "pivot" / intermediate table for existing records.</p>
<p>However, this behavior was unexpected and typically unwanted. Instead, these methods now compare the array of attributes against the table of the related model:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BEC5D4;">$user</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">roles</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">updateOrCreate</span><span style="color: #BFC7D5;">([</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Administrator</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">]);</span></div></code></pre>
<p>In addition, the <code>firstOrCreate</code> method now accepts a <code>$values</code> array as its second argument. This array will be merged with the first argument to the method (<code>$attributes</code>) when creating the related model if one does not already exist. This change makes this method consistent with the <code>firstOrCreate</code> methods offered by other relationship types:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BEC5D4;">$user</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">roles</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">firstOrCreate</span><span style="color: #BFC7D5;">([</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Administrator</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">], [</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">created_by</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$user</span><span style="color: #89DDFF;">-&gt;id</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">]);</span></div></code></pre>
<h4>The <code>touch</code> Method</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>The <code>touch</code> method now accepts an attribute to touch. If you were previously overwriting this method, you should update your method signature to reflect this new argument:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">touch</span><span style="color: #D9F5DD;">(</span><span style="color: #BEC5D4;">$attribute</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">null</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;">;</span></div></code></pre>
<h3>Encryption</h3>
<h4>The Encrypter Contract</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>The <code>Illuminate\Contracts\Encryption\Encrypter</code> contract now defines a <code>getKey</code> method. If you are manually implementing this interface, you should update your implementation accordingly:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">getKey</span><span style="color: #D9F5DD;">()</span><span style="color: #BFC7D5;">;</span></div></code></pre>
<h3>Facades</h3>
<h4>The <code>getFacadeAccessor</code> Method</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>The <code>getFacadeAccessor</code> method must always return a container binding key. In previous releases of Laravel, this method could return an object instance; however, this behavior is no longer supported. If you have written your own facades, you should ensure that this method returns a container binding string:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #697098;">/**</span></div><div class="line"><span style="color: #697098;"> * Get the registered name of the component.</span></div><div class="line"><span style="color: #697098;"> *</span></div><div class="line"><span style="color: #697098;"> * </span><span style="color: #C792EA;">@return</span><span style="color: #697098;"> </span><span style="color: #C792EA;">string</span></div><div class="line"><span style="color: #697098;"> </span><span style="color: #697098;">*/</span></div><div class="line"><span style="color: #C792EA;">protected</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">static</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">getFacadeAccessor</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Example</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre>
<h3>Filesystem</h3>
<h4>The <code>FILESYSTEM_DRIVER</code> Environment Variable</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>The <code>FILESYSTEM_DRIVER</code> environment variable has been renamed to <code>FILESYSTEM_DISK</code> to more accurately reflect its usage. This change only affects the application skeleton; however, you are welcome to update your own application's environment variables to reflect this change if you wish.</p>
<h4>The "Cloud" Disk</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>The <code>cloud</code> disk configuration option was removed from the default application skeleton in November of 2020. This change only affects the application skeleton. If you are using the <code>cloud</code> disk within your application, you should leave this configuration value in your own application's skeleton.</p>
<p><a name="flysystem-3"></a></p>
<h3>Flysystem 3.x</h3>
<p><strong>Likelihood Of Impact: High</strong></p>
<p>Laravel 9.x has migrated from <a href="https://flysystem.thephpleague.com/v2/docs/">Flysystem</a> 1.x to 3.x. Under the hood, Flysystem powers all of the file manipulation methods provided by the <code>Storage</code> facade. In light of this, some changes may be required within your application; however, we have tried to make this transition as seamless as possible.</p>
<h4>Driver Prerequisites</h4>
<p>Before using the S3, FTP, or SFTP drivers, you will need to install the appropriate package via the Composer package manager:</p>
<ul>
<li>Amazon S3: <code>composer require -W league/flysystem-aws-s3-v3 "^3.0"</code>
</li>
<li>FTP: <code>composer require league/flysystem-ftp "^3.0"</code>
</li>
<li>SFTP: <code>composer require league/flysystem-sftp-v3 "^3.0"</code>
</li>
</ul>
<h4>Overwriting Existing Files</h4>
<p>Write operations such as <code>put</code>, <code>write</code>, and <code>writeStream</code> now overwrite existing files by default. If you do not want to overwrite existing files, you should manually check for the file's existence before performing the write operation.</p>
<h4>Write Exceptions</h4>
<p>Write operations such as <code>put</code>, <code>write</code>, and <code>writeStream</code> no longer throw an exception when a write operation fails. Instead, <code>false</code> is returned. If you would like to preserve the previous behavior which threw exceptions, you may define the <code>throw</code> option within a filesystem disk's configuration array:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">public</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">driver</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">local</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">throw</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">true</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">],</span></div></code></pre>
<h4>Reading Missing Files</h4>
<p>Attempting to read from a file that does not exist now returns <code>null</code>. In previous releases of Laravel, an <code>Illuminate\Contracts\Filesystem\FileNotFoundException</code> would have been thrown.</p>
<h4>Deleting Missing Files</h4>
<p>Attempting to <code>delete</code> a file that does not exist now returns <code>true</code>.</p>
<h4>Cached Adapters</h4>
<p>Flysystem no longer supports "cached adapters". Thus, they have been removed from Laravel and any relevant configuration (such as the <code>cache</code> key within disk configurations) can be removed.</p>
<h4>Custom Filesystems</h4>
<p>Slight changes have been made to the steps required to register custom filesystem drivers. Therefore, if you were defining your own custom filesystem drivers, or using packages that define custom drivers, you should update your code and dependencies.</p>
<p>For example, in Laravel 8.x, a custom filesystem driver might be registered like so:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Support\Facades\</span><span style="color: #FFCB8B;">Storage</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> League\Flysystem\</span><span style="color: #FFCB8B;">Filesystem</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Spatie\Dropbox\</span><span style="color: #FFCB8B;">Client</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">as</span><span style="color: #BFC7D5;"> DropboxClient;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Spatie\FlysystemDropbox\</span><span style="color: #FFCB8B;">DropboxAdapter</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #FFCB8B;">Storage</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">extend</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">dropbox</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #BEC5D4;">$app</span><span style="color: #BFC7D5;">, </span><span style="color: #BEC5D4;">$config</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$client</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">new</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">DropboxClient</span><span style="color: #BFC7D5;">(</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$config</span><span style="color: #BFC7D5;">[</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">authorization_token</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">]</span></div><div class="line"><span style="color: #BFC7D5;">    );</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">new</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Filesystem</span><span style="color: #BFC7D5;">(</span><span style="color: #89DDFF;">new</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">DropboxAdapter</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$client</span><span style="color: #BFC7D5;">));</span></div><div class="line"><span style="color: #BFC7D5;">});</span></div></code></pre>
<p>However, in Laravel 9.x, the callback given to the <code>Storage::extend</code> method should return an instance of <code>Illuminate\Filesystem\FilesystemAdapter</code> directly:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Filesystem\</span><span style="color: #FFCB8B;">FilesystemAdapter</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Support\Facades\</span><span style="color: #FFCB8B;">Storage</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> League\Flysystem\</span><span style="color: #FFCB8B;">Filesystem</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Spatie\Dropbox\</span><span style="color: #FFCB8B;">Client</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">as</span><span style="color: #BFC7D5;"> DropboxClient;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Spatie\FlysystemDropbox\</span><span style="color: #FFCB8B;">DropboxAdapter</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #FFCB8B;">Storage</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">extend</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">dropbox</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #BEC5D4;">$app</span><span style="color: #BFC7D5;">, </span><span style="color: #BEC5D4;">$config</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$adapter</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">new</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">DropboxAdapter</span><span style="color: #BFC7D5;">(</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #89DDFF;">new</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">DropboxClient</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$config</span><span style="color: #BFC7D5;">[</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">authorization_token</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">])</span></div><div class="line"><span style="color: #BFC7D5;">    );</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">new</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">FilesystemAdapter</span><span style="color: #BFC7D5;">(</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #89DDFF;">new</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Filesystem</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$adapter</span><span style="color: #BFC7D5;">, </span><span style="color: #BEC5D4;">$config</span><span style="color: #BFC7D5;">),</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$adapter</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$config</span></div><div class="line"><span style="color: #BFC7D5;">    );</span></div><div class="line"><span style="color: #BFC7D5;">});</span></div></code></pre>
<h3>Helpers</h3>
<p><a name="data-get-function"></a></p>
<h4>The <code>data_get</code> Helper &amp; Iterable Objects</h4>
<p><strong>Likelihood Of Impact: Very Low</strong></p>
<p>Previously, the <code>data_get</code> helper could be used to retrieve nested data on arrays and <code>Collection</code> instances; however, this helper can now retrieve nested data on all iterable objects.</p>
<p><a name="str-function"></a></p>
<h4>The <code>str</code> Helper</h4>
<p><strong>Likelihood Of Impact: Very Low</strong></p>
<p>Laravel 9.x now includes a global <code>str</code> <a href="helpers.html#method-str">helper function</a>. If you are defining a global <code>str</code> helper in your application, you should rename or remove it so that it does not conflict with Laravel's own <code>str</code> helper.</p>
<p><a name="when-and-unless-methods"></a></p>
<h4>The <code>when</code> / <code>unless</code> Methods</h4>
<p><strong>Likelihood Of Impact: Medium</strong></p>
<p>As you may know, <code>when</code> and <code>unless</code> methods are offered by various classes throughout the framework. These methods can be used to conditionally perform an action if the boolean value of the first argument to the method evaluates to <code>true</code> or <code>false</code>:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BEC5D4;">$collection</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">when</span><span style="color: #BFC7D5;">(</span><span style="color: #82AAFF;">true</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #BEC5D4;">$collection</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$collection</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">merge</span><span style="color: #BFC7D5;">([</span><span style="color: #F78C6C;">1</span><span style="color: #BFC7D5;">, </span><span style="color: #F78C6C;">2</span><span style="color: #BFC7D5;">, </span><span style="color: #F78C6C;">3</span><span style="color: #BFC7D5;">]);</span></div><div class="line"><span style="color: #BFC7D5;">});</span></div></code></pre>
<p>Therefore, in previous releases of Laravel, passing a closure to the <code>when</code> or <code>unless</code> methods meant that the conditional operation would always execute, since a loose comparison against a closure object (or any other object) always evaluates to <code>true</code>. This often led to unexpected outcomes because developers expect the <strong>result</strong> of the closure to be used as the boolean value that determines if the conditional action executes.</p>
<p>So, in Laravel 9.x, any closures passed to the <code>when</code> or <code>unless</code> methods will be executed and the value returned by the closure will be considered the boolean value used by the <code>when</code> and <code>unless</code> methods:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BEC5D4;">$collection</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">when</span><span style="color: #BFC7D5;">(</span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #BEC5D4;">$collection</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> This closure is executed...</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">false</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #BFC7D5;">}, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #BEC5D4;">$collection</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> Not executed since first closure returned "false"...</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$collection</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">merge</span><span style="color: #BFC7D5;">([</span><span style="color: #F78C6C;">1</span><span style="color: #BFC7D5;">, </span><span style="color: #F78C6C;">2</span><span style="color: #BFC7D5;">, </span><span style="color: #F78C6C;">3</span><span style="color: #BFC7D5;">]);</span></div><div class="line"><span style="color: #BFC7D5;">});</span></div></code></pre>
<h3>HTTP Client</h3>
<p><a name="http-client-default-timeout"></a></p>
<h4>Default Timeout</h4>
<p><strong>Likelihood Of Impact: Medium</strong></p>
<p>The <a href="http-client.html">HTTP client</a> now has a default timeout of 30 seconds. In other words, if the server does not respond within 30 seconds, an exception will be thrown. Previously, no default timeout length was configured on the HTTP client, causing requests to sometimes "hang" indefinitely.</p>
<p>If you wish to specify a longer timeout for a given request, you may do so using the <code>timeout</code> method:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Http</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">timeout</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">120</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #89DDFF;">...</span><span style="color: #BFC7D5;">);</span></div></code></pre>
<h4>HTTP Fake &amp; Middleware</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>Previously, Laravel would not execute any provided Guzzle HTTP middleware when the <a href="http-client.html">HTTP client</a> was "faked". However, in Laravel 9.x, Guzzle HTTP middleware will be executed even when the HTTP client is faked.</p>
<h4>HTTP Fake &amp; Dependency Injection</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>In previous releases of Laravel, invoking the <code>Http::fake()</code> method would not affect instances of the <code>Illuminate\Http\Client\Factory</code> that were injected into class constructors. However, in Laravel 9.x, <code>Http::fake()</code> will ensure fake responses are returned by HTTP clients injected into other services via dependency injection. This behavior is more consistent with the behavior of other facades and fakes.</p>
<p><a name="symfony-mailer"></a></p>
<h3>Symfony Mailer</h3>
<p><strong>Likelihood Of Impact: High</strong></p>
<p>One of the largest changes in Laravel 9.x is the transition from SwiftMailer, which is no longer maintained as of December 2021, to Symfony Mailer. However, we have tried to make this transition as seamless as possible for your applications. That being said, please thoroughly review the list of changes below to ensure your application is fully compatible.</p>
<h4>Driver Prerequisites</h4>
<p>To continue using the Mailgun transport, your application should require the <code>symfony/mailgun-mailer</code> and <code>symfony/http-client</code> Composer packages:</p>
<pre><code data-theme="olaolu-palenight" data-lang="shell" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">composer </span><span style="color: #BFC7D5;">require</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">symfony/mailgun-mailer</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">symfony/http-client</span></div></code></pre>
<p>The <code>wildbit/swiftmailer-postmark</code> Composer package should be removed from your application. Instead, your application should require the <code>symfony/postmark-mailer</code> and <code>symfony/http-client</code> Composer packages:</p>
<pre><code data-theme="olaolu-palenight" data-lang="shell" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">composer </span><span style="color: #BFC7D5;">require</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">symfony/postmark-mailer</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">symfony/http-client</span></div></code></pre>
<h4>Updated Return Types</h4>
<p>The <code>send</code>, <code>html</code>, <code>text</code>, and <code>plain</code> methods no longer return the number of recipients that received the message. Instead, an instance of <code>Illuminate\Mail\SentMessage</code> is returned. This object contains an instance of <code>Symfony\Component\Mailer\SentMessage</code> that is accessible via the <code>getSymfonySentMessage</code> method or by dynamically invoking methods on the object.</p>
<h4>Renamed "Swift" Methods</h4>
<p>Various SwiftMailer related methods, some of which were undocumented, have been renamed to their Symfony Mailer counterparts. For example, the <code>withSwiftMessage</code> method has been renamed to <code>withSymfonyMessage</code>:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #697098;">//</span><span style="color: #697098;"> Laravel 8.x...</span></div><div class="line"><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">withSwiftMessage</span><span style="color: #BFC7D5;">(</span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #BEC5D4;">$message</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$message</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">getHeaders</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">addTextHeader</span><span style="color: #BFC7D5;">(</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Custom-Header</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Header Value</span><span style="color: #D9F5DD;">'</span></div><div class="line"><span style="color: #BFC7D5;">    );</span></div><div class="line"><span style="color: #BFC7D5;">});</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #697098;">//</span><span style="color: #697098;"> Laravel 9.x...</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Symfony\Component\Mime\</span><span style="color: #FFCB8B;">Email</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">withSymfonyMessage</span><span style="color: #BFC7D5;">(</span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Email</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$message</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$message</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">getHeaders</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">addTextHeader</span><span style="color: #BFC7D5;">(</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Custom-Header</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Header Value</span><span style="color: #D9F5DD;">'</span></div><div class="line"><span style="color: #BFC7D5;">    );</span></div><div class="line"><span style="color: #BFC7D5;">});</span></div></code></pre>
<blockquote>
<p>{note} Please thoroughly review the <a href="https://symfony.com/doc/6.0/mailer.html#creating-sending-messages">Symfony Mailer documentation</a> for all possible interactions with the <code>Symfony\Component\Mime\Email</code> object.</p>
</blockquote>
<p>The list below contains a more thorough overview of renamed methods. Many of these methods are low-level methods used to interact with SwiftMailer / Symfony Mailer directly, so may not be commonly used within most Laravel applications:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #FFCB8B;">Message</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">getSwiftMessage</span><span style="color: #BFC7D5;">();</span></div><div class="line"><span style="color: #FFCB8B;">Message</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">getSymfonyMessage</span><span style="color: #BFC7D5;">();</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #FFCB8B;">Mailable</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">withSwiftMessage</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$callback</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #FFCB8B;">Mailable</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">withSymfonyMessage</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$callback</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #FFCB8B;">MailMessage</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">withSwiftMessage</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$callback</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #FFCB8B;">MailMessage</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">withSymfonyMessage</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$callback</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #FFCB8B;">Mailer</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">getSwiftMailer</span><span style="color: #BFC7D5;">();</span></div><div class="line"><span style="color: #FFCB8B;">Mailer</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">getSymfonyTransport</span><span style="color: #BFC7D5;">();</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #FFCB8B;">Mailer</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">setSwiftMailer</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$swift</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #FFCB8B;">Mailer</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">setSymfonyTransport</span><span style="color: #BFC7D5;">(</span><span style="color: #82AAFF;">TransportInterface</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$transport</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #FFCB8B;">MailManager</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">createTransport</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$config</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #FFCB8B;">MailManager</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">createSymfonyTransport</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$config</span><span style="color: #BFC7D5;">);</span></div></code></pre>
<h4>Proxied <code>Illuminate\Mail\Message</code> Methods</h4>
<p>The <code>Illuminate\Mail\Message</code> typically proxied missing methods to the underlying <code>Swift_Message</code> instance. However, missing methods are now proxied to an instance of <code>Symfony\Component\Mime\Email</code> instead. So, any code that was previously relying on missing methods to be proxied to SwiftMailer should be updated to their corresponding Symfony Mailer counterparts.</p>
<p>Again, many applications may not be interacting with these methods, as they are not documented within the Laravel documentation:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #697098;">//</span><span style="color: #697098;"> Laravel 8.x...</span></div><div class="line"><span style="color: #BEC5D4;">$message</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">setFrom</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;"><a href="https://laravel.com/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f286938b9e9d80b29e93809384979edc919d9f">[email&nbsp;protected]</a></span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">)</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">setTo</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;"><a href="https://laravel.com/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="89ecf1e8e4f9e5ecc9ecf1e8e4f9e5eca7e6fbee">[email&nbsp;protected]</a></span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">)</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">setSubject</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Order Shipped</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">)</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">setBody</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">&lt;h1&gt;HTML&lt;/h1&gt;</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">text/html</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">)</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">addPart</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Plain Text</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">text/plain</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #697098;">//</span><span style="color: #697098;"> Laravel 9.x...</span></div><div class="line"><span style="color: #BEC5D4;">$message</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">from</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;"><a href="https://laravel.com/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="ff8b9e8693908dbf939e8d9e899a93d19c9092">[email&nbsp;protected]</a></span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">)</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">to</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;"><a href="https://laravel.com/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c6a3bea7abb6aaa386a3bea7abb6aaa3e8a9b4a1">[email&nbsp;protected]</a></span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">)</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">subject</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Order Shipped</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">)</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">html</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">&lt;h1&gt;HTML&lt;/h1&gt;</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">)</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">text</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Plain Text</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div></code></pre>
<h4>Generated Messages IDs</h4>
<p>SwiftMailer offered the ability to define a custom domain to include in generated Message IDs via the <code>mime.idgenerator.idright</code> configuration option. This is not supported by Symfony Mailer. Instead, Symfony Mailer will automatically generate a Message ID based on the sender.</p>
<h4><code>MessageSent</code> Event Changes</h4>
<p>The <code>message</code> property of the <code>Illuminate\Mail\Events\MessageSent</code> event now contains an instance of <code>Symfony\Component\Mime\Email</code> instead of an instance of <code>Swift_Message</code>. This message represents the email <strong>before</strong> it is sent.</p>
<p>Additionally, a new <code>sent</code> property has been added to the <code>MessageSent</code> event. This property contains an instance of <code>Illuminate\Mail\SentMessage</code> and contains information about the sent email, such as the message ID.</p>
<h4>Forced Reconnections</h4>
<p>It is no longer possible to force a transport reconnection (for example when the mailer is running via a daemon process). Instead, Symfony Mailer will attempt to reconnect to the transport automatically and throw an exception if the reconnection fails.</p>
<h4>SMTP Stream Options</h4>
<p>Defining stream options for the SMTP transport is no longer supported. Instead, you must define the relevant options directly within the configuration if they are supported. For example, to disable TLS peer verification:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">smtp</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> Laravel 8.x...</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">stream</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">ssl</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">verify_peer</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">false</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">        ],</span></div><div class="line"><span style="color: #BFC7D5;">    ],</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> Laravel 9.x...</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">verify_peer</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">false</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">],</span></div></code></pre>
<p>To learn more about the available configuration options, please review the <a href="https://symfony.com/doc/6.0/mailer.html#transport-setup">Symfony Mailer documentation</a>.</p>
<blockquote>
<p>{note} In spite of the example above, you are not generally advised to disable SSL verification since it introduces the possibility of "man-in-the-middle" attacks.</p>
</blockquote>
<h4>SMTP <code>auth_mode</code></h4>
<p>Defining the SMTP <code>auth_mode</code> in the <code>mail</code> configuration file is no longer required. The authentication mode will be automatically negotiated between Symfony Mailer and the SMTP server.</p>
<h4>Failed Recipients</h4>
<p>It is no longer possible to retrieve a list of failed recipients after sending a message. Instead, a <code>Symfony\Component\Mailer\Exception\TransportExceptionInterface</code> exception will be thrown if a message fails to send. Instead of relying on retrieving invalid email addresses after sending a message, we recommend that you validate email addresses before sending the message instead.</p>
<h3>Packages</h3>
<p><a name="the-lang-directory"></a></p>
<h4>The <code>lang</code> Directory</h4>
<p><strong>Likelihood Of Impact: Medium</strong></p>
<p>In new Laravel applications, the <code>resources/lang</code> directory is now located in the root project directory (<code>lang</code>). If your package is publishing language files to this directory, you should ensure that your package is publishing to <code>app()-&gt;langPath()</code> instead of a hard-coded path.</p>
<p><a name="queue"></a></p>
<h3>Queue</h3>
<p><a name="the-opis-closure-library"></a></p>
<h4>The <code>opis/closure</code> Library</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>Laravel's dependency on <code>opis/closure</code> has been replaced by <code>laravel/serializable-closure</code>. This should not cause any breaking change in your application unless you are interacting with the <code>opis/closure</code> library directly. In addition, the previously deprecated <code>Illuminate\Queue\SerializableClosureFactory</code> and <code>Illuminate\Queue\SerializableClosure</code> classes have been removed. If you are interacting with <code>opis/closure</code> library directly or using any of the removed classes, you may use <a href="https://github.com/laravel/serializable-closure">Laravel Serializable Closure</a> instead.</p>
<h4>The Failed Job Provider <code>flush</code> Method</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>The <code>flush</code> method defined by the <code>Illuminate\Queue\Failed\FailedJobProviderInterface</code> interface now accepts an <code>$hours</code> argument which determines how old a failed job must be (in hours) before it is flushed by the <code>queue:flush</code> command. If you are manually implementing the <code>FailedJobProviderInterface</code> you should ensure that your implementation is updated to reflect this new argument:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">flush</span><span style="color: #D9F5DD;">(</span><span style="color: #BEC5D4;">$hours</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">null</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;">;</span></div></code></pre>
<h3>Session</h3>
<h4>The <code>getSession</code> Method</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>The <code>Symfony\Component\HttpFoundaton\Request</code> class that is extended by Laravel's own <code>Illuminate\Http\Request</code> class offers a <code>getSession</code> method to get the current session storage handler. This method is not documented by Laravel as most Laravel applications interact with the session through Laravel's own <code>session</code> method.</p>
<p>The <code>getSession</code> method previously returned an instance of <code>Illuminate\Session\Store</code> or <code>null</code>; however, due to the Symfony 6.x release enforcing a return type of <code>Symfony\Component\HttpFoundation\Session\SessionInterface</code>, the <code>getSession</code> now correctly returns a <code>SessionInterface</code> implementation or throws an <code>\Symfony\Component\HttpFoundation\Exception\SessionNotFoundException</code> exception when no session is available.</p>
<h3>Testing</h3>
<p><a name="the-assert-deleted-method"></a></p>
<h4>The <code>assertDeleted</code> Method</h4>
<p><strong>Likelihood Of Impact: Medium</strong></p>
<p>All calls to the <code>assertDeleted</code> method should be updated to <code>assertModelMissing</code>.</p>
<h3>Trusted Proxies</h3>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>If you are upgrading your Laravel 8 project to Laravel 9 by importing your existing application code into a totally new Laravel 9 application skeleton, you may need to update your application's "trusted proxy" middleware.</p>
<p>Within your <code>app/Http/Middleware/TrustProxies.php</code> file, update <code>use Fideloper\Proxy\TrustProxies as Middleware</code> to <code>use Illuminate\Http\Middleware\TrustProxies as Middleware</code>.</p>
<p>Next, within <code>app/Http/Middleware/TrustProxies.php</code>, you should update the <code>$headers</code> property definition:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #697098;">//</span><span style="color: #697098;"> Before...</span></div><div class="line"><span style="color: #C792EA;">protected</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$headers</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Request</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">HEADER_X_FORWARDED_ALL</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #697098;">//</span><span style="color: #697098;"> After...</span></div><div class="line"><span style="color: #C792EA;">protected</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$headers</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Request</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">HEADER_X_FORWARDED_FOR</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">|</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Request</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">HEADER_X_FORWARDED_HOST</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">|</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Request</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">HEADER_X_FORWARDED_PORT</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">|</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Request</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">HEADER_X_FORWARDED_PROTO</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">|</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Request</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">HEADER_X_FORWARDED_AWS_ELB</span><span style="color: #BFC7D5;">;</span></div></code></pre>
<p>Finally, you can remove the <code>fideloper/proxy</code> Composer dependency from your application:</p>
<pre><code data-theme="olaolu-palenight" data-lang="shell" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">composer </span><span style="color: #BFC7D5;">remove</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">fideloper/proxy</span></div></code></pre>
<h3>Validation</h3>
<h4>Form Request <code>validated</code> Method</h4>
<p><strong>Likelihood Of Impact: Low</strong></p>
<p>The <code>validated</code> method offered by form requests now accepts <code>$key</code> and <code>$default</code> arguments. If you are manually overwriting the definition of this method, you should update your method's signature to reflect these new arguments:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">validated</span><span style="color: #D9F5DD;">(</span><span style="color: #BEC5D4;">$key</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">null</span><span style="color: #BFC7D5;">, </span><span style="color: #BEC5D4;">$default</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">null</span><span style="color: #D9F5DD;">)</span></div></code></pre>
<p><a name="the-password-rule"></a></p>
<h4>The <code>password</code> Rule</h4>
<p><strong>Likelihood Of Impact: Medium</strong></p>
<p>The <code>password</code> rule, which validates that the given input value matches the authenticated user's current password, has been renamed to <code>current_password</code>.</p>
<p><a name="unvalidated-array-keys"></a></p>
<h4>Unvalidated Array Keys</h4>
<p><strong>Likelihood Of Impact: Medium</strong></p>
<p>In previous releases of Laravel, you were required to manually instruct Laravel's validator to exclude unvalidated array keys from the "validated" data it returns, especially in combination with an <code>array</code> rule that does not specify a list of allowed keys.</p>
<p>However, in Laravel 9.x, unvalidated array keys are always excluded from the "validated" data even when no allowed keys have been specified via the <code>array</code> rule. Typically, this behavior is the most expected behavior and the previous <code>excludeUnvalidatedArrayKeys</code> method was only added to Laravel 8.x as a temporary measure in order to preserve backwards compatibility.</p>
<p>Although it is not recommended, you may opt-in to the previous Laravel 8.x behavior by invoking a new <code>includeUnvalidatedArrayKeys</code> method within the <code>boot</code> method of one of your application's service providers:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Support\Facades\</span><span style="color: #FFCB8B;">Validator</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #697098;">/**</span></div><div class="line"><span style="color: #697098;"> * Register any application services.</span></div><div class="line"><span style="color: #697098;"> *</span></div><div class="line"><span style="color: #697098;"> * </span><span style="color: #C792EA;">@return</span><span style="color: #697098;"> </span><span style="color: #C792EA;">void</span></div><div class="line"><span style="color: #697098;"> </span><span style="color: #697098;">*/</span></div><div class="line"><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">boot</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Validator</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">includeUnvalidatedArrayKeys</span><span style="color: #BFC7D5;">();</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre>
<p><a name="miscellaneous"></a></p>
<h3>Miscellaneous</h3>
<p>We also encourage you to view the changes in the <code>laravel/laravel</code> <a href="https://github.com/laravel/laravel">GitHub repository</a>. While many of these changes are not required, you may wish to keep these files in sync with your application. Some of these changes will be covered in this upgrade guide, but others, such as changes to configuration files or comments, will not be. You can easily view the changes with the <a href="https://github.com/laravel/laravel/compare/8.x...9.x">GitHub comparison tool</a> and choose which updates are important to you.</p>

                                <script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script async="" type="text/javascript" src="../../../cdn.carbonads.com/carbon83bb.js?serve=CKYILK3E&amp;placement=laravelcom" id="_carbonads_js"></script>
</div>
                        </section>
                    </section>
                </div>
            </section>
        </div>
    </div>

<footer class="relative pt-12 dark:bg-dark-700">
    <div class="max-w-screen-2xl mx-auto w-full px-8">
        <div>
            <a href="https://laravel.com/" class="inline-flex">
                <img class="w-16 h-16" src="../../img/logomark.min.svg" alt="Laravel" loading="lazy">
            </a>
        </div>

        <div class="mt-6 grid grid-cols-12 md:gap-x-8 gap-y-12 sm:mt-12">
            <div class="col-span-12 lg:col-span-4">
                <p class="max-w-sm text-xs text-gray-700 sm:text-sm dark:text-gray-500">Laravel is a web application framework with expressive, elegant syntax. We believe development must be an enjoyable and creative experience to be truly fulfilling. Laravel attempts to take the pain out of development by easing common tasks used in most web projects.</p>
                <ul class="mt-6 flex items-center space-x-3">
                    <li>
                        <a href="https://twitter.com/laravelphp">
                            <img id="footer__twitter_dark" class="hidden dark:inline-block w-6 h-6" src="../../img/social/twitter.dark.min.svg" alt="Twitter" width="24" height="20" loading="lazy">
                            <img id="footer__twitter" class="inline-block dark:hidden w-6 h-6" src="../../img/social/twitter.min.svg" alt="Twitter" width="24" height="20" loading="lazy">
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/laravel">
                            <img id="footer__github_dark" class="hidden dark:inline-block w-6 h-6" src="../../img/social/github.dark.min.svg" alt="GitHub" width="24" height="24" loading="lazy">
                            <img id="footer__github" class="inline-block dark:hidden w-6 h-6" src="../../img/social/github.min.svg" alt="GitHub" width="24" height="24" loading="lazy">
                        </a>
                    </li>
                    <li>
                        <a href="https://discord.gg/mPZNm7A">
                            <img id="footer__discord_dark" class="hidden dark:inline-block w-6 h-6" src="../../img/social/discord.dark.min.svg" alt="Discord" width="21" height="24" loading="lazy">
                            <img id="footer__discord" class="inline-block dark:hidden w-6 h-6" src="../../img/social/discord.min.svg" alt="Discord" width="21" height="24" loading="lazy">
                        </a>
                    </li>
                    <li>
                        <a href="https://www.youtube.com/laravelphp">
                            <img id="footer__youtube_dark" class="hidden dark:inline-block w-6 h-6" src="../../img/social/youtube.dark.min.svg" alt="YouTube" width="169" height="150" loading="lazy">
                            <img id="footer__youtube" class="inline-block dark:hidden w-6 h-6" src="../../img/social/youtube.min.svg" alt="YouTube" width="169" height="150" loading="lazy">
                        </a>
                    </li>
                </ul>
            </div>
                            <div class="text-xs col-span-6 md:col-span-3 lg:col-span-2">
                    <span class="uppercase dark:text-gray-200">Highlights</span>
                    <div class="mt-5">
                        <ul class="space-y-3 text-gray-700 dark:text-gray-500">
                                                            <li>
                                    <a href="https://laravel.com/team" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Our Team</a>
                                </li>
                                                            <li>
                                    <a href="releases.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Release Notes</a>
                                </li>
                                                            <li>
                                    <a href="installation.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Getting Started</a>
                                </li>
                                                            <li>
                                    <a href="routing.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Routing</a>
                                </li>
                                                            <li>
                                    <a href="blade.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Blade Templates</a>
                                </li>
                                                            <li>
                                    <a href="authentication.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Authentication</a>
                                </li>
                                                            <li>
                                    <a href="authorization.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Authorization</a>
                                </li>
                                                            <li>
                                    <a href="artisan.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Artisan Console</a>
                                </li>
                                                            <li>
                                    <a href="database.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Database</a>
                                </li>
                                                            <li>
                                    <a href="eloquent.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Eloquent ORM</a>
                                </li>
                                                            <li>
                                    <a href="testing.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Testing</a>
                                </li>
                                                    </ul>
                    </div>
                </div>
                            <div class="text-xs col-span-6 md:col-span-3 lg:col-span-2">
                    <span class="uppercase dark:text-gray-200">Resources</span>
                    <div class="mt-5">
                        <ul class="space-y-3 text-gray-700 dark:text-gray-500">
                                                            <li>
                                    <a href="https://laracasts.com/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Laracasts</a>
                                </li>
                                                            <li>
                                    <a href="https://laravel-news.com/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Laravel News</a>
                                </li>
                                                            <li>
                                    <a href="https://laracon.us/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Laracon</a>
                                </li>
                                                            <li>
                                    <a href="https://laracon.eu/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Laracon EU</a>
                                </li>
                                                            <li>
                                    <a href="https://larajobs.com/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Jobs</a>
                                </li>
                                                            <li>
                                    <a href="https://certification.laravel.com/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Certification</a>
                                </li>
                                                            <li>
                                    <a href="https://laracasts.com/discuss" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Forums</a>
                                </li>
                                                    </ul>
                    </div>
                </div>
                            <div class="text-xs col-span-6 md:col-span-3 lg:col-span-2">
                    <span class="uppercase dark:text-gray-200">Partners</span>
                    <div class="mt-5">
                        <ul class="space-y-3 text-gray-700 dark:text-gray-500">
                                                            <li>
                                    <a href="https://vehikl.com/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Vehikl</a>
                                </li>
                                                            <li>
                                    <a href="https://tighten.co/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Tighten</a>
                                </li>
                                                            <li>
                                    <a href="https://64robots.com/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">64 Robots</a>
                                </li>
                                                            <li>
                                    <a href="https://kirschbaumdevelopment.com/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Kirschbaum</a>
                                </li>
                                                            <li>
                                    <a href="https://www.curotec.com/services/technologies/laravel/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Curotec</a>
                                </li>
                                                            <li>
                                    <a href="https://jump24.co.uk/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Jump24</a>
                                </li>
                                                            <li>
                                    <a href="https://www.a2design.biz/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">A2 Design</a>
                                </li>
                                                            <li>
                                    <a href="https://corporate.aboutyou.de/app/uploads/2019/08/INTRO-Pitch-I-AY-Tech.pdf?utm_source=laravelpartnersfindoutmore&amp;utm_medium=socialgroups&amp;utm_campaign=tech" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">ABOUT YOU</a>
                                </li>
                                                            <li>
                                    <a href="https://www.byte5.net/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Byte 5</a>
                                </li>
                                                            <li>
                                    <a href="https://cubettech.com/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Cubet</a>
                                </li>
                                                            <li>
                                    <a href="https://www.cyber-duck.co.uk/how-we-work/technology/laravel?utm_source=Laravel%20Partner&amp;utm_medium=Sponsorship" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Cyber-Duck</a>
                                </li>
                                                            <li>
                                    <a href="https://devsquad.com/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">DevSquad</a>
                                </li>
                                                            <li>
                                    <a href="https://www.ideil.com/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Ideil</a>
                                </li>
                                                            <li>
                                    <a href="https://romegadigital.com/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Romega Software</a>
                                </li>
                                                            <li>
                                    <a href="https://www.worksome.com/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Worksome</a>
                                </li>
                                                            <li>
                                    <a href="https://webreinvent.com/?utm_source=laravel&amp;utm_medium=laravel.com&amp;utm_campaign=patreon-sponsors" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">WebReinvent</a>
                                </li>
                                                    </ul>
                    </div>
                </div>
                            <div class="text-xs col-span-6 md:col-span-3 lg:col-span-2">
                    <span class="uppercase dark:text-gray-200">Ecosystem</span>
                    <div class="mt-5">
                        <ul class="space-y-3 text-gray-700 dark:text-gray-500">
                                                            <li>
                                    <a href="billing.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Cashier</a>
                                </li>
                                                            <li>
                                    <a href="dusk.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Dusk</a>
                                </li>
                                                            <li>
                                    <a href="broadcasting.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Echo</a>
                                </li>
                                                            <li>
                                    <a href="https://envoyer.io/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Envoyer</a>
                                </li>
                                                            <li>
                                    <a href="https://forge.laravel.com/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Forge</a>
                                </li>
                                                            <li>
                                    <a href="homestead.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Homestead</a>
                                </li>
                                                            <li>
                                    <a href="horizon.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Horizon</a>
                                </li>
                                                            <li>
                                    <a href="mix.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Mix</a>
                                </li>
                                                            <li>
                                    <a href="https://nova.laravel.com/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Nova</a>
                                </li>
                                                            <li>
                                    <a href="passport.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Passport</a>
                                </li>
                                                            <li>
                                    <a href="scout.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Scout</a>
                                </li>
                                                            <li>
                                    <a href="socialite.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Socialite</a>
                                </li>
                                                            <li>
                                    <a href="https://spark.laravel.com/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Spark</a>
                                </li>
                                                            <li>
                                    <a href="telescope.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Telescope</a>
                                </li>
                                                            <li>
                                    <a href="valet.html" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Valet</a>
                                </li>
                                                            <li>
                                    <a href="https://vapor.laravel.com/" class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Vapor</a>
                                </li>
                                                    </ul>
                    </div>
                </div>
                    </div>
        <div class="mt-10 border-t pt-6 pb-16 border-gray-200 dark:border-dark-500">
            <p class="text-xs text-gray-700 dark:text-gray-400">
                Laravel is a Trademark of Taylor Otwell. Copyright © 2011-2022 Laravel LLC.
            </p>
            <p class="mt-6 text-xs text-gray-700 dark:text-gray-400">
                Code highlighting provided by <a href="https://torchlight.dev/">Torchlight</a>
            </p>
        </div>
    </div>
</footer>

<div x-data="searchComponent()" @toggle-search-modal.window="open = !open" @keydown.window.escape="close" @keydown.window="handleKeydown" @keydown.escape.prevent.stop="close" x-show="open" x-cloak="" x-trap.noscroll.inert="open" role="dialog" aria-modal="true" x-id="['search-modal']" :aria-labelledby="$id('search-modal')" class="fixed inset-0 z-50 text-gray-400 overflow-y-auto">
    <div x-show="open" x-transition.opacity="" class="fixed inset-0 bg-dark-900 bg-opacity-80"></div>

    <div x-show="open" x-transition="" @click="close()" class="relative min-h-screen flex items-start justify-center p-4 lg:py-20">
        <div @click.stop="" class="relative max-w-2xl w-full bg-dark-700 pt-8 px-8 pb-16">
            <div class="relative w-full border-b border-gray-600 border-opacity-50 overflow-hidden transition-all duration-500 focus-within:border-gray-600">
                <svg class="absolute inset-y-0 left-0 mt-1 w-5 h-5 text-gray-500 pointer-events-none" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                <input x-model.debouce.200ms="search" x-ref="searchInput" class="flex-1 w-full pl-8 pr-4 py-1 tracking-wide text-gray-400 placeholder-gray-500 bg-transparent focus:outline-none" placeholder="Search Docs (Press '/')" aria-label="Search in the documentation" @keydown.arrow-up.prevent="focusPreviousResult()" @keydown.arrow-down.prevent="focusNextResult()">
            </div>

            <div x-show="search">
                <div x-show="hits.length" x-cloak="" class="mt-5 divide-y divide-gray-700 z-30">
                    <template x-for="(hit, index) in hits" :key="index" hidden="">
                        <div>
                            <a :id="'search-result-' + index" :href="hit.url" class="search-result -mx-2 block p-3 text-gray-400 transition-colors duration-200 focus:outline-none focus:bg-dark-800 focus:text-gray-200 hover:text-gray-200" @keydown.arrow-up.prevent="focusPreviousResult(index)" @keydown.arrow-down.prevent="focusNextResult(index)">
                                <div x-show="hit._highlightResult.hierarchy.lvl0" class="text-sm font-medium" x-html="hit._highlightResult.hierarchy.lvl0 ? hit._highlightResult.hierarchy.lvl0.value : ''"></div>
                                <div class="mt-2">
                                    <div x-show="hit._highlightResult.hierarchy.lvl1" class="text-sm">
                                        <span class="text-red-600 opacity-75">#</span> <span x-html="hit._highlightResult.hierarchy.lvl1 ? hit._highlightResult.hierarchy.lvl1.value : ''"></span>
                                    </div>

                                    <div x-show="hit._highlightResult.hierarchy.lvl2" class="text-sm">
                                        &gt; <span x-html="hit._highlightResult.hierarchy.lvl2 ? hit._highlightResult.hierarchy.lvl2.value : ''"></span>
                                    </div>

                                    <div x-show="hit._highlightResult.hierarchy.lvl3" class="text-sm">
                                        &gt; <span x-html="hit._highlightResult.hierarchy.lvl3 ? hit._highlightResult.hierarchy.lvl3.value : ''"></span>
                                    </div>

                                    <div x-show="hit._highlightResult.hierarchy.lvl4" class="text-sm">
                                        &gt; <span x-html="hit._highlightResult.hierarchy.lvl4 ? hit._highlightResult.hierarchy.lvl4.value : ''"></span>
                                    </div>

                                    <div x-show="hit._highlightResult.hierarchy.lvl5" class="text-sm">
                                        &gt; <span x-html="hit._highlightResult.hierarchy.lvl5 ? hit._highlightResult.hierarchy.lvl5.value : ''"></span>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </template>
                </div>

                <div x-show="! hits.length" x-cloak="" class="mt-8 pb-32">
                    <div x-text="`We didn't find any result for '${search}'. Sorry!`"></div>
                </div>
            </div>

            <div x-show="! search" class="mt-8 pb-32">
                <p>Enter a search term to find results in the documentation.</p>
            </div>

            <div class="absolute bottom-0 inset-x-0 border-t border-dark-800 text-gray-400 flex justify-end">
                <a class="px-4 py-2 inline-block" target="_blank" href="https://www.algolia.com/?utm_source=laravel&amp;utm_medium=link&amp;utm_campaign=laravel_documentation_search">
                    <img width="105" src="../../img/icons/algolia.dark.min.svg" id="docs_search__algolia_dark" alt="Algolia">
                </a>
            </div>
        </div>

        <button x-show="open" x-transition.opacity="" class="absolute top-8 right-8 text-gray-400" @click.prevent="close">
            <span class="sr-only">Close search</span>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
        </button>
    </div>
</div>

<script>
    var algolia_app_id = 'E3MIRNPJH5';
    var algolia_search_key = '1fa3a8fec06eb1858d6ca137211225c0';
    var version = '9.x';
</script>

<script src="../../js/appee68.js?id=100f797fd909ecd1c2f2"></script>

<script>
    var _gaq=[['_setAccount','UA-23865777-1'],['_trackPageview']];
    (function(d,t){
        var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
        g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g,s)
    }(document,'script'));
</script>


<!-- Mirrored from laravel.com/docs/9.x/upgrade by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 24 Mar 2022 16:17:07 GMT -->

</body></html>