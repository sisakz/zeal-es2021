<html><!-- Mirrored from laravel.com/docs/8.x/database-testing by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 21 Jul 2021 16:41:15 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->

    <meta charset="utf-8">
    <title>Database Testing</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

        <link rel="canonical" href="database-testing.html">
    
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="../../img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../img/favicon/favicon-16x16.png">
    <link rel="manifest" href="https://laravel.com/img/favicon/site.webmanifest">
    <link rel="mask-icon" href="../../img/favicon/safari-pinned-tab.svg" color="#ff2d20">
    <link rel="shortcut icon" href="../../img/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#ff2d20">
    <meta name="msapplication-config" content="https://laravel.com/img/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="../../../use.typekit.net/ins2wgm.css">
    <link rel="stylesheet" type="text/css" href="../../css/app5923.css?id=2a4a5c8a992a8a33cdd4">
    <script src="//www.google-analytics.com/ga.js"></script><script src="//www.google-analytics.com/ga.js"></script><script>
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
            if (localStorage.theme === 'system') {
                if (e.matches) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            }
        });

        function updateTheme() {
            if (!('theme' in localStorage)) {
                localStorage.theme = 'system';
            }

            switch (localStorage.theme) {
                case 'system':
                    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                        document.documentElement.classList.add('dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                    }
                    document.documentElement.setAttribute('color-theme', 'system');
                    break;

                case 'dark':
                    document.documentElement.classList.add('dark');
                    document.documentElement.setAttribute('color-theme', 'dark');
                    break;

                case 'light':
                    document.documentElement.classList.remove('dark');
                    document.documentElement.setAttribute('color-theme', 'light');
                    break;
            }
        }

        updateTheme();
    </script>
</head>
<body x-data="{
        navIsOpen: false,
        searchIsOpen: false,
        search: '',
    }" class="language-php h-full w-full font-sans text-gray-900 antialiased">

     <a id="skip-to-content-link" href="#main-content" class="absolute bg-gray-100 px-4 py-2 top-3 left-3 text-gray-700 shadow-xl">
    Skip to content
</a>
 
    <div class="relative overflow-auto dark:bg-dark-800" id="docsScreen">
        <div class="relative lg:flex lg:items-start">
            <aside x-init="init()" x-data="{
                    navIsOpen: false,
                    init() {
                        this.$watch('navIsOpen', (val) => {
                            if (val) {
                                document.body.classList.add('overflow-hidden');
                            } else {
                                document.body.classList.remove('overflow-hidden');
                            }
                        });
                    }
                }" class="hidden fixed top-0 bottom-0 left-0 z-20 h-full w-16 flex flex-col bg-gradient-to-b from-gray-100 to-white transition-all duration-300 overflow-hidden lg:sticky lg:w-80 lg:flex-shrink-0 lg:flex lg:justify-end lg:items-end 2xl:max-w-lg 2xl:w-full dark:from-dark-900 dark:to-dark-800" :class="{ 'w-64': navIsOpen }" @click.away="navIsOpen = false" @keydown.window.escape="navIsOpen = false">
                <div class="relative min-h-0 flex-1 flex flex-col xl:w-80">
                    <a href="https://laravel.com/" class="flex items-center py-8 px-4 lg:px-8 xl:px-16">
                        <img class="w-8 h-8 flex-shrink-0 transition-all duration-300 lg:w-12 lg:h-12" :class="{ 'w-12 h-12': navIsOpen }" src="../../img/logomark.min.svg" alt="Laravel">
                        <img x-show="navIsOpen" x-cloak="" class="ml-4 transition-all duration-300 lg:hidden" x-transition:enter="duration-250 ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="duration-250 ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" src="../../img/logotype.min.svg" alt="Laravel">
                        <img src="../../img/logotype.min.svg" alt="Laravel" class="hidden ml-4 lg:block">
                    </a>
                    <div class="overflow-y-auto overflow-x-hidden px-4 lg:overflow-hidden lg:px-8 xl:px-16">
                        
                        

                        
                        
                                                    <div :class="{ 'hidden': !navIsOpen }" x-cloak="" class="mt-4 px-3 py-2 border-dashed border-gray-200 border rounded-lg text-xs leading-loose text-gray-700 lg:block dark:border-gray-400 dark:text-gray-200">
                                <span class="font-medium">Laravel Vapor:</span> experience extreme scale on a dedicated serverless platform for Laravel. <a class="underline text-red-600" href="https://vapor.laravel.com/">Sign up now!</a>.
                            </div>
                        
                                            </div>
                    <div class="sticky bottom-0 flex-1 flex flex-col justify-end lg:hidden">
                        <div class="py-4 px-4 bg-white">
                            <button class="relative ml-1 w-6 h-6 text-red-600 lg:hidden focus:outline-none focus:shadow-outline" aria-label="Menu" @click.prevent="navIsOpen = !navIsOpen">
                                <svg x-show.transition.opacity="! navIsOpen" class="absolute inset-0 w-6 h-6" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                                <svg x-show.transition.opacity="navIsOpen" x-cloak="" class="absolute inset-0 w-6 h-6" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                            </button>
                        </div>
                    </div>
                </div>
            </aside>

            <header class="lg:hidden" @keydown.window.escape="navIsOpen = false" @click.away="navIsOpen = false">
                <div class="relative mx-auto w-full py-10 bg-white transition duration-200 dark:bg-dark-800">
                    <div class="mx-auto px-8 sm:px-16 flex items-center justify-between">
                        <a href="https://laravel.com/" class="flex items-center">
                            <img class="" src="../../img/logomark.min.svg" alt="Laravel">
                            <img class="hidden ml-5 sm:block" src="../../img/logotype.min.svg" alt="Laravel">
                        </a>
                        <div class="flex-1 flex items-center justify-end">
                            <button id="header__sun" onclick="toSystemMode()" title="Switch to system theme" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <circle cx="12" cy="12" r="4"></circle>
                                    <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path>
                                 </svg>
                            </button>
                            <button id="header__moon" onclick="toLightMode()" title="Switch to light mode" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z"></path>
                                </svg>
                            </button>
                            <button id="header__indeterminate" onclick="toDarkMode()" title="Switch to dark mode" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 2A10 10 0 0 0 2 12A10 10 0 0 0 12 22A10 10 0 0 0 22 12A10 10 0 0 0 12 2M12 4A8 8 0 0 1 20 12A8 8 0 0 1 12 20V4Z"></path>
                                </svg>
                            </button>
                            <button class="ml-2 relative w-10 h-10 p-2 text-red-600 lg:hidden focus:outline-none focus:shadow-outline" aria-label="Menu" @click.prevent="navIsOpen = !navIsOpen">
                                <svg x-show.transition.opacity="! navIsOpen" class="absolute inset-0 mt-2 ml-2 w-6 h-6" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                                <svg x-show.transition.opacity="navIsOpen" x-cloak="" class="absolute inset-0 mt-2 ml-2 w-6 h-6" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                            </button>
                        </div>
                    </div>
                    <span :class="{ 'shadow-sm': navIsOpen }" class="absolute inset-0 z-20 pointer-events-none"></span>
                </div>
                <div x-show="navIsOpen" x-transition:enter="duration-150" x-transition:leave="duration-100 ease-in" x-cloak="">
                    
                </div>
            </header>

            <section class="flex-1 dark:bg-dark-800">
                <div class="max-w-screen-lg px-8 sm:px-16 lg:px-24">
                    <div class="flex flex-col items-end lg:mt-8 lg:flex-row-reverse">
                        <div class="hidden lg:flex items-center justify-center ml-8">
                            <button id="header__sun" onclick="toSystemMode()" title="Switch to system theme" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <circle cx="12" cy="12" r="4"></circle>
                                    <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path>
                                 </svg>
                            </button>
                            <button id="header__moon" onclick="toLightMode()" title="Switch to light mode" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z"></path>
                                </svg>
                            </button>
                            <button id="header__indeterminate" onclick="toDarkMode()" title="Switch to dark mode" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 2A10 10 0 0 0 2 12A10 10 0 0 0 12 22A10 10 0 0 0 22 12A10 10 0 0 0 12 2M12 4A8 8 0 0 1 20 12A8 8 0 0 1 12 20V4Z"></path>
                                </svg>
                            </button>
                        </div>
                        <div class="w-full lg:w-64 lg:pl-12">
                            <div>
                                <label class="text-gray-600 text-xs tracking-widest uppercase dark:text-gray-500" for="version-switch">Version</label>
                                <div x-data="" class="relative w-full bg-white border-b border-gray-600 border-opacity-50 transition-all duration-500 focus-within:border-gray-600 dark:bg-gray-800">
                                    <select id="version-switcher" aria-label="Laravel version" class="appearance-none flex-1 w-full px-0 py-1 placeholder-gray-900 tracking-wide bg-white focus:outline-none dark:bg-dark-800 dark:text-gray-400 dark:placeholder-gray-500" @change="window.location = $event.target.value">
                                                                                    <option value="https://laravel.com/docs/master/database-testing">Master</option>
                                                                                    <option selected="" value="database-testing.html">8.x</option>
                                                                                    <option value="https://laravel.com/docs/7.x/database-testing">7.x</option>
                                                                                    <option value="https://laravel.com/docs/6.x/database-testing">6.x</option>
                                                                                    <option value="https://laravel.com/docs/5.8/database-testing">5.8</option>
                                                                                    <option value="https://laravel.com/docs/5.7/database-testing">5.7</option>
                                                                                    <option value="https://laravel.com/docs/5.6/database-testing">5.6</option>
                                                                                    <option value="https://laravel.com/docs/5.5/database-testing">5.5</option>
                                                                                    <option value="https://laravel.com/docs/5.4/database-testing">5.4</option>
                                                                                    <option value="https://laravel.com/docs/5.3/database-testing">5.3</option>
                                                                                    <option value="https://laravel.com/docs/5.2/database-testing">5.2</option>
                                                                                    <option value="https://laravel.com/docs/5.1/database-testing">5.1</option>
                                                                                    <option value="https://laravel.com/docs/5.0/database-testing">5.0</option>
                                                                                    <option value="https://laravel.com/docs/4.2/database-testing">4.2</option>
                                                                            </select>
                                    <img class="absolute inset-y-0 right-0 mt-2.5 w-2.5 h-2.5 text-gray-900 pointer-events-none" id="docs_search__version_arrow" src="../../img/icons/drop_arrow.min.svg" alt="">
                                    <img class="absolute inset-y-0 right-0 mt-2.5 w-2.5 h-2.5 text-gray-900 pointer-events-none" id="docs_search__version_arrow_dark" src="../../img/icons/drop_arrow.dark.min.svg" alt="">
                                </div>
                            </div>
                        </div>
                        <div x-data="searchComponent()" x-init="init()" class="relative mt-8 flex justify-end w-full lg:mt-0">
                            <div class="relative w-full border-b border-gray-600 border-opacity-50 overflow-hidden transition-all duration-500 focus-within:border-gray-600" @click="searchIsOpen = true" @click.away="clear" @keydown.window.escape="clear" @keydown.window="handleSlashKey">
                                <svg class="absolute inset-y-0 left-0 mt-1 w-5 h-5 text-gray-900 pointer-events-none dark:text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                                <input x-model.debouce.200ms="search" x-ref="searchInput" class="flex-1 w-full pl-8 pr-4 py-1 placeholder-gray-900 tracking-wide bg-white focus:outline-none dark:bg-dark-800 dark:text-gray-400 dark:placeholder-gray-500" placeholder="Search Docs (Press '/')" aria-label="Search in the documentation" @keydown.arrow-up.prevent="focusPreviousResult()" @keydown.arrow-down.prevent="focusNextResult()">
                            </div>
                            <div x-show="hits.length" x-cloak="" class="absolute w-full mt-8 pt-px divide-y divide-gray-200 shadow-sm z-30 dark:divide-dark-500">
    <template x-for="(hit, index) in hits" :key="index">
        <a :id="'search-result-' + index" :href="hit.url" class="search-result block px-4 py-3 bg-gray-100 transition-colors duration-200 hover:bg-gray-200 focus:outline-none focus:bg-gray-200 dark:bg-dark-600 dark:text-gray-400 dark:focus:bg-dark-500 dark:hover:bg-dark-500" @keydown.arrow-up.prevent="focusPreviousResult(index)" @keydown.arrow-down.prevent="focusNextResult(index)">
            <div x-show="hit._highlightResult.hierarchy.lvl0" class="text-sm font-medium" x-html="hit._highlightResult.hierarchy.lvl0 ? hit._highlightResult.hierarchy.lvl0.value : ''"></div>
            <div class="mt-2">
                <div x-show="hit._highlightResult.hierarchy.lvl1" class="text-sm">
                    <span class="text-red-600 opacity-75">#</span> <span x-html="hit._highlightResult.hierarchy.lvl1 ? hit._highlightResult.hierarchy.lvl1.value : ''"></span>
                </div>

                <div x-show="hit._highlightResult.hierarchy.lvl2" class="text-sm">
                    &gt; <span x-html="hit._highlightResult.hierarchy.lvl2 ? hit._highlightResult.hierarchy.lvl2.value : ''"></span>
                </div>

                <div x-show="hit._highlightResult.hierarchy.lvl3" class="text-sm">
                    &gt; <span x-html="hit._highlightResult.hierarchy.lvl3 ? hit._highlightResult.hierarchy.lvl3.value : ''"></span>
                </div>

                <div x-show="hit._highlightResult.hierarchy.lvl4" class="text-sm">
                    &gt; <span x-html="hit._highlightResult.hierarchy.lvl4 ? hit._highlightResult.hierarchy.lvl4.value : ''"></span>
                </div>

                <div x-show="hit._highlightResult.hierarchy.lvl5" class="text-sm">
                    &gt; <span x-html="hit._highlightResult.hierarchy.lvl5 ? hit._highlightResult.hierarchy.lvl5.value : ''"></span>
                </div>
            </div>
        </a>
    </template>
	<div class="bg-gray-100 flex justify-end dark:bg-dark-600 dark:text-gray-400">
		<a class="px-4 py-2 inline-block" target="_blank" href="https://www.algolia.com/?utm_source=laravel&amp;utm_medium=link&amp;utm_campaign=laravel_documentation_search">
            <img width="105" src="../../img/icons/algolia.min.svg" alt="Algolia">
            <img width="105" src="../../img/icons/algolia.dark.min.svg" id="docs_search__algolia_dark" alt="Algolia">
		</a>
	</div>
</div>

<div x-show="search &amp;&amp; ! hits.length" x-cloak="" class="absolute w-full mt-8 pt-px divide-y divide-gray-200 shadow-sm z-30 dark:divide-dark-500">
	<div class="px-4 py-2 bg-gray-100 dark:bg-dark-600 dark:text-gray-400">
		<div class="text-sm" x-text="`We didn't find any result for '${search}'. Sorry!`"></div>
	</div>
	<div class="bg-gray-100 flex justify-end dark:bg-dark-600 dark:text-gray-400">
		<a class="px-4 py-2 inline-block" target="_blank" href="https://www.algolia.com/?utm_source=laravel&amp;utm_medium=link&amp;utm_campaign=laravel_documentation_search">
            <img width="105" src="../../img/icons/algolia.min.svg" id="docs_search__algolia" alt="Algolia">
            <img width="105" src="../../img/icons/algolia.dark.min.svg" id="docs_search__algolia_dark" alt="Algolia">
		</a>
	</div>
</div>
                        </div>
                    </div>

                    <section class="mt-8 md:mt-16">
                        <section class="docs_main max-w-prose">
                            
                                                         <div id="main-content">
    <h1>Database Testing</h1>
<ul>
<li><a href="#introduction">Introduction</a>
<ul>
<li><a href="#resetting-the-database-after-each-test">Resetting The Database After Each Test</a></li>
</ul></li>
<li><a href="#defining-model-factories">Defining Model Factories</a>
<ul>
<li><a href="#concept-overview">Concept Overview</a></li>
<li><a href="#generating-factories">Generating Factories</a></li>
<li><a href="#factory-states">Factory States</a></li>
<li><a href="#factory-callbacks">Factory Callbacks</a></li>
</ul></li>
<li><a href="#creating-models-using-factories">Creating Models Using Factories</a>
<ul>
<li><a href="#instantiating-models">Instantiating Models</a></li>
<li><a href="#persisting-models">Persisting Models</a></li>
<li><a href="#sequences">Sequences</a></li>
</ul></li>
<li><a href="#factory-relationships">Factory Relationships</a>
<ul>
<li><a href="#has-many-relationships">Has Many Relationships</a></li>
<li><a href="#belongs-to-relationships">Belongs To Relationships</a></li>
<li><a href="#many-to-many-relationships">Many To Many Relationships</a></li>
<li><a href="#polymorphic-relationships">Polymorphic Relationships</a></li>
<li><a href="#defining-relationships-within-factories">Defining Relationships Within Factories</a></li>
</ul></li>
<li><a href="#running-seeders">Running Seeders</a></li>
<li><a href="#available-assertions">Available Assertions</a></li>
</ul>
<p><a class="dashAnchor" name="//apple_ref/Section/Introduction"></a><a name="introduction"></a></p>
<h2 id="introduction">Introduction</h2>
<p>Laravel provides a variety of helpful tools and assertions to make it easier to test your database driven applications. In addition, Laravel model factories and seeders make it painless to create test database records using your application's Eloquent models and relationships. We'll discuss all of these powerful features in the following documentation.</p>
<p><a class="dashAnchor" name="//apple_ref/Section/Resetting%20The%20Database%20After%20Each%20Test"></a><a name="resetting-the-database-after-each-test"></a></p>
<h3 id="resetting-the-database-after-each-test">Resetting The Database After Each Test</h3>
<p>Before proceeding much further, let's discuss how to reset your database after each of your tests so that data from a previous test does not interfere with subsequent tests. Laravel's included <code>Illuminate\Foundation\Testing\RefreshDatabase</code> trait will take care of this for you. Simply use the trait on your test class:</p>
<pre><code>&lt;?php

namespace Tests\Feature;

use Illuminate\Foundation\Testing\RefreshDatabase;
use Illuminate\Foundation\Testing\WithoutMiddleware;
use Tests\TestCase;

class ExampleTest extends TestCase
{
    use RefreshDatabase;

    /**
     * A basic functional test example.
     *
     * @return void
     */
    public function test_basic_example()
    {
        $response = $this-&gt;get('/');

        // ...
    }
}</code></pre>
<p><a class="dashAnchor" name="//apple_ref/Section/Defining%20Model%20Factories"></a><a name="defining-model-factories"></a></p>
<h2 id="defining-model-factories">Defining Model Factories</h2>
<p><a class="dashAnchor" name="//apple_ref/Section/Concept%20Overview"></a><a name="concept-overview"></a></p>
<h3 id="concept-overview">Concept Overview</h3>
<p>First, let's talk about Eloquent model factories. When testing, you may need to insert a few records into your database before executing your test. Instead of manually specifying the value of each column when you create this test data, Laravel allows you to define a set of default attributes for each of your <a href="eloquent.html">Eloquent models</a> using model factories.</p>
<p>To see an example of how to write a factory, take a look at the <code>database/factories/UserFactory.php</code> file in your application. This factory is included with all new Laravel applications and contains the following factory definition:</p>
<pre><code>namespace Database\Factories;

use App\Models\User;
use Illuminate\Database\Eloquent\Factories\Factory;
use Illuminate\Support\Str;

class UserFactory extends Factory
{
    /**
     * The name of the factory's corresponding model.
     *
     * @var string
     */
    protected $model = User::class;

    /**
     * Define the model's default state.
     *
     * @return array
     */
    public function definition()
    {
        return [
            'name' =&gt; $this-&gt;faker-&gt;name(),
            'email' =&gt; $this-&gt;faker-&gt;unique()-&gt;safeEmail(),
            'email_verified_at' =&gt; now(),
            'password' =&gt; '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', // password
            'remember_token' =&gt; Str::random(10),
        ];
    }
}</code></pre>
<p>As you can see, in their most basic form, factories are classes that extend Laravel's base factory class and define a <code>model</code> property and <code>definition</code> method. The <code>definition</code> method returns the default set of attribute values that should be applied when creating a model using the factory.</p>
<p>Via the <code>faker</code> property, factories have access to the <a href="https://github.com/FakerPHP/Faker">Faker</a> PHP library, which allows you to conveniently generate various kinds of random data for testing.</p>
<blockquote>
<p>{tip} You can set your application's Faker locale by adding a <code>faker_locale</code> option to your <code>config/app.php</code> configuration file.</p>
</blockquote>
<p><a class="dashAnchor" name="//apple_ref/Section/Generating%20Factories"></a><a name="generating-factories"></a></p>
<h3 id="generating-factories">Generating Factories</h3>
<p>To create a factory, execute the <code>make:factory</code> <a href="artisan.html">Artisan command</a>:</p>
<pre><code>php artisan make:factory PostFactory</code></pre>
<p>The new factory class will be placed in your <code>database/factories</code> directory.</p>
<p>The <code>--model</code> option may be used to indicate the name of the model created by the factory. This option will pre-fill the generated factory file with the given model:</p>
<pre><code>php artisan make:factory PostFactory --model=Post</code></pre>
<p><a class="dashAnchor" name="//apple_ref/Section/Factory%20States"></a><a name="factory-states"></a></p>
<h3 id="factory-states">Factory States</h3>
<p>State manipulation methods allow you to define discrete modifications that can be applied to your model factories in any combination. For example, your <code>Database\Factories\UserFactory</code> factory might contain a <code>suspended</code> state method that modifies one of its default attribute values.</p>
<p>State transformation methods typically call the <code>state</code> method provided by Laravel's base factory class. The <code>state</code> method accepts a closure which will receive the array of raw attributes defined for the factory and should return an array of attributes to modify:</p>
<pre><code>/**
 * Indicate that the user is suspended.
 *
 * @return \Illuminate\Database\Eloquent\Factories\Factory
 */
public function suspended()
{
    return $this-&gt;state(function (array $attributes) {
        return [
            'account_status' =&gt; 'suspended',
        ];
    });
}</code></pre>
<p><a class="dashAnchor" name="//apple_ref/Section/Factory%20Callbacks"></a><a name="factory-callbacks"></a></p>
<h3 id="factory-callbacks">Factory Callbacks</h3>
<p>Factory callbacks are registered using the <code>afterMaking</code> and <code>afterCreating</code> methods and allow you to perform additional tasks after making or creating a model. You should register these callbacks by defining a <code>configure</code> method on your factory class. This method will be automatically called by Laravel when the factory is instantiated:</p>
<pre><code>namespace Database\Factories;

use App\Models\User;
use Illuminate\Database\Eloquent\Factories\Factory;
use Illuminate\Support\Str;

class UserFactory extends Factory
{
    /**
     * The name of the factory's corresponding model.
     *
     * @var string
     */
    protected $model = User::class;

    /**
     * Configure the model factory.
     *
     * @return $this
     */
    public function configure()
    {
        return $this-&gt;afterMaking(function (User $user) {
            //
        })-&gt;afterCreating(function (User $user) {
            //
        });
    }

    // ...
}</code></pre>
<p><a class="dashAnchor" name="//apple_ref/Section/Creating%20Models%20Using%20Factories"></a><a name="creating-models-using-factories"></a></p>
<h2 id="creating-models-using-factories">Creating Models Using Factories</h2>
<p><a class="dashAnchor" name="//apple_ref/Section/Instantiating%20Models"></a><a name="instantiating-models"></a></p>
<h3 id="instantiating-models">Instantiating Models</h3>
<p>Once you have defined your factories, you may use the static <code>factory</code> method provided to your models by the <code>Illuminate\Database\Eloquent\Factories\HasFactory</code> trait in order to instantiate a factory instance for that model. Let's take a look at a few examples of creating models. First, we'll use the <code>make</code> method to create models without persisting them to the database:</p>
<pre><code>use App\Models\User;

public function test_models_can_be_instantiated()
{
    $user = User::factory()-&gt;make();

    // Use model in tests...
}</code></pre>
<p>You may create a collection of many models using the <code>count</code> method:</p>
<pre><code>$users = User::factory()-&gt;count(3)-&gt;make();</code></pre>
<p><a name="applying-states"></a></p>
<h4 id="applying-states">Applying States</h4>
<p>You may also apply any of your <a href="#factory-states">states</a> to the models. If you would like to apply multiple state transformations to the models, you may simply call the state transformation methods directly:</p>
<pre><code>$users = User::factory()-&gt;count(5)-&gt;suspended()-&gt;make();</code></pre>
<p><a name="overriding-attributes"></a></p>
<h4 id="overriding-attributes">Overriding Attributes</h4>
<p>If you would like to override some of the default values of your models, you may pass an array of values to the <code>make</code> method. Only the specified attributes will be replaced while the rest of the attributes remain set to their default values as specified by the factory:</p>
<pre><code>$user = User::factory()-&gt;make([
    'name' =&gt; 'Abigail Otwell',
]);</code></pre>
<p>Alternatively, the <code>state</code> method may be called directly on the factory instance to perform an inline state transformation:</p>
<pre><code>$user = User::factory()-&gt;state([
    'name' =&gt; 'Abigail Otwell',
])-&gt;make();</code></pre>
<blockquote>
<p>{tip} <a href="eloquent.html#mass-assignment">Mass assignment protection</a> is automatically disabled when creating models using factories.</p>
</blockquote>
<p><a name="connecting-factories-and-models"></a></p>
<h4 id="connecting-factories-and-models">Connecting Factories &amp; Models</h4>
<p>The <code>HasFactory</code> trait's <code>factory</code> method will use conventions to determine the proper factory for the model. Specifically, the method will look for a factory in the <code>Database\Factories</code> namespace that has a class name matching the model name and is suffixed with <code>Factory</code>. If these conventions do not apply to your particular application or factory, you may overwrite the <code>newFactory</code> method on your model to return an instance of the model's corresponding factory directly:</p>
<pre><code>use Database\Factories\Administration\FlightFactory;

/**
 * Create a new factory instance for the model.
 *
 * @return \Illuminate\Database\Eloquent\Factories\Factory
 */
protected static function newFactory()
{
    return FlightFactory::new();
}</code></pre>
<p><a class="dashAnchor" name="//apple_ref/Section/Persisting%20Models"></a><a name="persisting-models"></a></p>
<h3 id="persisting-models">Persisting Models</h3>
<p>The <code>create</code> method instantiates model instances and persists them to the database using Eloquent's <code>save</code> method:</p>
<pre><code>use App\Models\User;

public function test_models_can_be_persisted()
{
    // Create a single App\Models\User instance...
    $user = User::factory()-&gt;create();

    // Create three App\Models\User instances...
    $users = User::factory()-&gt;count(3)-&gt;create();

    // Use model in tests...
}</code></pre>
<p>You may override the factory's default model attributes by passing an array of attributes to the <code>create</code> method:</p>
<pre><code>$user = User::factory()-&gt;create([
    'name' =&gt; 'Abigail',
]);</code></pre>
<p><a class="dashAnchor" name="//apple_ref/Section/Sequences"></a><a name="sequences"></a></p>
<h3 id="sequences">Sequences</h3>
<p>Sometimes you may wish to alternate the value of a given model attribute for each created model. You may accomplish this by defining a state transformation as a sequence. For example, you may wish to alternate the value of an <code>admin</code> column between <code>Y</code> and <code>N</code> for each created user:</p>
<pre><code>use App\Models\User;
use Illuminate\Database\Eloquent\Factories\Sequence;

$users = User::factory()
                -&gt;count(10)
                -&gt;state(new Sequence(
                    ['admin' =&gt; 'Y'],
                    ['admin' =&gt; 'N'],
                ))
                -&gt;create();</code></pre>
<p>In this example, five users will be created with an <code>admin</code> value of <code>Y</code> and five users will be created with an <code>admin</code> value of <code>N</code>.</p>
<p>If necessary, you may include a closure as a sequence value. The closure will be invoked each time the sequence needs a new value:</p>
<pre><code>$users = User::factory()
                -&gt;count(10)
                -&gt;state(new Sequence(
                    fn ($sequence) =&gt; ['role' =&gt; UserRoles::all()-&gt;random()],
                ))
                -&gt;create();</code></pre>
<p>Within a sequence closure, you may access the <code>$index</code> or <code>$count</code> properties on the sequence instance that is injected into the closure. The <code>$index</code> property contains the number of iterations through the sequence that have occurred thus far, while the <code>$count</code> property contains the total number of times the sequence will be invoked:</p>
<pre><code>$users = User::factory()
                -&gt;count(10)
                -&gt;sequence(fn ($sequence) =&gt; ['name' =&gt; 'Name '.$sequence-&gt;index])
                -&gt;create();</code></pre>
<p><a class="dashAnchor" name="//apple_ref/Section/Factory%20Relationships"></a><a name="factory-relationships"></a></p>
<h2 id="factory-relationships">Factory Relationships</h2>
<p><a class="dashAnchor" name="//apple_ref/Section/Has%20Many%20Relationships"></a><a name="has-many-relationships"></a></p>
<h3 id="has-many-relationships">Has Many Relationships</h3>
<p>Next, let's explore building Eloquent model relationships using Laravel's fluent factory methods. First, let's assume our application has an <code>App\Models\User</code> model and an <code>App\Models\Post</code> model. Also, let's assume that the <code>User</code> model defines a <code>hasMany</code> relationship with <code>Post</code>. We can create a user that has three posts using the <code>has</code> method provided by the Laravel's factories. The <code>has</code> method accepts a factory instance:</p>
<pre><code>use App\Models\Post;
use App\Models\User;

$user = User::factory()
            -&gt;has(Post::factory()-&gt;count(3))
            -&gt;create();</code></pre>
<p>By convention, when passing a <code>Post</code> model to the <code>has</code> method, Laravel will assume that the <code>User</code> model must have a <code>posts</code> method that defines the relationship. If necessary, you may explicitly specify the name of the relationship that you would like to manipulate:</p>
<pre><code>$user = User::factory()
            -&gt;has(Post::factory()-&gt;count(3), 'posts')
            -&gt;create();</code></pre>
<p>Of course, you may perform state manipulations on the related models. In addition, you may pass a closure based state transformation if your state change requires access to the parent model:</p>
<pre><code>$user = User::factory()
            -&gt;has(
                Post::factory()
                        -&gt;count(3)
                        -&gt;state(function (array $attributes, User $user) {
                            return ['user_type' =&gt; $user-&gt;type];
                        })
            )
            -&gt;create();</code></pre>
<p><a name="has-many-relationships-using-magic-methods"></a></p>
<h4 id="has-many-relationships-using-magic-methods">Using Magic Methods</h4>
<p>For convenience, you may use Laravel's magic factory relationship methods to build relationships. For example, the following example will use convention to determine that the related models should be created via a <code>posts</code> relationship method on the <code>User</code> model:</p>
<pre><code>$user = User::factory()
            -&gt;hasPosts(3)
            -&gt;create();</code></pre>
<p>When using magic methods to create factory relationships, you may pass an array of attributes to override on the related models:</p>
<pre><code>$user = User::factory()
            -&gt;hasPosts(3, [
                'published' =&gt; false,
            ])
            -&gt;create();</code></pre>
<p>You may provide a closure based state transformation if your state change requires access to the parent model:</p>
<pre><code>$user = User::factory()
            -&gt;hasPosts(3, function (array $attributes, User $user) {
                return ['user_type' =&gt; $user-&gt;type];
            })
            -&gt;create();</code></pre>
<p><a class="dashAnchor" name="//apple_ref/Section/Belongs%20To%20Relationships"></a><a name="belongs-to-relationships"></a></p>
<h3 id="belongs-to-relationships">Belongs To Relationships</h3>
<p>Now that we have explored how to build "has many" relationships using factories, let's explore the inverse of the relationship. The <code>for</code> method may be used to define the parent model that factory created models belong to. For example, we can create three <code>App\Models\Post</code> model instances that belong to a single user:</p>
<pre><code>use App\Models\Post;
use App\Models\User;

$posts = Post::factory()
            -&gt;count(3)
            -&gt;for(User::factory()-&gt;state([
                'name' =&gt; 'Jessica Archer',
            ]))
            -&gt;create();</code></pre>
<p>If you already have a parent model instance that should be associated with the models you are creating, you may pass the model instance to the <code>for</code> method:</p>
<pre><code>$user = User::factory()-&gt;create();

$posts = Post::factory()
            -&gt;count(3)
            -&gt;for($user)
            -&gt;create();</code></pre>
<p><a name="belongs-to-relationships-using-magic-methods"></a></p>
<h4 id="belongs-to-relationships-using-magic-methods">Using Magic Methods</h4>
<p>For convenience, you may use Laravel's magic factory relationship methods to define "belongs to" relationships. For example, the following example will use convention to determine that the three posts should belong to the <code>user</code> relationship on the <code>Post</code> model:</p>
<pre><code>$posts = Post::factory()
            -&gt;count(3)
            -&gt;forUser([
                'name' =&gt; 'Jessica Archer',
            ])
            -&gt;create();</code></pre>
<p><a class="dashAnchor" name="//apple_ref/Section/Many%20To%20Many%20Relationships"></a><a name="many-to-many-relationships"></a></p>
<h3 id="many-to-many-relationships">Many To Many Relationships</h3>
<p>Like <a href="#has-many-relationships">has many relationships</a>, "many to many" relationships may be created using the <code>has</code> method:</p>
<pre><code>use App\Models\Role;
use App\Models\User;

$user = User::factory()
            -&gt;has(Role::factory()-&gt;count(3))
            -&gt;create();</code></pre>
<p><a name="pivot-table-attributes"></a></p>
<h4 id="pivot-table-attributes">Pivot Table Attributes</h4>
<p>If you need to define attributes that should be set on the pivot / intermediate table linking the models, you may use the <code>hasAttached</code> method. This method accepts an array of pivot table attribute names and values as its second argument:</p>
<pre><code>use App\Models\Role;
use App\Models\User;

$user = User::factory()
            -&gt;hasAttached(
                Role::factory()-&gt;count(3),
                ['active' =&gt; true]
            )
            -&gt;create();</code></pre>
<p>You may provide a closure based state transformation if your state change requires access to the related model:</p>
<pre><code>$user = User::factory()
            -&gt;hasAttached(
                Role::factory()
                    -&gt;count(3)
                    -&gt;state(function (array $attributes, User $user) {
                        return ['name' =&gt; $user-&gt;name.' Role'];
                    }),
                ['active' =&gt; true]
            )
            -&gt;create();</code></pre>
<p>If you already have model instances that you would like to be attached to the models you are creating, you may pass the model instances to the <code>hasAttached</code> method. In this example, the same three roles will be attached to all three users:</p>
<pre><code>$roles = Role::factory()-&gt;count(3)-&gt;create();

$user = User::factory()
            -&gt;count(3)
            -&gt;hasAttached($roles, ['active' =&gt; true])
            -&gt;create();</code></pre>
<p><a name="many-to-many-relationships-using-magic-methods"></a></p>
<h4 id="many-to-many-relationships-using-magic-methods">Using Magic Methods</h4>
<p>For convenience, you may use Laravel's magic factory relationship methods to define many to many relationships. For example, the following example will use convention to determine that the related models should be created via a <code>roles</code> relationship method on the <code>User</code> model:</p>
<pre><code>$user = User::factory()
            -&gt;hasRoles(1, [
                'name' =&gt; 'Editor'
            ])
            -&gt;create();</code></pre>
<p><a class="dashAnchor" name="//apple_ref/Section/Polymorphic%20Relationships"></a><a name="polymorphic-relationships"></a></p>
<h3 id="polymorphic-relationships">Polymorphic Relationships</h3>
<p><a href="eloquent-relationships.html#polymorphic-relationships">Polymorphic relationships</a> may also be created using factories. Polymorphic "morph many" relationships are created in the same way as typical "has many" relationships. For example, if a <code>App\Models\Post</code> model has a <code>morphMany</code> relationship with a <code>App\Models\Comment</code> model:</p>
<pre><code>use App\Models\Post;

$post = Post::factory()-&gt;hasComments(3)-&gt;create();</code></pre>
<p><a name="morph-to-relationships"></a></p>
<h4 id="morph-to-relationships">Morph To Relationships</h4>
<p>Magic methods may not be used to create <code>morphTo</code> relationships. Instead, the <code>for</code> method must be used directly and the name of the relationship must be explicitly provided. For example, imagine that the <code>Comment</code> model has a <code>commentable</code> method that defines a <code>morphTo</code> relationship. In this situation, we may create three comments that belong to a single post by using the <code>for</code> method directly:</p>
<pre><code>$comments = Comment::factory()-&gt;count(3)-&gt;for(
    Post::factory(), 'commentable'
)-&gt;create();</code></pre>
<p><a name="polymorphic-many-to-many-relationships"></a></p>
<h4 id="polymorphic-many-to-many-relationships">Polymorphic Many To Many Relationships</h4>
<p>Polymorphic "many to many" (<code>morphToMany</code> / <code>morphedByMany</code>) relationships may be created just like non-polymorphic "many to many" relationships:</p>
<pre><code>use App\Models\Tag;
use App\Models\Video;

$videos = Video::factory()
            -&gt;hasAttached(
                Tag::factory()-&gt;count(3),
                ['public' =&gt; true]
            )
            -&gt;create();</code></pre>
<p>Of course, the magic <code>has</code> method may also be used to create polymorphic "many to many" relationships:</p>
<pre><code>$videos = Video::factory()
            -&gt;hasTags(3, ['public' =&gt; true])
            -&gt;create();</code></pre>
<p><a class="dashAnchor" name="//apple_ref/Section/Defining%20Relationships%20Within%20Factories"></a><a name="defining-relationships-within-factories"></a></p>
<h3 id="defining-relationships-within-factories">Defining Relationships Within Factories</h3>
<p>To define a relationship within your model factory, you will typically assign a new factory instance to the foreign key of the relationship. This is normally done for the "inverse" relationships such as <code>belongsTo</code> and <code>morphTo</code> relationships. For example, if you would like to create a new user when creating a post, you may do the following:</p>
<pre><code>use App\Models\User;

/**
 * Define the model's default state.
 *
 * @return array
 */
public function definition()
{
    return [
        'user_id' =&gt; User::factory(),
        'title' =&gt; $this-&gt;faker-&gt;title(),
        'content' =&gt; $this-&gt;faker-&gt;paragraph(),
    ];
}</code></pre>
<p>If the relationship's columns depend on the factory that defines it you may assign a closure to an attribute. The closure will receive the factory's evaluated attribute array:</p>
<pre><code>/**
 * Define the model's default state.
 *
 * @return array
 */
public function definition()
{
    return [
        'user_id' =&gt; User::factory(),
        'user_type' =&gt; function (array $attributes) {
            return User::find($attributes['user_id'])-&gt;type;
        },
        'title' =&gt; $this-&gt;faker-&gt;title(),
        'content' =&gt; $this-&gt;faker-&gt;paragraph(),
    ];
}</code></pre>
<p><a class="dashAnchor" name="//apple_ref/Section/Running%20Seeders"></a><a name="running-seeders"></a></p>
<h2 id="running-seeders">Running Seeders</h2>
<p>If you would like to use <a href="seeding.html">database seeders</a> to populate your database during a feature test, you may invoke the <code>seed</code> method. By default, the <code>seed</code> method will execute the <code>DatabaseSeeder</code>, which should execute all of your other seeders. Alternatively, you pass a specific seeder class name to the <code>seed</code> method:</p>
<pre><code>&lt;?php

namespace Tests\Feature;

use Database\Seeders\OrderStatusSeeder;
use Illuminate\Foundation\Testing\RefreshDatabase;
use Illuminate\Foundation\Testing\WithoutMiddleware;
use Tests\TestCase;

class ExampleTest extends TestCase
{
    use RefreshDatabase;

    /**
     * Test creating a new order.
     *
     * @return void
     */
    public function test_orders_can_be_created()
    {
        // Run the DatabaseSeeder...
        $this-&gt;seed();

        // Run a specific seeder...
        $this-&gt;seed(OrderStatusSeeder::class);

        // ...
    }
}</code></pre>
<p>Alternatively, you may instruct Laravel to automatically seed the database before each test that uses the <code>RefreshDatabase</code> trait. You may accomplish this by defining a <code>$seed</code> property on your base test class:</p>
<pre><code>&lt;?php

namespace Tests;

use Illuminate\Foundation\Testing\TestCase as BaseTestCase;

abstract class TestCase extends BaseTestCase
{
    use CreatesApplication;

    /**
     * Indicates whether the default seeder should run before each test.
     *
     * @var bool
     */
    protected $seed = true;
}</code></pre>
<p>When the <code>$seed</code> property is <code>true</code>, the test will run the <code>Database\Seeders\DatabaseSeeder</code> class before each test that uses the <code>RefreshDatabase</code> trait. However, you may specify a specific seeder that should be executed by defining a <code>$seeder</code> property on your test class:</p>
<pre><code>use Database\Seeders\OrderStatusSeeder;

/**
 * Run a specific seeder before each test.
 *
 * @var string
 */
protected $seeder = OrderStatusSeeder::class;</code></pre>
<p><a class="dashAnchor" name="//apple_ref/Section/Available%20Assertions"></a><a name="available-assertions"></a></p>
<h2 id="available-assertions">Available Assertions</h2>
<p>Laravel provides several database assertions for your <a href="https://phpunit.de/">PHPUnit</a> feature tests. We'll discuss each of these assertions below.</p>
<p><a name="assert-database-count"></a></p>
<h4 id="assert-database-count">assertDatabaseCount</h4>
<p>Assert that a table in the database contains the given number of records:</p>
<pre><code>$this-&gt;assertDatabaseCount('users', 5);</code></pre>
<p><a name="assert-database-has"></a></p>
<h4 id="assert-database-has">assertDatabaseHas</h4>
<p>Assert that a table in the database contains records matching the given key / value query constraints:</p>
<pre><code>$this-&gt;assertDatabaseHas('users', [
    'email' =&gt; '<a href="https://laravel.com/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="6714060b0b1e27021f060a170b024904080a">[email&nbsp;protected]</a>',
]);</code></pre>
<p><a name="assert-database-missing"></a></p>
<h4 id="assert-database-missing">assertDatabaseMissing</h4>
<p>Assert that a table in the database does not contain records matching the given key / value query constraints:</p>
<pre><code>$this-&gt;assertDatabaseMissing('users', [
    'email' =&gt; '<a href="https://laravel.com/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d1a2b0bdbda891b4a9b0bca1bdb4ffb2bebc">[email&nbsp;protected]</a>',
]);</code></pre>
<p><a name="assert-deleted"></a></p>
<h4 id="assert-deleted">assertDeleted</h4>
<p>The <code>assertDeleted</code> asserts that a given Eloquent model has been deleted from the database:</p>
<pre><code>use App\Models\User;

$user = User::find(1);

$user-&gt;delete();

$this-&gt;assertDeleted($user);</code></pre>
<p>The <code>assertSoftDeleted</code> method may be used to assert a given Eloquent model has been "soft deleted":</p>
<pre><code>$this-&gt;assertSoftDeleted($user);</code></pre>
                                <script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script async="" type="text/javascript" src="../../../cdn.carbonads.com/carbon83bb.js?serve=CKYILK3E&amp;placement=laravelcom" id="_carbonads_js"></script>
</div>
 
                        </section>
                    </section>
                </div>
            </section>
        </div>
    </div>

<footer class="relative z-30 dark:bg-dark-800">
    <div class="relative z-20 overflow-x-hidden">
        <div class="relative max-w-screen-2xl mx-auto sm:px-8">
            <div class="absolute inset-0 flex flex-col px-4 lg:px-12 xl:px-16">
                <div class="flex-1"></div>
                <div class="flex-1 bg-gray-100 dark:bg-dark-700"></div>
            </div>
            <div class="relative max-w-screen-xl mx-auto px-8">
                <section class="relative z-10 p-6 bg-white shadow-lg md:flex md:items-center md:p-12 lg:p-16 dark:bg-dark-800">
                    <div class="content md:pr-12">
                        <h2 class="text-3xl tracking-tight sm:text-4xl md:mt-4 xl:text-5xl dark:text-gray-200">Become a Laravel Partner</h2>
                        <p class="mt-3 max-w-xl text-gray-600 sm:mt-5 md:max-w-2xl md:mt-8 md:text-lg dark:text-gray-400">Laravel Partners are elite shops providing top-notch Laravel development and consulting. Each of our partners can help you craft a beautiful, well-architected project.</p>
                    </div>
                                             <a class="group relative h-12 inline-flex w-64 border border-red-600 sm:w-56 focus:outline-none mt-8" href="https://laravel.com/partners">
    <span class="absolute inset-0 inline-flex items-center justify-center self-stretch px-6 text-white text-center font-medium bg-red-600 ring-1 ring-red-600 ring-offset-1 ring-offset-red-600 transform transition-transform group-hover:-translate-y-1 group-hover:-translate-x-1 group-focus:-translate-y-1 group-focus:-translate-x-1">
        Our Partners
    </span>
</a>
 
                                    </section>
            </div>
        </div>

        <div class="max-w-screen-2xl mx-auto px-4 lg:px-12 xl:px-16">
            <div class="px-8 pb-12 bg-gray-100 xl:px-20 dark:bg-dark-700">
                <div>
                    <img class="-mt-2 max-w-4xl w-full transform -translate-x-12 lg:-translate-x-24 xl:-translate-x-40" src="../../img/logotype.min.svg" alt="Laravel">
                </div>
                <div class="mt-6 sm:mt-12 md:flex">
                    <div class="divide-y divide-gray-600 divide-opacity-25 sm:hidden">
                                                    <div x-data="{ expanded: false }" class="py-4">
                                <button class="-mx-2 px-2 w-full flex items-center justify-between py-2 font-bold dark:text-gray-200" @click="expanded = ! expanded">
                                    <span>Highlights</span>
                                    <span class="transform transition-transform" :class="{ 'rotate-45': expanded }">+</span>
                                </button>
                                <div x-show="expanded" x-cloak="" class="py-2 transition transform" x-transition:enter="duration-250 ease-out" x-transition:enter-start="opacity-0 -translate-y-8" x-transition:enter-end="opacity-100" x-transition:leave="duration-250 ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0 -translate-y-8">
                                    <ul class="space-y-2 text-gray-600 text-sm dark:text-gray-500">
                                                                                    <li><a href="https://laravel.com/team">Our Team</a></li>
                                                                                    <li><a href="releases.html">Release Notes</a></li>
                                                                                    <li><a href="installation.html">Getting Started</a></li>
                                                                                    <li><a href="routing.html">Routing</a></li>
                                                                                    <li><a href="blade.html">Blade Templates</a></li>
                                                                                    <li><a href="authentication.html">Authentication</a></li>
                                                                                    <li><a href="authorization.html">Authorization</a></li>
                                                                                    <li><a href="artisan.html">Artisan Console</a></li>
                                                                                    <li><a href="database.html">Database</a></li>
                                                                                    <li><a href="eloquent.html">Eloquent ORM</a></li>
                                                                                    <li><a href="testing.html">Testing</a></li>
                                                                            </ul>
                                </div>
                            </div>
                                                    <div x-data="{ expanded: false }" class="py-4">
                                <button class="-mx-2 px-2 w-full flex items-center justify-between py-2 font-bold dark:text-gray-200" @click="expanded = ! expanded">
                                    <span>Resources</span>
                                    <span class="transform transition-transform" :class="{ 'rotate-45': expanded }">+</span>
                                </button>
                                <div x-show="expanded" x-cloak="" class="py-2 transition transform" x-transition:enter="duration-250 ease-out" x-transition:enter-start="opacity-0 -translate-y-8" x-transition:enter-end="opacity-100" x-transition:leave="duration-250 ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0 -translate-y-8">
                                    <ul class="space-y-2 text-gray-600 text-sm dark:text-gray-500">
                                                                                    <li><a href="https://laracasts.com/">Laracasts</a></li>
                                                                                    <li><a href="https://laravel-news.com/">Laravel News</a></li>
                                                                                    <li><a href="https://laracon.us/">Laracon</a></li>
                                                                                    <li><a href="https://laracon.eu/">Laracon EU</a></li>
                                                                                    <li><a href="https://larajobs.com/">Jobs</a></li>
                                                                                    <li><a href="https://certification.laravel.com/">Certification</a></li>
                                                                                    <li><a href="https://laracasts.com/discuss">Forums</a></li>
                                                                            </ul>
                                </div>
                            </div>
                                                    <div x-data="{ expanded: false }" class="py-4">
                                <button class="-mx-2 px-2 w-full flex items-center justify-between py-2 font-bold dark:text-gray-200" @click="expanded = ! expanded">
                                    <span>Partners</span>
                                    <span class="transform transition-transform" :class="{ 'rotate-45': expanded }">+</span>
                                </button>
                                <div x-show="expanded" x-cloak="" class="py-2 transition transform" x-transition:enter="duration-250 ease-out" x-transition:enter-start="opacity-0 -translate-y-8" x-transition:enter-end="opacity-100" x-transition:leave="duration-250 ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0 -translate-y-8">
                                    <ul class="space-y-2 text-gray-600 text-sm dark:text-gray-500">
                                                                                    <li><a href="https://vehikl.com/">Vehikl</a></li>
                                                                                    <li><a href="https://tighten.co/">Tighten</a></li>
                                                                                    <li><a href="https://64robots.com/">64 Robots</a></li>
                                                                                    <li><a href="https://kirschbaumdevelopment.com/">Kirschbaum</a></li>
                                                                                    <li><a href="https://www.curotec.com/services/technologies/laravel/">Curotec</a></li>
                                                                                    <li><a href="https://jump24.co.uk/">Jump24</a></li>
                                                                                    <li><a href="https://www.a2design.biz/">A2 Design</a></li>
                                                                                    <li><a href="https://corporate.aboutyou.de/app/uploads/2019/08/INTRO-Pitch-I-AY-Tech.pdf?utm_source=laravelpartnersfindoutmore&amp;utm_medium=socialgroups&amp;utm_campaign=tech">ABOUT YOU</a></li>
                                                                                    <li><a href="https://www.byte5.net/">Byte 5</a></li>
                                                                                    <li><a href="https://cubettech.com/">Cubet</a></li>
                                                                                    <li><a href="https://www.cyber-duck.co.uk/how-we-work/technology/laravel?utm_source=Laravel%20Partner&amp;utm_medium=Sponsorship">Cyber-Duck</a></li>
                                                                                    <li><a href="https://devsquad.com/">DevSquad</a></li>
                                                                                    <li><a href="https://www.ideil.com/">Ideil</a></li>
                                                                                    <li><a href="https://romegadigital.com/">Romega Software</a></li>
                                                                                    <li><a href="https://www.worksome.com/">Worksome</a></li>
                                                                            </ul>
                                </div>
                            </div>
                                                    <div x-data="{ expanded: false }" class="py-4">
                                <button class="-mx-2 px-2 w-full flex items-center justify-between py-2 font-bold dark:text-gray-200" @click="expanded = ! expanded">
                                    <span>Ecosystem</span>
                                    <span class="transform transition-transform" :class="{ 'rotate-45': expanded }">+</span>
                                </button>
                                <div x-show="expanded" x-cloak="" class="py-2 transition transform" x-transition:enter="duration-250 ease-out" x-transition:enter-start="opacity-0 -translate-y-8" x-transition:enter-end="opacity-100" x-transition:leave="duration-250 ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0 -translate-y-8">
                                    <ul class="space-y-2 text-gray-600 text-sm dark:text-gray-500">
                                                                                    <li><a href="billing.html">Cashier</a></li>
                                                                                    <li><a href="dusk.html">Dusk</a></li>
                                                                                    <li><a href="broadcasting.html">Echo</a></li>
                                                                                    <li><a href="https://envoyer.io/">Envoyer</a></li>
                                                                                    <li><a href="https://forge.laravel.com/">Forge</a></li>
                                                                                    <li><a href="homestead.html">Homestead</a></li>
                                                                                    <li><a href="horizon.html">Horizon</a></li>
                                                                                    <li><a href="https://lumen.laravel.com/">Lumen</a></li>
                                                                                    <li><a href="mix.html">Mix</a></li>
                                                                                    <li><a href="https://nova.laravel.com/">Nova</a></li>
                                                                                    <li><a href="passport.html">Passport</a></li>
                                                                                    <li><a href="scout.html">Scout</a></li>
                                                                                    <li><a href="socialite.html">Socialite</a></li>
                                                                                    <li><a href="https://spark.laravel.com/">Spark</a></li>
                                                                                    <li><a href="telescope.html">Telescope</a></li>
                                                                                    <li><a href="valet.html">Valet</a></li>
                                                                                    <li><a href="https://vapor.laravel.com/">Vapor</a></li>
                                                                            </ul>
                                </div>
                            </div>
                                            </div>
                    <div class="hidden sm:grid sm:grid-cols-2 sm:gap-x-4 sm:gap-y-8 md:w-1/2 lg:w-3/4 lg:grid-cols-4">
                                                    <div>
                                <span class="font-bold dark:text-gray-200">Highlights</span>
                                <div class="mt-6">
                                    <ul class="space-y-3 text-gray-600 text-sm dark:text-gray-500">
                                                                                    <li>
                                                <a href="https://laravel.com/team" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Our Team</a>
                                            </li>
                                                                                    <li>
                                                <a href="releases.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Release Notes</a>
                                            </li>
                                                                                    <li>
                                                <a href="installation.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Getting Started</a>
                                            </li>
                                                                                    <li>
                                                <a href="routing.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Routing</a>
                                            </li>
                                                                                    <li>
                                                <a href="blade.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Blade Templates</a>
                                            </li>
                                                                                    <li>
                                                <a href="authentication.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Authentication</a>
                                            </li>
                                                                                    <li>
                                                <a href="authorization.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Authorization</a>
                                            </li>
                                                                                    <li>
                                                <a href="artisan.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Artisan Console</a>
                                            </li>
                                                                                    <li>
                                                <a href="database.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Database</a>
                                            </li>
                                                                                    <li>
                                                <a href="eloquent.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Eloquent ORM</a>
                                            </li>
                                                                                    <li>
                                                <a href="testing.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Testing</a>
                                            </li>
                                                                            </ul>
                                </div>
                            </div>
                                                    <div>
                                <span class="font-bold dark:text-gray-200">Resources</span>
                                <div class="mt-6">
                                    <ul class="space-y-3 text-gray-600 text-sm dark:text-gray-500">
                                                                                    <li>
                                                <a href="https://laracasts.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Laracasts</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://laravel-news.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Laravel News</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://laracon.us/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Laracon</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://laracon.eu/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Laracon EU</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://larajobs.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Jobs</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://certification.laravel.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Certification</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://laracasts.com/discuss" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Forums</a>
                                            </li>
                                                                            </ul>
                                </div>
                            </div>
                                                    <div>
                                <span class="font-bold dark:text-gray-200">Partners</span>
                                <div class="mt-6">
                                    <ul class="space-y-3 text-gray-600 text-sm dark:text-gray-500">
                                                                                    <li>
                                                <a href="https://vehikl.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Vehikl</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://tighten.co/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Tighten</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://64robots.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">64 Robots</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://kirschbaumdevelopment.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Kirschbaum</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://www.curotec.com/services/technologies/laravel/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Curotec</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://jump24.co.uk/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Jump24</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://www.a2design.biz/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">A2 Design</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://corporate.aboutyou.de/app/uploads/2019/08/INTRO-Pitch-I-AY-Tech.pdf?utm_source=laravelpartnersfindoutmore&amp;utm_medium=socialgroups&amp;utm_campaign=tech" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">ABOUT YOU</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://www.byte5.net/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Byte 5</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://cubettech.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Cubet</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://www.cyber-duck.co.uk/how-we-work/technology/laravel?utm_source=Laravel%20Partner&amp;utm_medium=Sponsorship" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Cyber-Duck</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://devsquad.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">DevSquad</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://www.ideil.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Ideil</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://romegadigital.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Romega Software</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://www.worksome.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Worksome</a>
                                            </li>
                                                                            </ul>
                                </div>
                            </div>
                                                    <div>
                                <span class="font-bold dark:text-gray-200">Ecosystem</span>
                                <div class="mt-6">
                                    <ul class="space-y-3 text-gray-600 text-sm dark:text-gray-500">
                                                                                    <li>
                                                <a href="billing.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Cashier</a>
                                            </li>
                                                                                    <li>
                                                <a href="dusk.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Dusk</a>
                                            </li>
                                                                                    <li>
                                                <a href="broadcasting.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Echo</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://envoyer.io/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Envoyer</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://forge.laravel.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Forge</a>
                                            </li>
                                                                                    <li>
                                                <a href="homestead.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Homestead</a>
                                            </li>
                                                                                    <li>
                                                <a href="horizon.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Horizon</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://lumen.laravel.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Lumen</a>
                                            </li>
                                                                                    <li>
                                                <a href="mix.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Mix</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://nova.laravel.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Nova</a>
                                            </li>
                                                                                    <li>
                                                <a href="passport.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Passport</a>
                                            </li>
                                                                                    <li>
                                                <a href="scout.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Scout</a>
                                            </li>
                                                                                    <li>
                                                <a href="socialite.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Socialite</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://spark.laravel.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Spark</a>
                                            </li>
                                                                                    <li>
                                                <a href="telescope.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Telescope</a>
                                            </li>
                                                                                    <li>
                                                <a href="valet.html" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Valet</a>
                                            </li>
                                                                                    <li>
                                                <a href="https://vapor.laravel.com/" class="transition-colors hover:text-gray-700 dark:hover:text-gray-400">Vapor</a>
                                            </li>
                                                                            </ul>
                                </div>
                            </div>
                                            </div>
                    <div class="mt-10 max-w-md md:mt-0 md:w-1/2 lg:w-1/4">
                        <p class="text-xs text-gray-600 sm:text-sm dark:text-gray-500">Laravel is a web application framework with expressive, elegant syntax. We believe development must be an enjoyable and creative experience to be truly fulfilling. Laravel attempts to take the pain out of development by easing common tasks used in most web projects.</p>
                        <p class="mt-6 text-xs text-gray-600 text-opacity-75 sm:text-sm dark:text-gray-500">
                            Laravel is a Trademark of Taylor Otwell.<br>Copyright © 2011-2021 Laravel LLC.
                        </p>
                        <ul class="mt-6 flex items-center space-x-3">
                            <li>
                                <a href="https://twitter.com/laravelphp">
                                    <img id="footer__twitter" class="w-6 h-6" src="../../img/social/twitter.min.svg" alt="Twitter">
                                    <img id="footer__twitter_dark" class="w-6 h-6" src="../../img/social/twitter.dark.min.svg" alt="Twitter">
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/laravel">
                                    <img id="footer__github" class="w-6 h-6" src="../../img/social/github.min.svg" alt="GitHub">
                                    <img id="footer__github_dark" class="w-6 h-6" src="../../img/social/github.dark.min.svg" alt="GitHub">
                                </a>
                            </li>
                            <li>
                                <a href="https://discord.gg/mPZNm7A">
                                    <img id="footer__discord" class="w-6 h-6" src="../../img/social/discord.min.svg" alt="Discord">
                                    <img id="footer__discord_dark" class="w-6 h-6" src="../../img/social/discord.dark.min.svg" alt="Discord">
                                </a>
                            </li>
                            <li>
                                <a href="https://www.youtube.com/laravelphp">
                                    <img id="footer__youtube" class="w-6 h-6" src="../../img/social/youtube.min.svg" alt="YouTube">
                                    <img id="footer__youtube_dark" class="w-6 h-6" src="../../img/social/youtube.dark.min.svg" alt="YouTube">
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="flex justify-center py-6">
            <a href="https://laravel.com/" class="logomark">
                <img class="w-9 h-9" src="../../img/logomark.min.svg" alt="Laravel">
            </a>
        </div>
    </div>
</footer>

<script>
    var algolia_app_id = 'BH4D9OD16A';
    var algolia_search_key = '7dc4fe97e150304d1bf34f5043f178c4';
    var version = '8.x';
</script>

<script src="../../js/appeec3.js?id=7d72675c4e6d04f7886c"></script>

<script>
    var _gaq=[['_setAccount','UA-23865777-1'],['_trackPageview']];
    (function(d,t){
        var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
        g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g,s)
    }(document,'script'));
</script>


<!-- Mirrored from laravel.com/docs/8.x/database-testing by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 21 Jul 2021 16:41:15 GMT -->

</body></html>