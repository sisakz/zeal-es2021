<html><!-- Online page at https://rx-angular.io/web/state/api/rxjs-operators --><head><meta charset="utf-8"><title>RxJS Operators</title><link rel="stylesheet" href="../../../../angular.io/css_36.css" type="text/css"><link rel="stylesheet" href="../../../../angular.io/css_37.css" type="text/css"><link rel="stylesheet" href="../../../../angular.io/css_38.css" type="text/css"><link rel="stylesheet" href="../../../../angular.io/css_39.css" type="text/css"><link rel="stylesheet" href="../../../../angular.io/css_40.css" type="text/css"><link rel="stylesheet" href="../../../../angular.io/css_41.css" type="text/css"><script type="text/javascript" src="../../../../angular.io/js_1.js"></script><script type="text/javascript" src="../../../../angular.io/js_21.js"></script><script type="text/javascript" src="../../../../angular.io/js_22.js"></script><script type="text/javascript" src="../../../../angular.io/js_23.js"></script><script type="text/javascript" src="../../../../angular.io/js_24.js"></script><script type="text/javascript" src="../../../../angular.io/js_25.js"></script><script type="text/javascript" src="../../../../angular.io/js_26.js"></script><script type="text/javascript" src="../../../../angular.io/js_27.js"></script><script type="text/javascript" src="../../../../angular.io/js_28.js"></script></head><body data-page="/web/state/api/rxjs-operators.md" class="ready">
    <section class="cover" style="background: linear-gradient(to left bottom, hsl(212, 100%, 85%) 0%,hsl(137, 100%, 85%) 100%)"><div class="mask"></div><div class="cover-main"><!--cover--></div></section><main><button class="sidebar-toggle" aria-label="Menu"><div class="sidebar-toggle-button"><span></span><span></span><span></span></div></button><aside class="sidebar"><div class="search"><div class="input-wrap">
      <input type="search" value="" aria-label="Search text" placeholder="Type to search">
      <div class="clear-button">
        <svg width="26" height="24">
          <circle cx="12" cy="12" r="11" fill="#ccc"></circle>
          <path stroke="white" stroke-width="2" d="M8.25,8.25,15.75,15.75"></path>
          <path stroke="white" stroke-width="2" d="M8.25,15.75,15.75,8.25"></path>
        </svg>
      </div>
    </div>
    <div class="results-panel"></div>
    </div><h1 class="app-name"><a class="app-name-link" data-nosearch="" href="./rxjs-operators.html">@rx-angular</a></h1><div class="sidebar-nav"><!-- - @rx-angular/template [BETA]

  - Getting started

    - [Overview](/template/overview.md)
    - [Setup](/template/basic-setup.md)

  - Theory

    - [Rendering issues in Angular](/template/theory/rendering-issues.md)
    - [Concepts](/template/theory/concepts.md)

  - Features

    - [LetDirective](/template/features/let.md)
    - [PushPipe](/template/features/push.md)
    - [RenderStrategies](/template/features/render-strategies.md)

  - Experimental

    - [Unpatch directive](/template/experimental/unpatch.md) -->

<ul><li><p><strong>@rx-angular/state</strong></p><ul><li><p>Getting started</p><ul><li><a href="../general/overview.html" title="Overview">Overview</a></li><li><a href="../general/basic-setup.html" title="Setup">Setup</a></li></ul></li><li><p>API</p><ul><li><a href="./rx-state.html" title="RxState">RxState</a></li><li class="active"><a href="./rxjs-operators.html" title="RxJS Operators">RxJS Operators</a><ul class="app-sub-sidebar"><li><a class="section-link" href="./rxjs-operators.html" title="Overview">Overview</a></li><li><a class="section-link" href="./rxjs-operators.html" title="distinctUntilSomeChanged">distinctUntilSomeChanged</a></li><li><a class="section-link" href="./rxjs-operators.html" title="select">select</a></li><li><a class="section-link" href="./rxjs-operators.html" title="selectSlice">selectSlice</a></li><li><a class="section-link" href="./rxjs-operators.html" title="stateful">stateful</a></li></ul></li><li><a href="./transformation-helpers.html" title="Transformation helpers">Transformation helpers</a></li><li><a href="./interfaces.html" title="Interfaces">Interfaces</a></li></ul></li><li><p>Tutorials</p><ul><li><a href="../tutorials/basic-tutorial.html" title="Basic tutorial">Basic tutorial</a></li><li><a href="../tutorials/incrementing-value.html" title="Incrementing a value">Incrementing a value</a></li><li><a href="../tutorials/from-imperative-to-reactive.html" title="Migrating to RxState">Migrating to RxState</a></li><li><a href="../tutorials/passing-observables.html" title="Passing observables directly">Passing observables directly</a></li></ul></li><li><p>Recipes</p><ul><li><a href="../howtos/determine-state.html" title="Determine state type">Determine state type</a></li><li><a href="../howtos/manage-viewmodel.html" title="Manage ViewModel">Manage ViewModel</a></li><li><a href="../howtos/partial-updates.html" title="Run partial updates">Run partial updates</a></li><li><a href="../howtos/load-data-on-route-change.html" title="Load data on route change">Load data on route change</a></li><li><a href="../howtos/hostbindings.html" title="Work with HostBindings">Work with HostBindings</a></li><li><a href="../howtos/rx-state-as-global-state.html" title="Use RxState as Global State">Use RxState as Global State</a></li></ul></li><li><p>Integrations</p><ul><li><a href="../integrations/compose-state-using-ngrx-selectors.html" title="Reuse ngrx selectors to compose state">Reuse ngrx selectors to compose state</a></li><li><a href="../integrations/manage-entities-ngrx.html" title="Manage entities using @ngrx/entity">Manage entities using <code>@ngrx/entity</code></a></li></ul></li></ul></li></ul><hr>
<ul><li><p><strong>Links</strong></p></li><li><p><a href="https://github.com/rx-angular/rx-angular" target="_blank" rel="noopener" title=" Github"><img src="../../../../icongr.am/simple/github.svg" data-origin="https://icongr.am/simple/github.svg?color=808080&amp;size=24" alt="Github"> Github</a></p></li><li><p><a href="https://discord.com/invite/XWWGZsQ" target="_blank" rel="noopener" title=" Discord"><img src="../../../../icongr.am/material/discord.svg" data-origin="https://icongr.am/material/discord.svg?size=24&amp;color=7289da" alt="Discord"> Discord</a></p></li></ul></div></aside><section class="content"><article class="markdown-section" id="main"><h2 id="overview"><a href="./rxjs-operators.html" data-id="overview" class="anchor"><span>Overview</span></a></h2><p>This set of operators can be used in combination with the RxState service or outside of it. The main goal is to optimize data transfer between components, services, and templates.</p><hr>
<h2 id="distinctuntilsomechanged"><a href="./rxjs-operators.html" data-id="distinctuntilsomechanged" class="anchor"><span>distinctUntilSomeChanged</span></a></h2><p>Returns an Observable that emits all items emitted by the source Observable that are distinct by comparison from
the previous item. Comparison will be done for each set key in the <code>keys</code> array.</p><p>You can fine grain your distinct checks by providing a <code>KeyCompareMap</code> with those keys you want to compute
explicitly different</p><p>The name <code>distinctUntilSomeChanged</code> was picked since it internally iterates over the <code>keys</code> and utilizes the
<a href="https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Array/some" target="_blank" rel="noopener">some</a> method in order to
compute if values are distinct or not.</p><p><em>Example</em></p><pre v-pre="" data-lang="typescript"><code class="lang-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token keyword">of</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> distinctUntilSomeChanged <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rx-angular/state'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">of</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'Hans'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'Sophie'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'Han Solo'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'HanSophie'</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">distinctUntilSomeChanged</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// displays:</span>
<span class="token comment">// { age: 4, name: 'Hans'}</span>
<span class="token comment">// { age: 7, name: 'Sophie'}</span>
<span class="token comment">// { age: 5, name: 'Han Solo'}</span>
<span class="token comment">// { age: 5, name: 'HanSophie'}</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span class="error">Error</span><span class="success">Copied</span></button></pre><p><em>Example</em></p><pre v-pre="" data-lang="typescript"><code class="lang-typescript"><span class="token comment">// An example with `KeyCompareMap`</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token keyword">of</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> distinctUntilSomeChanged <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/operators'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> customComparison<span class="token operator">:</span> KeyCompareMap<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">name</span><span class="token operator">:</span> <span class="token punctuation">(</span>oldName<span class="token punctuation">,</span> newName<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    oldName<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">===</span> newName<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">of</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'Hans'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'Sophie'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'Han Solo'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'HanSophie'</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">distinctUntilSomeChanged</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> customComparison<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// displays:</span>
<span class="token comment">// { age: 4, name: 'Hans' }</span>
<span class="token comment">// { age: 7, name: 'Sophie' }</span>
<span class="token comment">// { age: 5, name: 'Han Solo' }</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span class="error">Error</span><span class="success">Copied</span></button></pre><h3 id="signature"><a href="./rxjs-operators.html" data-id="signature" class="anchor"><span>Signature</span></a></h3><pre v-pre="" data-lang="typescript"><code class="lang-typescript"><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">distinctUntilSomeChanged</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> object<span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  keys<span class="token operator">:</span> <span class="token constant">K</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  keyCompareMap<span class="token operator">?</span><span class="token operator">:</span> KeyCompareMap<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token operator">:</span> MonoTypeOperatorFunction<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span class="error">Error</span><span class="success">Copied</span></button></pre><h3 id="parameters"><a href="./rxjs-operators.html" data-id="parameters" class="anchor"><span>Parameters</span></a></h3><h4 id="keys"><a href="./rxjs-operators.html" data-id="keys" class="anchor"><span>keys</span></a></h4><h5 id="typeof-k"><a href="./rxjs-operators.html" data-id="typeof-k" class="anchor"><span>typeof: K[]</span></a></h5><h4 id="keycomparemap"><a href="./rxjs-operators.html" data-id="keycomparemap" class="anchor"><span>keyCompareMap</span></a></h4><h5 id="typeof-keycomparemap60t62"><a href="./rxjs-operators.html" data-id="typeof-keycomparemap60t62" class="anchor"><span>typeof: KeyCompareMap&lt;T&gt;</span></a></h5><hr>
<h2 id="select"><a href="./rxjs-operators.html" data-id="select" class="anchor"><span>select</span></a></h2><p>returns the state as cached and distinct <code>Observable&lt;A&gt;</code>. Accepts arbitrary
<a href="https://rxjs-dev.firebaseapp.com/guide/operators" target="_blank" rel="noopener">rxjs operators</a> to enrich the selection with reactive composition.</p><p><em>Example</em></p><pre v-pre="" data-lang="typescript"><code class="lang-typescript"><span class="token keyword">const</span> profilePicture$ <span class="token operator">=</span> state<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">select</span><span class="token punctuation">(</span>
    <span class="token function">pluck</span><span class="token punctuation">(</span><span class="token string">'profilePicture'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">switchMap</span><span class="token punctuation">(</span><span class="token punctuation">(</span>profilePicture<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">mapImageAsync</span><span class="token punctuation">(</span>profilePicture<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span class="error">Error</span><span class="success">Copied</span></button></pre><h3 id="signature-1"><a href="./rxjs-operators.html" data-id="signature-1" class="anchor"><span>Signature</span></a></h3><pre v-pre="" data-lang="typescript"><code class="lang-typescript"><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">select</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>op<span class="token operator">:</span> OperatorFunction<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> OperatorFunction<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span class="error">Error</span><span class="success">Copied</span></button></pre><h3 id="parameters-1"><a href="./rxjs-operators.html" data-id="parameters-1" class="anchor"><span>Parameters</span></a></h3><h4 id="op"><a href="./rxjs-operators.html" data-id="op" class="anchor"><span>op</span></a></h4><h5 id="typeof-operatorfunction60t-a62"><a href="./rxjs-operators.html" data-id="typeof-operatorfunction60t-a62" class="anchor"><span>typeof: OperatorFunction&lt;T, A&gt;</span></a></h5><hr>
<h2 id="selectslice"><a href="./rxjs-operators.html" data-id="selectslice" class="anchor"><span>selectSlice</span></a></h2><p>Returns an Observable that emits only the provided <code>keys</code> emitted by the source Observable. Each key will get
filtered to only emit <em>defined</em> values as well as checked for distinct emissions.
Comparison will be done for each set key in the <code>keys</code> array.</p><p>You can fine grain your distinct checks by providing a <code>KeyCompareMap</code> with those keys you want to compute
explicitly different</p><p><em>Example</em></p><pre v-pre="" data-lang="typescript"><code class="lang-typescript"><span class="token comment">// An example with a custom comparison applied to each key</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token keyword">of</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> selectSlice <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rx-angular/state'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> state$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span>MyState<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">of</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'myTitle'</span><span class="token punctuation">,</span> panelOpen<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'myTitle2'</span><span class="token punctuation">,</span> panelOpen<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'newTitle'</span><span class="token punctuation">,</span> panelOpen<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'newTitle'</span><span class="token punctuation">,</span> panelOpen<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">selectSlice</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'panelOpen'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// displays:</span>
<span class="token comment">//  { title: 'myTitle', panelOpen: true },</span>
<span class="token comment">//  { title: 'myTitle2', panelOpen: true },</span>
<span class="token comment">//  { title: 'newTitle', panelOpen: true },</span>
<span class="token comment">//  { title: 'newTitle', panelOpen: false }</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span class="error">Error</span><span class="success">Copied</span></button></pre><p><em>Example</em></p><pre v-pre="" data-lang="typescript"><code class="lang-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token keyword">of</span><span class="token punctuation">,</span> Observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> tap <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/operators'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> selectSlice <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rx-angular/state'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">MyState</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  items<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  panelOpen<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Select items and title.</span>
<span class="token comment">// apply custom compare logic for the items array</span>
<span class="token keyword">const</span> customComparison<span class="token operator">:</span> KeyCompareMap<span class="token operator">&lt;</span>MyState<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">items</span><span class="token operator">:</span> <span class="token punctuation">(</span>oldItems<span class="token punctuation">,</span> newItems<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">compareItems</span><span class="token punctuation">(</span>oldItems<span class="token punctuation">,</span> newItems<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> state$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span>MyState<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">of</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'myTitle'</span><span class="token punctuation">,</span> items<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> panelOpen<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'myTitle'</span><span class="token punctuation">,</span> items<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> panelOpen<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'nextTitle'</span><span class="token punctuation">,</span> items<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'baR'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> panelOpen<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'nextTitle'</span><span class="token punctuation">,</span> items<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'fooRz'</span><span class="token punctuation">,</span> <span class="token string">'boo'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> panelOpen<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> slice$ <span class="token operator">=</span> state$
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">selectSlice</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'items'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">tap</span><span class="token punctuation">(</span><span class="token builtin">console</span><span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// displays:</span>
<span class="token comment">// { title: 'myTitle', items: ['foo', 'bar'] }</span>
<span class="token comment">// { title: 'nextTitle', items: ['foo', 'baR'] }</span>
<span class="token comment">// { title: 'nextTitle', items: ['fooRz', 'boo'] }</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span class="error">Error</span><span class="success">Copied</span></button></pre><h3 id="signature-2"><a href="./rxjs-operators.html" data-id="signature-2" class="anchor"><span>Signature</span></a></h3><pre v-pre="" data-lang="typescript"><code class="lang-typescript"><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">selectSlice</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> object<span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  keys<span class="token operator">:</span> <span class="token constant">K</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  keyCompareMap<span class="token operator">?</span><span class="token operator">:</span> KeyCompareMap<span class="token operator">&lt;</span><span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token operator">:</span> OperatorFunction<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> PickSlice<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span class="error">Error</span><span class="success">Copied</span></button></pre><h3 id="parameters-2"><a href="./rxjs-operators.html" data-id="parameters-2" class="anchor"><span>Parameters</span></a></h3><h4 id="keys-1"><a href="./rxjs-operators.html" data-id="keys-1" class="anchor"><span>keys</span></a></h4><h5 id="typeof-k-1"><a href="./rxjs-operators.html" data-id="typeof-k-1" class="anchor"><span>typeof: K[]</span></a></h5><h4 id="keycomparemap-1"><a href="./rxjs-operators.html" data-id="keycomparemap-1" class="anchor"><span>keyCompareMap</span></a></h4><h5 id="typeof-keycomparemap60-p-in-k-tp-62"><a href="./rxjs-operators.html" data-id="typeof-keycomparemap60-p-in-k-tp-62" class="anchor"><span>typeof: KeyCompareMap&lt;{ [P in K]: T[P] }&gt;</span></a></h5><hr>
<h2 id="stateful"><a href="./rxjs-operators.html" data-id="stateful" class="anchor"><span>stateful</span></a></h2><p>As the name <code>stateful</code> implies this operator is useful when you process an Observable which maintains state.</p><p>Maintaining state as an <code>Observable</code> source comes with a handful of repetitive as well as use case specific tasks.</p><p>It acts like the Observables <code>pipe</code> method.
It accepts RxJS operators and composes them like <code>Observable#pipe</code> and the standalone <code>pipe</code> method.</p><p>Furthermore, it takes care of the above mentioned repetitive tasks as listed below.</p><p>You will always (aka repetitive) want to ensure that:</p><ul><li>only distinct state changes are emitted</li><li>only defined values are emitted (filter out undefined, which ensures lazy state)</li><li>share and replay custom operations for multiple subscribers (saves performance)</li></ul><p>You will sometimes (aka situational) need:</p><ul><li>a subset of the state (derivations)</li><li>compose the state with other Observables or change the Observables behaviour</li></ul><p>Note that <code>RxState#connect</code> already applies the <code>stateful</code> operator under the hood.</p><p><em>Example</em></p><pre v-pre="" data-lang="typescript"><code class="lang-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> map <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/operators'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> stateful <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rx-angular/state'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> state$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> items<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> derivation$ <span class="token operator">=</span> state$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">stateful</span><span class="token punctuation">(</span>
    <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>list<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> length <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span class="error">Error</span><span class="success">Copied</span></button></pre><h3 id="signature-3"><a href="./rxjs-operators.html" data-id="signature-3" class="anchor"><span>Signature</span></a></h3><pre v-pre="" data-lang="typescript"><code class="lang-typescript"><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">stateful</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> MonoTypeOperatorFunction<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span class="error">Error</span><span class="success">Copied</span></button></pre><h3 id="signature-4"><a href="./rxjs-operators.html" data-id="signature-4" class="anchor"><span>Signature</span></a></h3><pre v-pre="" data-lang="typescript"><code class="lang-typescript"><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">stateful</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  optionalDerive<span class="token operator">:</span> OperatorFunction<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token operator">:</span> OperatorFunction<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token constant">R</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span class="error">Error</span><span class="success">Copied</span></button></pre><h3 id="parameters-3"><a href="./rxjs-operators.html" data-id="parameters-3" class="anchor"><span>Parameters</span></a></h3><h4 id="optionalderive"><a href="./rxjs-operators.html" data-id="optionalderive" class="anchor"><span>optionalDerive</span></a></h4><h5 id="typeof-operatorfunction60t-r62"><a href="./rxjs-operators.html" data-id="typeof-operatorfunction60t-r62" class="anchor"><span>typeof: OperatorFunction&lt;T, R&gt;[]</span></a></h5></article></section></main>
    <!-- Settings -->
    <script>
      window.$docsify = {
        search: 'auto',
        // Name that will be displayed in sidebar
        name: '@rx-angular',
        // Takes only # & ## as sidebar links
        subMaxLevel: 2,
        // Show sidebar
        loadSidebar: true,
        // Coverpage url
        coverpage: './web/partials/_coverpage.md',
        // Prevents multiple downloads of sidebar
        alias: {
          '/.*/_sidebar.md': './web/partials/_sidebar.md',
          '/_sidebar.md': './web/partials/_sidebar.md',
        },
        routerMode: 'history',
        // Autoscroll content to the top when changing page
        auto2top: true,
        relativePath: true,
      };
    </script>
    <!-- Main script -->
    <script src="../../../../cdn.jsdelivr.net/npm/docsify/lib/docsify.min.js"></script>
    <!-- Typescript highlight -->
    <script src="../../../../cdn.jsdelivr.net/npm/prismjs@1.21.0/components/prism-typescript.min.js"></script>
    <!-- Search -->
    <script src="../../../../cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
    <!-- Zoom image -->
    <script src="../../../../cdn.jsdelivr.net/npm/docsify/lib/plugins/zoom-image.min.js"></script>
    <!-- Copy code plugin -->
    <script src="https://unpkg.com/docsify-copy-code@2"></script>
  

<div class="progress" style="opacity: 0; width: 0%;"></div></body></html>