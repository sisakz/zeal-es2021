<html><!--<![endif]--><!-- Mirrored from phpunit.readthedocs.io/en/7.1/extending-phpunit.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 14 Jul 2018 16:54:11 GMT --><head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>12. Extending PHPUnit</title>
  

  
  
  
  

  

  
  
    

  

  
  <link rel="stylesheet" href="_static/pygments.css" type="text/css">
  <link rel="stylesheet" href="../../../media.readthedocs.org/css/sphinx_rtd_theme.css" type="text/css">
    <link rel="index" title="Index" href="genindex.html">
    <link rel="search" title="Search" href="search.html">
    <link rel="copyright" title="Copyright" href="copyright.html">
    <link rel="next" title="1. Assertions" href="assertions.html">
    <link rel="prev" title="11. Logging" href="logging.html"> 

  
  <script src="_static/js/modernizr.min.js"></script>


<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="extending-phpunit.html">

<link rel="stylesheet" href="../../../media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css">

<script type="text/javascript" src="_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'extending-phpunit'
READTHEDOCS_DATA['source_suffix'] = '.rst'
</script>

<script type="text/javascript" src="../../../media.readthedocs.org/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index-2.html" class="icon icon-home"> PHPUnit
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://phpunit.readthedocs.io/en/7.1/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs">
    <input type="hidden" name="check_keywords" value="yes">
    <input type="hidden" name="area" value="default">
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">1. Installing PHPUnit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#php-archive-phar">PHP Archive (PHAR)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#windows">Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#verifying-phpunit-phar-releases">Verifying PHPUnit PHAR Releases</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#composer">Composer</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#optional-packages">Optional packages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="writing-tests-for-phpunit.html">2. Writing Tests for PHPUnit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="writing-tests-for-phpunit.html#test-dependencies">Test Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing-tests-for-phpunit.html#data-providers">Data Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing-tests-for-phpunit.html#testing-exceptions">Testing Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing-tests-for-phpunit.html#testing-php-errors">Testing PHP Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing-tests-for-phpunit.html#testing-output">Testing Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing-tests-for-phpunit.html#error-output">Error output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="writing-tests-for-phpunit.html#edge-cases">Edge cases</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="textui.html">3. The Command-Line Test Runner</a><ul>
<li class="toctree-l2"><a class="reference internal" href="textui.html#command-line-options">Command-Line Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="textui.html#testdox">TestDox</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fixtures.html">4. Fixtures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fixtures.html#more-setup-than-teardown">More setUp() than tearDown()</a></li>
<li class="toctree-l2"><a class="reference internal" href="fixtures.html#variations">Variations</a></li>
<li class="toctree-l2"><a class="reference internal" href="fixtures.html#sharing-fixture">Sharing Fixture</a></li>
<li class="toctree-l2"><a class="reference internal" href="fixtures.html#global-state">Global State</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="organizing-tests.html">5. Organizing Tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="organizing-tests.html#composing-a-test-suite-using-the-filesystem">Composing a Test Suite Using the Filesystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="organizing-tests.html#composing-a-test-suite-using-xml-configuration">Composing a Test Suite Using XML Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="risky-tests.html">6. Risky Tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="risky-tests.html#useless-tests">Useless Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="risky-tests.html#unintentionally-covered-code">Unintentionally Covered Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="risky-tests.html#output-during-test-execution">Output During Test Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="risky-tests.html#test-execution-timeout">Test Execution Timeout</a></li>
<li class="toctree-l2"><a class="reference internal" href="risky-tests.html#global-state-manipulation">Global State Manipulation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="incomplete-and-skipped-tests.html">7. Incomplete and Skipped Tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="incomplete-and-skipped-tests.html#incomplete-tests">Incomplete Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="incomplete-and-skipped-tests.html#skipping-tests">Skipping Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="incomplete-and-skipped-tests.html#skipping-tests-using-requires">Skipping Tests using @requires</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="database.html">8. Database Testing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="database.html#supported-vendors-for-database-testing">Supported Vendors for Database Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html#difficulties-in-database-testing">Difficulties in Database Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html#the-four-stages-of-a-database-test">The four stages of a database test</a><ul>
<li class="toctree-l3"><a class="reference internal" href="database.html#clean-up-database">1. Clean-Up Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html#set-up-fixture">2. Set up fixture</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html#run-test-verify-outcome-and-teardown">3â€“5. Run Test, Verify outcome and Teardown</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="database.html#configuration-of-a-phpunit-database-testcase">Configuration of a PHPUnit Database TestCase</a><ul>
<li class="toctree-l3"><a class="reference internal" href="database.html#implementing-getconnection">Implementing getConnection()</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html#implementing-getdataset">Implementing getDataSet()</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html#what-about-the-database-schema-ddl">What about the Database Schema (DDL)?</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html#tip-use-your-own-abstract-database-testcase">Tip: Use your own Abstract Database TestCase</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="database.html#understanding-datasets-and-datatables">Understanding DataSets and DataTables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="database.html#available-implementations">Available Implementations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="database.html#flat-xml-dataset">Flat XML DataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#xml-dataset">XML DataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#mysql-xml-dataset">MySQL XML DataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#yaml-dataset">YAML DataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#csv-dataset">CSV DataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#array-dataset">Array DataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#query-sql-dataset">Query (SQL) DataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#database-db-dataset">Database (DB) Dataset</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#replacement-dataset">Replacement DataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#dataset-filter">DataSet Filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#composite-dataset">Composite DataSet</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="database.html#beware-of-foreign-keys">Beware of Foreign Keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html#implementing-your-own-datasets-datatables">Implementing your own DataSets/DataTables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="database.html#using-the-database-connection-api">Using the Database Connection API</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html#database-assertions-api">Database Assertions API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="database.html#asserting-the-row-count-of-a-table">Asserting the Row-Count of a Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html#asserting-the-state-of-a-table">Asserting the State of a Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html#asserting-the-result-of-a-query">Asserting the Result of a Query</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html#asserting-the-state-of-multiple-tables">Asserting the State of Multiple Tables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="database.html#frequently-asked-questions">Frequently Asked Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="database.html#will-phpunit-re-create-the-database-schema-for-each-test">Will PHPUnit (re-)create the database schema for each test?</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html#am-i-required-to-use-pdo-in-my-application-for-the-database-extension-to-work">Am I required to use PDO in my application for the Database Extension to work?</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html#what-can-i-do-when-i-get-a-too-much-connections-error">What can I do, when I get a â€œToo much Connectionsâ€œ Error?</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html#how-to-handle-null-with-flat-xml-csv-datasets">How to handle NULL with Flat XML / CSV Datasets?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="test-doubles.html">9. Test Doubles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="test-doubles.html#stubs">Stubs</a></li>
<li class="toctree-l2"><a class="reference internal" href="test-doubles.html#mock-objects">Mock Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="test-doubles.html#prophecy">Prophecy</a></li>
<li class="toctree-l2"><a class="reference internal" href="test-doubles.html#mocking-traits-and-abstract-classes">Mocking Traits and Abstract Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="test-doubles.html#stubbing-and-mocking-web-services">Stubbing and Mocking Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="test-doubles.html#mocking-the-filesystem">Mocking the Filesystem</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="code-coverage-analysis.html">10. Code Coverage Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="code-coverage-analysis.html#software-metrics-for-code-coverage">Software Metrics for Code Coverage</a></li>
<li class="toctree-l2"><a class="reference internal" href="code-coverage-analysis.html#whitelisting-files">Whitelisting Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="code-coverage-analysis.html#ignoring-code-blocks">Ignoring Code Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="code-coverage-analysis.html#specifying-covered-methods">Specifying Covered Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="code-coverage-analysis.html#edge-cases">Edge Cases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">11. Logging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="logging.html#test-results-xml">Test Results (XML)</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html#code-coverage-xml">Code Coverage (XML)</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html#code-coverage-text">Code Coverage (TEXT)</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">12. Extending PHPUnit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#subclass-phpunit-framework-testcase">Subclass PHPUnit\Framework\TestCase</a></li>
<li class="toctree-l2"><a class="reference internal" href="#write-custom-assertions">Write custom assertions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#implement-phpunit-framework-testlistener">Implement PHPUnit\Framework\TestListener</a></li>
<li class="toctree-l2"><a class="reference internal" href="#implement-phpunitframeworktest">Implement PHPUnitFrameworkTest</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extending-the-testrunner">Extending the TestRunner</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#available-hook-interfaces">Available Hook Interfaces</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="assertions.html">1. Assertions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#static-vs-non-static-usage-of-assertion-methods">Static vs. Non-Static Usage of Assertion Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertarrayhaskey">assertArrayHasKey()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertclasshasattribute">assertClassHasAttribute()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertarraysubset">assertArraySubset()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertclasshasstaticattribute">assertClassHasStaticAttribute()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertcontains">assertContains()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertcontainsonly">assertContainsOnly()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertcontainsonlyinstancesof">assertContainsOnlyInstancesOf()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertcount">assertCount()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertdirectoryexists">assertDirectoryExists()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertdirectoryisreadable">assertDirectoryIsReadable()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertdirectoryiswritable">assertDirectoryIsWritable()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertempty">assertEmpty()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertequalxmlstructure">assertEqualXMLStructure()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertequals">assertEquals()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertfalse">assertFalse()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertfileequals">assertFileEquals()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertfileexists">assertFileExists()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertfileisreadable">assertFileIsReadable()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertfileiswritable">assertFileIsWritable()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertgreaterthan">assertGreaterThan()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertgreaterthanorequal">assertGreaterThanOrEqual()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertinfinite">assertInfinite()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertinstanceof">assertInstanceOf()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertinternaltype">assertInternalType()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertisreadable">assertIsReadable()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertiswritable">assertIsWritable()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertjsonfileequalsjsonfile">assertJsonFileEqualsJsonFile()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertjsonstringequalsjsonfile">assertJsonStringEqualsJsonFile()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertjsonstringequalsjsonstring">assertJsonStringEqualsJsonString()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertlessthan">assertLessThan()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertlessthanorequal">assertLessThanOrEqual()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertnan">assertNan()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertnull">assertNull()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertobjecthasattribute">assertObjectHasAttribute()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertregexp">assertRegExp()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertstringmatchesformat">assertStringMatchesFormat()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertstringmatchesformatfile">assertStringMatchesFormatFile()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertsame">assertSame()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertstringendswith">assertStringEndsWith()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertstringequalsfile">assertStringEqualsFile()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertstringstartswith">assertStringStartsWith()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertthat">assertThat()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#asserttrue">assertTrue()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertxmlfileequalsxmlfile">assertXmlFileEqualsXmlFile()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertxmlstringequalsxmlfile">assertXmlStringEqualsXmlFile()</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html#assertxmlstringequalsxmlstring">assertXmlStringEqualsXmlString()</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="annotations.html">2. Annotations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#author">@author</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#after">@after</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#afterclass">@afterClass</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#backupglobals">@backupGlobals</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#backupstaticattributes">@backupStaticAttributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#before">@before</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#beforeclass">@beforeClass</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#codecoverageignore">@codeCoverageIgnore*</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#covers">@covers</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#coversdefaultclass">@coversDefaultClass</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#coversnothing">@coversNothing</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#dataprovider">@dataProvider</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#depends">@depends</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#doesnotperformassertions">@doesNotPerformAssertions</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#expectedexception">@expectedException</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#expectedexceptioncode">@expectedExceptionCode</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#expectedexceptionmessage">@expectedExceptionMessage</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#expectedexceptionmessageregexp">@expectedExceptionMessageRegExp</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#group">@group</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#large">@large</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#medium">@medium</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#preserveglobalstate">@preserveGlobalState</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#requires">@requires</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#runtestsinseparateprocesses">@runTestsInSeparateProcesses</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#runinseparateprocess">@runInSeparateProcess</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#small">@small</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#test">@test</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#testdox">@testdox</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#testwith">@testWith</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#ticket">@ticket</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html#uses">@uses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">3. The XML Configuration File</a><ul>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#phpunit">PHPUnit</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#test-suites">Test Suites</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#groups">Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#whitelisting-files-for-code-coverage">Whitelisting Files for Code Coverage</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#test-listeners">Test Listeners</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#registering-testrunner-extensions">Registering TestRunner Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#setting-php-ini-settings-constants-and-global-variables">Setting PHP INI settings, Constants and Global Variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">4. Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="copyright.html">5. Copyright</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index-2.html">PHPUnit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index-2.html">Docs</a> Â»</li>
        
      <li>12. Extending PHPUnit</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/sebastianbergmann/phpunit-documentation-english//7.1/src/extending-phpunit.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="extending-phpunit">
<span id="id1"></span><h1>12. Extending PHPUnit</h1>
<p>PHPUnit can be extended in various ways to make the writing of tests
easier and customize the feedback you get from running tests. Here are
common starting points to extend PHPUnit.</p>
<div class="section" id="subclass-phpunit-framework-testcase">
<a class="dashAnchor" name="//apple_ref/Section/Subclass%20PHPUnit%5CFramework%5CTestCase"></a><span id="extending-phpunit-phpunit-framework-testcase"></span><h2>Subclass PHPUnit\Framework\TestCase</h2>
<p>Write custom assertions and utility methods in an abstract subclass of
<code class="docutils literal"><span class="pre">PHPUnit\Framework\TestCase</span></code> and derive your test case
classes from that class. This is one of the easiest ways to extend
PHPUnit.</p>
</div>
<div class="section" id="write-custom-assertions">
<a class="dashAnchor" name="//apple_ref/Section/Write%20custom%20assertions"></a><span id="extending-phpunit-custom-assertions"></span><h2>Write custom assertions</h2>
<p>When writing custom assertions it is the best practice to follow how
PHPUnitâ€™s own assertions are implemented. As you can see in
<a class="reference internal" href="#extending-phpunit-examples-assert-php"><span class="std std-numref">Example 12.1</span></a>, the
<code class="docutils literal"><span class="pre">assertTrue()</span></code> method is just a wrapper around the
<code class="docutils literal"><span class="pre">isTrue()</span></code> and <code class="docutils literal"><span class="pre">assertThat()</span></code> methods:
<code class="docutils literal"><span class="pre">isTrue()</span></code> creates a matcher object that is passed on to
<code class="docutils literal"><span class="pre">assertThat()</span></code> for evaluation.</p>
<div class="literal-block-wrapper docutils container" id="extending-phpunit-examples-assert-php">
<div class="code-block-caption"><span class="caption-number">Example 12.1 </span><span class="caption-text">The assertTrue() and isTrue() methods of the PHPUnitFrameworkAssert class</span></div>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">namespace</span> <span class="nx">PHPUnit\Framework</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="k">abstract</span> <span class="k">class</span> <span class="nc">Assert</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="sd">/**</span>
<span class="sd">     * Asserts that a condition is true.</span>
<span class="sd">     *</span>
<span class="sd">     * @param  boolean $condition</span>
<span class="sd">     * @param  string  $message</span>
<span class="sd">     * @throws PHPUnit\Framework\AssertionFailedError</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">assertTrue</span><span class="p">(</span><span class="nv">$condition</span><span class="p">,</span> <span class="nv">$message</span> <span class="o">=</span> <span class="s1">''</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">self</span><span class="o">::</span><span class="na">assertThat</span><span class="p">(</span><span class="nv">$condition</span><span class="p">,</span> <span class="nx">self</span><span class="o">::</span><span class="na">isTrue</span><span class="p">(),</span> <span class="nv">$message</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>

    <span class="sd">/**</span>
<span class="sd">     * Returns a PHPUnit\Framework\Constraint\IsTrue matcher object.</span>
<span class="sd">     *</span>
<span class="sd">     * @return PHPUnit\Framework\Constraint\IsTrue</span>
<span class="sd">     * @since  Method available since Release 3.3.0</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">isTrue</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">PHPUnit\Framework\Constraint\IsTrue</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p><a class="reference internal" href="#extending-phpunit-examples-istrue-php"><span class="std std-numref">Example 12.2</span></a> shows how
<code class="docutils literal"><span class="pre">PHPUnit\Framework\Constraint\IsTrue</span></code> extends the
abstract base class for matcher objects (or constraints),
<code class="docutils literal"><span class="pre">PHPUnit\Framework\Constraint</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="extending-phpunit-examples-istrue-php">
<div class="code-block-caption"><span class="caption-number">Example 12.2 </span><span class="caption-text">The PHPUnitFrameworkConstraintIsTrue class</span></div>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">namespace</span> <span class="nx">PHPUnit\Framework\Constraint</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">PHPUnit\Framework\Constraint</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">IsTrue</span> <span class="k">extends</span> <span class="nx">Constraint</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Evaluates the constraint for parameter $other. Returns true if the</span>
<span class="sd">     * constraint is met, false otherwise.</span>
<span class="sd">     *</span>
<span class="sd">     * @param mixed $other Value or object to evaluate.</span>
<span class="sd">     * @return bool</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">matches</span><span class="p">(</span><span class="nv">$other</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$other</span> <span class="o">===</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Returns a string representation of the constraint.</span>
<span class="sd">     *</span>
<span class="sd">     * @return string</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">toString</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">'is true'</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span><span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</div>
<p>The effort of implementing the <code class="docutils literal"><span class="pre">assertTrue()</span></code> and
<code class="docutils literal"><span class="pre">isTrue()</span></code> methods as well as the
<code class="docutils literal"><span class="pre">PHPUnit\Framework\Constraint\IsTrue</span></code> class yields the
benefit that <code class="docutils literal"><span class="pre">assertThat()</span></code> automatically takes care of
evaluating the assertion and bookkeeping tasks such as counting it for
statistics. Furthermore, the <code class="docutils literal"><span class="pre">isTrue()</span></code> method can be
used as a matcher when configuring mock objects.</p>
</div>
<div class="section" id="implement-phpunit-framework-testlistener">
<a class="dashAnchor" name="//apple_ref/Section/Implement%20PHPUnit%5CFramework%5CTestListener"></a><span id="extending-phpunit-phpunit-framework-testlistener"></span><h2>Implement PHPUnit\Framework\TestListener</h2>
<p><a class="reference internal" href="#extending-phpunit-examples-simpletestlistener-php"><span class="std std-numref">Example 12.3</span></a>
shows a simple implementation of the <code class="docutils literal"><span class="pre">PHPUnit\Framework\TestListener</span></code>
interface.</p>
<div class="literal-block-wrapper docutils container" id="extending-phpunit-examples-simpletestlistener-php">
<div class="code-block-caption"><span class="caption-number">Example 12.3 </span><span class="caption-text">A simple test listener</span></div>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestListener</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SimpleTestListener</span> <span class="k">implements</span> <span class="nx">TestListener</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">addError</span><span class="p">(</span><span class="nx">PHPUnit\Framework\Test</span> <span class="nv">$test</span><span class="p">,</span> <span class="nx">Exception</span> <span class="nv">$e</span><span class="p">,</span> <span class="nv">$time</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s2">"Error while running test '%s'.</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$test</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">addFailure</span><span class="p">(</span><span class="nx">PHPUnit\Framework\Test</span> <span class="nv">$test</span><span class="p">,</span> <span class="nx">PHPUnit\Framework\AssertionFailedError</span> <span class="nv">$e</span><span class="p">,</span> <span class="nv">$time</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s2">"Test '%s' failed.</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$test</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">addIncompleteTest</span><span class="p">(</span><span class="nx">PHPUnit\Framework\Test</span> <span class="nv">$test</span><span class="p">,</span> <span class="nx">Exception</span> <span class="nv">$e</span><span class="p">,</span> <span class="nv">$time</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s2">"Test '%s' is incomplete.</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$test</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">addRiskyTest</span><span class="p">(</span><span class="nx">PHPUnit\Framework\Test</span> <span class="nv">$test</span><span class="p">,</span> <span class="nx">Exception</span> <span class="nv">$e</span><span class="p">,</span> <span class="nv">$time</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s2">"Test '%s' is deemed risky.</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$test</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">addSkippedTest</span><span class="p">(</span><span class="nx">PHPUnit\Framework\Test</span> <span class="nv">$test</span><span class="p">,</span> <span class="nx">Exception</span> <span class="nv">$e</span><span class="p">,</span> <span class="nv">$time</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s2">"Test '%s' has been skipped.</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$test</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">startTest</span><span class="p">(</span><span class="nx">PHPUnit\Framework\Test</span> <span class="nv">$test</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s2">"Test '%s' started.</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$test</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">endTest</span><span class="p">(</span><span class="nx">PHPUnit\Framework\Test</span> <span class="nv">$test</span><span class="p">,</span> <span class="nv">$time</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s2">"Test '%s' ended.</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$test</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">startTestSuite</span><span class="p">(</span><span class="nx">PHPUnit\Framework\TestSuite</span> <span class="nv">$suite</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s2">"TestSuite '%s' started.</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$suite</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">endTestSuite</span><span class="p">(</span><span class="nx">PHPUnit\Framework\TestSuite</span> <span class="nv">$suite</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s2">"TestSuite '%s' ended.</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$suite</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</div>
<p><a class="reference internal" href="#extending-phpunit-examples-extendedtestlistener-php"><span class="std std-numref">Example 12.4</span></a>
shows how to use the <code class="docutils literal"><span class="pre">PHPUnit\Framework\TestListenerDefaultImplementation</span></code>
trait, which lets you specify only the interface methods that
are interesting for your use case, while providing empty implementations
for all the others.</p>
<div class="literal-block-wrapper docutils container" id="extending-phpunit-examples-extendedtestlistener-php">
<div class="code-block-caption"><span class="caption-number">Example 12.4 </span><span class="caption-text">Using test listener default implementation trait</span></div>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestListenerDefaultImplementation</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ShortTestListener</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">TestListenerDefaultImplementation</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">endTest</span><span class="p">(</span><span class="nx">PHPUnit\Framework\Test</span> <span class="nv">$test</span><span class="p">,</span> <span class="nv">$time</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s2">"Test '%s' ended.</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$test</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</div>
<p>In <a class="reference internal" href="configuration.html#appendixes-configuration-test-listeners"><span class="std std-ref">Test Listeners</span></a> you can see
how to configure PHPUnit to attach your test listener to the test
execution.</p>
</div>
<div class="section" id="implement-phpunitframeworktest">
<a class="dashAnchor" name="//apple_ref/Section/Implement%20PHPUnitFrameworkTest"></a><span id="extending-phpunit-phpunit-framework-test"></span><h2>Implement PHPUnitFrameworkTest</h2>
<p>The <code class="docutils literal"><span class="pre">PHPUnit\Framework\Test</span></code> interface is narrow and
easy to implement. You can write an implementation of
<code class="docutils literal"><span class="pre">PHPUnit\Framework\Test</span></code> that is simpler than
<code class="docutils literal"><span class="pre">PHPUnit\Framework\TestCase</span></code> and that runs
<em>data-driven tests</em>, for instance.</p>
<p><a class="reference internal" href="#extending-phpunit-examples-datadriventest-php"><span class="std std-numref">Example 12.5</span></a>
shows a data-driven test case class that compares values from a file
with Comma-Separated Values (CSV). Each line of such a file looks like
<code class="docutils literal"><span class="pre">foo;bar</span></code>, where the first value is the one we expect
and the second value is the actual one.</p>
<div class="literal-block-wrapper docutils container" id="extending-phpunit-examples-datadriventest-php">
<div class="code-block-caption"><span class="caption-number">Example 12.5 </span><span class="caption-text">A data-driven test</span></div>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">DataDrivenTest</span> <span class="k">implements</span> <span class="nx">PHPUnit\Framework\Test</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$lines</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$dataFile</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lines</span> <span class="o">=</span> <span class="nb">file</span><span class="p">(</span><span class="nv">$dataFile</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">count</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">run</span><span class="p">(</span><span class="nx">PHPUnit\Framework\TestResult</span> <span class="nv">$result</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span> <span class="o">===</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$result</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PHPUnit\Framework\TestResult</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lines</span> <span class="k">as</span> <span class="nv">$line</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$result</span><span class="o">-&gt;</span><span class="na">startTest</span><span class="p">(</span><span class="nv">$this</span><span class="p">);</span>
            <span class="nx">PHP_Timer</span><span class="o">::</span><span class="na">start</span><span class="p">();</span>
            <span class="nv">$stopTime</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>

            <span class="k">list</span><span class="p">(</span><span class="nv">$expected</span><span class="p">,</span> <span class="nv">$actual</span><span class="p">)</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">';'</span><span class="p">,</span> <span class="nv">$line</span><span class="p">);</span>

            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">PHPUnit\Framework\Assert</span><span class="o">::</span><span class="na">assertEquals</span><span class="p">(</span>
                  <span class="nb">trim</span><span class="p">(</span><span class="nv">$expected</span><span class="p">),</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$actual</span><span class="p">)</span>
                <span class="p">);</span>
            <span class="p">}</span>

            <span class="k">catch</span> <span class="p">(</span><span class="nx">PHPUnit\Framework\AssertionFailedError</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$stopTime</span> <span class="o">=</span> <span class="nx">PHP_Timer</span><span class="o">::</span><span class="na">stop</span><span class="p">();</span>
                <span class="nv">$result</span><span class="o">-&gt;</span><span class="na">addFailure</span><span class="p">(</span><span class="nv">$this</span><span class="p">,</span> <span class="nv">$e</span><span class="p">,</span> <span class="nv">$stopTime</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$stopTime</span> <span class="o">=</span> <span class="nx">PHP_Timer</span><span class="o">::</span><span class="na">stop</span><span class="p">();</span>
                <span class="nv">$result</span><span class="o">-&gt;</span><span class="na">addError</span><span class="p">(</span><span class="nv">$this</span><span class="p">,</span> <span class="nv">$e</span><span class="p">,</span> <span class="nv">$stopTime</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nv">$stopTime</span> <span class="o">===</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$stopTime</span> <span class="o">=</span> <span class="nx">PHP_Timer</span><span class="o">::</span><span class="na">stop</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="nv">$result</span><span class="o">-&gt;</span><span class="na">endTest</span><span class="p">(</span><span class="nv">$this</span><span class="p">,</span> <span class="nv">$stopTime</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$test</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DataDrivenTest</span><span class="p">(</span><span class="s1">'data_file.csv'</span><span class="p">);</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nx">PHPUnit\TextUI\TestRunner</span><span class="o">::</span><span class="na">run</span><span class="p">(</span><span class="nv">$test</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span></span>PHPUnit <span class="p">|</span>version<span class="p">|</span>.0 by Sebastian Bergmann and contributors.

.F

Time: <span class="m">0</span> seconds

There was <span class="m">1</span> failure:

<span class="m">1</span><span class="o">)</span> DataDrivenTest
Failed asserting that two strings are equal.
expected string &lt;bar&gt;
difference      &lt;  x&gt;
got string      &lt;baz&gt;
/home/sb/DataDrivenTest.php:32
/home/sb/DataDrivenTest.php:53

FAILURES!
Tests: <span class="m">2</span>, Failures: <span class="m">1</span>.
</pre></div>
</div>
</div>
<div class="section" id="extending-the-testrunner">
<a class="dashAnchor" name="//apple_ref/Section/Extending%20the%20TestRunner"></a><span id="extending-phpunit-testrunner"></span><h2>Extending the TestRunner</h2>
<p>PHPUnit 7.1 supports TestRunner extensions that can hook
into various events during the test execution.
See <a class="reference internal" href="configuration.html#appendixes-configuration-extensions"><span class="std std-ref">Registering TestRunner Extensions</span></a> for details on how
to register extensions in PHPUnitâ€™s XML configuration.</p>
<p>Each available event that the extension can hook into is represented by an
interface that the extension needs to implement.
<a class="reference internal" href="#extending-phpunit-hooks"><span class="std std-ref">Available Hook Interfaces</span></a> lists the available events in
PHPUnit 7.1.</p>
<div class="section" id="available-hook-interfaces">
<a class="dashAnchor" name="//apple_ref/Section/Available%20Hook%20Interfaces"></a><span id="extending-phpunit-hooks"></span><h3>Available Hook Interfaces</h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">AfterIncompleteTestHook</span></code></li>
<li><code class="docutils literal"><span class="pre">AfterLastTestHook</span></code></li>
<li><code class="docutils literal"><span class="pre">AfterRiskyTestHook</span></code></li>
<li><code class="docutils literal"><span class="pre">AfterSkippedTestHook</span></code></li>
<li><code class="docutils literal"><span class="pre">AfterSuccessfulTestHook</span></code></li>
<li><code class="docutils literal"><span class="pre">AfterTestErrorHook</span></code></li>
<li><code class="docutils literal"><span class="pre">AfterTestFailureHook</span></code></li>
<li><code class="docutils literal"><span class="pre">AfterTestWarningHook</span></code></li>
<li><code class="docutils literal"><span class="pre">BeforeFirstTestHook</span></code></li>
<li><code class="docutils literal"><span class="pre">BeforeTestHook</span></code></li>
</ul>
<p><a class="reference internal" href="#extending-phpunit-examples-testrunnerextension"><span class="std std-numref">Example 12.6</span></a> shows an example
for an extension implementing <code class="docutils literal"><span class="pre">BeforeFirstTestHook</span></code> and <code class="docutils literal"><span class="pre">AfterLastTestHook</span></code>:</p>
<div class="literal-block-wrapper docutils container" id="extending-phpunit-examples-testrunnerextension">
<div class="code-block-caption"><span class="caption-number">Example 12.6 </span><span class="caption-text">TestRunner Extension Example</span></div>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">Vendor</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">PHPUnit\Runner\AfterLastTestHook</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">PHPUnit\Runner\BeforeFirstTestHook</span><span class="p">;</span>

<span class="k">final</span> <span class="k">class</span> <span class="nc">MyExtension</span> <span class="k">implements</span> <span class="nx">BeforeFirstTestHook</span><span class="p">,</span> <span class="nx">AfterLastTestHook</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">executeAfterLastTest</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// called after the last test has been run</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">executeBeforeFirstTest</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// called before the first test is being run</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="assertions.html" class="btn btn-neutral float-right" title="1. Assertions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="logging.html" class="btn btn-neutral" title="11. Logging" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr>

  <div role="contentinfo">
    <p>
        Â© <a href="copyright.html">Copyright</a> 2018, Sebastian Bergmann.
      
        <span class="commit">
          Revision <code>25b86e5f</code>.
        </span>
      

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: 7.1
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://phpunit.readthedocs.io/en/latest/">latest</a></dd>
        
          <dd><a href="index.html">7.1</a></dd>
        
          <dd><a href="https://phpunit.readthedocs.io/en/7.0/">7.0</a></dd>
        
          <dd><a href="https://phpunit.readthedocs.io/en/master/">master</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="http://readthedocs.org/projects/phpunit/downloads/pdf/7.1/">pdf</a></dd>
        
          <dd><a href="http://readthedocs.org/projects/phpunit/downloads/htmlzip/7.1/">htmlzip</a></dd>
        
          <dd><a href="http://readthedocs.org/projects/phpunit/downloads/epub/7.1/">epub</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="http://readthedocs.org/projects/phpunit/?fromdocs=phpunit">Project Home</a>
          </dd>
          <dd>
            <a href="http://readthedocs.org/builds/phpunit/?fromdocs=phpunit">Builds</a>
          </dd>
      </dl>
      <hr>
      Free document hosting provided by <a href="http://www.readthedocs.org/">Read the Docs</a>.

    </div>
  </div>



  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'7.1',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../media.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
      <script type="text/javascript" src="../../../media.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
      <script type="text/javascript" src="../../../media.readthedocs.org/javascript/underscore.js"></script>
      <script type="text/javascript" src="../../../media.readthedocs.org/javascript/doctools.js"></script>
      <script type="text/javascript" src="../../../media.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>

  

  
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 



<!-- Mirrored from phpunit.readthedocs.io/en/7.1/extending-phpunit.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 14 Jul 2018 16:54:11 GMT -->
</body></html>