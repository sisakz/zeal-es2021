<html><!-- Mirrored from www.php.net/manual/en/mongodb.overview.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 10:11:27 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Architecture</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="mongodb.overview.html">
 <link rel="shorturl" href="mongodb.overview.html">
 <link rel="alternate" href="mongodb.overview.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="mongodb.architecture.html">
 <link rel="prev" href="mongodb.architecture.html">
 <link rel="next" href="mongodb.connection-handling.html">

 <link rel="alternate" href="mongodb.overview.html" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/mongodb.overview.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/mongodb.overview.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/mongodb.overview.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/mongodb.overview.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/mongodb.overview.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/ro/mongodb.overview.php" hreflang="ro">
 <link rel="alternate" href="https://www.php.net/manual/ru/mongodb.overview.php" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/mongodb.overview.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/mongodb.overview.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0aba.css?t=1539771603&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2ecf.css?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedba57.css?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached3afa.css?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>


</head>
<body class="docs " style="">


<div class="headsup"><a href="https://www.php.net/conferences/index.php#id2021-09-08-1">Longhorn PHP 2021</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.attributes.html">Attributes</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.database.html">Database Extensions</a></li>      <li><a href="refs.database.vendors.html">Vendor Specific Database Extensions</a></li>      <li><a href="set.mongodb.html">MongoDB</a></li>      <li><a href="mongodb.architecture.html">Driver Architecture and Internals</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="mongodb.overview" class="article">
  
  <h1>Architecture Overview</h1>


  <p class="para">
   This section explains how all the different parts of the driver fit
   together. From the different language runtimes, through the extension and
   to the PHP libraries on top. This new architecture has replaced the old
   <code class="code">mongo</code> extension. We refer to the new one
   as the <code class="code">mongodb</code> extension.
  </p>

  <p class="para">
   </p><div class="mediaobject">
    
    <div class="imageobject">
     <img src="images/f3bc48edf40d5e3e09a166c7fadc7efb-driver_arch.png" alt="Architecture Diagram" width="625" height="450">
    </div>
   </div>
  <p></p>

  <p class="para">
   At the top of this stack sits a pure
   <a href="https://github.com/mongodb/mongo-php-library" class="link external">»&nbsp;PHP library</a>, which we will
   distribute as a Composer package. This library will provide an API similar
   to what users have come to expect from the old mongo driver (e.g. CRUD methods,
   database and collection objects, command helpers) and we expect it to be a
   common dependency for most applications built with MongoDB. This library
   will also implement common
   <a href="https://github.com/mongodb/specifications" class="link external">»&nbsp;specifications</a>, in the
   interest of improving API consistency across all of the
   <a href="https://docs.mongodb.com/ecosystem/drivers/" class="link external">»&nbsp;drivers</a> maintained by
   MongoDB (and hopefully some community drivers, too).
  </p>

  <p class="para">
   Sitting below that library we have the lower level driver.
   This extension will effectively form the glue between PHP and our
   system libraries (<a href="https://github.com/mongodb/mongo-c-driver" class="link external">»&nbsp;libmongoc</a> and
   <a href="https://github.com/mongodb/libbson" class="link external">»&nbsp;libbson</a>). This extension
   will expose an identical public API for the most essential and
   performance-sensitive functionality:

   </p><ul class="simplelist">
    <li class="member">Connection management</li>
    <li class="member">BSON encoding and decoding</li>
    <li class="member">Object document serialization (to support ODM libraries)</li>
    <li class="member">Executing commands and write operations</li>
    <li class="member">Handling queries and cursors</li>
   </ul>
  <p></p>

  <p class="para">
   By decoupling the driver internals and a high-level API into an extension and
   PHP libraries, respectively, we hope to reduce our maintainence burden and
   allow for faster iteration on new features. As a welcome side effect, this
   also makes it easier for anyone to contribute to the driver. Additionally,
   an identical public API will make it that much easier to port an
   application across PHP runtimes, whether the application uses the low-level
   driver directly or a higher-level PHP library.
  </p>
  <p class="para">
   <a href="https://docs.mongodb.com/manual/core/gridfs/" class="link external">»&nbsp;GridFS</a> is a great example
   of why we chose this direction.
   Although we implemented GridFS in C for our old mongo driver, it is actually
   quite a high-level specification. Its API is just an abstraction for
   accessing two collections: files (i.e. metadata) and chunks (i.e. blocks of
   data). Likewise, all of the syntactic sugar found in the old mongo driver,
   such as processing uploaded files or exposing GridFS files as PHP streams,
   can be implemented in pure PHP. Provided we have performant methods for
   reading from and writing to GridFS' collections – and thanks to our low
   level extensions, we will – shifting this API to PHP is win-win.
  </p>
  <p class="para">
   Earlier I mentioned that we expect the PHP library to be a common
   dependency for <em class="emphasis">most</em> applications, but not
   <em class="emphasis">all</em>. Some users may prefer to stick to the no-frills
   API offered by the extensions, or create their own high-level abstraction
   (akin to <a href="https://github.com/doctrine/mongodb" class="link external">»&nbsp;Doctrine MongoDB</a> for
   the old mongo driver). Future libraries could include a PHP library geared
   for MongoDB administration, which provides an API for various user
   management and ops commands. The next major version of
   <a href="https://github.com/doctrine/mongodb-odm" class="link external">»&nbsp;Doctrine MongoDB ODM</a> will
   likely also sit directly atop the extensions.
  </p>
  <p class="para">
   While we will continue to maintain and support the old mongo driver and its
   users for the foreseeable future, we invite everyone to use the
   next-generation driver and consider it for any new projects going forward.
   You can find all of the essential components across GitHub and JIRA:

   </p><table class="doctable table">
    <caption><strong>Driver Source Code and JIRA Locations</strong></caption>
    
     <thead>
      <tr>
       <th>Project</th>
       <th>GitHub</th>
       <th>JIRA</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>PHP Library</td>
       <td><a href="https://github.com/mongodb/mongo-php-library" class="link external">»&nbsp;mongodb/mongo-php-library</a></td>
       <td><a href="https://jira.mongodb.org/browse/PHPLIB" class="link external">»&nbsp;PHPLIB</a></td>
      </tr>

      <tr>
       <td>PHP 5 and PHP 7 Driver (phongo)</td>
       <td><a href="https://github.com/mongodb/mongo-php-driver" class="link external">»&nbsp;mongodb/mongo-php-driver</a></td>
       <td><a href="https://jira.mongodb.org/browse/PHPC" class="link external">»&nbsp;PHPC</a></td>
      </tr>

     </tbody>
    
   </table>

  <p></p>

  <p class="para">
   The existing <a href="https://jira.mongodb.org/browse/PHP" class="link external">»&nbsp;PHP</a> project in JIRA
   will remain open for reporting bugs against the old mongo driver, but we
   would ask that you use the new projects above for anything pertaining to
   our next-generation drivers.
  </p>
 </div>

<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div>
 <div class="note">There are no user contributed notes for this page.</div></section>    </section><!-- layout-content -->
        


  </div><!-- layout -->

  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from www.php.net/manual/en/mongodb.overview.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 10:11:27 GMT -->

</body></html>