<html><!-- Mirrored from www.php.net/manual/en/function.glob.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:54:41 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>glob</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.glob.html">
 <link rel="shorturl" href="https://www.php.net/glob">
 <link rel="alternate" href="https://www.php.net/glob" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.filesystem.html">
 <link rel="prev" href="function.fwrite.html">
 <link rel="next" href="function.is-dir.html">

 <link rel="alternate" href="function.glob.html" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.glob.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.glob.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.glob.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/function.glob.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.glob.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/ro/function.glob.php" hreflang="ro">
 <link rel="alternate" href="https://www.php.net/manual/ru/function.glob.php" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/function.glob.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.glob.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0aba.css?t=1539771603&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2ecf.css?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedba57.css?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached3afa.css?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>


</head>
<body class="docs " style="">


<div class="headsup"><a href="https://www.php.net/conferences/index.php#id2021-09-08-1">Longhorn PHP 2021</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.attributes.html">Attributes</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.fileprocess.file.html">File System Related Extensions</a></li>      <li><a href="book.filesystem.html">Filesystem</a></li>      <li><a href="ref.filesystem.html">Filesystem Functions</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="function.glob" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">glob</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.3.0, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">glob</span> â€” <span class="dc-title">Find pathnames matching a pattern</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.glob-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>glob</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$pattern</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code><span class="initializer"> = 0</span></span>): <span class="type"><span class="type">array</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   The <span class="function"><strong>glob()</strong></span> function searches for all the pathnames
   matching <code class="parameter">pattern</code> according to the rules used by
   the libc glob() function, which is similar to the rules used by common
   shells.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.glob-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>
    
     <dt>
<code class="parameter">pattern</code></dt>

     <dd>

      <p class="para">
       The pattern. No tilde expansion or parameter substitution is done.
      </p>
      <p class="para">
       Special characters:
       </p><ul class="itemizedlist">
        <li class="listitem">
         <span class="simpara">
          <code class="literal">*</code> - Matches zero or more characters.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <code class="literal">?</code> - Matches exactly one character (any character).
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <code class="literal">[...]</code> - Matches one character from a group of
          characters. If the first character is <code class="literal">!</code>,
          matches any character not in the group.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <code class="literal">\</code> - Escapes the following character,
          except when the <strong><code>GLOB_NOESCAPE</code></strong> flag is used.
         </span>
        </li>
       </ul>
      <p></p>
     </dd>

    
    
     <dt>
<code class="parameter">flags</code></dt>

     <dd>

      <p class="para">
       Valid flags:
       </p><ul class="itemizedlist">
        <li class="listitem">
         <span class="simpara">
          <strong><code>GLOB_MARK</code></strong> - Adds a slash (a backslash on Windows) to each directory returned
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>GLOB_NOSORT</code></strong> - Return files as they appear in the
          directory (no sorting). When this flag is not used, the pathnames are
          sorted alphabetically
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>GLOB_NOCHECK</code></strong> - Return the search pattern if no
          files matching it were found
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>GLOB_NOESCAPE</code></strong> - Backslashes do not quote
          metacharacters
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>GLOB_BRACE</code></strong> - Expands {a,b,c} to match 'a', 'b',
          or 'c'
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>GLOB_ONLYDIR</code></strong> - Return only directory entries
          which match the pattern
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>GLOB_ERR</code></strong> - Stop on read errors (like unreadable
          directories), by default errors are ignored.
         </span>
        </li>
       </ul>
       <blockquote class="note"><p><strong class="note">Note</strong>: 
        <span class="simpara">
         The <strong><code>GLOB_BRACE</code></strong> flag is not available on some non GNU
         systems, like Solaris.
        </span>
       </p></blockquote>
      <p></p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.glob-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns an array containing the matched files/directories, an empty array
   if no file matched or <strong><code>false</code></strong> on error.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    On some systems it is impossible to distinguish between empty match and an
    error.
   </p>
  <p></p></blockquote>
 </div>


 <div class="refsect1 examples" id="refsect1-function.glob-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-2131">
    <p><strong>Example #1 
     Convenient way how <span class="function"><strong>glob()</strong></span> can replace
     <span class="function"><a href="function.opendir.html" class="function">opendir()</a></span> and friends.
    </strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">glob</span><span style="color: #007700">(</span><span style="color: #DD0000">"*.txt"</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$filename</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$filename</span><span style="color: #DD0000">&nbsp;size&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">filesize</span><span style="color: #007700">(</span><span style="color: #0000BB">$filename</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output
something similar to:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>funclist.txt size 44686
funcsummary.txt size 267625
quickref.txt size 137820
</pre></div>
    </div>
   </div>
  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.glob-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">This function will not work on
<a href="features.remote-files.html" class="link">remote files</a> as the file to
be examined must be accessible via the server's filesystem.</span></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    This function isn't available on some systems (e.g. old Sun OS).
   </span>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.glob-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.opendir.html" class="function" rel="rdfs-seeAlso">opendir()</a> - Open directory handle</span></li>
    <li class="member"><span class="function"><a href="function.readdir.html" class="function" rel="rdfs-seeAlso">readdir()</a> - Read entry from directory handle</span></li>
    <li class="member"><span class="function"><a href="function.closedir.html" class="function" rel="rdfs-seeAlso">closedir()</a> - Close directory handle</span></li>
    <li class="member"><span class="function"><a href="function.fnmatch.html" class="function" rel="rdfs-seeAlso">fnmatch()</a> - Match filename against a pattern</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="88250">  
  <a class="name">
  <strong class="user"><em>crayonviolent at phpfreaks dot com</em></strong></a><div class="date" title="2009-01-16 11:50"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom88250">
<div class="phpcode"><code><span class="html">
Since I feel this is rather vague and non-helpful, I thought I'd make a post detailing the mechanics of the glob regex.
<br>
<br>glob uses two special symbols that act like sort of a blend between a meta-character and a quantifier.&nbsp; These two characters are the * and ? 
<br>
<br>The ? matches 1 of any character except a /
<br>The * matches 0 or more of any character except a /
<br>
<br>If it helps, think of the * as the pcre equivalent of .* and ? as the pcre equivalent of the dot (.)
<br>
<br>Note: * and ? function independently from the previous character. For instance, if you do glob("a*.php") on the following list of files, all of the files starting with an 'a' will be returned, but * itself would match:
<br>
<br>a.php // * matches nothing
<br>aa.php // * matches the second 'a'
<br>ab.php // * matches 'b'
<br>abc.php // * matches 'bc'
<br>b.php // * matches nothing, because the starting 'a' fails
<br>bc.php // * matches nothing, because the starting 'a' fails
<br>bcd.php // * matches nothing, because the starting 'a' fails
<br>
<br>It does not match just a.php and aa.php as a 'normal' regex would, because it matches 0 or more of any character, not the character/class/group before it. 
<br>
<br>Executing glob("a?.php") on the same list of files will only return aa.php and ab.php because as mentioned, the ? is the equivalent of pcre's dot, and is NOT the same as pcre's ?, which would match 0 or 1 of the previous character.
<br>
<br>glob's regex also supports character classes and negative character classes, using the syntax [] and [^]. It will match any one character inside [] or match any one character that is not in [^].
<br>
<br>With the same list above, executing 
<br>
<br>glob("[ab]*.php) will return (all of them):
<br>a.php&nbsp; // [ab] matches 'a', * matches nothing
<br>aa.php // [ab] matches 'a', * matches 2nd 'a'
<br>ab.php // [ab] matches 'a', * matches 'b'
<br>abc.php // [ab] matches 'a', * matches 'bc'
<br>b.php // [ab] matches 'b', * matches nothing
<br>bc.php // [ab] matches 'b', * matches 'c'
<br>bcd.php // [ab] matches 'b', * matches 'cd'
<br>
<br>glob("[ab].php") will return a.php and b.php
<br>
<br>glob("[^a]*.php") will return:
<br>b.php // [^a] matches 'b', * matches nothing
<br>bc.php // [^a] matches 'b', * matches 'c'
<br>bcd.php // [^a] matches 'b', * matches 'cd'
<br>
<br>glob("[^ab]*.php") will return nothing because the character class will fail to match on the first character. 
<br>
<br>You can also use ranges of characters inside the character class by having a starting and ending character with a hyphen in between.&nbsp; For example, [a-z] will match any letter between a and z, [0-9] will match any (one) number, etc.. 
<br>
<br>glob also supports limited alternation with {n1, n2, etc..}.&nbsp; You have to specify GLOB_BRACE as the 2nd argument for glob in order for it to work.&nbsp; So for example, if you executed glob("{a,b,c}.php", GLOB_BRACE) on the following list of files:
<br>
<br>a.php
<br>b.php
<br>c.php
<br>
<br>all 3 of them would return.&nbsp; Note: using alternation with single characters like that is the same thing as just doing glob("[abc].php").&nbsp; A more interesting example would be glob("te{xt,nse}.php", GLOB_BRACE) on:
<br>
<br>tent.php
<br>text.php
<br>test.php
<br>tense.php
<br>
<br>text.php and tense.php would be returned from that glob.
<br>
<br>glob's regex does not offer any kind of quantification of a specified character or character class or alternation.&nbsp; For instance, if you have the following files:
<br>
<br>a.php
<br>aa.php
<br>aaa.php
<br>ab.php
<br>abc.php
<br>b.php
<br>bc.php
<br>
<br>with pcre regex you can do ~^a+\.php$~ to return 
<br>
<br>a.php
<br>aa.php
<br>aaa.php
<br>
<br>This is not possible with glob.&nbsp; If you are trying to do something like this, you can first narrow it down with glob, and then get exact matches with a full flavored regex engine.&nbsp; For example, if you wanted all of the php files in the previous list that only have one or more 'a' in it, you can do this:
<br>
<br><span class="default">&lt;?php
<br>&nbsp;&nbsp; $list </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="string">"a*.php"</span><span class="keyword">);
<br>&nbsp;&nbsp; foreach (</span><span class="default">$list </span><span class="keyword">as </span><span class="default">$l</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"~^a+\.php$~"</span><span class="keyword">,</span><span class="default">$file</span><span class="keyword">))
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$files</span><span class="keyword">[] = </span><span class="default">$l</span><span class="keyword">;
<br>&nbsp;&nbsp; }
<br></span><span class="default">?&gt;
<br></span>
<br>glob also does not support lookbehinds, lookaheads, atomic groupings, capturing, or any of the 'higher level' regex functions.
<br>
<br>glob does not support 'shortkey' meta-characters like \w or \d.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="125723">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2021-01-25 12:25"><strong>7 months ago</strong></div>
  <div class="text" id="Hcom125723">
<div class="phpcode"><code><span class="html">
Include dotfiles excluding . and .. special dirs with .[!.]*<br><br><span class="default">&lt;?php<br>$all_files </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">glob</span><span class="keyword">(</span><span class="string">'.[!.]*'</span><span class="keyword">), </span><span class="default">glob</span><span class="keyword">(</span><span class="string">'*'</span><span class="keyword">));<br></span><span class="comment">// or<br></span><span class="default">$all_files </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="string">'{.[!.],}*'</span><span class="keyword">, </span><span class="default">GLOB_BRACE</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92710">  
  <a class="name">
  <strong class="user"><em>uramihsayibok, gmail, com</em></strong></a><div class="date" title="2009-08-04 03:38"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom92710">
<div class="phpcode"><code><span class="html">
Those of you with PHP 5 don't have to come up with these wild functions to scan a directory recursively: the SPL can do it.<br><br><span class="default">&lt;?php<br><br>$dir_iterator </span><span class="keyword">= new </span><span class="default">RecursiveDirectoryIterator</span><span class="keyword">(</span><span class="string">"/path"</span><span class="keyword">);<br></span><span class="default">$iterator </span><span class="keyword">= new </span><span class="default">RecursiveIteratorIterator</span><span class="keyword">(</span><span class="default">$dir_iterator</span><span class="keyword">, </span><span class="default">RecursiveIteratorIterator</span><span class="keyword">::</span><span class="default">SELF_FIRST</span><span class="keyword">);<br></span><span class="comment">// could use CHILD_FIRST if you so wish<br><br></span><span class="keyword">foreach (</span><span class="default">$iterator </span><span class="keyword">as </span><span class="default">$file</span><span class="keyword">) {<br>&nbsp; &nbsp; echo </span><span class="default">$file</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;<br></span><br>Not to mention the fact that $file will be an SplFileInfo class, so you can do powerful stuff really easily:<br><br><span class="default">&lt;?php<br><br>$size </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>foreach (</span><span class="default">$iterator </span><span class="keyword">as </span><span class="default">$file</span><span class="keyword">) {<br>&nbsp; &nbsp; if (</span><span class="default">$file</span><span class="keyword">-&gt;</span><span class="default">isFile</span><span class="keyword">()) {<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">-&gt;</span><span class="default">getPathname</span><span class="keyword">(), </span><span class="default">27</span><span class="keyword">) . </span><span class="string">": " </span><span class="keyword">. </span><span class="default">$file</span><span class="keyword">-&gt;</span><span class="default">getSize</span><span class="keyword">() . </span><span class="string">" B; modified " </span><span class="keyword">. </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">-&gt;</span><span class="default">getMTime</span><span class="keyword">()) . </span><span class="string">"\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$size </span><span class="keyword">+= </span><span class="default">$file</span><span class="keyword">-&gt;</span><span class="default">getSize</span><span class="keyword">();<br>&nbsp; &nbsp; }<br>}<br><br>echo </span><span class="string">"\nTotal file size: "</span><span class="keyword">, </span><span class="default">$size</span><span class="keyword">, </span><span class="string">" bytes\n"</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>\Luna\luna.msstyles: 4190352 B; modified 2008-04-13<br>\Luna\Shell\Homestead\shellstyle.dll: 362496 B; modified 2006-02-28<br>\Luna\Shell\Metallic\shellstyle.dll: 362496 B; modified 2006-02-28<br>\Luna\Shell\NormalColor\shellstyle.dll: 361472 B; modified 2006-02-28<br>\Luna.theme: 1222 B; modified 2006-02-28<br>\Windows Classic.theme: 3025 B; modified 2006-02-28<br><br>Total file size: 5281063 bytes</span>
</code></div>
  </div>
 </div>
  <div class="note" id="68869">  
  <a class="name">
  <strong class="user"><em>redcube at gmx dot de</em></strong></a><div class="date" title="2006-08-14 02:22"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom68869">
<div class="phpcode"><code><span class="html">
Please note that glob('*') ignores all 'hidden' files by default. This means it does not return files that start with a dot (e.g. ".file").
<br>If you want to match those files too, you can use "{,.}*" as the pattern with the GLOB_BRACE flag.
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">// Search for all files that match .* or *
<br></span><span class="default">$files </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="string">'{,.}*'</span><span class="keyword">, </span><span class="default">GLOB_BRACE</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>Note: This also returns the directory special entries . and ..</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108440">  
  <a class="name">
  <strong class="user"><em>Sam Bryan</em></strong></a><div class="date" title="2012-04-26 04:13"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom108440">
<div class="phpcode"><code><span class="html">
glob is case sensitive, even on Windows systems.<br><br>It does support character classes though, so a case insensitive version of<br><span class="default">&lt;?php glob</span><span class="keyword">(</span><span class="string">'my/dir/*.csv'</span><span class="keyword">) </span><span class="default">?&gt;<br></span><br>could be written as<br><span class="default">&lt;?php glob</span><span class="keyword">(</span><span class="string">'my/dir/*.[cC][sS][vV]'</span><span class="keyword">) </span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103022">  
  <a class="name">
  <strong class="user"><em>Ultimater at gmail dot com</em></strong></a><div class="date" title="2011-03-20 11:44"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom103022">
<div class="phpcode"><code><span class="html">
glob() isn't limited to one directory:<br><br><span class="default">&lt;?php<br>$results</span><span class="keyword">=</span><span class="default">glob</span><span class="keyword">(</span><span class="string">"{includes/*.php,core/*.php}"</span><span class="keyword">,</span><span class="default">GLOB_BRACE</span><span class="keyword">);<br>echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">,</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$results</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">),</span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>Just be careful when using GLOB_BRACE regarding spaces around the comma:<br>{includes/*.php,core/*.php} works as expected, but<br>{includes/*.php, core/*.php} with a leading space, will only match the former as expected but not the latter<br>unless you have a directory named " core" on your machine with a leading space.<br>PHP can create such directories quite easily like so:<br>mkdir(" core");</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110340">  
  <a class="name">
  <strong class="user"><em>ni dot pineau at gmail dot com</em></strong></a><div class="date" title="2012-10-12 04:08"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom110340">
<div class="phpcode"><code><span class="html">
Note that in case you are using braces with glob you might retrieve duplicated entries for files that matche more than one item :<br><br><span class="default">&lt;?php<br><br>$a </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="string">'/path/*{foo,bar}.dat'</span><span class="keyword">,</span><span class="default">GLOB_BRACE</span><span class="keyword">);<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>Result : <br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt; /path/file_foo.dat<br>&nbsp; &nbsp; [1] =&gt; /path/file_foobar.dat<br>&nbsp; &nbsp; [2] =&gt; /path/file_foobar.dat<br>)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82455">  
  <a class="name">
  <strong class="user"><em>eric at muyser dot com</em></strong></a><div class="date" title="2008-04-11 08:31"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom82455">
<div class="phpcode"><code><span class="html">
As a follow up to recursively determining all paths (by viajy at yoyo dot org) and opendir being faster than glob (by Sam Yong - hellclanner at live [dot] com).<br><br>The list all dirs code didn't seem to work, at least on my server (provided by parazuce [at] gmail [dot] com).<br><br>I needed a function to create an unlimited multidimensional array, with the names of the folders/files intact (no realpath's, although that is easily possible). This is so I can simply loop through the array, create an expandable link on the folder name, with all the files inside it.<br><br>This is the correct way to recurse I believe (no static, return small arrays to build up the multidimensional array), and includes a check for files/folders beginning with dots.<br><br>// may need modifications<br><br>function list_files($path)<br>{<br>&nbsp; &nbsp; $files = array();<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; if(is_dir($path))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if($handle = opendir($path))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while(($name = readdir($handle)) !== false)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!preg_match("#^\.#", $name))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(is_dir($path . "/" . $name))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $files[$name] = list_files($path . "/" . $name);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $files[] = $name;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; closedir($handle);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return $files;<br>}<br><br>print_r(list_files("/path/to/folder"));<br><br>// example usage<br><br>function list_html($list)<br>{<br>&nbsp; &nbsp; $html = "";<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; foreach($list as $folder =&gt; $file)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if(is_array($list[$folder]))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $html .= "&gt; (folder) " . $folder . "&lt;br&gt;";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $html .= list_html($list[$folder]);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else <br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $html .= " (file) " . $file . "&lt;br&gt;";<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; return $html;<br>}<br><br>echo list_html(list_files("/path/to/folder"));</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92037">  
  <a class="name">
  <strong class="user"><em>nuntius</em></strong></a><div class="date" title="2009-07-06 10:10"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom92037">
<div class="phpcode"><code><span class="html">
First off, it's nice to see all of the different takes on this. Thanks for all of the great examples. <br><br>Fascinated by the foreach usage I was curious how it might work with a for loop. I found that glob was well suited for this, especially compared to opendir.&nbsp; The for loop is always efficient when you want to protect against a potential endless loop. <br><br>$dir=$_SERVER['DOCUMENT_ROOT']."/test/directory_listing/test";<br>&nbsp; &nbsp; echo $dir;<br>&nbsp; &nbsp; $filesArray=glob($dir."/*.*");&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; $line.="&lt;pre&gt;";<br>&nbsp; &nbsp; $line.=print_r($filesArray, true);<br>&nbsp; &nbsp; $line.="&lt;/pre&gt;";<br>&nbsp; &nbsp; $line.="&lt;hr&gt;";<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; for($i=0;$i&lt;count($filesArray);$i++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; $line.=key($filesArray)." - ";&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; $line.=$filesArray[$i]."&lt;br/&gt;";<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; next($filesArray);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; echo $line;<br><br>Note that I pulled the glob array keys if you should need them. <br><br>Also you can tweak it for searches with something like this... (case sensitive)<br><br>$search_names="Somedocname";<br>$filesArray=glob($dir."/".$search_names."*.*");&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>Enjoy!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90672">  
  <a class="name">
  <strong class="user"><em>r dot hartung at roberthartung dot de</em></strong></a><div class="date" title="2009-05-04 12:34"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom90672">
<div class="phpcode"><code><span class="html">
You can use multiple asterisks with the glob() - function.<br><br>Example:<br><br><span class="default">&lt;?php<br>&nbsp; $paths </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="string">'my/*/dir/*.php'</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>$paths will contains paths as following examples:<br><br>- my/1/dir/xyz.php<br>- my/bar/dir/bar.php<br>- my/bar/dir/foo.php</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102931">  
  <a class="name">
  <strong class="user"><em>david dot schueler at tel-billig dot de</em></strong></a><div class="date" title="2011-03-15 06:32"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom102931">
<div class="phpcode"><code><span class="html">
Don't use glob() if you try to list files in a directory where very much files are stored (&gt;100.000). You get an "Allowed memory size of XYZ bytes exhausted ..." error.<br>You may try to increase the memory_limit variable in php.ini. Mine has 128MB set and the script will still reach this limit while glob()ing over 500.000 files.<br><br>The more stable way is to use readdir() on very large numbers of files:<br><span class="default">&lt;?php<br></span><span class="comment">// code snippet<br></span><span class="keyword">if (</span><span class="default">$handle </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)) {<br>&nbsp; &nbsp; while (</span><span class="default">false </span><span class="keyword">!== (</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">))) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// do something with the file<br>&nbsp; &nbsp; &nbsp; &nbsp; // note that '.' and '..' is returned even<br>&nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71531">  
  <a class="name">
  <strong class="user"><em>lesion at autistici dot org</em></strong></a><div class="date" title="2006-12-04 08:14"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom71531">
<div class="phpcode"><code><span class="html">
Maybe all of you still know this, but it seems that if the directory contains some unresolved symlink, glob() simply ignore those files.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83287">  
  <a class="name">
  <strong class="user"><em>heavyraptor at gmail dot com</em></strong></a><div class="date" title="2008-05-19 04:56"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom83287">
<div class="phpcode"><code><span class="html">
glob() (array_sum() and array_map() in fact too) can be very useful if you want to calculate the sum of all the files' sizes located in a directory:<br><br><span class="default">&lt;?php<br>$bytes </span><span class="keyword">= </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'filesize'</span><span class="keyword">,</span><span class="default">glob</span><span class="keyword">(</span><span class="string">'*'</span><span class="keyword">)));<br></span><span class="default">?&gt;<br></span><br>Unfortunately there's no way to do this recursively, using glob() (as far as I know).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74996">  
  <a class="name">
  <strong class="user"><em>nataxia at gmail dot com</em></strong></a><div class="date" title="2007-05-07 04:05"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom74996">
<div class="phpcode"><code><span class="html">
Something I used to sort dir &amp; subdir into array (multidimensional) reflecting dir structure.<br><br>&nbsp; &nbsp; function getRecursiveFolderList($curDir,$currentA=false) <br>&nbsp; &nbsp; &nbsp; {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; $dirs = glob($curDir . '/*', GLOB_ONLYDIR);&nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; $cur = 0;<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach($dirs as $dir)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $currentA[$cur]['path'] = $dir;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $currentA[$cur] = $this-&gt;getRecursiveFolderList($dir,$currentA[$cur]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++$cur;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return $currentA;<br>&nbsp; &nbsp; &nbsp; }</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86425">  
  <a class="name">
  <strong class="user"><em>carlos dot lage at nospam at foo dot bar at gmail dot com</em></strong></a><div class="date" title="2008-10-17 06:18"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom86425">
<div class="phpcode"><code><span class="html">
I lost hours looking for the solution for this problem.<br>glob() wasn't eating up my directory names (stuff like "foobar[]"), and I searched online for some hours, I tried preg_quote to no avail.<br><br>I finally found the proper way to escape stuff in glob() in an obscure Python mailing list:<br><br><span class="default">&lt;?php <br>preg_replace</span><span class="keyword">(</span><span class="string">'/(\*|\?|\[)/'</span><span class="keyword">, </span><span class="string">'[$1]'</span><span class="keyword">, </span><span class="default">$dir_path</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>If you want to add a directory path before your pattern, you should do it like this:<br><br><span class="default">&lt;?php<br>glob</span><span class="keyword">(</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/(\*|\?|\[)/'</span><span class="keyword">, </span><span class="string">'[$1]'</span><span class="keyword">, </span><span class="default">$dir_path</span><span class="keyword">).</span><span class="string">'*.txt'</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span>preg_quote WILL NOT work in all cases (if any).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="119423">  
  <a class="name">
  <strong class="user"><em>simon at paragi dot dk</em></strong></a><div class="date" title="2016-06-02 07:31"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom119423">
<div class="phpcode"><code><span class="html">
This is a simple and versatile function that returns an array tree of files, matching wildcards:<br><br><span class="default">&lt;?php<br></span><span class="comment">// List files in tree, matching wildcards * and ?<br></span><span class="keyword">function </span><span class="default">tree</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">){<br>&nbsp; static </span><span class="default">$match</span><span class="keyword">;<br><br>&nbsp; </span><span class="comment">// Find the real directory part of the path, and set the match parameter<br>&nbsp; </span><span class="default">$last</span><span class="keyword">=</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">,</span><span class="string">"/"</span><span class="keyword">);<br>&nbsp; if(!</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)){<br>&nbsp; &nbsp; </span><span class="default">$match</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">,</span><span class="default">$last</span><span class="keyword">);<br>&nbsp; &nbsp; while(!</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$last</span><span class="keyword">)) &amp;&amp; </span><span class="default">$last</span><span class="keyword">!==</span><span class="default">false</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$last</span><span class="keyword">=</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">,</span><span class="string">"/"</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">);<br>&nbsp; }<br>&nbsp; if(empty(</span><span class="default">$match</span><span class="keyword">)) </span><span class="default">$match</span><span class="keyword">=</span><span class="string">"/*"</span><span class="keyword">;<br>&nbsp; if(!</span><span class="default">$path</span><span class="keyword">=</span><span class="default">realpath</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)) return;<br><br>&nbsp; </span><span class="comment">// List files<br>&nbsp; </span><span class="keyword">foreach(</span><span class="default">glob</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">.</span><span class="default">$match</span><span class="keyword">) as </span><span class="default">$file</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$list</span><span class="keyword">[]=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,</span><span class="string">"/"</span><span class="keyword">)+</span><span class="default">1</span><span class="keyword">);<br>&nbsp; }&nbsp; <br><br>&nbsp; </span><span class="comment">// Process sub directories<br>&nbsp; </span><span class="keyword">foreach(</span><span class="default">glob</span><span class="keyword">(</span><span class="string">"</span><span class="default">$path</span><span class="string">/*"</span><span class="keyword">, </span><span class="default">GLOB_ONLYDIR</span><span class="keyword">) as </span><span class="default">$dir</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$list</span><span class="keyword">[</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">,</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">,</span><span class="string">"/"</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">)+</span><span class="default">1</span><span class="keyword">)]=</span><span class="default">tree</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br>&nbsp; }<br>&nbsp; <br>&nbsp; return @</span><span class="default">$list</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106595">  
  <a class="name">
  <strong class="user"><em>Mike</em></strong></a><div class="date" title="2011-11-21 07:48"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom106595">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br><br></span><span class="keyword">if ( ! </span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'glob_recursive'</span><span class="keyword">))<br>{<br>&nbsp; &nbsp; </span><span class="comment">// Does not support flag GLOB_BRACE<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">glob_recursive</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$flags </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$flags</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">glob</span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">).</span><span class="string">'/*'</span><span class="keyword">, </span><span class="default">GLOB_ONLYDIR</span><span class="keyword">|</span><span class="default">GLOB_NOSORT</span><span class="keyword">) as </span><span class="default">$dir</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">, </span><span class="default">glob_recursive</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">), </span><span class="default">$flags</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$files</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91475">  
  <a class="name">
  <strong class="user"><em>sven at NOSPAM dot sven dot globalunix dot org</em></strong></a><div class="date" title="2009-06-11 09:22"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom91475">
<div class="phpcode"><code><span class="html">
If you want to use wildcard expressions (like they are used by glob() ) to search on strings, you can use this function:<br><br><span class="default">&lt;?php&nbsp; &nbsp; <br></span><span class="keyword">function </span><span class="default">match_wildcard</span><span class="keyword">( </span><span class="default">$wildcard_pattern</span><span class="keyword">, </span><span class="default">$haystack </span><span class="keyword">) {<br>&nbsp;&nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(<br>&nbsp; &nbsp;&nbsp; array(</span><span class="string">"\*"</span><span class="keyword">, </span><span class="string">"\?"</span><span class="keyword">), </span><span class="comment">// wildcard chars<br>&nbsp; &nbsp;&nbsp; </span><span class="keyword">array(</span><span class="string">'.*'</span><span class="keyword">,</span><span class="string">'.'</span><span class="keyword">),&nbsp;&nbsp; </span><span class="comment">// regexp chars<br>&nbsp; &nbsp;&nbsp; </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$wildcard_pattern</span><span class="keyword">)<br>&nbsp;&nbsp; );<br><br>&nbsp;&nbsp; return </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^'</span><span class="keyword">.</span><span class="default">$regex</span><span class="keyword">.</span><span class="string">'$/is'</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">);<br>}<br><br></span><span class="default">$test </span><span class="keyword">= </span><span class="string">"foobar and blob\netc."</span><span class="keyword">;<br></span><span class="default">var_dump</span><span class="keyword">(<br>&nbsp; &nbsp; </span><span class="default">match_wildcard</span><span class="keyword">(</span><span class="string">'foo*'</span><span class="keyword">, </span><span class="default">$test</span><span class="keyword">),&nbsp; &nbsp; &nbsp; </span><span class="comment">// TRUE<br>&nbsp; &nbsp; </span><span class="default">match_wildcard</span><span class="keyword">(</span><span class="string">'bar*'</span><span class="keyword">, </span><span class="default">$test</span><span class="keyword">),&nbsp; &nbsp; &nbsp; </span><span class="comment">// FALSE<br>&nbsp; &nbsp; </span><span class="default">match_wildcard</span><span class="keyword">(</span><span class="string">'*bar*'</span><span class="keyword">, </span><span class="default">$test</span><span class="keyword">),&nbsp; &nbsp;&nbsp; </span><span class="comment">// TRUE<br>&nbsp; &nbsp; </span><span class="default">match_wildcard</span><span class="keyword">(</span><span class="string">'**blob**'</span><span class="keyword">, </span><span class="default">$test</span><span class="keyword">),&nbsp; </span><span class="comment">// TRUE<br>&nbsp; &nbsp; </span><span class="default">match_wildcard</span><span class="keyword">(</span><span class="string">'*a?d*'</span><span class="keyword">, </span><span class="default">$test</span><span class="keyword">),&nbsp; &nbsp;&nbsp; </span><span class="comment">// TRUE<br>&nbsp; &nbsp; </span><span class="default">match_wildcard</span><span class="keyword">(</span><span class="string">'*etc**'</span><span class="keyword">, </span><span class="default">$test</span><span class="keyword">)&nbsp; &nbsp;&nbsp; </span><span class="comment">// TRUE<br></span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="70544">  
  <a class="name">
  <strong class="user"><em>guilleva at gmail dot com</em></strong></a><div class="date" title="2006-10-19 08:54"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom70544">
<div class="phpcode"><code><span class="html">
In some systems (AIX for example) GLOB_BRACE isn't defined and you get the error:<br>glob() expects parameter 2 to be long, string given in /XX/XX.php<br><br>&lt;?<br><br>foreach (glob("{*.pdf,*.PDF}",GLOB_BRACE ) as $filename) {<br>&nbsp; &nbsp; &nbsp; echo "$filename \n";<br>}<br><br>?&gt;<br><br>The method may help you in this case.<br><br>&lt;?<br><br>foreach (array_merge(glob("*.pdf"),glob("*.PDF")) as $filename) {<br>&nbsp; &nbsp; &nbsp; echo "$filename \n";<br>}<br><br>?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71327">  
  <a class="name">
  <strong class="user"><em>torch at torchsdomain dot com</em></strong></a><div class="date" title="2006-11-22 12:25"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom71327">
<div class="phpcode"><code><span class="html">
Here is simple function that will find and remove all files (except "." ones) that match the expression ($match, "*" as wildcard) under starting directory ($path) and all other directories under it.
<br>
<br>function rfr($path,$match){
<br>&nbsp;&nbsp; static $deld = 0, $dsize = 0;
<br>&nbsp;&nbsp; $dirs = glob($path."*");
<br>&nbsp;&nbsp; $files = glob($path.$match);
<br>&nbsp;&nbsp; foreach($files as $file){
<br>&nbsp; &nbsp; &nbsp; if(is_file($file)){
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $dsize += filesize($file);
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unlink($file);
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $deld++;
<br>&nbsp; &nbsp; &nbsp; }
<br>&nbsp;&nbsp; }
<br>&nbsp;&nbsp; foreach($dirs as $dir){
<br>&nbsp; &nbsp; &nbsp; if(is_dir($dir)){
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $dir = basename($dir) . "/";
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; rfr($path.$dir,$match);
<br>&nbsp; &nbsp; &nbsp; }
<br>&nbsp;&nbsp; }
<br>&nbsp;&nbsp; return "$deld files deleted with a total size of $dsize bytes";
<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97899">  
  <a class="name">
  <strong class="user"><em>peter dot adrianov at gmail dot com</em></strong></a><div class="date" title="2010-05-14 04:29"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom97899">
<div class="phpcode"><code><span class="html">
Non-recursive search files, proceeding down directory tree.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">scandir_through</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$items </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="default">$dir </span><span class="keyword">. </span><span class="string">'/*'</span><span class="keyword">);<br><br>&nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$add </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] . </span><span class="string">'/*'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$items </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">, </span><span class="default">$add</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">$items</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110510">  
  <a class="name">
  <strong class="user"><em>Gabriel S. Luraschi</em></strong></a><div class="date" title="2012-10-30 06:54"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom110510">
<div class="phpcode"><code><span class="html">
Use this to exclude hidden files on MS Windows.<br><br><span class="default">&lt;?php<br>exec</span><span class="keyword">(</span><span class="string">"dir \"</span><span class="keyword">{</span><span class="default">$path</span><span class="keyword">}</span><span class="string">\" /A:-H /B"</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="49308">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2005-01-23 01:54"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom49308">
<div class="phpcode"><code><span class="html">
The example on this page will generate a warning if the glob function does not find any filenames that match the pattern.
<br>
<br>The glob function result will only be an array if it finds some files and the foreach statement requires its argument to be an array.
<br>
<br>By checking for the possibility that the result of the glob function may not be an array you can eliminate the warning.
<br>
<br>Here's a better example:
<br>
<br><span class="default">&lt;?php
<br>$matches </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="string">"*.txt"</span><span class="keyword">);
<br>if ( </span><span class="default">is_array </span><span class="keyword">( </span><span class="default">$matches </span><span class="keyword">) ) {
<br>&nbsp;&nbsp; foreach ( </span><span class="default">$matches </span><span class="keyword">as </span><span class="default">$filename</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; echo </span><span class="string">"</span><span class="default">$filename</span><span class="string"> size " </span><span class="keyword">. </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;
<br>&nbsp;&nbsp; }
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82744">  
  <a class="name">
  <strong class="user"><em>pope at q dot com</em></strong></a><div class="date" title="2008-04-23 06:08"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom82744">
<div class="phpcode"><code><span class="html">
alan at ridersite dot org 18-Mar-2007 03:26 -- Stated '*.*' is the same as '*' -- This is not true as * alone will return directories too and *.* will only return files with an extension such as .pdf or .doc or .php.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50960">  
  <a class="name">
  <strong class="user"><em>NOSPAM sketch at infinite dot net dot au</em></strong></a><div class="date" title="2005-03-14 05:05"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom50960">
<div class="phpcode"><code><span class="html">
in the example below, i found i got an error if the directory was empty.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">foreach (</span><span class="default">glob</span><span class="keyword">(</span><span class="string">"*.txt"</span><span class="keyword">) as </span><span class="default">$filename</span><span class="keyword">) {
<br>&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$filename</span><span class="string"> size " </span><span class="keyword">. </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>I think its because glob()'ing an empty directory returns false, and so calling foreach (false as $value) will obviously break.
<br>
<br>to fix this, i did the following:
<br><span class="default">&lt;?php
<br>$files </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="string">"*.txt) or array(); // give it an empty array if the directory is empty or glob fails otherwise
<br>&nbsp;&nbsp; echo "</span><span class="default">$filename size </span><span class="string">" . filesize(</span><span class="default">$filename</span><span class="string">) . "</span><span class="keyword">\</span><span class="default">n</span><span class="string">";
<br>}
<br>?&gt;
<br>
<br>Hope this helps someone</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114024">  
  <a class="name">
  <strong class="user"><em>rene dot rathmann at gmx dot de</em></strong></a><div class="date" title="2014-01-02 11:05"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom114024">
<div class="phpcode"><code><span class="html">
You can do a recursive file search with yield.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">findAllDirs</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$dirStack</span><span class="keyword">=[</span><span class="default">$start</span><span class="keyword">];<br>&nbsp; &nbsp; while(</span><span class="default">$dir</span><span class="keyword">=</span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$dirStack</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ar</span><span class="keyword">=</span><span class="default">glob</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">'/*'</span><span class="keyword">,</span><span class="default">GLOB_ONLYDIR</span><span class="keyword">|</span><span class="default">GLOB_NOSORT</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">$ar</span><span class="keyword">) continue;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dirStack</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$dirStack</span><span class="keyword">,</span><span class="default">$ar</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$ar </span><span class="keyword">as </span><span class="default">$DIR</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yield </span><span class="default">$DIR</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">$fname</span><span class="keyword">=</span><span class="string">'*.php'</span><span class="keyword">;<br></span><span class="default">$result</span><span class="keyword">=[];<br>foreach(</span><span class="default">findAllDirs</span><span class="keyword">(</span><span class="string">'/var/www/localhost'</span><span class="keyword">) as </span><span class="default">$dir</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$match</span><span class="keyword">=</span><span class="default">glob</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$fname</span><span class="keyword">,</span><span class="default">GLOB_NOSORT</span><span class="keyword">);<br>&nbsp; &nbsp; if(!</span><span class="default">$match</span><span class="keyword">) continue;<br>&nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">,</span><span class="default">$match</span><span class="keyword">);<br>}<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111605">  
  <a class="name">
  <strong class="user"><em>bimal at sanjaal dot com</em></strong></a><div class="date" title="2013-03-07 04:28"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom111605">
<div class="phpcode"><code><span class="html">
To pick one of the file randomly from your directory with full physical path, you can write something like this:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">one_random_image_file</span><span class="keyword">()<br>{<br>&nbsp; &nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="string">'../images/*.jpg'</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">);<br>&nbsp; &nbsp; return </span><span class="default">realpath</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br>}<br></span><span class="default">$image_to_read </span><span class="keyword">= </span><span class="default">one_random_image_file</span><span class="keyword">();<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82182">  
  <a class="name">
  <strong class="user"><em>parazuce [at] gmail [dot] com</em></strong></a><div class="date" title="2008-03-30 05:47"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom82182">
<div class="phpcode"><code><span class="html">
As a response to a post by viajy at yoyo dot org on 10-Feb-2007 04:50, he posted the following code:<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">listdirs</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {<br>&nbsp; &nbsp; static </span><span class="default">$alldirs </span><span class="keyword">= array();<br>&nbsp; &nbsp; </span><span class="default">$dirs </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="default">$dir </span><span class="keyword">. </span><span class="string">'/*'</span><span class="keyword">, </span><span class="default">GLOB_ONLYDIR</span><span class="keyword">);<br>&nbsp; &nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$dirs</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$dirs </span><span class="keyword">as </span><span class="default">$d</span><span class="keyword">) </span><span class="default">$alldirs</span><span class="keyword">[] = </span><span class="default">$d</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; foreach (</span><span class="default">$dirs </span><span class="keyword">as </span><span class="default">$dir</span><span class="keyword">) </span><span class="default">listdirs</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br>&nbsp; &nbsp; return </span><span class="default">$alldirs</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>It is not best practice to use recursive functions like that, so I wrote a safe (non-recursive) function below:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">listdirs_safe</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$dir&nbsp; </span><span class="keyword">= </span><span class="default">$start</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$dirs </span><span class="keyword">= array();<br>&nbsp; &nbsp; </span><span class="default">$next </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br><br>&nbsp; &nbsp; while (</span><span class="default">true</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$_dirs </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">'/*'</span><span class="keyword">, </span><span class="default">GLOB_ONLYDIR</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$_dirs</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$_dirs </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$_dir</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dirs</span><span class="keyword">[] = </span><span class="default">$_dir</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dir </span><span class="keyword">= </span><span class="default">$dirs</span><span class="keyword">[</span><span class="default">$next</span><span class="keyword">++];<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; return </span><span class="default">$dirs</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>Example:<br><br>print_r(listdirs_safe('*'));<br><br>Output:<br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt; Dummy folder/Dummy folder 2<br>&nbsp; &nbsp; [1] =&gt; Dummy folder/Dummy folder 2/Dummy Folder 3<br>&nbsp; &nbsp; [2] =&gt; Dummy folder/Dummy folder 2/Dummy Folder 3/4<br>&nbsp; &nbsp; [3] =&gt; Dummy folder/Dummy folder 2/Dummy Folder 3/Dummy folder 4<br>&nbsp; &nbsp; [4] =&gt; Dummy folder/Dummy folder 2/Dummy Folder 3/4/5<br>)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82539">  
  <a class="name">
  <strong class="user"><em>alan at synergymx dot com</em></strong></a><div class="date" title="2008-04-15 12:08"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom82539">
<div class="phpcode"><code><span class="html">
Here is a function that returns specific files in an array, with all of the details. Includes some basic garbage checking.<br><br>Variables<br><br>$source_folder // the location of your files<br>$ext // file extension you want to limit to (i.e.: *.txt)<br>$sec // if you only want files that are at least so old.<br><br>The function<br><br>function glob_files($source_folder, $ext, $sec, $limit){<br>&nbsp; &nbsp; if( !is_dir( $source_folder ) ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; die ( "Invalid directory.\n\n" );<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; $FILES = glob($source_folder."\*.".$ext);<br>&nbsp; &nbsp; $set_limit&nbsp; &nbsp; = 0;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; foreach($FILES as $key =&gt; $file) {<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; if( $set_limit == $limit )&nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; if( filemtime( $file ) &gt; $sec ){<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $FILE_LIST[$key]['path']&nbsp; &nbsp; = substr( $file, 0, ( strrpos( $file, "\\" ) +1 ) );<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $FILE_LIST[$key]['name']&nbsp; &nbsp; = substr( $file, ( strrpos( $file, "\\" ) +1 ) );&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $FILE_LIST[$key]['size']&nbsp; &nbsp; = filesize( $file );<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $FILE_LIST[$key]['date']&nbsp; &nbsp; = date('Y-m-d G:i:s', filemtime( $file ) );<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $set_limit++;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if(!empty($FILE_LIST)){<br>&nbsp; &nbsp; &nbsp; &nbsp; return $FILE_LIST;<br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; die( "No files found!\n\n" );<br>&nbsp; &nbsp; }<br>}<br><br>So....<br><br>$source_folder = "c:\temp\my_videos";<br>$ext = "flv"; // flash video files<br>$sec = "7200"; // files older than 2 hours<br>$limit = 2;<br><br>print_r(glob_files($source_folder, $ext, $sec, $limit));<br><br>Would return:<br><br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [path] =&gt; c:\temp\my_videos\<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [name] =&gt; fluffy_bunnies.flv<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [size] =&gt; 21160480<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [date] =&gt; 2007-10-30 16:48:05<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [1] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [path] =&gt; c:\temp\my_videos\<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [name] =&gt; synergymx.com.flv<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [size] =&gt; 14522744<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [date] =&gt; 2007-10-25 15:34:45<br>&nbsp; &nbsp; &nbsp; &nbsp; )</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102691">  
  <a class="name">
  <strong class="user"><em>troy at troyonline dot com</em></strong></a><div class="date" title="2011-02-28 09:50"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom102691">
<div class="phpcode"><code><span class="html">
If you have open_basedir set in php.ini to limit which files php can execute, glob(...) will return false when there are no matching files.&nbsp; If open_basedir is not set, the very same code will return an empty array in the same situation.<br><br>This is unfortunate as a seemingly innocuous change causes different functionality that breaks code like:<br><br>foreach(glob("*.ext") as $file)<br>...<br><br>See this link if you have any questions as to why this is so:<br><a rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=47358</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="111217">  
  <a class="name">
  <strong class="user"><em>agd243 at gmail dot com</em></strong></a><div class="date" title="2013-01-27 02:45"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom111217">
<div class="phpcode"><code><span class="html">
A simple function that find all files by extension an return it by an array.<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">findFiles</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">, </span><span class="default">$extensions </span><span class="keyword">= array()) {<br>&nbsp; &nbsp; function </span><span class="default">glob_recursive</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">, &amp;</span><span class="default">$directories </span><span class="keyword">= array()) {<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">glob</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">, </span><span class="default">GLOB_ONLYDIR </span><span class="keyword">| </span><span class="default">GLOB_NOSORT</span><span class="keyword">) as </span><span class="default">$folder</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$directories</span><span class="keyword">[] = </span><span class="default">$folder</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">glob_recursive</span><span class="keyword">(</span><span class="string">"</span><span class="keyword">{</span><span class="default">$folder</span><span class="keyword">}</span><span class="string">/*"</span><span class="keyword">, </span><span class="default">$directories</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">glob_recursive</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">, </span><span class="default">$directories</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$files </span><span class="keyword">= array ();<br>&nbsp; &nbsp; foreach(</span><span class="default">$directories </span><span class="keyword">as </span><span class="default">$directory</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$extensions </span><span class="keyword">as </span><span class="default">$extension</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">glob</span><span class="keyword">(</span><span class="string">"</span><span class="keyword">{</span><span class="default">$directory</span><span class="keyword">}</span><span class="string">/*.</span><span class="keyword">{</span><span class="default">$extension</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">) as </span><span class="default">$file</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$files</span><span class="keyword">[</span><span class="default">$extension</span><span class="keyword">][] = </span><span class="default">$file</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$files</span><span class="keyword">;<br>}<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">findFiles</span><span class="keyword">(</span><span class="string">"C:"</span><span class="keyword">, array (<br><br>&nbsp; &nbsp; </span><span class="string">"jpg"</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">"pdf"</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">"png"</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">"html"<br></span><span class="keyword">)));<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93669">  
  <a class="name">
  <strong class="user"><em>wang yun</em></strong></a><div class="date" title="2009-09-22 06:00"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom93669">
<div class="phpcode"><code><span class="html">
A function to quickly remove a directory (works in seconds for a hundred thousand files)<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * Remove the directory and its content (all files and subdirectories).<br> * @param string $dir the directory name<br> */<br></span><span class="keyword">function </span><span class="default">rmrf</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {<br>&nbsp; &nbsp; foreach (</span><span class="default">glob</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) as </span><span class="default">$file</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)) { <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">rmrf</span><span class="keyword">(</span><span class="string">"</span><span class="default">$file</span><span class="string">/*"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">rmdir</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="73967">  
  <a class="name">
  <strong class="user"><em>alan at ridersite dot org</em></strong></a><div class="date" title="2007-03-18 11:26"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom73967">
<div class="phpcode"><code><span class="html">
A couple of notes: <br>glob() handles symbolic filesystem links and resolves references to './', '../'&nbsp; nicely and handles an extra '/' character , at least on X-systems. e.g., glob("../*") will do next higher dir.<br><br>This is good to use so warnings or errors show as "../foo" and not your system's full path.&nbsp; <br><br>Several of the examples use a notation "*.*" when just plain "*" does the same thing.&nbsp; The "*.*" notation is misleading as it implies foo.ext will not be found with "*" because the "." is not present.<br><br>Watch the flags must not be strings. They are defined constants. Thus, <br>glob("../*", GLOB_ONLYDIR)&nbsp; works; <br>glob("../*", "GLOB_ONLYDIR")&nbsp; does not.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112052">  
  <a class="name">
  <strong class="user"><em>soywiz at gmail dot com</em></strong></a><div class="date" title="2013-04-26 10:26"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom112052">
<div class="phpcode"><code><span class="html">
Recursive glob for PHP&gt;=5.5<br><br>function globRecursive($path, $find) {<br>&nbsp; &nbsp; $dh = opendir($path);<br>&nbsp; &nbsp; while (($file = readdir($dh)) !== false) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (substr($file, 0, 1) == '.') continue;<br>&nbsp; &nbsp; &nbsp; &nbsp; $rfile = "{$path}/{$file}";<br>&nbsp; &nbsp; &nbsp; &nbsp; if (is_dir($rfile)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (globRecursive($rfile, $find) as $ret) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yield $ret;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (fnmatch($find, $file)) yield $rfile;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; closedir($dh);<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92565">  
  <a class="name">
  <strong class="user"><em>endiku</em></strong></a><div class="date" title="2009-07-29 08:47"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom92565">
<div class="phpcode"><code><span class="html">
For those who need to recursively search a directory tree and cannot or wish not to call a function within itself here is another suggestion.<br><br>I tried the previously suggested listdirs_safe() and it didn't seem to find all subfolders in a directory tree.<br><br>There are two variations on the same theme.<br><br>Single Array.<br><span class="default">&lt;?php<br>$dir </span><span class="keyword">=</span><span class="string">'/dir'</span><span class="keyword">;<br>while(</span><span class="default">$dirs </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="default">$dir </span><span class="keyword">. </span><span class="string">'/*'</span><span class="keyword">, </span><span class="default">GLOB_ONLYDIR</span><span class="keyword">)) {<br>&nbsp; </span><span class="default">$dir </span><span class="keyword">.= </span><span class="string">'/*'</span><span class="keyword">;<br>&nbsp; if(!</span><span class="default">$d</span><span class="keyword">) {<br>&nbsp; &nbsp;&nbsp; </span><span class="default">$d</span><span class="keyword">=</span><span class="default">$dirs</span><span class="keyword">;<br>&nbsp;&nbsp; } else {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$d</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">,</span><span class="default">$dirs</span><span class="keyword">);<br>&nbsp;&nbsp; }<br>}<br></span><span class="default">?&gt;<br></span><br>Multiple arrays.<br><span class="default">&lt;?php<br>$n</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br></span><span class="default">$dir </span><span class="keyword">=</span><span class="string">'/dir'</span><span class="keyword">;<br>while(</span><span class="default">$dirs </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="default">$dir </span><span class="keyword">. </span><span class="string">'/*'</span><span class="keyword">, </span><span class="default">GLOB_ONLYDIR</span><span class="keyword">)) {<br>&nbsp; </span><span class="default">$dir </span><span class="keyword">.= </span><span class="string">'/*'</span><span class="keyword">;<br>&nbsp; if(!</span><span class="default">$d</span><span class="keyword">) { <br>&nbsp; &nbsp;&nbsp; </span><span class="default">$d</span><span class="keyword">=</span><span class="default">$dirs</span><span class="keyword">;<br>&nbsp;&nbsp; } else {<br>&nbsp; &nbsp;&nbsp; </span><span class="default">$d</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">]=</span><span class="default">$dirs</span><span class="keyword">;<br>&nbsp;&nbsp; }<br>&nbsp; </span><span class="default">$n</span><span class="keyword">++;<br>}<br></span><span class="default">?&gt;<br></span><br>This will result in the glob looping via "dir/*/*/*/*.." until it is no longer finding a directory structure.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="73145">  
  <a class="name">
  <strong class="user"><em>viajy at yoyo dot org</em></strong></a><div class="date" title="2007-02-10 04:50"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom73145">
<div class="phpcode"><code><span class="html">
this is a recursive function i wrote to return an array of all subdirectories of a dir<br><br>function listdirs($dir) {<br>&nbsp; &nbsp; static $alldirs = array();<br>&nbsp; &nbsp; $dirs = glob($dir . '/*', GLOB_ONLYDIR);<br>&nbsp; &nbsp; if (count($dirs) &gt; 0) {<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach ($dirs as $d) $alldirs[] = $d;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; foreach ($dirs as $dir) listdirs($dir);<br>&nbsp; &nbsp; return $alldirs;<br>}<br><br>example: <br>print_r(listdirs('/some/path'));</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106047">  
  <a class="name">
  <strong class="user"><em>mkas at destiny dot lt</em></strong></a><div class="date" title="2011-10-05 12:58"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom106047">
<div class="phpcode"><code><span class="html">
recursive file search<br><br><span class="default">&lt;?php<br>$path</span><span class="keyword">[] = </span><span class="string">'starting_place/*'</span><span class="keyword">;<br><br>while(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">) != </span><span class="default">0</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);<br>&nbsp; &nbsp; foreach(</span><span class="default">glob</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">) as </span><span class="default">$item</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$path</span><span class="keyword">[] = </span><span class="default">$item </span><span class="keyword">. </span><span class="string">'/*'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif (</span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//do something<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97793">  
  <a class="name">
  <strong class="user"><em>BigueNique at yahoo dot ca</em></strong></a><div class="date" title="2010-05-08 11:45"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom97793">
<div class="phpcode"><code><span class="html">
Here is the function array_prepend() used by my latest post of safe_glob().<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * Prepends $string to each element of $array<br> * If $deep is true, will indeed also apply to sub-arrays<br> * @author BigueNique AT yahoo DOT ca<br> * @since 080324<br> */<br></span><span class="keyword">function </span><span class="default">array_prepend</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$deep</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; if(empty(</span><span class="default">$array</span><span class="keyword">)||empty(</span><span class="default">$string</span><span class="keyword">)) return </span><span class="default">$array</span><span class="keyword">;<br>&nbsp; &nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$element</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$deep</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">array_prepend</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$deep</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'array_prepend: array element'</span><span class="keyword">,</span><span class="default">E_USER_WARNING</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$string</span><span class="keyword">.</span><span class="default">$element</span><span class="keyword">;<br>&nbsp; &nbsp; return </span><span class="default">$array</span><span class="keyword">;<br>&nbsp; &nbsp; <br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="56231">  
  <a class="name">
  <strong class="user"><em>DMan</em></strong></a><div class="date" title="2005-08-28 12:59"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom56231">
<div class="phpcode"><code><span class="html">
Whilst on Windows, a path starting with a slash resolves OK for most file functions - but NOT glob. <br>If the server is LAUNCHED (or chdir()ed) to W:, then <br>file_exists("/temp/test.txt")<br>returns true for the file "W:/temp/test.txt".<br>But glob("/temp/*.txt") FAILS to find it!<br><br>A solution (if you want to avoid getting drive letters into your code) is to chdir() first, then just look for the file.<br><span class="default">&lt;?php<br>$glob</span><span class="keyword">=</span><span class="string">"/temp/*.txt"</span><span class="keyword">;<br></span><span class="default">chdir</span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$glob</span><span class="keyword">));<br></span><span class="comment">// getcwd() is now actually "W:\temp" or whatever<br><br></span><span class="keyword">foreach (</span><span class="default">glob</span><span class="keyword">(</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$glob</span><span class="keyword">)) as </span><span class="default">$filename</span><span class="keyword">) {<br>&nbsp;&nbsp; </span><span class="default">$filepath </span><span class="keyword">= </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$glob</span><span class="keyword">).</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$filename</span><span class="keyword">; </span><span class="comment">// must re-attach full path<br>&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"</span><span class="default">$filepath</span><span class="string"> size " </span><span class="keyword">. </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$filepath</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>Note also, glob() IS case sensitive although most other file funcs on Windows are not.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="60421">  
  <a class="name">
  <strong class="user"><em>info at urbits dot com</em></strong></a><div class="date" title="2006-01-06 04:26"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom60421">
<div class="phpcode"><code><span class="html">
I have been working towards a CMS-type design that is both modular and quite flat. For example, included files are all one level below the installation folder.<br><br>glob() just help me get rid of a lot of opendir() hassle. I wasn't sure if the double asterix would work - but it's fine:<br><br>foreach (glob(SERVER_PATH."/*/includes/*.php") as $inc) {<br>&nbsp;&nbsp; require($inc);<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="125994">  
  <a class="name">
  <strong class="user"><em>Philo</em></strong></a><div class="date" title="2021-04-09 11:08"><strong>5 months ago</strong></div>
  <div class="text" id="Hcom125994">
<div class="phpcode"><code><span class="html">
It is also possible to nest alternations like this:<br><span class="default">&lt;?php<br></span><span class="keyword">foreach (</span><span class="default">glob</span><span class="keyword">(</span><span class="string">"</span><span class="keyword">{</span><span class="default">$dir</span><span class="keyword">}</span><span class="string">/*.{[jJ][pP]{,[eE]}[gG],[tT][iI][fF]{,[fF]}}"</span><span class="keyword">, </span><span class="default">GLOB_BRACE</span><span class="keyword">) as </span><span class="default">$file</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="comment">// finds both .jp(e)g and .tif(f) files<br>&nbsp; &nbsp; // please note that you should double-check the file type, though<br></span><span class="keyword">}</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="125639">  
  <a class="name">
  <strong class="user"><em>davewho at nexicom dot net</em></strong></a><div class="date" title="2020-12-29 03:09"><strong>8 months ago</strong></div>
  <div class="text" id="Hcom125639">
<div class="phpcode"><code><span class="html">
Note that if you use braces ie. /*.{gif,jpg,htm} then glob returns<br>gifs before jpgs before htm files rather than in filename sequence.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="125949">  
  <a class="name">
  <strong class="user"><em>bitman at biitworks dot de</em></strong></a><div class="date" title="2021-03-22 07:22"><strong>5 months ago</strong></div>
  <div class="text" id="Hcom125949">
<div class="phpcode"><code><span class="html">
Brackets in the pattern maust be bracketed:<br><br>Filename = " [Fail2Ban] recidive *.eml"&nbsp; <br><br>The pattern should be:&nbsp; <br><br>&nbsp; &nbsp; $pattern = '[[]Fail2Ban[]] recidive *.eml'; <br><br>Otherwise the brackets will be treated as character class identifier.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="124302">  
  <a class="name">
  <strong class="user"><em>vincewansink at outlook dot com</em></strong></a><div class="date" title="2019-10-17 09:05"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom124302">
<div class="phpcode"><code><span class="html">
Note that when the documentation says the files will be returned in "alphabetical" order, you may not get the results you expect if your files are numbered.<br><br>For example, files will be returned in the following order:<br><br>file.1.txt<br>file.10.txt<br>file.2.txt<br><br>Not (as you might expect):<br><br>file.1.txt<br>file.2.txt<br>file.10.txt</span>
</code></div>
  </div>
 </div>
  <div class="note" id="119231">  
  <a class="name">
  <strong class="user"><em>sebastian dot wasser at gmail dot com</em></strong></a><div class="date" title="2016-04-23 11:50"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom119231">
<div class="phpcode"><code><span class="html">
I created a rglob function to support a '/**/' wildcard. You can even set the order to post-order or pre-order traversal.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">rglob </span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$flags </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$traversePostOrder </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="comment">// Keep away the hassles of the rest if we don't use the wildcard anyway<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="string">'/**/'</span><span class="keyword">) === </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">glob</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$flags</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="default">$patternParts </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'/**/'</span><span class="keyword">, </span><span class="default">$pattern</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="comment">// Get sub dirs<br>&nbsp; &nbsp; </span><span class="default">$dirs </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$patternParts</span><span class="keyword">) . </span><span class="string">'/*'</span><span class="keyword">, </span><span class="default">GLOB_ONLYDIR </span><span class="keyword">| </span><span class="default">GLOB_NOSORT</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="comment">// Get files for current dir<br>&nbsp; &nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$flags</span><span class="keyword">);<br><br>&nbsp; &nbsp; foreach (</span><span class="default">$dirs </span><span class="keyword">as </span><span class="default">$dir</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$subDirContent </span><span class="keyword">= </span><span class="default">rglob</span><span class="keyword">(</span><span class="default">$dir </span><span class="keyword">. </span><span class="string">'/**/' </span><span class="keyword">. </span><span class="default">implode</span><span class="keyword">(</span><span class="string">'/**/'</span><span class="keyword">, </span><span class="default">$patternParts</span><span class="keyword">), </span><span class="default">$flags</span><span class="keyword">, </span><span class="default">$traversePostOrder</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">$traversePostOrder</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">, </span><span class="default">$subDirContent</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$subDirContent</span><span class="keyword">, </span><span class="default">$files</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">$files</span><span class="keyword">;<br>};<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="118256">  
  <a class="name">
  <strong class="user"><em>sharshun dot aliaksandr at gmail dot com</em></strong></a><div class="date" title="2015-11-04 02:26"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom118256">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">glob_recursive</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$flags </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">){<br></span><span class="comment">// forked from <a rel="nofollow" target="_blank">https://github.com/rodurma/PHP-Functions/</a><br>&nbsp; &nbsp; // blob/master/glob_recursive.php<br>&nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$flags</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; foreach (</span><span class="default">glob</span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">).</span><span class="string">'/*'</span><span class="keyword">, <br>&nbsp; &nbsp; &nbsp; </span><span class="default">GLOB_ONLYDIR</span><span class="keyword">|</span><span class="default">GLOB_NOSORT</span><span class="keyword">) as </span><span class="default">$dir</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">, </span><span class="default">glob_recursive<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">), </span><span class="default">$flags</span><span class="keyword">));<br>&nbsp; }<br>&nbsp; return </span><span class="default">$files</span><span class="keyword">;<br>}<br></span><span class="comment">// $a=glob_recursive('c:/test_directory/'."*.*");<br>// print_r($a);<br><br></span><span class="keyword">function </span><span class="default">dirInfoReGet</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$a</span><span class="keyword">=</span><span class="default">glob_recursive</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">.</span><span class="string">"*.*"</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$ar</span><span class="keyword">=</span><span class="default">glob_recursive</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">.</span><span class="string">"**/**"</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$arr</span><span class="keyword">=</span><span class="default">array_unique</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$ar</span><span class="keyword">));<br><br>&nbsp; &nbsp; foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arra</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][]=</span><span class="default">$v</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arra</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][]=</span><span class="default">$v</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">sort</span><span class="keyword">(</span><span class="default">$arra</span><span class="keyword">);<br>&nbsp; &nbsp; return </span><span class="default">$arra</span><span class="keyword">;<br>}<br></span><span class="default">$a</span><span class="keyword">=</span><span class="default">dirInfoReGet</span><span class="keyword">(</span><span class="string">'c:/test_directory/'</span><span class="keyword">);<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br><a rel="nofollow" target="_blank">http://i.stack.imgur.com/H7UF3.jpg</a><br><br>Best regards.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="116253">  
  <a class="name">
  <strong class="user"><em>Anxiety35 at gmail dot com</em></strong></a><div class="date" title="2014-12-01 09:20"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom116253">
<div class="phpcode"><code><span class="html">
After fiddling with GLOB_BRACE a bunch, I have found the most items that can be included in the braces is about 10 before glob no longer returns any matches.<br><br>I have a scenario where there can be a thousand or more files to check for where I can't pattern match and need to check specific names. I was hoping to batch them in large groups to see if it would help performance. However, if I include more than 10 in a GLOB_BRACE the function will return FALSE.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="68939">  
  <a class="name">
  <strong class="user"><em>joseph dot morphy at gmail dot com</em></strong></a><div class="date" title="2006-08-16 11:01"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom68939">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br>$html_array </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="string">"*.html"</span><span class="keyword">);<br><br>function </span><span class="default">sort_by_mtime</span><span class="keyword">(</span><span class="default">$file1</span><span class="keyword">,</span><span class="default">$file2</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$time1 </span><span class="keyword">= </span><span class="default">filemtime</span><span class="keyword">(</span><span class="default">$file1</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$time2 </span><span class="keyword">= </span><span class="default">filemtime</span><span class="keyword">(</span><span class="default">$file2</span><span class="keyword">);<br>&nbsp; &nbsp; if (</span><span class="default">$time1 </span><span class="keyword">== </span><span class="default">$time2</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return (</span><span class="default">$time1 </span><span class="keyword">&lt; </span><span class="default">$time2</span><span class="keyword">) ? </span><span class="default">1 </span><span class="keyword">: -</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br></span><span class="default">usort</span><span class="keyword">(</span><span class="default">$html_array</span><span class="keyword">,</span><span class="string">"sort_by_mtime"</span><span class="keyword">);<br></span><span class="comment">//$html_array is now ordered by the time it was last modified<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->

  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from www.php.net/manual/en/function.glob.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:54:41 GMT -->

</body></html>