<html><!-- Mirrored from www.php.net/manual/en/function.imap-fetch-overview.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:23:25 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>imap_fetch_overview</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.imap-fetch-overview.html">
 <link rel="shorturl" href="https://www.php.net/imap-fetch-overview">
 <link rel="alternate" href="https://www.php.net/imap-fetch-overview" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.imap.html">
 <link rel="prev" href="function.imap-expunge.html">
 <link rel="next" href="function.imap-fetchbody.html">

 <link rel="alternate" href="function.imap-fetch-overview.html" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.imap-fetch-overview.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.imap-fetch-overview.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.imap-fetch-overview.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/function.imap-fetch-overview.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.imap-fetch-overview.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/ro/function.imap-fetch-overview.php" hreflang="ro">
 <link rel="alternate" href="https://www.php.net/manual/ru/function.imap-fetch-overview.php" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/function.imap-fetch-overview.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.imap-fetch-overview.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0aba.css?t=1539771603&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2ecf.css?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedba57.css?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached3afa.css?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>


</head>
<body class="docs " style="">


<div class="headsup"><a href="https://www.php.net/conferences/index.php#id2021-09-08-1">Longhorn PHP 2021</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.attributes.html">Attributes</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.remote.mail.html">Mail Related Extensions</a></li>      <li><a href="book.imap.html">IMAP</a></li>      <li><a href="ref.imap.html">IMAP Functions</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="function.imap-fetch-overview" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">imap_fetch_overview</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">imap_fetch_overview</span> â€” <span class="dc-title">Read an overview of the information in the headers of the given message</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.imap-fetch-overview-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>imap_fetch_overview</strong></span>(<span class="methodparam"><span class="type">resource</span> <code class="parameter">$imap</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$sequence</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code><span class="initializer"> = 0</span></span>): <span class="type"><span class="type">array</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   This function fetches mail headers for the given
   <code class="parameter">sequence</code> and returns an overview of their
   contents.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.imap-fetch-overview-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>
    <dt>
<code class="parameter">
imap</code></dt>
<dd>
<p class="para">An IMAP stream returned by
<span class="function"><a href="function.imap-open.html" class="function">imap_open()</a></span>.</p></dd>

    
     <dt>
<code class="parameter">sequence</code></dt>

     <dd>

      <p class="para">
       A message sequence description. You can enumerate desired messages
       with the <code class="literal">X,Y</code> syntax, or retrieve all messages 
       within an interval with the <code class="literal">X:Y</code> syntax
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">flags</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">sequence</code> will contain a sequence of message
       indices or UIDs, if this parameter is set to 
       <strong><code>FT_UID</code></strong>. 
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.imap-fetch-overview-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns an array of objects describing one message header each.
   The object will only define a property if it exists. The possible
   properties are:
   </p><ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      <code class="literal">subject</code> - the messages subject
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <code class="literal">from</code> - who sent it
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <code class="literal">to</code> - recipient
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <code class="literal">date</code> - when was it sent
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <code class="literal">message_id</code> - Message-ID
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <code class="literal">references</code> - is a reference to this message id
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <code class="literal">in_reply_to</code> - is a reply to this message id
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <code class="literal">size</code> - size in bytes
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <code class="literal">uid</code> - UID the message has in the mailbox
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <code class="literal">msgno</code> - message sequence number in the mailbox
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <code class="literal">recent</code> - this message is flagged as recent
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <code class="literal">flagged</code> -  this message is flagged
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <code class="literal">answered</code> -  this message is flagged as answered
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <code class="literal">deleted</code> -  this message is flagged for deletion
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <code class="literal">seen</code> -  this message is flagged as already read
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <code class="literal">draft</code> -  this message is flagged as being a draft
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <code class="literal">udate</code> -  the UNIX timestamp of the arrival date
     </span>
    </li>
   </ul>
   The function returns <strong><code>false</code></strong> on failure.
  <p></p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.imap-fetch-overview-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-2959">
    <p><strong>Example #1 <span class="function"><strong>imap_fetch_overview()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$mbox&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">imap_open</span><span style="color: #007700">(</span><span style="color: #DD0000">"{imap.example.org:143}INBOX"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"username"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"password"</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;die(</span><span style="color: #DD0000">"can't&nbsp;connect:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">imap_last_error</span><span style="color: #007700">());<br><br></span><span style="color: #0000BB">$MC&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">imap_check</span><span style="color: #007700">(</span><span style="color: #0000BB">$mbox</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Fetch&nbsp;an&nbsp;overview&nbsp;for&nbsp;all&nbsp;messages&nbsp;in&nbsp;INBOX<br></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">imap_fetch_overview</span><span style="color: #007700">(</span><span style="color: #0000BB">$mbox</span><span style="color: #007700">,</span><span style="color: #DD0000">"1:</span><span style="color: #007700">{</span><span style="color: #0000BB">$MC</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Nmsgs</span><span style="color: #007700">}</span><span style="color: #DD0000">"</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br>foreach&nbsp;(</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$overview</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"#</span><span style="color: #007700">{</span><span style="color: #0000BB">$overview</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">msgno</span><span style="color: #007700">}</span><span style="color: #DD0000">&nbsp;(</span><span style="color: #007700">{</span><span style="color: #0000BB">$overview</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">date</span><span style="color: #007700">}</span><span style="color: #DD0000">)&nbsp;-&nbsp;From:&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$overview</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">from</span><span style="color: #007700">}</span><span style="color: #DD0000"><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$overview</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">subject</span><span style="color: #007700">}</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">imap_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$mbox</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.imap-fetch-overview-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.imap-fetchheader.html" class="function" rel="rdfs-seeAlso">imap_fetchheader()</a> - Returns header for a message</span></li>
   </ul>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="73891">  
  <a class="name">
  <strong class="user"><em>raja at aonic dot net</em></strong></a><div class="date" title="2007-03-14 11:22"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom73891">
<div class="phpcode"><code><span class="html">
Here is a function to get messages from IMAP and sort them for pagination.<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Return array of IMAP messages for pagination<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param&nbsp;&nbsp; int&nbsp; &nbsp;&nbsp; $page&nbsp; &nbsp; &nbsp;&nbsp; page number to get<br>&nbsp; &nbsp;&nbsp; * @param&nbsp;&nbsp; int&nbsp; &nbsp;&nbsp; $per_page&nbsp;&nbsp; number of results per page<br>&nbsp; &nbsp;&nbsp; * @param&nbsp;&nbsp; array&nbsp;&nbsp; $sort&nbsp; &nbsp; &nbsp;&nbsp; array('subject', 'asc') etc<br>&nbsp; &nbsp;&nbsp; * <br>&nbsp; &nbsp;&nbsp; * @return&nbsp; mixed&nbsp;&nbsp; array containing imap_fetch_overview, pages, and total rows if successful, false if an error occurred<br>&nbsp; &nbsp;&nbsp; * @author&nbsp; Raja K<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">listMessages</span><span class="keyword">(</span><span class="default">$page </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">, </span><span class="default">$per_page </span><span class="keyword">= </span><span class="default">25</span><span class="keyword">, </span><span class="default">$sort </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$limit </span><span class="keyword">= (</span><span class="default">$per_page </span><span class="keyword">* </span><span class="default">$page</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= (</span><span class="default">$limit </span><span class="keyword">- </span><span class="default">$per_page</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= (</span><span class="default">$start </span><span class="keyword">&lt; </span><span class="default">1</span><span class="keyword">) ? </span><span class="default">1 </span><span class="keyword">: </span><span class="default">$start</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$limit </span><span class="keyword">= ((</span><span class="default">$limit </span><span class="keyword">- </span><span class="default">$start</span><span class="keyword">) != (</span><span class="default">$per_page</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">)) ? (</span><span class="default">$start </span><span class="keyword">+ (</span><span class="default">$per_page</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">)) : </span><span class="default">$limit</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$info </span><span class="keyword">= </span><span class="default">imap_check</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_imap_stream</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$limit </span><span class="keyword">= (</span><span class="default">$info</span><span class="keyword">-&gt;</span><span class="default">Nmsgs </span><span class="keyword">&lt; </span><span class="default">$limit</span><span class="keyword">) ? </span><span class="default">$info</span><span class="keyword">-&gt;</span><span class="default">Nmsgs </span><span class="keyword">: </span><span class="default">$limit</span><span class="keyword">;<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">true </span><span class="keyword">=== </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$sort</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$sorting </span><span class="keyword">= array(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'direction' </span><span class="keyword">=&gt; array(&nbsp;&nbsp; </span><span class="string">'asc' </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'desc' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">),<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'by'&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; array(&nbsp;&nbsp; </span><span class="string">'date' </span><span class="keyword">=&gt; </span><span class="default">SORTDATE</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'arrival' </span><span class="keyword">=&gt; </span><span class="default">SORTARRIVAL</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'from' </span><span class="keyword">=&gt; </span><span class="default">SORTFROM</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'subject' </span><span class="keyword">=&gt; </span><span class="default">SORTSUBJECT</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'size' </span><span class="keyword">=&gt; </span><span class="default">SORTSIZE</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$by </span><span class="keyword">= (</span><span class="default">true </span><span class="keyword">=== </span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$by </span><span class="keyword">= </span><span class="default">$sorting</span><span class="keyword">[</span><span class="string">'by'</span><span class="keyword">][</span><span class="default">$sort</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]])) <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ? </span><span class="default">$by <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">: </span><span class="default">$sorting</span><span class="keyword">[</span><span class="string">'by'</span><span class="keyword">][</span><span class="string">'date'</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$direction </span><span class="keyword">= (</span><span class="default">true </span><span class="keyword">=== </span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$direction </span><span class="keyword">= </span><span class="default">$sorting</span><span class="keyword">[</span><span class="string">'direction'</span><span class="keyword">][</span><span class="default">$sort</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]])) <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ? </span><span class="default">$direction <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">: </span><span class="default">$sorting</span><span class="keyword">[</span><span class="string">'direction'</span><span class="keyword">][</span><span class="string">'desc'</span><span class="keyword">];<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$sorted </span><span class="keyword">= </span><span class="default">imap_sort</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_imap_stream</span><span class="keyword">, </span><span class="default">$by</span><span class="keyword">, </span><span class="default">$direction</span><span class="keyword">);<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$msgs </span><span class="keyword">= </span><span class="default">array_chunk</span><span class="keyword">(</span><span class="default">$sorted</span><span class="keyword">, </span><span class="default">$per_page</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$msgs </span><span class="keyword">= </span><span class="default">$msgs</span><span class="keyword">[</span><span class="default">$page</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$msgs </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">, </span><span class="default">$limit</span><span class="keyword">); </span><span class="comment">//just to keep it consistent<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">imap_fetch_overview</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_imap_stream</span><span class="keyword">, </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$msgs</span><span class="keyword">, </span><span class="string">','</span><span class="keyword">), </span><span class="default">0</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">false </span><span class="keyword">=== </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//sorting!<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">true </span><span class="keyword">=== </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$sorted</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp_result </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$result </span><span class="keyword">as </span><span class="default">$r</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp_result</span><span class="keyword">[</span><span class="default">$r</span><span class="keyword">-&gt;</span><span class="default">msgno</span><span class="keyword">] = </span><span class="default">$r</span><span class="keyword">;<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$msgs </span><span class="keyword">as </span><span class="default">$msgno</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$tmp_result</span><span class="keyword">[</span><span class="default">$msgno</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$return </span><span class="keyword">= array(</span><span class="string">'res' </span><span class="keyword">=&gt; </span><span class="default">$result</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'start' </span><span class="keyword">=&gt; </span><span class="default">$start</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'limit' </span><span class="keyword">=&gt; </span><span class="default">$limit</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'sorting' </span><span class="keyword">=&gt; array(</span><span class="string">'by' </span><span class="keyword">=&gt; </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="string">'direction' </span><span class="keyword">=&gt; </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'total' </span><span class="keyword">=&gt; </span><span class="default">imap_num_msg</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_imap_stream</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="string">'pages'</span><span class="keyword">] = </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$return</span><span class="keyword">[</span><span class="string">'total'</span><span class="keyword">] / </span><span class="default">$per_page</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$return</span><span class="keyword">;<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="118113">  
  <a class="name">
  <strong class="user"><em>Ap.Muthu</em></strong></a><div class="date" title="2015-10-06 11:31"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom118113">
<div class="phpcode"><code><span class="html">
The use of the $range parameter is explained in the example at: <a rel="nofollow" target="_blank">http://www.phpdig.net/ref/rn31re596.html</a><br><br><span class="default">&lt;?php<br>$imap </span><span class="keyword">= </span><span class="default">imap_open</span><span class="keyword">(</span><span class="string">"{localhost}INBOX"</span><span class="keyword">,</span><span class="string">"graeme"</span><span class="keyword">,</span><span class="string">"inferno"</span><span class="keyword">);<br><br></span><span class="comment">// fetch message information for message 2<br>// and messages 4 to 6<br></span><span class="default">$info </span><span class="keyword">= </span><span class="default">imap_fetch_overview</span><span class="keyword">(</span><span class="default">$imap</span><span class="keyword">, </span><span class="string">"2,4:6"</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>&lt;table border=1&gt;<br>&lt;tr&gt;&lt;th&gt;Read&lt;/th&gt;&lt;th&gt;From&lt;/th&gt;&lt;th&gt;Date&lt;/th&gt;&lt;th&gt;Subject&lt;/th&gt;&lt;/tr&gt;<br><br><span class="default">&lt;?php<br></span><span class="comment">// loop through the array<br></span><span class="keyword">foreach (</span><span class="default">$info </span><span class="keyword">as </span><span class="default">$msg</span><span class="keyword">) {<br>&nbsp;&nbsp; echo </span><span class="string">"&lt;tr&gt;"</span><span class="keyword">;<br><br>&nbsp;&nbsp; </span><span class="comment">// display the seen property nicely<br>&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$msg</span><span class="keyword">-&gt;</span><span class="default">seen </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$read </span><span class="keyword">= </span><span class="string">"Yes"</span><span class="keyword">;<br>&nbsp;&nbsp; } else {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$read </span><span class="keyword">= </span><span class="string">"No"</span><span class="keyword">;<br>&nbsp;&nbsp; }<br><br>&nbsp;&nbsp; </span><span class="comment">// print other message information<br>&nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"&lt;td&gt;%s&lt;/td&gt;"</span><span class="keyword">, </span><span class="default">$read</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"&lt;td&gt;%s&lt;/td&gt;"</span><span class="keyword">, </span><span class="default">$msg</span><span class="keyword">-&gt;</span><span class="default">from</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"&lt;td&gt;%s&lt;/td&gt;"</span><span class="keyword">, </span><span class="default">$msg</span><span class="keyword">-&gt;</span><span class="default">date</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"&lt;td&gt;%s&lt;/td&gt;"</span><span class="keyword">, </span><span class="default">$msg</span><span class="keyword">-&gt;</span><span class="default">subject</span><span class="keyword">);<br>}<br><br></span><span class="default">imap_close</span><span class="keyword">(</span><span class="default">$imap</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="116727">  
  <a class="name">
  <strong class="user"><em>Nitrogen</em></strong></a><div class="date" title="2015-02-20 01:18"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom116727">
<div class="phpcode"><code><span class="html">
Judging from the comments here, it appears like people are forgetting the basics to already-available PHP sorting functions. Use usort(); and the tiniest custom function ever to compare them all.<br><br>Change the arguments to imap_fetch_overview to your own, obviously.<br><br><span class="default">&lt;?php<br>$result </span><span class="keyword">= </span><span class="default">imap_fetch_overview</span><span class="keyword">(</span><span class="default">$imap_stream</span><span class="keyword">, </span><span class="string">'1:10'</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br><br></span><span class="default">usort</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br>&nbsp; return(</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">udate</span><span class="keyword">-</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">udate</span><span class="keyword">);<br>});<br></span><span class="default">?&gt;<br></span><br>This usort function will look at each overview and order them in the exact latest to oldest message order as determined by the "udate" value for each message. This works. I'm using it. They're sorted in the exact order they appear in my actual inbox. Why obfuscate it any more?</span>
</code></div>
  </div>
 </div>
  <div class="note" id="38268">  
  <a class="name">
  <strong class="user"><em>mails at slueoend dot ch</em></strong></a><div class="date" title="2003-12-14 04:15"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom38268">
<div class="phpcode"><code><span class="html">
Not that this function and all other imap_fetch*-functions will download the whole message and not just the header information.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103316">  
  <a class="name">
  <strong class="user"><em>thinice at gmail dot com</em></strong></a><div class="date" title="2011-04-06 05:31"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom103316">
<div class="phpcode"><code><span class="html">
Hopefully someone will find this a jumpstarter for a sortable, paginated list:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">public function </span><span class="default">listMessages</span><span class="keyword">(</span><span class="default">$nStart</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$nCnt</span><span class="keyword">=</span><span class="default">10</span><span class="keyword">) {
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; if (!</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">loaded</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">NULL</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; if ((</span><span class="default">$nStart</span><span class="keyword">+</span><span class="default">$nCnt</span><span class="keyword">) &gt; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getNum</span><span class="keyword">()) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nCnt </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getNum</span><span class="keyword">()-</span><span class="default">$nStart</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="default">$aMsgs </span><span class="keyword">= </span><span class="default">imap_fetch_overview</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">rCon</span><span class="keyword">, (</span><span class="default">$nStart</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">).</span><span class="string">':'</span><span class="keyword">.(</span><span class="default">$nStart</span><span class="keyword">+</span><span class="default">$nCnt</span><span class="keyword">));
<br>&nbsp; &nbsp; </span><span class="default">$aRet </span><span class="keyword">= array();
<br>&nbsp; &nbsp; if (</span><span class="default">$aMsgs</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$aMsgs </span><span class="keyword">as </span><span class="default">$msg</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aRet</span><span class="keyword">[</span><span class="default">$msg</span><span class="keyword">-&gt;</span><span class="default">udate</span><span class="keyword">] = </span><span class="default">$msg</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="default">krsort</span><span class="keyword">(</span><span class="default">$aRet</span><span class="keyword">);
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$aRet</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="120521">  
  <a class="name">
  <strong class="user"><em>undernetangel at gmail dot com</em></strong></a><div class="date" title="2017-01-25 10:12"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom120521">
<div class="phpcode"><code><span class="html">
There is a typo in the manual. The correct return value for arrival time is:&nbsp; udate not update.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="16721">  
  <a class="name">
  <strong class="user"><em>steve at stevenchalker dot net</em></strong></a><div class="date" title="2001-11-09 08:26"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom16721">
<div class="phpcode"><code><span class="html">
I think if you go like a list, you can list your "hotmail" messages.
<br><span class="default">&lt;?php
<br>$mbox</span><span class="keyword">=</span><span class="default">imap_open</span><span class="keyword">(</span><span class="string">"{imap.server.com}"</span><span class="keyword">,</span><span class="string">"user"</span><span class="keyword">,</span><span class="string">"pass"</span><span class="keyword">);
<br></span><span class="default">$MC</span><span class="keyword">=</span><span class="default">imap_check</span><span class="keyword">(</span><span class="default">$mbox</span><span class="keyword">);
<br></span><span class="default">$MN</span><span class="keyword">=</span><span class="default">$MC</span><span class="keyword">-&gt;</span><span class="default">Nmsgs</span><span class="keyword">;
<br></span><span class="default">$overview</span><span class="keyword">=</span><span class="default">imap_fetch_overview</span><span class="keyword">(</span><span class="default">$mbox</span><span class="keyword">,</span><span class="string">"1:</span><span class="default">$MN</span><span class="string">"</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);
<br></span><span class="default">$size</span><span class="keyword">=</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$overview</span><span class="keyword">);
<br>for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">$size</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&gt;=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">--){
<br></span><span class="default">$val</span><span class="keyword">=</span><span class="default">$overview</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];
<br></span><span class="default">$msg</span><span class="keyword">=</span><span class="default">$val</span><span class="keyword">-&gt;</span><span class="default">msgno</span><span class="keyword">;
<br></span><span class="default">$from</span><span class="keyword">=</span><span class="default">$val</span><span class="keyword">-&gt;</span><span class="default">from</span><span class="keyword">;
<br></span><span class="default">$date</span><span class="keyword">=</span><span class="default">$val</span><span class="keyword">-&gt;</span><span class="default">date</span><span class="keyword">;
<br></span><span class="default">$subj</span><span class="keyword">=</span><span class="default">$val</span><span class="keyword">-&gt;</span><span class="default">subject</span><span class="keyword">;
<br>echo </span><span class="string">"#</span><span class="default">$msg</span><span class="string">: From:'</span><span class="default">$from</span><span class="string">' Date:'</span><span class="default">$date</span><span class="string">' Subject:'</span><span class="default">$subj</span><span class="string">'&lt;BR&gt;"</span><span class="keyword">;
<br></span><span class="default">imap_close</span><span class="keyword">(</span><span class="default">$mbox</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="125687">  
  <a class="name">
  <strong class="user"><em>damien at dipisoft dot com</em></strong></a><div class="date" title="2021-01-17 12:06"><strong>7 months ago</strong></div>
  <div class="text" id="Hcom125687">
<div class="phpcode"><code><span class="html">
This is not documented but I just found out that with the FT_UID flag you can use "-1" in sequence as the last identifier. Example:<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">[...]<br>&nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">imap_fetch_overview</span><span class="keyword">(</span><span class="default">$mbox</span><span class="keyword">, </span><span class="string">"</span><span class="default">$first_uid</span><span class="string">:-1"</span><span class="keyword">, </span><span class="default">FT_UID</span><span class="keyword">);<br>&nbsp; &nbsp; [...]<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114119">  
  <a class="name">
  <strong class="user"><em>jeff at newscloud dot com</em></strong></a><div class="date" title="2014-01-13 03:25"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom114119">
<div class="phpcode"><code><span class="html">
The Remote class here (<a rel="nofollow" target="_blank">https://github.com/newscloud/mail_filter/blob/master/app/protected/models/Remote.php</a>) has a lot of examples of processing mailbox folders with imap-fetch-overview:<br><br>&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;open($account_id,$this-&gt;path_inbox);<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $recent_messages = @imap_search($this-&gt;stream, 'SINCE "'.date("j F Y",$tstamp).'"',SE_UID); // 30 November 2013<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($recent_messages===false) continue; // to do - continue into next account<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result = imap_fetch_overview($this-&gt;stream, implode(',',array_slice($recent_messages,0,$message_limit)),FT_UID);<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach ($result as $item) {&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $msg = $this-&gt;parseHeader($item);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110444">  
  <a class="name">
  <strong class="user"><em>info at djdb dot be</em></strong></a><div class="date" title="2012-10-23 07:25"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom110444">
<div class="phpcode"><code><span class="html">
If you lost a mail use this
<br><span class="default">&lt;?php
<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">READallUnreadmail</span><span class="keyword">(){
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$headers </span><span class="keyword">= </span><span class="default">imap_check</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">msgbox</span><span class="keyword">)){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lastnr </span><span class="keyword">= </span><span class="default">$headers</span><span class="keyword">-&gt;</span><span class="default">Nmsgs</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$mails</span><span class="keyword">=</span><span class="default">imap_fetch_overview</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">msgbox</span><span class="keyword">,</span><span class="string">"1:"</span><span class="keyword">.</span><span class="default">$lastnr</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">)){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while (list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$mails</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (++</span><span class="default">$key</span><span class="keyword">&gt;=</span><span class="default">0</span><span class="keyword">&amp;&amp;</span><span class="default">$header</span><span class="keyword">= </span><span class="default">imap_header</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">msgbox</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">)){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$header</span><span class="keyword">-&gt;</span><span class="default">Unseen</span><span class="keyword">==</span><span class="string">'U'</span><span class="keyword">||</span><span class="default">$header</span><span class="keyword">-&gt;</span><span class="default">Recent</span><span class="keyword">==</span><span class="string">'R'</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"&lt;br&gt;"</span><span class="keyword">.</span><span class="default">$val</span><span class="keyword">-&gt;</span><span class="default">msgno</span><span class="keyword">.</span><span class="string">" - "</span><span class="keyword">.</span><span class="default">$val</span><span class="keyword">-&gt;</span><span class="default">date</span><span class="keyword">.</span><span class="string">" - "</span><span class="keyword">.</span><span class="default">$val</span><span class="keyword">-&gt;</span><span class="default">subject</span><span class="keyword">.</span><span class="string">"\n&lt;br&gt;"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print </span><span class="string">"IREAD"</span><span class="keyword">.</span><span class="default">$header</span><span class="keyword">-&gt;</span><span class="default">Msgno</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//$this-&gt;getattachmentof($header-&gt;Msgno);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="41435">  
  <a class="name">
  <strong class="user"><em>Group-Office Developer</em></strong></a><div class="date" title="2004-04-09 05:21"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom41435">
<div class="phpcode"><code><span class="html">
About the sequence sorting again.<br>I've found that there's a significant speed improvement by preparing the sequence and then fetch them at once with large mailboxes. On small mailboxes wyou will not notice a speed difference.<br><br>But then there's the sorting problem. I've spent all night fiuring out how to do this myself. I found the solution!<br><br>Prepare an array of messages with imap_sort. Create a second array that maps the message numbers to the actuall place in the fetched array.<br>You know it will be in numeric order so you can make an array map with the sort() function sorting it from high to low.<br>Then you can proces the array fetched with imap_fetch_overview with the array_map and you will have them sorted. If you need an example look in the Group-Office code classes/imap.class.inc in a version later then 2.04.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="25978">  
  <a class="name">
  <strong class="user"><em>suurenbroekNoSpam at ov35 dot NoSpam dot nl</em></strong></a><div class="date" title="2002-10-14 04:34"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom25978">
<div class="phpcode"><code><span class="html">
Note that these object-variables only exist when they are actually in the mail.<br><br>This means that if a mail has no subject, the property $val-&gt;subject will not exist.<br><br>Calling $val-&gt;subject will generate an notice:<br>Notice: Undefined property: subject in /home/html/inc/Mbox.php on line xxx<br><br>Use this to check it:<br>if (array_key_exists( "subject", get_object_vars($val)))<br>&nbsp;&nbsp; $subj=$val-&gt;subject; <br>else<br>&nbsp;&nbsp; $subj="";</span>
</code></div>
  </div>
 </div>
  <div class="note" id="19358">  
  <a class="name">
  <strong class="user"><em>trionon at mail dot ru</em></strong></a><div class="date" title="2002-02-25 10:13"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom19358">
<div class="phpcode"><code><span class="html">
This performance hint is useful if you need to print the result of imap_sort():<br><br>It's faster to prepare large string with UIDs and then to call imap_fetchoverview once than calling imap_fetchoverview in a loop.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91636">  
  <a class="name">
  <strong class="user"><em>will</em></strong></a><div class="date" title="2009-06-20 09:43"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom91636">
<div class="phpcode"><code><span class="html">
This seems to retrieve incomplete values for headers, instead of getting the entire value, it gets the first. for example, this is a valid To: header
<br>
<br>To: foo1@example.com,foo2@example.com
<br>&nbsp; &nbsp;&nbsp; foo3@example.com
<br>
<br>but imap_fetch_overview will only return:
<br>foo1@example.com</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113937">  
  <a class="name">
  <strong class="user"><em>rueda dot raul at gmail dot com</em></strong></a><div class="date" title="2013-12-18 04:52"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom113937">
<div class="phpcode"><code><span class="html">
English:<br>I've found that for some messages, this function and also function imap_headerinfo(), can't decode the message_id information and returns an ID like "&lt;xxxxxxxxx@unknownmsgid&gt;" <br><br>In these cases, I use the following to get the correct messageid:<br><br>$header=imap_rfc822_parse_headers(imap_fetchheader($mbox,$msgno))<br><br>Spanish:<br>Con algunos mensajes, esta funcion, al igual que la funcion imap_headerinfo(), no pueden decodificar correctamente la informaciÃ³n del ID de mensaje y devuelven un ID como este "&lt;xxxxxxxxx@unknownmsgid&gt;" <br><br>En esos casos, uso lo siguiente para obtener el ID de mensaje correcto:<br><br>$header=imap_rfc822_parse_headers(imap_fetchheader($mbox,$msgno))</span>
</code></div>
  </div>
 </div>
  <div class="note" id="33631">  
  <a class="name">
  <strong class="user"><em>se at designlinks dot net</em></strong></a><div class="date" title="2003-07-02 06:42"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom33631">
<div class="phpcode"><code><span class="html">
To further explain 'warrenfalk's comment, the following sequences are exactly the same, and always returns messages with lowest UID to highest UID:<br><br>1:5<br>5:1<br>1,2,3,4,5<br>5,4,3,2,1<br>3,2,5,1,4<br><br>(always returned as 1,2,3,4,5)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88235">  
  <a class="name">
  <strong class="user"><em>dognose</em></strong></a><div class="date" title="2009-01-16 09:15"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom88235">
<div class="phpcode"><code><span class="html">
That's right: <br><br>calling imap_fetch_overview() once is faster, than calling it<br>in a loop.<br><br>But if you want to get a "day sorted" list, you need to call it in a loop, cause if you enter a "string" of UIDs, they are always sorted by UID, not by the order you entered it.<br><br>Heres a little example how to get a date-sorted list:<br><br><span class="default">&lt;?php<br></span><span class="comment">/*Sort all msgs by Arrival Date. Newest = 0, oldest = Array Count*/<br>/*returns an array, containing the UIDs of messages*/<br></span><span class="default">$SortedArray </span><span class="keyword">= </span><span class="default">imap_sort</span><span class="keyword">(</span><span class="default">$Handle</span><span class="keyword">,</span><span class="default">SORTARRIVAL</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">SE_UID</span><span class="keyword">);<br><br>For (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$Start</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt; </span><span class="default">$Start </span><span class="keyword">+ </span><span class="default">$Limit</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br>&nbsp; &nbsp; &nbsp; </span><span class="comment">/*Read UID from Sorted Array*/<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$UID </span><span class="keyword">= </span><span class="default">$SortedArray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; </span><span class="comment">/*Get Detailed MSG Infos*/<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$Overview </span><span class="keyword">= </span><span class="default">imap_fetch_overview</span><span class="keyword">(</span><span class="default">$Handle</span><span class="keyword">, </span><span class="default">$UID</span><span class="keyword">, </span><span class="default">FT_UID</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; [...]<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74002">  
  <a class="name">
  <strong class="user"><em>xhack at web dot de</em></strong></a><div class="date" title="2007-03-20 07:05"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom74002">
<div class="phpcode"><code><span class="html">
you want a sortet list of mails, but you get always the same order? your c-client seems to cause this. i realized this with linux libc6-2.3.6 and php-5.2.0<br><br>try this little code:<br><br># here you try to sort by your criteria<br>$sort=@imap_sort($mbox,SORTDATE,1,SE_UID); <br>&nbsp; <br># here the order of the messages to fetch should be recognised, but it isn't<br><br>$tmp=@imap_fetch_overview($mbox,implode(',',$sort),FT_UID);<br># so try to work around simply:<br>for($i=0;$i&lt;count($tmp);$i++)<br>{ $liste[$i]=$tmp[array_search($tmp[$i]-&gt;uid,$sort)]; }<br><br>so now you can use the sort by date, address, and so on.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="120646">  
  <a class="name">
  <strong class="user"><em>vijayakumard01 at gmail dot com</em></strong></a><div class="date" title="2017-02-15 12:30"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom120646">
<div class="phpcode"><code><span class="html">
While using fetch overview it displays only single mail. i need to display mail with replied and forward and all. how its possible?</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->

  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from www.php.net/manual/en/function.imap-fetch-overview.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:23:25 GMT -->

</body></html>