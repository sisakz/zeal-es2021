<html><!-- Mirrored from www.php.net/manual/en/function.json-encode.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:45:02 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>json_encode</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.json-encode.html">
 <link rel="shorturl" href="https://www.php.net/json-encode">
 <link rel="alternate" href="https://www.php.net/json-encode" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.json.html">
 <link rel="prev" href="function.json-decode.html">
 <link rel="next" href="function.json-last-error-msg.html">

 <link rel="alternate" href="function.json-encode.html" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.json-encode.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.json-encode.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.json-encode.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/function.json-encode.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.json-encode.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/ro/function.json-encode.php" hreflang="ro">
 <link rel="alternate" href="https://www.php.net/manual/ru/function.json-encode.php" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/function.json-encode.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.json-encode.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0aba.css?t=1539771603&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2ecf.css?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedba57.css?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached3afa.css?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>


</head>
<body class="docs " style="">


<div class="headsup"><a href="https://www.php.net/conferences/index.php#id2021-09-08-1">Longhorn PHP 2021</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.attributes.html">Attributes</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.other.html">Other Basic Extensions</a></li>      <li><a href="book.json.html">JSON</a></li>      <li><a href="ref.json.html">JSON Functions</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="function.json-encode" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">json_encode</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.2.0, PHP 7, PHP 8, PECL json &gt;= 1.2.0)</p><p class="refpurpose"><span class="refname">json_encode</span> — <span class="dc-title">Returns the JSON representation of a value</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.json-encode-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>json_encode</strong></span>(<span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code><span class="initializer"> = 0</span></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$depth</code><span class="initializer"> = 512</span></span>): <span class="type"><span class="type">string</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   Returns a string containing the JSON representation of the supplied
   <code class="parameter">value</code>.
  </p>
  <p class="para">
   The encoding is affected by the supplied <code class="parameter">flags</code>
   and additionally the encoding of float values depends on the value of
   <a href="ini.core.html#ini.serialize-precision" class="link">serialize_precision</a>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.json-encode-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>
    
     <dt>
<code class="parameter">value</code></dt>

     <dd>

      <p class="para">
       The <code class="parameter">value</code> being encoded. Can be any type except
       a <a href="language.types.resource.html" class="link">resource</a>.
      </p>
      <p class="para">
       All string data must be UTF-8 encoded.
      </p>
      
 <blockquote class="note"><p><strong class="note">Note</strong>: 
  </p><p class="para">
   PHP implements a superset of JSON as specified in the original
   <a href="http://www.faqs.org/rfcs/rfc7159" class="link external">»&nbsp;RFC 7159</a>.
  </p>
 <p></p></blockquote>

     </dd>

    
    
     <dt>
<code class="parameter">flags</code></dt>

     <dd>

      <p class="para">
       Bitmask consisting of
       <strong><code>JSON_FORCE_OBJECT</code></strong>,
       <strong><code>JSON_HEX_QUOT</code></strong>,
       <strong><code>JSON_HEX_TAG</code></strong>,
       <strong><code>JSON_HEX_AMP</code></strong>,
       <strong><code>JSON_HEX_APOS</code></strong>,
       <strong><code>JSON_INVALID_UTF8_IGNORE</code></strong>,
       <strong><code>JSON_INVALID_UTF8_SUBSTITUTE</code></strong>,
       <strong><code>JSON_NUMERIC_CHECK</code></strong>,
       <strong><code>JSON_PARTIAL_OUTPUT_ON_ERROR</code></strong>,
       <strong><code>JSON_PRESERVE_ZERO_FRACTION</code></strong>,
       <strong><code>JSON_PRETTY_PRINT</code></strong>,
       <strong><code>JSON_UNESCAPED_LINE_TERMINATORS</code></strong>,
       <strong><code>JSON_UNESCAPED_SLASHES</code></strong>,
       <strong><code>JSON_UNESCAPED_UNICODE</code></strong>,
       <strong><code>JSON_THROW_ON_ERROR</code></strong>.
       The behaviour of these constants is described on the
       <a href="json.constants.html" class="link">JSON constants</a> page.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">depth</code></dt>

     <dd>

      <p class="para">
       Set the maximum depth. Must be greater than zero.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.json-encode-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns a JSON encoded <span class="type">string</span> on success  or <strong><code>false</code></strong> on failure.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.json-encode-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>7.3.0</td>
       <td>
        <strong><code>JSON_THROW_ON_ERROR</code></strong>
        <code class="parameter">flags</code> was added.
       </td>
      </tr>

      <tr>
       <td>7.2.0</td>
       <td>
        <strong><code>JSON_INVALID_UTF8_IGNORE</code></strong>, and
        <strong><code>JSON_INVALID_UTF8_SUBSTITUTE</code></strong>
        <code class="parameter">flags</code> were added.
       </td>
      </tr>

      <tr>
       <td>7.1.0</td>
       <td>
        <strong><code>JSON_UNESCAPED_LINE_TERMINATORS</code></strong>
        <code class="parameter">flags</code> was added.
       </td>
      </tr>

      <tr>
       <td>7.1.0</td>
       <td>
        <a href="ini.core.html#ini.serialize-precision" class="link">serialize_precision</a> is
        used instead of <a href="ini.core.html#ini.precision" class="link">precision</a> when
        encoding double values.
       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.json-encode-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-3434">
    <p><strong>Example #1 A <span class="function"><strong>json_encode()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'a'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'b'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'c'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'d'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'e'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br><br>echo&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$arr</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>{"a":1,"b":2,"c":3,"d":4,"e":5}
</pre></div>
    </div>
   </div>

   <div class="example" id="example-3435">
    <p><strong>Example #2 
     A <span class="function"><strong>json_encode()</strong></span> example showing some flags in use
    </strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'&lt;foo&gt;'</span><span style="color: #007700">,</span><span style="color: #DD0000">"'bar'"</span><span style="color: #007700">,</span><span style="color: #DD0000">'"baz"'</span><span style="color: #007700">,</span><span style="color: #DD0000">'&amp;blong&amp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\xc3\xa9"</span><span style="color: #007700">);<br><br>echo&nbsp;</span><span style="color: #DD0000">"Normal:&nbsp;"</span><span style="color: #007700">,&nbsp;&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"Tags:&nbsp;"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">JSON_HEX_TAG</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"Apos:&nbsp;"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">JSON_HEX_APOS</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"Quot:&nbsp;"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">JSON_HEX_QUOT</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"Amp:&nbsp;"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">JSON_HEX_AMP</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"Unicode:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">JSON_UNESCAPED_UNICODE</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"All:&nbsp;"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">JSON_HEX_TAG&nbsp;</span><span style="color: #007700">|&nbsp;</span><span style="color: #0000BB">JSON_HEX_APOS&nbsp;</span><span style="color: #007700">|&nbsp;</span><span style="color: #0000BB">JSON_HEX_QUOT&nbsp;</span><span style="color: #007700">|&nbsp;</span><span style="color: #0000BB">JSON_HEX_AMP&nbsp;</span><span style="color: #007700">|&nbsp;</span><span style="color: #0000BB">JSON_UNESCAPED_UNICODE</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n\n"</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;array();<br><br>echo&nbsp;</span><span style="color: #DD0000">"Empty&nbsp;array&nbsp;output&nbsp;as&nbsp;array:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$b</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"Empty&nbsp;array&nbsp;output&nbsp;as&nbsp;object:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$b</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">JSON_FORCE_OBJECT</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n\n"</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;array(array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">3</span><span style="color: #007700">));<br><br>echo&nbsp;</span><span style="color: #DD0000">"Non-associative&nbsp;array&nbsp;output&nbsp;as&nbsp;array:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"Non-associative&nbsp;array&nbsp;output&nbsp;as&nbsp;object:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">JSON_FORCE_OBJECT</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n\n"</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">$d&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'foo'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bar'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'baz'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'long'</span><span style="color: #007700">);<br><br>echo&nbsp;</span><span style="color: #DD0000">"Associative&nbsp;array&nbsp;always&nbsp;output&nbsp;as&nbsp;object:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$d</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"Associative&nbsp;array&nbsp;always&nbsp;output&nbsp;as&nbsp;object:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$d</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">JSON_FORCE_OBJECT</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">"\n\n"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>Normal: ["&lt;foo&gt;","'bar'","\"baz\"","&amp;blong&amp;","\u00e9"]
Tags: ["\u003Cfoo\u003E","'bar'","\"baz\"","&amp;blong&amp;","\u00e9"]
Apos: ["&lt;foo&gt;","\u0027bar\u0027","\"baz\"","&amp;blong&amp;","\u00e9"]
Quot: ["&lt;foo&gt;","'bar'","\u0022baz\u0022","&amp;blong&amp;","\u00e9"]
Amp: ["&lt;foo&gt;","'bar'","\"baz\"","\u0026blong\u0026","\u00e9"]
Unicode: ["&lt;foo&gt;","'bar'","\"baz\"","&amp;blong&amp;","é"]
All: ["\u003Cfoo\u003E","\u0027bar\u0027","\u0022baz\u0022","\u0026blong\u0026","é"]

Empty array output as array: []
Empty array output as object: {}

Non-associative array output as array: [[1,2,3]]
Non-associative array output as object: {"0":{"0":1,"1":2,"2":3}}

Associative array always output as object: {"foo":"bar","baz":"long"}
Associative array always output as object: {"foo":"bar","baz":"long"}
</pre></div>
    </div>
   </div>
   <div class="example" id="example-3436">
    <p><strong>Example #3 JSON_NUMERIC_CHECK option example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"Strings&nbsp;representing&nbsp;numbers&nbsp;automatically&nbsp;turned&nbsp;into&nbsp;numbers"</span><span style="color: #007700">.</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$numbers&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'+123123'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'-123123'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'1.2e3'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'0.00001'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(<br>&nbsp;</span><span style="color: #0000BB">$numbers</span><span style="color: #007700">,<br>&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$numbers</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">JSON_NUMERIC_CHECK</span><span style="color: #007700">)<br>);<br>echo&nbsp;</span><span style="color: #DD0000">"Strings&nbsp;containing&nbsp;improperly&nbsp;formatted&nbsp;numbers"</span><span style="color: #007700">.</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$strings&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'+a33123456789'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'a123'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(<br>&nbsp;</span><span style="color: #0000BB">$strings</span><span style="color: #007700">,<br>&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$strings</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">JSON_NUMERIC_CHECK</span><span style="color: #007700">)<br>);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output
something similar to:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>Strings representing numbers automatically turned into numbers
array(4) {
  [0]=&gt;
  string(7) "+123123"
  [1]=&gt;
  string(7) "-123123"
  [2]=&gt;
  string(5) "1.2e3"
  [3]=&gt;
  string(7) "0.00001"
}
string(28) "[123123,-123123,1200,1.0e-5]"
Strings containing improperly formatted numbers
array(2) {
  [0]=&gt;
  string(13) "+a33123456789"
  [1]=&gt;
  string(4) "a123"
}
string(24) "["+a33123456789","a123"]"
</pre></div>
    </div>
   </div>
   <div class="example" id="example-3437">
    <p><strong>Example #4 Sequential versus non-sequential array example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"Sequential&nbsp;array"</span><span style="color: #007700">.</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$sequential&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"bar"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"baz"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"blong"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(<br>&nbsp;</span><span style="color: #0000BB">$sequential</span><span style="color: #007700">,<br>&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$sequential</span><span style="color: #007700">)<br>);<br><br>echo&nbsp;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">.</span><span style="color: #DD0000">"Non-sequential&nbsp;array"</span><span style="color: #007700">.</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$nonsequential&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"bar"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"baz"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"blong"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(<br>&nbsp;</span><span style="color: #0000BB">$nonsequential</span><span style="color: #007700">,<br>&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$nonsequential</span><span style="color: #007700">)<br>);<br><br>echo&nbsp;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">.</span><span style="color: #DD0000">"Sequential&nbsp;array&nbsp;with&nbsp;one&nbsp;key&nbsp;unset"</span><span style="color: #007700">.</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br>unset(</span><span style="color: #0000BB">$sequential</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(<br>&nbsp;</span><span style="color: #0000BB">$sequential</span><span style="color: #007700">,<br>&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$sequential</span><span style="color: #007700">)<br>);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>Sequential array
array(4) {
  [0]=&gt;
  string(3) "foo"
  [1]=&gt;
  string(3) "bar"
  [2]=&gt;
  string(3) "baz"
  [3]=&gt;
  string(5) "blong"
}
string(27) "["foo","bar","baz","blong"]"

Non-sequential array
array(4) {
  [1]=&gt;
  string(3) "foo"
  [2]=&gt;
  string(3) "bar"
  [3]=&gt;
  string(3) "baz"
  [4]=&gt;
  string(5) "blong"
}
string(43) "{"1":"foo","2":"bar","3":"baz","4":"blong"}"

Sequential array with one key unset
array(3) {
  [0]=&gt;
  string(3) "foo"
  [2]=&gt;
  string(3) "baz"
  [3]=&gt;
  string(5) "blong"
}
string(33) "{"0":"foo","2":"baz","3":"blong"}"
</pre></div>
    </div>
   </div>
   <div class="example" id="example-3438">
    <p><strong>Example #5 <strong><code>JSON_PRESERVE_ZERO_FRACTION</code></strong> option example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">12.0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">JSON_PRESERVE_ZERO_FRACTION</span><span style="color: #007700">));<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">12.0</span><span style="color: #007700">));<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>string(4) "12.0"
string(2) "12"
</pre></div>
    </div>
   </div>
  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.json-encode-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    In the event of a failure to encode, <span class="function"><a href="function.json-last-error.html" class="function">json_last_error()</a></span>
    can be used to determine the exact nature of the error.
   </p>
  <p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    When encoding an array, if the keys are not a continuous numeric
    sequence starting from 0, all keys are encoded as strings, and
    specified explicitly for each key-value pair.
   </p>
  <p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    Like the reference JSON encoder, <span class="function"><strong>json_encode()</strong></span> will
    generate JSON that is a simple value (that is, neither an object nor an
    array) if given a <span class="type">string</span>, <span class="type">int</span>, <span class="type">float</span> or <span class="type">bool</span> as an input
    <code class="parameter">value</code>. While most decoders will accept these values
    as valid JSON, some may not, as the specification is ambiguous on this
    point.
   </p>
   <p class="para">
    To summarise, always test that your JSON decoder can handle the output you
    generate from <span class="function"><strong>json_encode()</strong></span>.
   </p>
  <p></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.json-encode-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="interfacename"><a href="class.jsonserializable.html" class="interfacename">JsonSerializable</a></span></li>
    <li class="member"><span class="function"><a href="function.json-decode.html" class="function" rel="rdfs-seeAlso">json_decode()</a> - Decodes a JSON string</span></li>
    <li class="member"><span class="function"><a href="function.json-last-error.html" class="function" rel="rdfs-seeAlso">json_last_error()</a> - Returns the last error occurred</span></li>
    <li class="member"><span class="function"><a href="function.serialize.html" class="function" rel="rdfs-seeAlso">serialize()</a> - Generates a storable representation of a value</span></li>
   </ul>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="118902">  
  <a class="name">
  <strong class="user"><em>ravenswd at gmail dot com</em></strong></a><div class="date" title="2016-02-25 01:41"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom118902">
<div class="phpcode"><code><span class="html">
This isn't mentioned in the documentation for either PHP or jQuery, but if you're passing JSON data to a javascript program, make sure your program begins with:<br><br><span class="default">&lt;?php<br>header</span><span class="keyword">(</span><span class="string">'Content-Type: application/json'</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106641">  
  <a class="name">
  <strong class="user"><em>bohwaz</em></strong></a><div class="date" title="2011-11-23 05:05"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom106641">
<div class="phpcode"><code><span class="html">
Are you sure you want to use JSON_NUMERIC_CHECK, really really sure?<br><br>Just watch this usecase:<br><br><span class="default">&lt;?php<br></span><span class="comment">// International phone number<br></span><span class="default">json_encode</span><span class="keyword">(array(</span><span class="string">'phone_number' </span><span class="keyword">=&gt; </span><span class="string">'+33123456789'</span><span class="keyword">), </span><span class="default">JSON_NUMERIC_CHECK</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>And then you get this JSON:<br><br>{"phone_number":33123456789}<br><br>Maybe it makes sense for PHP (as is_numeric('+33123456789') returns true), but really, casting it as an int?!<br><br>So be careful when using JSON_NUMERIC_CHECK, it may mess up with your data!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94157">  
  <a class="name">
  <strong class="user"><em>simoncpu was here</em></strong></a><div class="date" title="2009-10-20 02:18"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom94157">
<div class="phpcode"><code><span class="html">
A note of caution: If you are wondering why json_encode() encodes your PHP array as a JSON object instead of a JSON array, you might want to double check your array keys because json_encode() assumes that you array is an object if your keys are not sequential.<br><br>e.g.:<br><br><span class="default">&lt;?php<br>$myarray </span><span class="keyword">= Array(</span><span class="string">'isa'</span><span class="keyword">, </span><span class="string">'dalawa'</span><span class="keyword">, </span><span class="string">'tatlo'</span><span class="keyword">);<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$myarray</span><span class="keyword">);<br></span><span class="comment">/* output<br>array(3) {<br>&nbsp; [0]=&gt;<br>&nbsp; string(3) "isa"<br>&nbsp; [1]=&gt;<br>&nbsp; string(6) "dalawa"<br>&nbsp; [2]=&gt;<br>&nbsp; string(5) "tatlo"<br>}<br>*/<br></span><span class="default">?&gt;<br></span><br>As you can see, the keys are sequential; $myarray will be correctly encoded as a JSON array.<br><br><span class="default">&lt;?php<br>$myarray </span><span class="keyword">= Array(</span><span class="string">'isa'</span><span class="keyword">, </span><span class="string">'dalawa'</span><span class="keyword">, </span><span class="string">'tatlo'</span><span class="keyword">);<br><br>unset(</span><span class="default">$myarray</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$myarray</span><span class="keyword">);<br></span><span class="comment">/* output<br>array(2) {<br>&nbsp; [0]=&gt;<br>&nbsp; string(3) "isa"<br>&nbsp; [2]=&gt;<br>&nbsp; string(5) "tatlo"<br>}<br>*/<br></span><span class="default">?&gt;<br></span><br>Unsetting an element will also remove the keys. json_encode() will now assume that this is an object, and will encode it as such.<br><br>SOLUTION: Use array_values() to re-index the array.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102091">  
  <a class="name">
  <strong class="user"><em>bohwaz</em></strong></a><div class="date" title="2011-01-26 02:00"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom102091">
<div class="phpcode"><code><span class="html">
This is intended to be a simple readable json encode function for PHP 5.3+ (and licensed under GNU/AGPLv3 or GPLv3 like you prefer):<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">json_readable_encode</span><span class="keyword">(</span><span class="default">$in</span><span class="keyword">, </span><span class="default">$indent </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$from_array </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$_myself </span><span class="keyword">= </span><span class="default">__FUNCTION__</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$_escape </span><span class="keyword">= function (</span><span class="default">$str</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"!([\b\t\n\r\f\"\\'])!"</span><span class="keyword">, </span><span class="string">"\\\\\\1"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br>&nbsp; &nbsp; };<br><br>&nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br><br>&nbsp; &nbsp; foreach (</span><span class="default">$in </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">"\t"</span><span class="keyword">, </span><span class="default">$indent </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">"\""</span><span class="keyword">.</span><span class="default">$_escape</span><span class="keyword">((string)</span><span class="default">$key</span><span class="keyword">).</span><span class="string">"\": "</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) || </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">"\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="default">$_myself</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$indent </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif (</span><span class="default">is_bool</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="default">$value </span><span class="keyword">? </span><span class="string">'true' </span><span class="keyword">: </span><span class="string">'false'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">'null'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">"\"" </span><span class="keyword">. </span><span class="default">$_escape</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) .</span><span class="string">"\""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">",\n"</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; if (!empty(</span><span class="default">$out</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, -</span><span class="default">2</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">"\t"</span><span class="keyword">, </span><span class="default">$indent</span><span class="keyword">) . </span><span class="string">"{\n" </span><span class="keyword">. </span><span class="default">$out</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">"\n" </span><span class="keyword">. </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">"\t"</span><span class="keyword">, </span><span class="default">$indent</span><span class="keyword">) . </span><span class="string">"}"</span><span class="keyword">;<br><br>&nbsp; &nbsp; return </span><span class="default">$out</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97008">  
  <a class="name">
  <strong class="user"><em>ryan at ryanparman dot com</em></strong></a><div class="date" title="2010-03-27 01:36"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom97008">
<div class="phpcode"><code><span class="html">
I came across the "bug" where running json_encode() over a SimpleXML object was ignoring the CDATA. I ran across <a rel="nofollow" target="_blank">http://bugs.php.net/42001</a> and <a rel="nofollow" target="_blank">http://bugs.php.net/41976,</a> and while I agree with the poster that the documentation should clarify gotchas like this, I was able to figure out how to workaround it.<br><br>You need to convert the SimpleXML object back into an XML string, then re-import it back into SimpleXML using the LIBXML_NOCDATA option. Once you do this, then you can use json_encode() and still get back the CDATA.<br><br><span class="default">&lt;?php<br></span><span class="comment">// Pretend we already have a complex SimpleXML object stored in $xml<br></span><span class="default">$json </span><span class="keyword">= </span><span class="default">json_encode</span><span class="keyword">(new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">(), </span><span class="default">LIBXML_NOCDATA</span><span class="keyword">));<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="124256">  
  <a class="name">
  <strong class="user"><em>karsten at dambekalns dot de</em></strong></a><div class="date" title="2019-10-01 09:17"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom124256">
<div class="phpcode"><code><span class="html">
Be aware that when an error occurs, the return value might be NULL unexpectedly. Example: When running this on PHP &lt; 7.3, you do not get back a string:<br><br>json_encode('ok', JSON_THROW_ON_ERROR, 512);<br><br>The constant not being available produces a warning and results in NULL being returned (see <a rel="nofollow" target="_blank">https://3v4l.org/ku5AH</a>) – I'd expect false, since that's a failure, or "ok" as the encoded result. YMMV.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115733">  
  <a class="name">
  <strong class="user"><em>ninjSPAM at informanceSPAM dot info</em></strong></a><div class="date" title="2014-09-15 09:48"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom115733">
<div class="phpcode"><code><span class="html">
Although this is not documented on the version log here, non-UTF8 handling behaviour has changed in 5.5, in a way that can make debugging difficult.<br><br>Passing a non UTF-8 string to json_encode() will make the function return false in PHP 5.5, while it will only nullify this string (and only this one) in previous versions.<br><br>In a Latin-1 encoded file, write this:<br><span class="default">&lt;?php<br>$a </span><span class="keyword">= array(</span><span class="string">'é'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>PHP &lt; 5.4:<br>string(8) "[null,1]"<br><br>PHP &gt;= 5.5:<br>bool(false)<br><br>PHP 5.5 has it right of course (if encoding fails, return false) but its likely to introduce errors when updating to 5.5 because previously you could get the rest of the JSON even when one string was not in UTF8 (if this string wasn't used, you'd never notify it's nulled)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="95667">  
  <a class="name">
  <strong class="user"><em>garydavis at gmail dot com</em></strong></a><div class="date" title="2010-01-14 07:38"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom95667">
<div class="phpcode"><code><span class="html">
If you are planning on using this function to serve a json file, it's important to note that the json generated by this function is not ready to be consumed by javascript until you wrap it in parens and add ";" to the end. <br><br>It took me a while to figure this out so I thought I'd save others the aggravation.<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; header</span><span class="keyword">(</span><span class="string">'Content-Type: text/javascript; charset=utf8'</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Access-Control-Allow-Origin: <a rel="nofollow" target="_blank">http://www.example.com/</a>'</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Access-Control-Max-Age: 3628800'</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Access-Control-Allow-Methods: GET, POST, PUT, DELETE'</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$file</span><span class="keyword">=</span><span class="string">'rss.xml'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$arr </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);</span><span class="comment">//this creates an object from the xml file<br>&nbsp; &nbsp; </span><span class="default">$json</span><span class="keyword">= </span><span class="string">'('</span><span class="keyword">.</span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">).</span><span class="string">');'</span><span class="keyword">; </span><span class="comment">//must wrap in parens and end with semicolon<br>&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'callback'</span><span class="keyword">].</span><span class="default">$json</span><span class="keyword">); </span><span class="comment">//callback is prepended for json-p<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105789">  
  <a class="name">
  <strong class="user"><em>devilan (REMOVEIT) (at) o2 (dot) pl</em></strong></a><div class="date" title="2011-09-15 12:39"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom105789">
<div class="phpcode"><code><span class="html">
For PHP5.3 users who want to emulate JSON_UNESCAPED_UNICODE, there is simple way to do it:<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">my_json_encode</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//convmap since 0x80 char codes so it takes all multibyte codes (above ASCII 127). So such characters are being "hidden" from normal json_encoding<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_walk_recursive</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, function (&amp;</span><span class="default">$item</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">) { if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">)) </span><span class="default">$item </span><span class="keyword">= </span><span class="default">mb_encode_numericentity</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">, array (</span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0xffff</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0xffff</span><span class="keyword">), </span><span class="string">'UTF-8'</span><span class="keyword">); });<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">mb_decode_numericentity</span><span class="keyword">(</span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">), array (</span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0xffff</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0xffff</span><span class="keyword">), </span><span class="string">'UTF-8'</span><span class="keyword">);<br><br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113219">  
  <a class="name">
  <strong class="user"><em>eep2004 at ukr dot net</em></strong></a><div class="date" title="2013-09-13 05:45"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom113219">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br><br></span><span class="comment">// alternative json_encode<br></span><span class="keyword">function </span><span class="default">_json_encode</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)) return </span><span class="string">'"'</span><span class="keyword">.</span><span class="default">addslashes</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">).</span><span class="string">'"'</span><span class="keyword">;<br>&nbsp; &nbsp; if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)) return </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; if (</span><span class="default">$val </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">) return </span><span class="string">'null'</span><span class="keyword">;<br>&nbsp; &nbsp; if (</span><span class="default">$val </span><span class="keyword">=== </span><span class="default">true</span><span class="keyword">) return </span><span class="string">'true'</span><span class="keyword">;<br>&nbsp; &nbsp; if (</span><span class="default">$val </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) return </span><span class="string">'false'</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="default">$assoc </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; foreach (</span><span class="default">$val </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$k </span><span class="keyword">!== </span><span class="default">$i</span><span class="keyword">++){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$assoc </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$res </span><span class="keyword">= array();<br>&nbsp; &nbsp; foreach (</span><span class="default">$val </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">_json_encode</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$assoc</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$k </span><span class="keyword">= </span><span class="string">'"'</span><span class="keyword">.</span><span class="default">addslashes</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">).</span><span class="string">'"'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">$k</span><span class="keyword">.</span><span class="string">':'</span><span class="keyword">.</span><span class="default">$v</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$res</span><span class="keyword">[] = </span><span class="default">$v</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$res </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">, </span><span class="default">$res</span><span class="keyword">);<br>&nbsp; &nbsp; return (</span><span class="default">$assoc</span><span class="keyword">)? </span><span class="string">'{'</span><span class="keyword">.</span><span class="default">$res</span><span class="keyword">.</span><span class="string">'}' </span><span class="keyword">: </span><span class="string">'['</span><span class="keyword">.</span><span class="default">$res</span><span class="keyword">.</span><span class="string">']'</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;<br></span><br>Example:<br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt; 7<br>&nbsp; &nbsp; [1] =&gt; false<br>&nbsp; &nbsp; [2] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ['a'] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [0] =&gt; 1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; 2<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [3] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; true<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [2] =&gt; 6<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [0] =&gt; 4<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [4] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [0] =&gt; 'b'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; null<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br>)<br>Result: [7,false,{"a":{"0":1,"1":2,"3":{"1":true,"2":6,"0":4},"4":["b",null]}}]<br><br>This function is more accurate and faster than, for example, that one:<br><a rel="nofollow" target="_blank">http://www.php.net/manual/ru/function.json-encode.php#89908</a><br>(RU: эта функция работает более точно и быстрее, чем указанная выше).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="119698">  
  <a class="name">
  <strong class="user"><em>Nick</em></strong></a><div class="date" title="2016-08-04 01:47"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom119698">
<div class="phpcode"><code><span class="html">
Please note that there was an (as of yet) undocumented change to the json_encode() function between 2 versions of PHP with respect to JSON_PRETTY_PRINT:<br><br>In version 5.4.21 and earlier, an empty array [] using JSON_PRETTY_PRINT would be rendered as 3 lines, with the 2nd one an empty (indented) line, i.e.:<br>&nbsp; &nbsp; "data": [<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; ],<br><br>In version 5.4.34 and above, an empty array [] using JSON_PRETTY_PRINT would be rendered as exactly [] at the spot where it occurs, i.e.<br>&nbsp; &nbsp; "data: [],<br><br>This is not mentioned anywhere in the PHP changelist and migration documentations; neither on the json_encode documentation page.<br><br>This is very useful to know when you are parsing the JSON using regular expressions to manually insert portions of data, as is the case with my current use-case (working with JSON exports of over several gigabytes requires sub-operations and insertion of data).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112020">  
  <a class="name">
  <strong class="user"><em>guilhenfsu at gmail dot com</em></strong></a><div class="date" title="2013-04-22 08:35"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom112020">
<div class="phpcode"><code><span class="html">
Solution for UTF-8 Special Chars.<br><br>&lt;?<br><br>$array = array('nome'=&gt;'Paição','cidade'=&gt;'São Paulo');<br><br>$array = array_map('htmlentities',$array);<br><br>//encode<br>$json = html_entity_decode(json_encode($array));<br><br>//Output: {"nome":"Paição","cidade":"São Paulo"}<br>echo $json;<br><br>?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101843">  
  <a class="name">
  <strong class="user"><em>dan at elearnapp dot com</em></strong></a><div class="date" title="2011-01-13 12:01"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom101843">
<div class="phpcode"><code><span class="html">
If you need to force an object (ex: empty array) you can also do:
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="default">&lt;?php json_encode</span><span class="keyword">( (object)</span><span class="default">$arr </span><span class="keyword">); </span><span class="default">?&gt;
<br></span>
<br>which acts the same as 
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="default">&lt;?php json_encode</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">JSON_FORCE_OBJECT</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84997">  
  <a class="name">
  <strong class="user"><em>spam.goes.in.here AT gmail.com</em></strong></a><div class="date" title="2008-08-08 11:05"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom84997">
<div class="phpcode"><code><span class="html">
For anyone who has run into the problem of private properties not being added, you can simply implement the IteratorAggregate interface with the getIterator() method. Add the properties you want to be included in the output into an array in the getIterator() method and return it.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91434">  
  <a class="name">
  <strong class="user"><em>Istratov Vadim</em></strong></a><div class="date" title="2009-06-09 11:54"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom91434">
<div class="phpcode"><code><span class="html">
Be careful with floating values in some locales (e.g. russian) with comma (",") as decimal point. Code:
<br>
<br><span class="default">&lt;?php
<br>setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'ru_RU.utf8'</span><span class="keyword">);
<br>
<br></span><span class="default">$arr </span><span class="keyword">= array(</span><span class="string">'element' </span><span class="keyword">=&gt; </span><span class="default">12.34</span><span class="keyword">);
<br>echo </span><span class="default">json_encode</span><span class="keyword">( </span><span class="default">$arr </span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>Output will be:
<br>--------------
<br>{"element":12,34}
<br>--------------
<br>
<br>Which is NOT a valid JSON markup. You should convert floating point variable to strings or set locale to something like "LC_NUMERIC, 'en_US.utf8'" before using json_encode.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88790">  
  <a class="name">
  <strong class="user"><em>aangel at spam dot com</em></strong></a><div class="date" title="2009-02-07 05:50"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom88790">
<div class="phpcode"><code><span class="html">
Here is a bit more on creating an iterator to get at those pesky private/protected variables:<br><br><span class="default">&lt;?php <br>&nbsp;&nbsp; </span><span class="keyword">class </span><span class="default">Kit </span><span class="keyword">implements </span><span class="default">IteratorAggregate </span><span class="keyword">{<br><br>&nbsp; &nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// if passed an object, we are cloning<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">kitID </span><span class="keyword">= </span><span class="default">$var</span><span class="keyword">-&gt;</span><span class="default">kitID</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">kitName </span><span class="keyword">= </span><span class="default">$var</span><span class="keyword">-&gt;</span><span class="default">kitName</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$var</span><span class="keyword">-&gt;</span><span class="default">productArray </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">productArray</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = (array)</span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp;&nbsp; ...<br>&nbsp; &nbsp; </span><span class="comment">// Create an iterator because private/protected vars can't<br>&nbsp; &nbsp; // be seen by json_encode().<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">getIterator</span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$iArray</span><span class="keyword">[</span><span class="string">'kitID'</span><span class="keyword">] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">kitID</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$iArray</span><span class="keyword">[</span><span class="string">'kitName'</span><span class="keyword">] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">kitName</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$iArray</span><span class="keyword">[</span><span class="string">'productArray'</span><span class="keyword">] = (array)</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">productArray</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; return new </span><span class="default">ArrayIterator</span><span class="keyword">(</span><span class="default">$iArray</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span> <br><br>Calling something like&nbsp; $t = json_encode($this-&gt;getIterator());&nbsp; will give you almost what you want:<br><span class="default">&lt;?php <br></span><span class="keyword">{</span><span class="string">"kitID"</span><span class="keyword">:</span><span class="string">"Kit_Essentials-Books.txt"</span><span class="keyword">,<br></span><span class="string">"kitName"</span><span class="keyword">:</span><span class="string">"Essential Books"</span><span class="keyword">,<br></span><span class="string">"productArray"</span><span class="keyword">:{</span><span class="string">"0470043601"</span><span class="keyword">:{</span><span class="string">"Category"</span><span class="keyword">:</span><span class="string">"Food"</span><span class="keyword">,</span><span class="string">"ASIN"</span><span class="keyword">:</span><span class="string">"0470043601"</span><span class="keyword">} } } <br></span><span class="default">?&gt;<br></span><br>Notice that the productArray is converted to an object ignoring the cast I put in front, which is not what I wanted. I haven't figured out how to make sure that encodes as an array.<br><br>Regardless, bringing that JSON back into an object using json_decode() will give you just a std object, and the only way I've found to get it into the proper object type is to use a constructor that instantiates the object the way it's supposed to be (see __construct($var) above). Like this:<br><span class="default">&lt;?php <br><br>&nbsp; &nbsp; &nbsp; &nbsp; $newKit </span><span class="keyword">= new </span><span class="default">Kit</span><span class="keyword">(</span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">));<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="117023">  
  <a class="name">
  <strong class="user"><em>Goran</em></strong></a><div class="date" title="2015-04-03 07:00"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom117023">
<div class="phpcode"><code><span class="html">
This function has weird behavior regarding error reporting in PHP version 5.4 or lower. This kind of warning is raised only if you configure PHP with "display_errors=Off" (!?): "PHP Warning:&nbsp; json_encode(): Invalid UTF-8 sequence in argument ..."<br><br>You can reproduce this behavior:<br><span class="default">&lt;?php<br></span><span class="comment">// Warning not displayed, not logged<br></span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'display_errors'</span><span class="keyword">, </span><span class="string">'1'</span><span class="keyword">);<br></span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">urldecode</span><span class="keyword">(</span><span class="string">'bad utf string %C4_'</span><span class="keyword">));<br><br></span><span class="comment">// Warning not displayed but logged<br></span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'display_errors'</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">);<br></span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">urldecode</span><span class="keyword">(</span><span class="string">'bad utf string %C4_'</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>This is considered feature - not-a-bug - by PHP devs:<br><a rel="nofollow" target="_blank">https://bugs.php.net/bug.php?id=52397</a><br><a rel="nofollow" target="_blank">https://bugs.php.net/bug.php?id=63004</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="96248">  
  <a class="name">
  <strong class="user"><em>5hunter5 at mail dot ru</em></strong></a><div class="date" title="2010-02-17 03:03"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom96248">
<div class="phpcode"><code><span class="html">
If I want to encode object whith all it's private and protected properties, then I implements that methods in my object:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">public function </span><span class="default">encodeJSON</span><span class="keyword">()
<br>{
<br>&nbsp; &nbsp; foreach (</span><span class="default">$this </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$json</span><span class="keyword">-&gt;</span><span class="default">$key </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$json</span><span class="keyword">);
<br>}
<br>public function </span><span class="default">decodeJSON</span><span class="keyword">(</span><span class="default">$json_str</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$json </span><span class="keyword">= </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">$json_str</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br>&nbsp; &nbsp; foreach (</span><span class="default">$json </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$key </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>Or you may extend your class from base class, wich is implements that methods.
<br>
<br>Found that much more simple than regular expressions with PHP serialized objects...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89908">  
  <a class="name">
  <strong class="user"><em>andyrusterholz at g-m-a-i-l dot c-o-m</em></strong></a><div class="date" title="2009-03-27 11:17"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom89908">
<div class="phpcode"><code><span class="html">
For anyone who would like to encode arrays into JSON, but is using PHP 4, and doesn't want to wrangle PECL around, here is a function I wrote in PHP4 to convert nested arrays into JSON.
<br>
<br>Note that, because javascript converts JSON data into either nested named objects OR vector arrays, it's quite difficult to represent mixed PHP arrays (arrays with both numerical and associative indexes) well in JSON. This function does something funky if you pass it a mixed array -- see the comments for details.
<br>
<br>I don't make a claim that this function is by any means complete (for example, it doesn't handle objects) so if you have any improvements, go for it.
<br>
<br><span class="default">&lt;?php
<br>
<br></span><span class="comment">/**
<br> * Converts an associative array of arbitrary depth and dimension into JSON representation.
<br> *
<br> * NOTE: If you pass in a mixed associative and vector array, it will prefix each numerical
<br> * key with "key_". For example array("foo", "bar" =&gt; "baz") will be translated into
<br> * {"key_0": "foo", "bar": "baz"} but array("foo", "bar") would be translated into [ "foo", "bar" ].
<br> *
<br> * @param $array The array to convert.
<br> * @return mixed The resulting JSON string, or false if the argument was not an array.
<br> * @author Andy Rusterholz
<br> */
<br></span><span class="keyword">function </span><span class="default">array_to_json</span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">){
<br>
<br>&nbsp; &nbsp; if( !</span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">) ){
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; </span><span class="default">$associative </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">( </span><span class="default">array_diff</span><span class="keyword">( </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">), </span><span class="default">array_keys</span><span class="keyword">( </span><span class="default">array_keys</span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">)) ));
<br>&nbsp; &nbsp; if( </span><span class="default">$associative </span><span class="keyword">){
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$construct </span><span class="keyword">= array();
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach( </span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">){
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// We first copy each key/value pair into a staging array,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // formatting each key and value properly as we go.
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Format the key:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if( </span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) ){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="string">"key_</span><span class="default">$key</span><span class="string">"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="string">'"'</span><span class="keyword">.</span><span class="default">addslashes</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">).</span><span class="string">'"'</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Format the value:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">)){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">array_to_json</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if( !</span><span class="default">is_numeric</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">) || </span><span class="default">is_string</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">) ){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="string">'"'</span><span class="keyword">.</span><span class="default">addslashes</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">).</span><span class="string">'"'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Add to staging array:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$construct</span><span class="keyword">[] = </span><span class="string">"</span><span class="default">$key</span><span class="string">: </span><span class="default">$value</span><span class="string">"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Then we collapse the staging array into the JSON form:
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="string">"{ " </span><span class="keyword">. </span><span class="default">implode</span><span class="keyword">( </span><span class="string">", "</span><span class="keyword">, </span><span class="default">$construct </span><span class="keyword">) . </span><span class="string">" }"</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; } else { </span><span class="comment">// If the array is a vector (not associative):
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$construct </span><span class="keyword">= array();
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach( </span><span class="default">$array </span><span class="keyword">as </span><span class="default">$value </span><span class="keyword">){
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Format the value:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">)){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">array_to_json</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if( !</span><span class="default">is_numeric</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">) || </span><span class="default">is_string</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">) ){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="string">'"'</span><span class="keyword">.</span><span class="default">addslashes</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">).</span><span class="string">'"'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Add to staging array:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$construct</span><span class="keyword">[] = </span><span class="default">$value</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Then we collapse the staging array into the JSON form:
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="string">"[ " </span><span class="keyword">. </span><span class="default">implode</span><span class="keyword">( </span><span class="string">", "</span><span class="keyword">, </span><span class="default">$construct </span><span class="keyword">) . </span><span class="string">" ]"</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br>}
<br>
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115655">  
  <a class="name">
  <strong class="user"><em>Ray.Paseur often uses Gmail</em></strong></a><div class="date" title="2014-09-02 06:15"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom115655">
<div class="phpcode"><code><span class="html">
If you're wondering whether a JSON string can be an analog of an XML document, the answer is probably "nope."&nbsp; XML supports attributes, but JSON does not.&nbsp; A JSON string generated by json_encode(), when called on a SimpleXML object, will not have the attributes and no error or exception will issue - the original data will simply be lost.&nbsp; To see this in action:<br><span class="default">&lt;?php <br>error_reporting</span><span class="keyword">(</span><span class="default">E_ALL</span><span class="keyword">);<br>echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br><br></span><span class="comment">// STARTING FROM XML<br></span><span class="default">$xml </span><span class="keyword">= &lt;&lt;&lt;EOD<br></span><span class="string">&lt;?xml version="1.0" ?&gt;<br>&lt;ingredients&gt;<br>&nbsp; &lt;ingredient&gt;<br>&nbsp; &nbsp;&nbsp; &lt;name&gt;tomatoes&lt;/name&gt;<br>&nbsp; &nbsp;&nbsp; &lt;quantity type="cup"&gt;4&lt;/quantity&gt;<br>&nbsp; &lt;/ingredient&gt;<br>&nbsp; &lt;ingredient&gt;<br>&nbsp; &nbsp;&nbsp; &lt;name&gt;salt&lt;/name&gt;<br>&nbsp; &nbsp;&nbsp; &lt;quantity type="tablespoon"&gt;2&lt;/quantity&gt;<br>&nbsp; &lt;/ingredient&gt;<br>&lt;/ingredients&gt;<br></span><span class="keyword">EOD;<br><br></span><span class="comment">// CREATES AN ARRAY OF SimpleXMLElement OBJECTS<br></span><span class="default">$obj </span><span class="keyword">= </span><span class="default">SimpleXML_Load_String</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">);<br>echo </span><span class="default">PHP_EOL</span><span class="keyword">;<br><br></span><span class="comment">// SHOW THE ATTRIBUTES HIDDEN IN THE SimpleXMLElement OBJECTS<br></span><span class="keyword">foreach (</span><span class="default">$obj </span><span class="keyword">as </span><span class="default">$sub</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; echo </span><span class="default">PHP_EOL </span><span class="keyword">. (string)</span><span class="default">$sub</span><span class="keyword">-&gt;</span><span class="default">quantity </span><span class="keyword">. </span><span class="string">' ' </span><span class="keyword">. (string)</span><span class="default">$sub</span><span class="keyword">-&gt;</span><span class="default">quantity</span><span class="keyword">[</span><span class="string">'type'</span><span class="keyword">];<br>}<br>echo </span><span class="default">PHP_EOL</span><span class="keyword">;<br><br></span><span class="comment">// USING THE OBJECT, CREATE A JSON STRING<br></span><span class="default">$jso </span><span class="keyword">= </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">);<br>echo </span><span class="default">htmlentities</span><span class="keyword">(</span><span class="default">$jso</span><span class="keyword">); </span><span class="comment">// 'type' IS LOST<br></span><span class="keyword">echo </span><span class="default">PHP_EOL</span><span class="keyword">;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107616">  
  <a class="name">
  <strong class="user"><em>webmaster_php at colnect dot com</em></strong></a><div class="date" title="2012-02-22 03:52"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom107616">
<div class="phpcode"><code><span class="html">
WARNING! Do not pass associative arrays if the order is important to you. It seems that while FireFox does keep the same order, both Chrome and IE sort it. Here's a little workaround:
<br>
<br><span class="default">&lt;?php
<br>&nbsp; &nbsp; &nbsp; &nbsp; $arWrapper </span><span class="keyword">= array();&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arWrapper</span><span class="keyword">[</span><span class="string">'k'</span><span class="keyword">] = </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arChoices</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arWrapper</span><span class="keyword">[</span><span class="string">'v'</span><span class="keyword">] = </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$arChoices</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$json </span><span class="keyword">= </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$arWrapper</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86513">  
  <a class="name">
  <strong class="user"><em>Garrett</em></strong></a><div class="date" title="2008-10-22 11:17"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom86513">
<div class="phpcode"><code><span class="html">
A note about json_encode automatically quoting numbers:<br><br>It appears that the json_encode function pays attention to the data type of the value. Let me explain what we came across:<br><br>We have found that when retrieving data from our database, there are occasions when numbers appear as strings to json_encode which results in double quotes around the values.<br><br>This can lead to problems within javascript functions expecting the values to be numeric.<br><br>This was discovered when were were retrieving fields from the database which contained serialized arrays. After unserializing them and sending them through the json_encode function the numeric values in the original array were now being treated as strings and showing up with double quotes around them.<br><br>The fix: Prior to encoding the array, send it to a function which checks for numeric types and casts accordingly. Encoding from then on worked as expected.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="126111">  
  <a class="name">
  <strong class="user"><em>mikko dot rantalainen at peda dot net</em></strong></a><div class="date" title="2021-05-26 08:52"><strong>3 months ago</strong></div>
  <div class="text" id="Hcom126111">
<div class="phpcode"><code><span class="html">
Notice that <span class="default">&lt;?php $json </span><span class="keyword">= </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">JSON_FORCE_OBJECT</span><span class="keyword">); </span><span class="default">?&gt;</span> doesn't guarantee that $json is actually an object encoded with JSON syntax. It *only* guarantees that the output doesn't start with "[".<br><br>For example:<br><span class="default">&lt;?php<br>json_encode</span><span class="keyword">(</span><span class="string">"foo"</span><span class="keyword">, </span><span class="default">JSON_FORCE_OBJECT</span><span class="keyword">); </span><span class="comment"># "foo"<br></span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">42</span><span class="keyword">, </span><span class="default">JSON_FORCE_OBJECT</span><span class="keyword">); </span><span class="comment"># 42<br></span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">false</span><span class="keyword">, </span><span class="default">JSON_FORCE_OBJECT</span><span class="keyword">); </span><span class="comment"># false<br></span><span class="default">json_encode</span><span class="keyword">(</span><span class="string">"false"</span><span class="keyword">, </span><span class="default">JSON_FORCE_OBJECT</span><span class="keyword">); </span><span class="comment"># "false"<br></span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">/</span><span class="default">3</span><span class="keyword">, </span><span class="default">JSON_FORCE_OBJECT</span><span class="keyword">); </span><span class="comment"># 3.3333333333333335<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="125781">  
  <a class="name">
  <strong class="user"><em>jakepucan at gmail dot com</em></strong></a><div class="date" title="2021-02-05 08:59"><strong>7 months ago</strong></div>
  <div class="text" id="Hcom125781">
<div class="phpcode"><code><span class="html">
It's also&nbsp; worth mentioning that adding charset is fine.<br><br><span class="default">&lt;?php<br>header</span><span class="keyword">(</span><span class="string">'Content-type:application/json;charset=utf-8'</span><span class="keyword">);<br></span><span class="default">json_encode</span><span class="keyword">([</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Jake'</span><span class="keyword">, </span><span class="string">'country' </span><span class="keyword">=&gt; </span><span class="string">'Philippines'</span><span class="keyword">]);</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90407">  
  <a class="name">
  <strong class="user"><em>Sam Barnum</em></strong></a><div class="date" title="2009-04-20 11:01"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom90407">
<div class="phpcode"><code><span class="html">
Note that if you try to encode an array containing non-utf values, you'll get null values in the resulting JSON string.&nbsp; You can batch-encode all the elements of an array with the array_map function:<br><span class="default">&lt;?php<br>$encodedArray </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">utf8_encode</span><span class="keyword">, </span><span class="default">$rawArray</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="98718">  
  <a class="name">
  <strong class="user"><em>mic dot sumner at gmail dot com</em></strong></a><div class="date" title="2010-07-02 06:39"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom98718">
<div class="phpcode"><code><span class="html">
Hey everyone,<br><br>In my application, I had objects that modeled database rows with a few one to many relationships, so one object may have an array of other objects.<br><br>I wanted to make the object properties private and use getters and setters, but I needed them to be serializable to json without losing the private variables. (I wanted to promote good coding practices but I needed the properties on the client side.) Because of this, I needed to encode not only the normal private properties but also properties that were arrays of other model objects. I looked for awhile with no luck, so I coded my own:<br><br>You can place these methods in each of your classes, or put them in a base class, as I've done. (But note that for this to work, the children classes must declare their properties as protected so the parent class has access)<br><br><span class="default">&lt;?php<br></span><span class="keyword">abstract class </span><span class="default">Model </span><span class="keyword">{<br>&nbsp;&nbsp; <br>&nbsp;&nbsp; public function </span><span class="default">toArray</span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">processArray</span><span class="keyword">(</span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">));<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; private function </span><span class="default">processArray</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">-&gt;</span><span class="default">toArray</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">processArray</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// If the property isn't an object or array, leave it untouched<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">$array</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; public function </span><span class="default">__toString</span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">toArray</span><span class="keyword">());<br>&nbsp; &nbsp; }<br>&nbsp;&nbsp; <br>}<br></span><span class="default">?&gt;<br></span><br>Externally, you can just call<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">echo </span><span class="default">$theObject</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="comment">//or<br>&nbsp; &nbsp; </span><span class="keyword">echo </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$theObject</span><span class="keyword">-&gt;</span><span class="default">toArray</span><span class="keyword">());<br></span><span class="default">?&gt;<br></span><br>And you'll get the json for that object. Hope this helps someone!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="123703">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2019-03-19 08:35"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom123703">
<div class="phpcode"><code><span class="html">
json_encode(), besides its obvious primary use case of sending data to the client, makes for an excellent alternative to var_dump() in combination with the JSONView browser extension. This is especially true if you're unable to install XDebug on your development machine for whatever reason and can't get their pretty-printed var_dump() function to work.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="124372">  
  <a class="name">
  <strong class="user"><em>jugcosta at ymail dot com</em></strong></a><div class="date" title="2019-11-06 09:31"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom124372">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br>error_reporting</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br></span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'display_errors'</span><span class="keyword">, </span><span class="default">FALSE</span><span class="keyword">);<br><br></span><span class="default">$file</span><span class="keyword">= </span><span class="default">__DIR__ </span><span class="keyword">. </span><span class="string">'/utf8.csv'</span><span class="keyword">;<br><br>&nbsp; &nbsp; function </span><span class="default">csvtojson</span><span class="keyword">(</span><span class="default">$inputFile</span><span class="keyword">,</span><span class="default">$delimiter</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ((</span><span class="default">$handleFile </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$inputFile</span><span class="keyword">, </span><span class="string">'r'</span><span class="keyword">)) == </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Não foi possível abrir o arquivo para importar: '</span><span class="default">$file</span><span class="string">'"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dados </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while ((</span><span class="default">$data </span><span class="keyword">= </span><span class="default">fgetcsv</span><span class="keyword">(</span><span class="default">$handleFile</span><span class="keyword">, </span><span class="default">4000</span><span class="keyword">, </span><span class="default">$delimiter</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'trim'</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (! isset(</span><span class="default">$keys</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'trim'</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dados</span><span class="keyword">[] =&nbsp; </span><span class="default">array_combine</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$dados</span><span class="keyword">, </span><span class="default">JSON_UNESCAPED_SLASHES </span><span class="keyword">| </span><span class="default">JSON_UNESCAPED_UNICODE </span><span class="keyword">|</span><span class="default">JSON_NUMERIC_CHECK </span><span class="keyword">| </span><span class="default">JSON_PRETTY_PRINT</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$result</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arquivo </span><span class="keyword">= </span><span class="string">"data_"</span><span class="keyword">.</span><span class="default">date</span><span class="keyword">(</span><span class="string">'ymdhis'</span><span class="keyword">).</span><span class="string">".json"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$arquivo</span><span class="keyword">, </span><span class="string">"a+"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$handleFile</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br>&nbsp;&nbsp; <br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="default">$jsonresult </span><span class="keyword">= </span><span class="default">csvtojson</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="string">";"</span><span class="keyword">);<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="118334">  
  <a class="name">
  <strong class="user"><em>Walter Tross</em></strong></a><div class="date" title="2015-11-18 10:02"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom118334">
<div class="phpcode"><code><span class="html">
If you need pretty-printed output, but want it indented by 2 spaces instead of 4:<br><br>$json_indented_by_4 = json_encode($output, JSON_UNESCAPED_SLASHES|JSON_PRETTY_PRINT);<br>$json_indented_by_2 = preg_replace('/^(&nbsp; +?)\\1(?=[^ ])/m', '$1', $json_indented_by_4);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113618">  
  <a class="name">
  <strong class="user"><em>info at pkrules dot in</em></strong></a><div class="date" title="2013-11-06 01:24"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom113618">
<div class="phpcode"><code><span class="html">
Notice the last json_decode does not working :) ,you need to use a variable to use the encoded data in json_decode():- <br><span class="default">&lt;?php<br>$arr</span><span class="keyword">=array(</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">,</span><span class="string">'c'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">,</span><span class="string">'d'</span><span class="keyword">=&gt;</span><span class="default">4</span><span class="keyword">,</span><span class="string">'e'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">);<br><br>echo </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">).</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br></span><span class="comment">//{"a":1,"b":2,"c":3,"d":4,"e":5}<br><br></span><span class="default">print_r </span><span class="keyword">(</span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)));<br></span><span class="comment">//stdClass Object ( [a] =&gt; 1 [b] =&gt; 2 [c] =&gt; 3 [d] =&gt; 4 [e] =&gt; 5 )<br></span><span class="keyword">echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br></span><span class="default">$var</span><span class="keyword">=</span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br></span><span class="default">print_r </span><span class="keyword">(</span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">));<br></span><span class="comment">//Array ( [a] =&gt; 1 [b] =&gt; 2 [c] =&gt; 3 [d] =&gt; 4 [e] =&gt; 5 ) <br></span><span class="keyword">echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br></span><span class="default">print_r </span><span class="keyword">(</span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)),</span><span class="default">true</span><span class="keyword">);</span><span class="comment">//no output<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112644">  
  <a class="name">
  <strong class="user"><em>CertaiN</em></strong></a><div class="date" title="2013-07-08 03:51"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom112644">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br><br>$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">'php://stdin'</span><span class="keyword">, </span><span class="string">'r'</span><span class="keyword">);<br></span><span class="default">$json </span><span class="keyword">= @</span><span class="default">json_encode</span><span class="keyword">(array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="string">'foo'</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">$fp</span><span class="keyword">));<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$json</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>[PHP5.5 or after]<br>bool(false)<br><br>[PHP 5.4 or before]<br>string(20) "{"a":"foo","b":null}"</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111788">  
  <a class="name">
  <strong class="user"><em>ck at ergovia dot de</em></strong></a><div class="date" title="2013-03-28 11:40"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom111788">
<div class="phpcode"><code><span class="html">
Attention when passing a plain array to json_encode and using JSON_FORCE_OBJECT. It figured out that the index-order of the resulting JSON-string depends on the system PHP is running on.<br><br>$a = array("a" , "b", "c");<br>echo json_encode($a, JSON_FORCE_OBJECT);<br><br>On Xampp (Windows) you get:<br><br>{"0":"a","1":"b","2":"c"}';<br><br>On a machine running debian I get:<br><br>{"2":"a","1":"b","0":"c"}';<br><br>Note that the key:value pairs are different!<br><br>Solution here was to use array_combine to create a ssociative array and then pass it to json_encode:<br><br>json_encode(array_combine(range(0, count($a) - 1), $a), JSON_FORCE_OBJECT);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99457">  
  <a class="name">
  <strong class="user"><em>nicolas dot baptiste at gmail dot com</em></strong></a><div class="date" title="2010-08-18 08:49"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom99457">
<div class="phpcode"><code><span class="html">
Beware of index arrays :<br><br><span class="default">&lt;?php<br></span><span class="keyword">echo </span><span class="default">json_encode</span><span class="keyword">(array(</span><span class="string">"test"</span><span class="keyword">,</span><span class="string">"test"</span><span class="keyword">,</span><span class="string">"test"</span><span class="keyword">));<br>echo </span><span class="default">json_encode</span><span class="keyword">(array(</span><span class="default">0</span><span class="keyword">=&gt;</span><span class="string">"test"</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">=&gt;</span><span class="string">"test"</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">=&gt;</span><span class="string">"test"</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>Will give :<br><br>["test","test","test"]<br>{"0":"test","3":"test","7":"test"}<br><br>arrays are returned only if you don't define index.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="124380">  
  <a class="name">
  <strong class="user"><em>avner at klido dot net</em></strong></a><div class="date" title="2019-11-11 06:59"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom124380">
<div class="phpcode"><code><span class="html">
json_encode will encode array as object if the array;s keys are not sequential starting with zero<br><br>$a = [0=&gt;'a', 1=&gt;'b', 2=&gt;[0 =&gt; 'aa', 1 =&gt; 'c', 2 =&gt; 'dd']]; <br>var_dump(json_encode($a));&nbsp; &nbsp;&nbsp; //["a","b",["aa","c","dd"]]<br><br>$b = [1=&gt;'a', 2=&gt;'b', 3=&gt;[0 =&gt; 'aa', 1 =&gt; 'c', 2 =&gt; 'dd']]; <br>var_dump(jsoon_encode($b));&nbsp; // {"1":"a","2":"b","3":["aa","c","dd"]}<br><br>i would expect PHP to follow the original structure or at least add a parameter to do so</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103137">  
  <a class="name">
  <strong class="user"><em>pvl dot kolensikov at gmail dot com</em></strong></a><div class="date" title="2011-03-28 08:35"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom103137">
<div class="phpcode"><code><span class="html">
As json_encode() is recursive, you can use it to serialize whole structure of objects.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{
<br>&nbsp; &nbsp; public </span><span class="default">$a </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; public </span><span class="default">$b </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;
<br>&nbsp; &nbsp; public </span><span class="default">$collection </span><span class="keyword">= array();
<br>
<br>&nbsp; &nbsp; function&nbsp; </span><span class="default">__construct</span><span class="keyword">(){
<br>&nbsp; &nbsp; &nbsp; &nbsp; for ( </span><span class="default">$i</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--&gt;</span><span class="default">0</span><span class="keyword">;){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">collection</span><span class="keyword">, new </span><span class="default">B</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>}
<br>
<br>class </span><span class="default">B </span><span class="keyword">{
<br>&nbsp; &nbsp; public </span><span class="default">$a </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; public </span><span class="default">$b </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;
<br>}
<br>
<br>echo </span><span class="default">json_encode</span><span class="keyword">(new </span><span class="default">A</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>Will give:
<br>
<br>{
<br>&nbsp; &nbsp; "a":1,
<br>&nbsp; &nbsp; "b":2,
<br>&nbsp; &nbsp; "collection":[{
<br>&nbsp; &nbsp; &nbsp; &nbsp; "a":1,
<br>&nbsp; &nbsp; &nbsp; &nbsp; "b":2
<br>&nbsp; &nbsp; },{
<br>&nbsp; &nbsp; &nbsp; &nbsp; "a":1,
<br>&nbsp; &nbsp; &nbsp; &nbsp; "b":2
<br>&nbsp; &nbsp; },{
<br>&nbsp; &nbsp; &nbsp; &nbsp; "a":1,
<br>&nbsp; &nbsp; &nbsp; &nbsp; "b":2
<br>&nbsp; &nbsp; }]
<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="80339">  
  <a class="name">
  <strong class="user"><em>umbrae at gmail dot com</em></strong></a><div class="date" title="2008-01-10 10:21"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom80339">
<div class="phpcode"><code><span class="html">
Here's a quick function to pretty-print some JSON. Optimizations welcome, as this was a 10-minute dealie without efficiency in mind:
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">// Pretty print some JSON
<br></span><span class="keyword">function </span><span class="default">json_format</span><span class="keyword">(</span><span class="default">$json</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$tab </span><span class="keyword">= </span><span class="string">"&nbsp; "</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$new_json </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$indent_level </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$in_string </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; </span><span class="default">$json_obj </span><span class="keyword">= </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">$json</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; if(</span><span class="default">$json_obj </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; </span><span class="default">$json </span><span class="keyword">= </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$json_obj</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$json</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; for(</span><span class="default">$c </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$c </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$c</span><span class="keyword">++)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$char </span><span class="keyword">= </span><span class="default">$json</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; switch(</span><span class="default">$char</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'{'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'['</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">$in_string</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_json </span><span class="keyword">.= </span><span class="default">$char </span><span class="keyword">. </span><span class="string">"\n" </span><span class="keyword">. </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="default">$tab</span><span class="keyword">, </span><span class="default">$indent_level</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$indent_level</span><span class="keyword">++;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_json </span><span class="keyword">.= </span><span class="default">$char</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'}'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">']'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">$in_string</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$indent_level</span><span class="keyword">--;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_json </span><span class="keyword">.= </span><span class="string">"\n" </span><span class="keyword">. </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="default">$tab</span><span class="keyword">, </span><span class="default">$indent_level</span><span class="keyword">) . </span><span class="default">$char</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_json </span><span class="keyword">.= </span><span class="default">$char</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">','</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">$in_string</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_json </span><span class="keyword">.= </span><span class="string">",\n" </span><span class="keyword">. </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="default">$tab</span><span class="keyword">, </span><span class="default">$indent_level</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_json </span><span class="keyword">.= </span><span class="default">$char</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">':'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">$in_string</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_json </span><span class="keyword">.= </span><span class="string">": "</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_json </span><span class="keyword">.= </span><span class="default">$char</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'"'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$c </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$json</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">] != </span><span class="string">'\\'</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$in_string </span><span class="keyword">= !</span><span class="default">$in_string</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; default:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_json </span><span class="keyword">.= </span><span class="default">$char</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; return </span><span class="default">$new_json</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77367">  
  <a class="name">
  <strong class="user"><em>dennispopel(at)gmail.com</em></strong></a><div class="date" title="2007-08-26 10:43"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom77367">
<div class="phpcode"><code><span class="html">
Obviously, this function has trouble encoding arrays with empty string keys (''). I have just noticed that (because I was using a function in PHP under PHP4). When I switched to PHP5's json_encode, I noticed that browsers could not correctly parse the encoded data. More investigation maybe needed for a bug report, but this quick note may save somebody several hours.<br><br>Also, it manifests on Linux in 5.2.1 (tested on two boxes), on my XP with PHP5.2.3 json_encode() works just great! However, both 5.2.1 and 5.2.3 phpinfo()s show that the json version is 1.2.1 so might be Linux issue</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102628">  
  <a class="name">
  <strong class="user"><em>Mathias Leppich</em></strong></a><div class="date" title="2011-02-24 10:29"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom102628">
<div class="phpcode"><code><span class="html">
If you need a json_encode / json_decode which is array/object/assoc-array you might want to use: <a rel="nofollow" target="_blank">http://gist.github.com/820694</a><br><br><span class="default">&lt;?php<br>$dataIn </span><span class="keyword">= (object)array(<br>&nbsp; &nbsp; </span><span class="string">"assoc" </span><span class="keyword">=&gt; array(</span><span class="string">"cow"</span><span class="keyword">=&gt;</span><span class="string">"moo"</span><span class="keyword">),<br>&nbsp; &nbsp; </span><span class="string">"object" </span><span class="keyword">=&gt; (object)array(</span><span class="string">"cat"</span><span class="keyword">=&gt;</span><span class="string">"miao"</span><span class="keyword">),<br>);<br></span><span class="comment">/*<br>== IN<br>object(stdClass)#2 (2) {<br>&nbsp; ["assoc"]=&gt;<br>&nbsp; array(1) {<br>&nbsp; &nbsp; ["cow"]=&gt;<br>&nbsp; &nbsp; string(3) "moo"<br>&nbsp; }<br>&nbsp; ["object"]=&gt;<br>&nbsp; object(stdClass)#1 (1) {<br>&nbsp; &nbsp; ["cat"]=&gt;<br>&nbsp; &nbsp; string(4) "miao"<br>&nbsp; }<br>}<br><br>== JSON<br>{"assoc":{"_PHP_ASSOC":{"cow":"moo"}},"object":{"cat":"miao"}}<br><br>== OUT<br>object(stdClass)#4 (2) {<br>&nbsp; ["assoc"]=&gt;<br>&nbsp; array(1) {<br>&nbsp; &nbsp; ["cow"]=&gt;<br>&nbsp; &nbsp; string(3) "moo"<br>&nbsp; }<br>&nbsp; ["object"]=&gt;<br>&nbsp; object(stdClass)#7 (1) {<br>&nbsp; &nbsp; ["cat"]=&gt;<br>&nbsp; &nbsp; string(4) "miao"<br>&nbsp; }<br>}<br>*/<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="124723">  
  <a class="name">
  <strong class="user"><em>msegit post pl</em></strong></a><div class="date" title="2020-02-16 05:02"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom124723">
<div class="phpcode"><code><span class="html">
Note, string keys have to be UTF-8 also! (So array_walk_recursive() isn't good way)<br><br>Consider this solution for fixing invalid UTF-8:<br><br><span class="default">&lt;?php<br></span><span class="comment">//$a=array('zażółć gęślą jaźń ZAŻÓŁĆ GĘŚLĄ JAŹŃ', 'Paiçao'=&gt;3, 4=&gt;array('€€=&gt;5, '€', 6));<br></span><span class="default">$a</span><span class="keyword">=array(</span><span class="default">urldecode</span><span class="keyword">(</span><span class="string">'za%BF%F3%B3%E6+g%EA%9Cl%B9+ja%9F%F1+ZA%AF%D3%A3%C6+G%CA%8CL%A5+JA%8F%D1'</span><span class="keyword">), </span><span class="default">urldecode</span><span class="keyword">(</span><span class="string">'Pai%E7ao'</span><span class="keyword">)=&gt;</span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">=&gt;array(</span><span class="string">'€€'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">, </span><span class="string">'€'</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">)); </span><span class="comment">// (for better example, independent of .php file charset)<br><br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br><br></span><span class="comment">// Normal test<br></span><span class="keyword">echo </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">JSON_UNESCAPED_UNICODE </span><span class="keyword">| </span><span class="default">JSON_UNESCAPED_SLASHES </span><span class="keyword">| </span><span class="default">JSON_FORCE_OBJECT </span><span class="keyword">| </span><span class="default">JSON_UNESCAPED_SLASHES</span><span class="keyword">);<br></span><span class="comment">// Kind of error depends on PHP version...:<br>// false or '{"0":null,null:3,"4":{null:5,"0":null,"1":6}}'<br><br></span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'urlencode_recurs'</span><span class="keyword">)) {<br>function </span><span class="default">urlencode_recurs</span><span class="keyword">(&amp;</span><span class="default">$arr</span><span class="keyword">) {<br>&nbsp; &nbsp; foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; &amp;</span><span class="default">$val</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">urlencode_recurs</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$newarr</span><span class="keyword">[(</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) ? </span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) : </span><span class="default">$key</span><span class="keyword">)] = </span><span class="default">$val</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">// Not $arr[...] = ..., to preserve keys/elements order<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">} else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$newarr</span><span class="keyword">[(</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) ? </span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) : </span><span class="default">$key</span><span class="keyword">)] = (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) ? </span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) : </span><span class="default">$val</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// Not $arr[...] = ..., to preserve keys/elements order<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //if (is_string($key)) unset($arr[$key]);&nbsp; &nbsp; // Not this, to preserve keys/elements order, as above<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$arr </span><span class="keyword">= </span><span class="default">$newarr</span><span class="keyword">;<br>} }<br><br>if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">)) </span><span class="default">urlencode_recurs</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br><br></span><span class="comment">// Fixed test<br></span><span class="keyword">echo </span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">JSON_UNESCAPED_UNICODE </span><span class="keyword">| </span><span class="default">JSON_UNESCAPED_SLASHES </span><span class="keyword">| </span><span class="default">JSON_FORCE_OBJECT </span><span class="keyword">| </span><span class="default">JSON_UNESCAPED_SLASHES</span><span class="keyword">));<br></span><span class="comment">// '{"0":"zażółć gęślą jaźń ZAŻÓŁĆ GĘŚLĄ JAŹŃ","Paiçao":3,"4":{"€€":5,"0":"€","1":6}}'<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->

  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from www.php.net/manual/en/function.json-encode.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:45:02 GMT -->

</body></html>