<html><!-- Mirrored from www.php.net/manual/en/function.session-start.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:46:52 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>session_start</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.session-start.html">
 <link rel="shorturl" href="https://www.php.net/session-start">
 <link rel="alternate" href="https://www.php.net/session-start" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.session.html">
 <link rel="prev" href="function.session-set-save-handler.html">
 <link rel="next" href="function.session-status.html">

 <link rel="alternate" href="function.session-start.html" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.session-start.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.session-start.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.session-start.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/function.session-start.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.session-start.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/ro/function.session-start.php" hreflang="ro">
 <link rel="alternate" href="https://www.php.net/manual/ru/function.session-start.php" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/function.session-start.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.session-start.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0aba.css?t=1539771603&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2ecf.css?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedba57.css?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached3afa.css?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>


</head>
<body class="docs " style="">


<div class="headsup"><a href="https://www.php.net/conferences/index.php#id2021-09-08-1">Longhorn PHP 2021</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.attributes.html">Attributes</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.session.html">Session Extensions</a></li>      <li><a href="book.session.html">Sessions</a></li>      <li><a href="ref.session.html">Session Functions</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="function.session-start" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">session_start</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">session_start</span> â€” <span class="dc-title">Start new or resume existing session</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.session-start-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>session_start</strong></span>(<span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = []</span></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>session_start()</strong></span> creates a session or resumes the
   current one based on a session identifier passed via a GET or POST
   request, or passed via a cookie.
  </p>
  <p class="para">
   When <span class="function"><strong>session_start()</strong></span> is called or when a session auto starts,
   PHP will call the open and read session save handlers.  These will either be a built-in
   save handler provided by default or by PHP extensions (such as SQLite or Memcached); or can be
   custom handler as defined by <span class="function"><a href="function.session-set-save-handler.html" class="function">session_set_save_handler()</a></span>.
   The read callback will retrieve any existing session data (stored in a special serialized format)
   and will be unserialized and used to automatically populate the $_SESSION superglobal when the
   read callback returns the saved session data back to PHP session handling.
  </p>
  <p class="para">
   To use a named session, call
   <span class="function"><a href="function.session-name.html" class="function">session_name()</a></span> before calling
   <span class="function"><strong>session_start()</strong></span>.
  </p>
  <p class="para">
   When <a href="session.configuration.html#ini.session.use-trans-sid" class="link">session.use_trans_sid</a>
   is enabled, the <span class="function"><strong>session_start()</strong></span> function will
   register an internal output handler for URL rewriting.
  </p>
  <p class="para">
   If a user uses <code class="literal">ob_gzhandler</code> or similar with
   <span class="function"><a href="function.ob-start.html" class="function">ob_start()</a></span>, the function order is important for
   proper output.  For example,
   <code class="literal">ob_gzhandler</code> must be registered before starting the session.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.session-start-parameters">
  <h3 class="title">Parameters</h3>
  <dl>
   
    <dt>
<code class="parameter">options</code></dt>

    <dd>

     <p class="para">
      If provided, this is an associative array of options that will override
      the currently set
      <a href="session.configuration.html" class="link">session configuration directives</a>.
      The keys should not include the <code class="literal">session.</code> prefix.
     </p>
     <p class="para">
      In addition to the normal set of configuration directives, a
      <code class="literal">read_and_close</code> option may also be provided. If set to
      <strong><code>true</code></strong>, this will result in the session being closed immediately after
      being read, thereby avoiding unnecessary locking if the session data
      won't be changed.
     </p>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.session-start-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   This function returns <strong><code>true</code></strong> if a session was successfully started,
   otherwise <strong><code>false</code></strong>.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.session-start-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>7.1.0</td>
       <td>
        <span class="function"><strong>session_start()</strong></span> now returns <strong><code>false</code></strong> and no longer
        initializes <var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var> when it failed to start the
        session.
       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.session-start-examples">
  <h3 class="title">Examples</h3>
  <div class="refsect2 unknown-examplet" id="refsect2-function.session-start-unknown-examplet">
   <h4 class="title">A basic session example</h4>

   <p class="para">
    </p><div class="example" id="example-4686">
     <p><strong>Example #1 <var class="filename">page1.php</var></strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;page1.php<br><br></span><span style="color: #0000BB">session_start</span><span style="color: #007700">();<br><br>echo&nbsp;</span><span style="color: #DD0000">'Welcome&nbsp;to&nbsp;page&nbsp;#1'</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'favcolor'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'green'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal'</span><span style="color: #007700">]&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'time'</span><span style="color: #007700">]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">();<br><br></span><span style="color: #FF8000">//&nbsp;Works&nbsp;if&nbsp;session&nbsp;cookie&nbsp;was&nbsp;accepted<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;&lt;a&nbsp;href="page2.php"&gt;page&nbsp;2&lt;/a&gt;'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;Or&nbsp;maybe&nbsp;pass&nbsp;along&nbsp;the&nbsp;session&nbsp;id,&nbsp;if&nbsp;needed<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;&lt;a&nbsp;href="page2.php?'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">SID&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'"&gt;page&nbsp;2&lt;/a&gt;'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   <p></p>
   <p class="para">
    After viewing <var class="filename">page1.php</var>, the second page
    <var class="filename">page2.php</var> will magically contain the session
    data.  Read the <a href="ref.session.html" class="link">session reference</a>
    for information on <a href="session.idpassing.html" class="link">propagating
    session ids</a> as it, for example, explains what the constant
    <strong><code>SID</code></strong> is all about.
   </p>
   <p class="para">
    </p><div class="example" id="example-4687">
     <p><strong>Example #2 <var class="filename">page2.php</var></strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;page2.php<br><br></span><span style="color: #0000BB">session_start</span><span style="color: #007700">();<br><br>echo&nbsp;</span><span style="color: #DD0000">'Welcome&nbsp;to&nbsp;page&nbsp;#2&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br>echo&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'favcolor'</span><span style="color: #007700">];&nbsp;</span><span style="color: #FF8000">//&nbsp;green<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal'</span><span style="color: #007700">];&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;cat<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y&nbsp;m&nbsp;d&nbsp;H:i:s'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'time'</span><span style="color: #007700">]);<br><br></span><span style="color: #FF8000">//&nbsp;You&nbsp;may&nbsp;want&nbsp;to&nbsp;use&nbsp;SID&nbsp;here,&nbsp;like&nbsp;we&nbsp;did&nbsp;in&nbsp;page1.php<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;&lt;a&nbsp;href="page1.php"&gt;page&nbsp;1&lt;/a&gt;'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   <p></p>
  </div>

  <div class="refsect2 unknown-unknown-exampleu" id="refsect2-function.session-start-unknown-unknown-exampleu">
   <h4 class="title">Providing options to <span class="function"><strong>session_start()</strong></span></h4>

   <div class="example" id="example-4688">
    <p><strong>Example #3 Overriding the cookie lifetime</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;This&nbsp;sends&nbsp;a&nbsp;persistent&nbsp;cookie&nbsp;that&nbsp;lasts&nbsp;a&nbsp;day.<br></span><span style="color: #0000BB">session_start</span><span style="color: #007700">([<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cookie_lifetime'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">86400</span><span style="color: #007700">,<br>]);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>

   <div class="example" id="example-4689">
    <p><strong>Example #4 Reading the session and closing it</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;If&nbsp;we&nbsp;know&nbsp;we&nbsp;don't&nbsp;need&nbsp;to&nbsp;change&nbsp;anything&nbsp;in&nbsp;the<br>//&nbsp;session,&nbsp;we&nbsp;can&nbsp;just&nbsp;read&nbsp;and&nbsp;close&nbsp;rightaway&nbsp;to&nbsp;avoid<br>//&nbsp;locking&nbsp;the&nbsp;session&nbsp;file&nbsp;and&nbsp;blocking&nbsp;other&nbsp;pages<br></span><span style="color: #0000BB">session_start</span><span style="color: #007700">([<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cookie_lifetime'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">86400</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'read_and_close'&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br>]);</span>
</span>
</code></div>
    </div>

   </div>
  </div>

 </div>


 <div class="refsect1 notes" id="refsect1-function.session-start-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    To use cookie-based sessions, <span class="function"><strong>session_start()</strong></span>
    must be called before outputting anything to the browser.
   </p>
  <p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    Use of <a href="zlib.configuration.html#ini.zlib.output-compression" class="link">zlib.output_compression</a>
    is recommended instead of <span class="function"><a href="function.ob-gzhandler.html" class="function">ob_gzhandler()</a></span>
   </p>
  <p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    This function sends out several HTTP headers depending on the
    configuration. See <span class="function"><a href="function.session-cache-limiter.html" class="function">session_cache_limiter()</a></span> to
    customize these headers.
   </p>
  <p></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.session-start-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></li>
    <li class="member">
     The <a href="session.configuration.html#ini.session.auto-start" class="link">session.auto_start</a>
     configuration directive
    </li>
    <li class="member"><span class="function"><a href="function.session-id.html" class="function" rel="rdfs-seeAlso">session_id()</a> - Get and/or set the current session id</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="102460">  
  <a class="name">
  <strong class="user"><em>linblow at hotmail dot fr</em></strong></a><div class="date" title="2011-02-16 05:06"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom102460">
<div class="phpcode"><code><span class="html">
If you want to handle sessions with a class, I wrote this little class:<br><br><span class="default">&lt;?php<br><br></span><span class="comment">/*<br>&nbsp; &nbsp; Use the static method getInstance to get the object.<br>*/<br><br></span><span class="keyword">class </span><span class="default">Session<br></span><span class="keyword">{<br>&nbsp; &nbsp; const </span><span class="default">SESSION_STARTED </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">;<br>&nbsp; &nbsp; const </span><span class="default">SESSION_NOT_STARTED </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// The state of the session<br>&nbsp; &nbsp; </span><span class="keyword">private </span><span class="default">$sessionState </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">SESSION_NOT_STARTED</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// THE only instance of the class<br>&nbsp; &nbsp; </span><span class="keyword">private static </span><span class="default">$instance</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; private function </span><span class="default">__construct</span><span class="keyword">() {}<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp; *&nbsp; &nbsp; Returns THE instance of 'Session'.<br>&nbsp; &nbsp; *&nbsp; &nbsp; The session is automatically initialized if it wasn't.<br>&nbsp; &nbsp; *&nbsp; &nbsp; <br>&nbsp; &nbsp; *&nbsp; &nbsp; @return&nbsp; &nbsp; object<br>&nbsp; &nbsp; **/<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="keyword">public static function </span><span class="default">getInstance</span><span class="keyword">()<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ( !isset(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$instance</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$instance </span><span class="keyword">= new </span><span class="default">self</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$instance</span><span class="keyword">-&gt;</span><span class="default">startSession</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$instance</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp; *&nbsp; &nbsp; (Re)starts the session.<br>&nbsp; &nbsp; *&nbsp; &nbsp; <br>&nbsp; &nbsp; *&nbsp; &nbsp; @return&nbsp; &nbsp; bool&nbsp; &nbsp; TRUE if the session has been initialized, else FALSE.<br>&nbsp; &nbsp; **/<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">startSession</span><span class="keyword">()<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sessionState </span><span class="keyword">== </span><span class="default">self</span><span class="keyword">::</span><span class="default">SESSION_NOT_STARTED </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sessionState </span><span class="keyword">= </span><span class="default">session_start</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sessionState</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp; *&nbsp; &nbsp; Stores datas in the session.<br>&nbsp; &nbsp; *&nbsp; &nbsp; Example: $instance-&gt;foo = 'bar';<br>&nbsp; &nbsp; *&nbsp; &nbsp; <br>&nbsp; &nbsp; *&nbsp; &nbsp; @param&nbsp; &nbsp; name&nbsp; &nbsp; Name of the datas.<br>&nbsp; &nbsp; *&nbsp; &nbsp; @param&nbsp; &nbsp; value&nbsp; &nbsp; Your datas.<br>&nbsp; &nbsp; *&nbsp; &nbsp; @return&nbsp; &nbsp; void<br>&nbsp; &nbsp; **/<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">__set</span><span class="keyword">( </span><span class="default">$name </span><span class="keyword">, </span><span class="default">$value </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp; *&nbsp; &nbsp; Gets datas from the session.<br>&nbsp; &nbsp; *&nbsp; &nbsp; Example: echo $instance-&gt;foo;<br>&nbsp; &nbsp; *&nbsp; &nbsp; <br>&nbsp; &nbsp; *&nbsp; &nbsp; @param&nbsp; &nbsp; name&nbsp; &nbsp; Name of the datas to get.<br>&nbsp; &nbsp; *&nbsp; &nbsp; @return&nbsp; &nbsp; mixed&nbsp; &nbsp; Datas stored in session.<br>&nbsp; &nbsp; **/<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">__get</span><span class="keyword">( </span><span class="default">$name </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ( isset(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">]))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; public function </span><span class="default">__isset</span><span class="keyword">( </span><span class="default">$name </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return isset(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">]);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; public function </span><span class="default">__unset</span><span class="keyword">( </span><span class="default">$name </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; unset( </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] );<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp; *&nbsp; &nbsp; Destroys the current session.<br>&nbsp; &nbsp; *&nbsp; &nbsp; <br>&nbsp; &nbsp; *&nbsp; &nbsp; @return&nbsp; &nbsp; bool&nbsp; &nbsp; TRUE is session has been deleted, else FALSE.<br>&nbsp; &nbsp; **/<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">destroy</span><span class="keyword">()<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sessionState </span><span class="keyword">== </span><span class="default">self</span><span class="keyword">::</span><span class="default">SESSION_STARTED </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sessionState </span><span class="keyword">= !</span><span class="default">session_destroy</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset( </span><span class="default">$_SESSION </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return !</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sessionState</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="comment">/*<br>&nbsp; &nbsp; Examples:<br>*/<br><br>// We get the instance<br></span><span class="default">$data </span><span class="keyword">= </span><span class="default">Session</span><span class="keyword">::</span><span class="default">getInstance</span><span class="keyword">();<br><br></span><span class="comment">// Let's store datas in the session<br></span><span class="default">$data</span><span class="keyword">-&gt;</span><span class="default">nickname </span><span class="keyword">= </span><span class="string">'Someone'</span><span class="keyword">;<br></span><span class="default">$data</span><span class="keyword">-&gt;</span><span class="default">age </span><span class="keyword">= </span><span class="default">18</span><span class="keyword">;<br><br></span><span class="comment">// Let's display datas<br></span><span class="default">printf</span><span class="keyword">( </span><span class="string">'&lt;p&gt;My name is %s and I\'m %d years old.&lt;/p&gt;' </span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">-&gt;</span><span class="default">nickname </span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">-&gt;</span><span class="default">age </span><span class="keyword">);<br><br></span><span class="comment">/*<br>&nbsp; &nbsp; It will display:<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; Array<br>&nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; [nickname] =&gt; Someone<br>&nbsp; &nbsp; &nbsp; &nbsp; [age] =&gt; 18<br>&nbsp; &nbsp; )<br>*/<br><br></span><span class="default">printf</span><span class="keyword">( </span><span class="string">'&lt;pre&gt;%s&lt;/pre&gt;' </span><span class="keyword">, </span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$_SESSION </span><span class="keyword">, </span><span class="default">TRUE </span><span class="keyword">));<br><br></span><span class="comment">// TRUE<br></span><span class="default">var_dump</span><span class="keyword">( isset( </span><span class="default">$data</span><span class="keyword">-&gt;</span><span class="default">nickname </span><span class="keyword">));<br><br></span><span class="comment">// We destroy the session<br></span><span class="default">$data</span><span class="keyword">-&gt;</span><span class="default">destroy</span><span class="keyword">();<br><br></span><span class="comment">// FALSE<br></span><span class="default">var_dump</span><span class="keyword">( isset( </span><span class="default">$data</span><span class="keyword">-&gt;</span><span class="default">nickname </span><span class="keyword">));<br><br></span><span class="default">?&gt;<br></span><br>I prefer using this class instead of using directly the array $_SESSION.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="117157">  
  <a class="name">
  <strong class="user"><em>aaronw at catalyst dot net dot nz</em></strong></a><div class="date" title="2015-04-23 06:56"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom117157">
<div class="phpcode"><code><span class="html">
As others have noted, PHP's session handler is blocking. When one of your scripts calls session_start(), any other script that also calls session_start() with the same session ID will sleep until the first script closes the session.<br><br>A common workaround to this is call session_start() and session_write_close() each time you want to update the session.<br><br>The problem with this, is that each time you call session_start(), PHP prints a duplicate copy of the session cookie to the HTTP response header. Do this enough times (as you might do in a long-running script), and the response header can get so large that it causes web servers &amp; browsers to crash or reject your response as malformed.<br><br>This error has been reported to PHP HQ, but they've marked it "Won't fix" because they say you're not supposed to open and close the session during a single script like this. <a rel="nofollow" target="_blank">https://bugs.php.net/bug.php?id=31455</a><br><br>As a workaround, I've written a function that uses headers_list() and header_remove() to clear out the duplicate cookies. It's interesting to note that even on requests when PHP sends duplicate session cookies, headers_list() still only lists one copy of the session cookie. Nonetheless, calling header_remove() removes all the duplicate copies.<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * Every time you call session_start(), PHP adds another<br> * identical session cookie to the response header. Do this<br> * enough times, and your response header becomes big enough<br> * to choke the web server.<br> *<br> * This method clears out the duplicate session cookies. You can<br> * call it after each time you've called session_start(), or call it<br> * just before you send your headers.<br> */<br></span><span class="keyword">function </span><span class="default">clear_duplicate_cookies</span><span class="keyword">() {<br>&nbsp; &nbsp; </span><span class="comment">// If headers have already been sent, there's nothing we can do<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">headers_sent</span><span class="keyword">()) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="default">$cookies </span><span class="keyword">= array();<br>&nbsp; &nbsp; foreach (</span><span class="default">headers_list</span><span class="keyword">() as </span><span class="default">$header</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Identify cookie headers<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">, </span><span class="string">'Set-Cookie:'</span><span class="keyword">) === </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cookies</span><span class="keyword">[] = </span><span class="default">$header</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">// Removes all cookie headers, including duplicates<br>&nbsp; &nbsp; </span><span class="default">header_remove</span><span class="keyword">(</span><span class="string">'Set-Cookie'</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="comment">// Restore one copy of each cookie<br>&nbsp; &nbsp; </span><span class="keyword">foreach(</span><span class="default">array_unique</span><span class="keyword">(</span><span class="default">$cookies</span><span class="keyword">) as </span><span class="default">$cookie</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="default">$cookie</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113985">  
  <a class="name">
  <strong class="user"><em>ohcc at 163 dot com</em></strong></a><div class="date" title="2013-12-25 04:00"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom113985">
<div class="phpcode"><code><span class="html">
The constant SID would always be '' (an empty string) if directive session.use_trans_sid in php ini file is set to 0. <br><br>So remember to set session.use_trans_sid to 1 and restart your server before you use SID in your php script.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="95372">  
  <a class="name">
  <strong class="user"><em>jamestrowbridge at gmail dot com</em></strong></a><div class="date" title="2009-12-29 09:57"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom95372">
<div class="phpcode"><code><span class="html">
Unfortunately, after pulling my hair out trying to figure out why my application was working fine in every browser other than IE ( Internet Explorer) (Opera, Chrome, Firefox, Safari are what I've tested this in) - when using a DNS CNAME record (like a vanity name that is different from the DNS A record, which is the hostname of the server) sessions do not work correctly.
<br>
<br>If you store a session var while on the CNAME:
<br>vanity.example.com and the hostname of the server is hosname.example.com
<br>Then try to call the variable from a different page, it will not find it because of the CNAME (I guess it store the variable under the hostname, then when trying to read it it's still looking under the CNAME) the same application works fine when accessing it under the hostname directly.&nbsp; Keep in mind that I was testing this on an internal network.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="120589">  
  <a class="name">
  <strong class="user"><em>bachtel at [googles email service]dotcom</em></strong></a><div class="date" title="2017-02-03 07:54"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom120589">
<div class="phpcode"><code><span class="html">
If you are using a custom session handler via session_set_save_handler() then calling session_start() in PHP 7.1 you might see an error like this:<br>session_start(): Failed to read session data: user (path: /var/lib/php/session) in ...<br><br>As of this writing, it seems to be happening in PHP 7.1, and things look OK in PHP7.0. <br><br>It is also hard to track down because if a session already exists for this id (maybe created by an earlier version of PHP), it will not trigger this issue because the $session_data will not be null.<br><br>The fix is simple... you just need to check for 'null' during your read function:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">read</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">)<br>{<br>&nbsp; </span><span class="comment">//... pull the data out of the DB, off the disk, memcache, etc<br>&nbsp; </span><span class="default">$session_data </span><span class="keyword">= </span><span class="default">getSessionDataFromSomewhere</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">);<br>&nbsp; <br>&nbsp; </span><span class="comment">//check to see if $session_data is null before returning (CRITICAL)<br>&nbsp; </span><span class="keyword">if(</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$session_data</span><span class="keyword">))<br>&nbsp; {<br>&nbsp; &nbsp; </span><span class="default">$session_data </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;&nbsp; </span><span class="comment">//use empty string instead of null!<br>&nbsp; </span><span class="keyword">}<br><br>&nbsp; return </span><span class="default">$session_data</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121507">  
  <a class="name">
  <strong class="user"><em>marco dot agnoli at me dot com</em></strong></a><div class="date" title="2017-08-10 07:50"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121507">
<div class="phpcode"><code><span class="html">
I recently made an interesting observation:<br><br>It seems that `session_start()` can return `true` even if the session was not properly created. In my case, the disk storage was full and so the session data could not be written to disk. I had some logic that resulted in an infinite loop when the session was not written to disk.<br><br>To check if the session really was saved to disk I used:<br><br>```<br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">safe_session_start</span><span class="keyword">() {<br>&nbsp; &nbsp; </span><span class="comment"># Attempt to start a session<br>&nbsp; &nbsp; </span><span class="keyword">if (!@\</span><span class="default">session_start</span><span class="keyword">()) return </span><span class="default">false</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">#<br>&nbsp; &nbsp; # Check if we need to perform<br>&nbsp; &nbsp; # the write test.<br>&nbsp; &nbsp; #<br>&nbsp; &nbsp; </span><span class="keyword">if (!isset(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'__validated'</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'__validated'</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment"># Attempt to write session to disk<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">@\</span><span class="default">session_write_close</span><span class="keyword">();<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment"># Unset the variable from memory.<br>&nbsp; &nbsp; &nbsp; &nbsp; # This step may be unnecessary<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">unset(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'__validated'</span><span class="keyword">]);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment"># Re-start session<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">@\</span><span class="default">session_start</span><span class="keyword">();<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment"># Check if variable value is retained<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (!isset(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'__validated'</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment"># Session was not written to disk<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>}<br><br>if (!</span><span class="default">safe_session_start</span><span class="keyword">()) {<br>&nbsp; &nbsp; </span><span class="comment"># Sessions are probably not written to disk...<br>&nbsp; &nbsp; # Handle error accordingly.<br></span><span class="keyword">}<br><br></span><span class="default">?&gt;<br></span>```<br><br>Took me quite a while to figure this out. <br><br>Maybe it helps someone!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101452">  
  <a class="name">
  <strong class="user"><em>dave1010 at gmail dot com</em></strong></a><div class="date" title="2010-12-17 01:35"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom101452">
<div class="phpcode"><code><span class="html">
PHP locks the session file until it is closed. If you have 2 scripts using the same session (i.e. from the same user) then the 2nd script will not finish its call to session_start() until the first script finishes execution.<br><br>If you have scripts that run for more than a second and users may be making more than 1 request at a time then it is worth calling session_write_close() as soon as you've finished writing session data.<br><br><span class="default">&lt;?php<br></span><span class="comment">// a lock is places on the session, so other scripts will have to wait<br></span><span class="default">session_start</span><span class="keyword">();<br><br></span><span class="comment">// do all your writing to $_SESSION<br></span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br><br></span><span class="comment">// $_SESSION can still be read, but writing will not update the session.<br>// the lock is removed and other scripts can now read the session<br></span><span class="default">session_write_close</span><span class="keyword">();<br><br></span><span class="default">do_something_slow</span><span class="keyword">();<br></span><span class="default">?&gt;<br></span><br>Found this out from <a rel="nofollow" target="_blank">http://konrness.com/php5/how-to-prevent-blocking-php-requests/</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="92432">  
  <a class="name">
  <strong class="user"><em>emre@yazici</em></strong></a><div class="date" title="2009-07-23 02:46"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom92432">
<div class="phpcode"><code><span class="html">
PHP Manual specifically denotes this common mistake:<br><br>Depending on the session handler, not all characters are allowed within the session id. For example, the file session handler only allows characters in the range a-z A-Z 0-9 , (comma) and - (minus)!<br><br>See session_id() manual page for more details.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="125487">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2020-11-04 02:44"><strong>10 months ago</strong></div>
  <div class="text" id="Hcom125487">
<div class="phpcode"><code><span class="html">
Be careful with the 'read_and_close' option. It doesn't update the session file's last modification time unlike the default PHP behaviour when you don't close the session (or when you use session_write_close explicitly).<br>Old session files (for me, older than 24 minutes) will be occasionally cleared by the garbage collector (for me every 09 and 39 minute of every hour).<br>So a session can disappear even if the page regularly sends requests to the server that only reads and closes the session.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121313">  
  <a class="name">
  <strong class="user"><em>axew3 at axew3 dot com</em></strong></a><div class="date" title="2017-07-04 12:23"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121313">
<div class="phpcode"><code><span class="html">
X Maintainers ... Sorry to be such pain the ass, please delete this duplicate, because submitted in a crazy 'session' where i've mess things between browser tabs ... sorry again, alessio<br><a rel="nofollow" target="_blank">http://php.net/manual/en/function.session-start.php#121310</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="110649">  
  <a class="name">
  <strong class="user"><em>someOne_01 at somewhere dot com</em></strong></a><div class="date" title="2012-11-17 02:30"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom110649">
<div class="phpcode"><code><span class="html">
When you have an import script that takes long to execute, the browser seem to lock up and you cannot access the website anymore. this is because a request is reading and locking the session file to prevent corruption.
<br>
<br>you can either 
<br>- use a different session handler with session_set_save_handler()
<br>- use session_write_close() in the import script as soon you don't need session anymore (best moment is just before the long during part takes place), you can session_start when ever you want and as many times you like if your import script requires session variables changed. 
<br>
<br>example
<br><span class="default">&lt;?php
<br>session_start</span><span class="keyword">(); </span><span class="comment">//initiate / open session
<br></span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'count'</span><span class="keyword">] = </span><span class="default">0</span><span class="keyword">; </span><span class="comment">// store something in the session
<br></span><span class="default">session_write_close</span><span class="keyword">(); </span><span class="comment">//now close it, 
<br># from here every other script can be run (and makes it seem like multitasking)
<br></span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">100</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){ </span><span class="comment">//do 100 cycles
<br>&nbsp; &nbsp; </span><span class="default">session_start</span><span class="keyword">(); </span><span class="comment">//open the session again for editing a variable
<br>&nbsp; &nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'count'</span><span class="keyword">] += </span><span class="default">1</span><span class="keyword">; </span><span class="comment">//change variable
<br>&nbsp; &nbsp; </span><span class="default">session_write_close</span><span class="keyword">(); </span><span class="comment">//now close the session again!
<br>&nbsp; &nbsp; </span><span class="default">sleep</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">); </span><span class="comment">//every cycle sleep two seconds, or do a heavy task
<br></span><span class="keyword">}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87069">  
  <a class="name">
  <strong class="user"><em>andy_isherwood at hotmail dot com</em></strong></a><div class="date" title="2008-11-18 06:54"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom87069">
<div class="phpcode"><code><span class="html">
A session created with session_start will only be available to pages within the directory tree of the page that first created it.<br><br>i.e. If the page that first creates the session is /dir1/dir2/index.php and the user then goes to any page above dir2 (e.g. /dir1/index.php), session_start will create a new session rather than use the existing one.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="51520">  
  <a class="name">
  <strong class="user"><em>jorrizza at gmail dot com</em></strong></a><div class="date" title="2005-04-02 05:33"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom51520">
<div class="phpcode"><code><span class="html">
If you open a popup window (please no commercial ones!) with javascript window.open it might happen IE blocks the session cookie.<br>A simple fix for that is opening the new window with the session ID in a GET value. Note I don't use SID for this, because it will not allways be available.<br><br>----page.php----<br>//you must have a session active here<br>window.open('popup.php?sid=<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">session_id</span><span class="keyword">(); </span><span class="default">?&gt;</span>', '700x500', 'toolbar=no, status=no, scrollbars=yes, location=no, menubar=no, directories=no, width=700, height=500');<br><br>----popup.php----<br><span class="default">&lt;?php<br>session_id</span><span class="keyword">(</span><span class="default">strip_tags</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'sid'</span><span class="keyword">]));<br></span><span class="default">session_start</span><span class="keyword">();<br></span><span class="comment">//and go on with your session vars<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114209">  
  <a class="name">
  <strong class="user"><em>elitescripts2000 at yahoo dot com</em></strong></a><div class="date" title="2014-01-25 03:56"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom114209">
<div class="phpcode"><code><span class="html">
3 easy but vital things about Sessions in AJAX Apps.<br><br><span class="default">&lt;?php<br></span><span class="comment">// session start<br><br>//&nbsp; It is VERY important to include a Period if using<br>// a whole domain.&nbsp; (.yourdomain.com)<br>// It is VERY important to set the root path your session will always<br>// operate in... (/members) will ensure sessions will NOT be interfered<br>// with a session with a path of say (/admin) ... so you can log in<br>// as /admin and as /members... NEVER do unset($_SESSION)<br>// $_SESSION=array(); is preferred, session_unset();&nbsp; session_destroy();<br><br></span><span class="default">session_set_cookie_params</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="string">'/members'</span><span class="keyword">, </span><span class="string">'.yourdomain.com'</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br></span><span class="default">session_start</span><span class="keyword">();<br></span><span class="default">$_SESSION </span><span class="keyword">= array();<br></span><span class="default">session_unset</span><span class="keyword">();<br></span><span class="default">session_destroy</span><span class="keyword">();<br><br></span><span class="default">session_set_cookie_params</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="string">'/members'</span><span class="keyword">, </span><span class="string">'.yourdomain.com'</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br></span><span class="default">session_start</span><span class="keyword">();<br><br></span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'whatever'</span><span class="keyword">] = </span><span class="string">'youwhat'</span><span class="keyword">;<br><br></span><span class="comment">// session destroying <br><br>// To be safe, clear out your $_SESSION array<br>// Next, what most people do NOT do is delete the session cookie!<br>// It is easy to delete a cookie by expiring it long before the current time.<br>// The ONLY WAY to delete a cookie, is to make sure ALL parameters match the<br>// cookie to be deleted...which is easy to get those params with <br>// session_get_cookie_params()...<br>// FInally, use&nbsp; session_unset(); and session_destroy(); in this order to ensure<br>// Chrome, IE, Firefox and others, are properly destroying the session.<br></span><span class="default">$_SESSION </span><span class="keyword">= array();<br>if (</span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'session.use_cookies'</span><span class="keyword">))<br>{<br>&nbsp; &nbsp; </span><span class="default">$p </span><span class="keyword">= </span><span class="default">session_get_cookie_params</span><span class="keyword">();<br>&nbsp; &nbsp; </span><span class="default">setcookie</span><span class="keyword">(</span><span class="default">session_name</span><span class="keyword">(), </span><span class="string">''</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">() - </span><span class="default">31536000</span><span class="keyword">, </span><span class="default">$p</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">], </span><span class="default">$p</span><span class="keyword">[</span><span class="string">'domain'</span><span class="keyword">], </span><span class="default">$p</span><span class="keyword">[</span><span class="string">'secure'</span><span class="keyword">], </span><span class="default">$p</span><span class="keyword">[</span><span class="string">'httponly'</span><span class="keyword">]);<br> }<br></span><span class="default">session_unset</span><span class="keyword">();<br></span><span class="default">session_destroy</span><span class="keyword">();<br><br></span><span class="comment">// AJAX and SESSIONS.<br>// Example... you start a session based PHP page, which then calls an Ajax (XMLHTTP) authenticated<br>// using the SAME SESSION to Poll and output the data, for example.&nbsp; But, you notice when you<br>// try to start the Polling AJAX call always HANGS and seems to hang at the session_start().<br>// This is because the session is opened in the first page, calls the AJAX polling example, and<br>// tries to open the same session (for authentication) and do the AJAX call, you MUST call<br>// session_write_close(); meaning you are done writing to the $_SESSION variable, which really<br>// represents a file that must be CLOSED with session_write_close();....<br>// THAN you can call your AJAX Polling code to reopen the same session and do its polling...<br>// Normally, the $_SESSION is closed automatically when the script is closed or finished executing<br>// So, if you need to keep a PHP page running after opening a SESSION, simply close it when finished<br>// writing to $_SESSION so the AJAX polling page can authenticate and use the same session in a<br>// seperate web page...<br><br></span><span class="default">session_write_close</span><span class="keyword">();<br><br></span><span class="default">?&gt;<br></span><br>Hope this helps someone with their sessions...<br>Thanks.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="118561">  
  <a class="name">
  <strong class="user"><em>fabmlk at hotmail dot com</em></strong></a><div class="date" title="2015-12-28 02:04"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom118561">
<div class="phpcode"><code><span class="html">
If you ever need to open multiple distinct sessions in the same script and still let PHP generate session ids for you, here is a simple function I came up with (PHP default session handler is assumed):<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br>&nbsp; * Switch to or transparently create session with name $name.<br>&nbsp; * It can easily be expanded to manage different sessions lifetime.<br>&nbsp; */<br></span><span class="keyword">function </span><span class="default">session_switch</span><span class="keyword">(</span><span class="default">$name </span><span class="keyword">= </span><span class="string">"PHPSESSID"</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; static </span><span class="default">$created_sessions </span><span class="keyword">= array();<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">session_id</span><span class="keyword">() != </span><span class="string">''</span><span class="keyword">) { </span><span class="comment">// if a session is currently opened, close it<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">session_write_close</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">session_name</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$_COOKIE</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">])) {&nbsp; &nbsp; </span><span class="comment">// if a specific session already exists, merge with $created_sessions<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$created_sessions</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">$_COOKIE</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$created_sessions</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">])) { </span><span class="comment">// if existing session, impersonate it<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">session_id</span><span class="keyword">(</span><span class="default">$created_sessions</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">session_start</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; } else { </span><span class="comment">// create new session<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">session_start</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$_SESSION </span><span class="keyword">= array(); </span><span class="comment">// empty content before duplicating session file<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // duplicate last session file with new id and current $_SESSION content<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // If this is the first created session, there is nothing to duplicate from and passing true as argument will take care of "creating" only one session file<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">session_regenerate_id</span><span class="keyword">(empty(</span><span class="default">$created_sessions</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$created_sessions</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">session_id</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>}<br><br></span><span class="default">session_switch</span><span class="keyword">(</span><span class="string">"SESSION1"</span><span class="keyword">);<br></span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"key"</span><span class="keyword">] = </span><span class="string">"value1"</span><span class="keyword">; </span><span class="comment">// specific to session 1<br></span><span class="default">session_switch</span><span class="keyword">(</span><span class="string">"SESSION2"</span><span class="keyword">);<br></span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"key"</span><span class="keyword">] = </span><span class="string">"value2"</span><span class="keyword">; </span><span class="comment">// specific to session 2<br></span><span class="default">session_switch</span><span class="keyword">(</span><span class="string">"SESSION1"</span><span class="keyword">);<br></span><span class="comment">// back to session 1<br>// ...<br></span><span class="default">?&gt;<br></span><br>When using this function, session_start() should not be called on its own anymore (can be replaced with a call to session_switch() without argument).<br>Also remember that session_start() sets a Set-Cookie HTTP header on each call, so if you echo in-between sessions, wrap with ouput buffering.<br><br>Note: it's probably rarely a good idea to handle multiple sessions so think again if you think you have a good use for it.<br>Personally it played its role for some quick patching of legacy code I had to maintain.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="123917">  
  <a class="name">
  <strong class="user"><em>hu60 dot cn at gmail dot com</em></strong></a><div class="date" title="2019-06-09 12:43"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom123917">
<div class="phpcode"><code><span class="html">
The following code shows how the PHP session works. The function my_session_start() does almost the same thing as session_start().<br><br><span class="default">&lt;?php<br>error_reporting</span><span class="keyword">(</span><span class="default">E_ALL</span><span class="keyword">);<br></span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'display_errors'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br></span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'session.save_path'</span><span class="keyword">, </span><span class="default">__DIR__</span><span class="keyword">);<br><br></span><span class="default">my_session_start</span><span class="keyword">();<br><br>echo </span><span class="string">'&lt;p&gt;session id: '</span><span class="keyword">.</span><span class="default">my_session_id</span><span class="keyword">().</span><span class="string">'&lt;/p&gt;'</span><span class="keyword">;<br><br>echo </span><span class="string">'&lt;code&gt;&lt;pre&gt;'</span><span class="keyword">;<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$_SESSION</span><span class="keyword">);<br>echo </span><span class="string">'&lt;/pre&gt;&lt;/code&gt;'</span><span class="keyword">;<br><br></span><span class="default">$now </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'H:i:s'</span><span class="keyword">);<br>if (isset(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'last_visit_time'</span><span class="keyword">])) {<br>&nbsp; echo </span><span class="string">'&lt;p&gt;Last Visit Time: '</span><span class="keyword">.</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'last_visit_time'</span><span class="keyword">].</span><span class="string">'&lt;/p&gt;'</span><span class="keyword">;<br>}<br>echo </span><span class="string">'&lt;p&gt;Current Time: '</span><span class="keyword">.</span><span class="default">$now</span><span class="keyword">.</span><span class="string">'&lt;/p&gt;'</span><span class="keyword">;<br><br></span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'last_visit_time'</span><span class="keyword">] = </span><span class="default">$now</span><span class="keyword">;<br><br>function </span><span class="default">my_session_start</span><span class="keyword">() {<br>&nbsp; global </span><span class="default">$phpsessid</span><span class="keyword">, </span><span class="default">$sessfile</span><span class="keyword">;<br> <br>&nbsp; if (!isset(</span><span class="default">$_COOKIE</span><span class="keyword">[</span><span class="string">'PHPSESSID'</span><span class="keyword">]) || empty(</span><span class="default">$_COOKIE</span><span class="keyword">[</span><span class="string">'PHPSESSID'</span><span class="keyword">])) {<br>&nbsp; &nbsp; </span><span class="default">$phpsessid </span><span class="keyword">= </span><span class="default">my_base32_encode</span><span class="keyword">(</span><span class="default">my_random_bytes</span><span class="keyword">(</span><span class="default">16</span><span class="keyword">));<br>&nbsp; &nbsp; </span><span class="default">setcookie</span><span class="keyword">(</span><span class="string">'PHPSESSID'</span><span class="keyword">, </span><span class="default">$phpsessid</span><span class="keyword">, </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'session.cookie_lifetime'</span><span class="keyword">), </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'session.cookie_path'</span><span class="keyword">), </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'session.cookie_domain'</span><span class="keyword">), </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'session.cookie_secure'</span><span class="keyword">), </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'session.cookie_httponly'</span><span class="keyword">));<br>&nbsp; } else {<br>&nbsp; &nbsp; </span><span class="default">$phpsessid </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/[^a-z0-9]/'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$_COOKIE</span><span class="keyword">[</span><span class="string">'PHPSESSID'</span><span class="keyword">]), </span><span class="default">0</span><span class="keyword">, </span><span class="default">26</span><span class="keyword">);<br>&nbsp; }<br> <br>&nbsp; </span><span class="default">$sessfile </span><span class="keyword">= </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'session.save_path'</span><span class="keyword">).</span><span class="string">'/sess_'</span><span class="keyword">.</span><span class="default">$phpsessid</span><span class="keyword">;<br>&nbsp; if (</span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$sessfile</span><span class="keyword">)) {<br>&nbsp; &nbsp; </span><span class="default">$_SESSION </span><span class="keyword">= </span><span class="default">unserialize</span><span class="keyword">(</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$sessfile</span><span class="keyword">));<br>&nbsp; } else {<br>&nbsp; &nbsp; </span><span class="default">$_SESSION </span><span class="keyword">= array();<br>&nbsp; }<br>&nbsp; </span><span class="default">register_shutdown_function</span><span class="keyword">(</span><span class="string">'my_session_save'</span><span class="keyword">);<br>}<br><br>function </span><span class="default">my_session_save</span><span class="keyword">() {<br>&nbsp; global </span><span class="default">$sessfile</span><span class="keyword">;<br> <br>&nbsp; </span><span class="default">file_put_contents</span><span class="keyword">(</span><span class="default">$sessfile</span><span class="keyword">, </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$_SESSION</span><span class="keyword">));<br>}<br><br>function </span><span class="default">my_session_id</span><span class="keyword">() {<br>&nbsp; global </span><span class="default">$phpsessid</span><span class="keyword">;<br>&nbsp; return </span><span class="default">$phpsessid</span><span class="keyword">;<br>}<br><br>function </span><span class="default">my_random_bytes</span><span class="keyword">(</span><span class="default">$length</span><span class="keyword">) {<br>&nbsp; if (</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'random_bytes'</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; return </span><span class="default">random_bytes</span><span class="keyword">(</span><span class="default">$length</span><span class="keyword">);<br>&nbsp; }<br>&nbsp; </span><span class="default">$randomString </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$length</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) { <br>&nbsp; &nbsp; &nbsp; </span><span class="default">$randomString </span><span class="keyword">.= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">));<br>&nbsp; } <br>&nbsp; return </span><span class="default">$randomString</span><span class="keyword">;<br>}<br><br>function </span><span class="default">my_base32_encode</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">) {<br>&nbsp; </span><span class="default">$BASE32_ALPHABET </span><span class="keyword">= </span><span class="string">'abcdefghijklmnopqrstuvwxyz234567'</span><span class="keyword">;<br>&nbsp; </span><span class="default">$output </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; </span><span class="default">$vbits </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$j </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">); </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$j</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; </span><span class="default">$v </span><span class="keyword">&lt;&lt;= </span><span class="default">8</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$v </span><span class="keyword">+= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br>&nbsp; &nbsp; </span><span class="default">$vbits </span><span class="keyword">+= </span><span class="default">8</span><span class="keyword">;<br>&nbsp; &nbsp; while (</span><span class="default">$vbits </span><span class="keyword">&gt;= </span><span class="default">5</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$vbits </span><span class="keyword">-= </span><span class="default">5</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$output </span><span class="keyword">.= </span><span class="default">$BASE32_ALPHABET</span><span class="keyword">[</span><span class="default">$v </span><span class="keyword">&gt;&gt; </span><span class="default">$vbits</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$v </span><span class="keyword">&amp;= ((</span><span class="default">1 </span><span class="keyword">&lt;&lt; </span><span class="default">$vbits</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; }<br>&nbsp; if (</span><span class="default">$vbits </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$v </span><span class="keyword">&lt;&lt;= (</span><span class="default">5 </span><span class="keyword">- </span><span class="default">$vbits</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$output </span><span class="keyword">.= </span><span class="default">$BASE32_ALPHABET</span><span class="keyword">[</span><span class="default">$v</span><span class="keyword">];<br>&nbsp; }<br>&nbsp; return </span><span class="default">$output</span><span class="keyword">;<br>}</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92490">  
  <a class="name">
  <strong class="user"><em>schlang</em></strong></a><div class="date" title="2009-07-26 10:44"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom92490">
<div class="phpcode"><code><span class="html">
if you store your sessions in a database, always ensure that the type of the database column is large enough for your session values</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93673">  
  <a class="name">
  <strong class="user"><em>Charlie at NOSPAM dot example dot com</em></strong></a><div class="date" title="2009-09-22 07:04"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom93673">
<div class="phpcode"><code><span class="html">
Be warned that depending on end of script to close the session will effectively serialize concurrent session requests.&nbsp;&nbsp; Concurrent background "data retrieval" (e.g. applications such as AJAX or amfphp/Flex) expecting to retrieve data in parallel can fall into this trap easily.<br><br>Holding the session_write_close until after an expensive operation is likewise problematic.<br><br>To minimize effects, call session_write_close (aka session_commit) as early as practical (e.g. without introducing race conditions) or otherwise avoid the serialization bottleneck.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="120497">  
  <a class="name">
  <strong class="user"><em>chris at ocproducts dot com</em></strong></a><div class="date" title="2017-01-21 06:56"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom120497">
<div class="phpcode"><code><span class="html">
Initiating a session may overwrite your own custom cache control header, which may break clicking back to get back to a prior post request (on Chrome at least).<br>On my system it was setting 'no-store', which is much more severe than 'no-cache' and what was breaking the back-button.<br><br>If you are controlling your own cache headers carefully you need to call:<br>session_cache_limiter('');<br><br>...to stop it changing your cache control headers.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121209">  
  <a class="name">
  <strong class="user"><em>tom at bitworks dot de</em></strong></a><div class="date" title="2017-06-11 02:15"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121209">
<div class="phpcode"><code><span class="html">
A simple session_start() will not be sufficiant to kepp you Session alive. <br>Due to the filesystems mounting parameters, atime will normally not be updated. Instead of atime, mtime will be delivered.<br><br>This behavior may cause an early session death and your users my be kicked of your login system.&nbsp; <br><br>To keep the session alive it will be necessary to write something into the sessionfile at each request, e. g. a simple <br><br> "$_SESSION['time'] = time();"<br><br>That would keep your session alive, even if the client in reality is only clicking around the site.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="68123">  
  <a class="name">
  <strong class="user"><em>James</em></strong></a><div class="date" title="2006-07-13 04:22"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom68123">
<div class="phpcode"><code><span class="html">
To avoid the notice commited by PHP since 4.3.3 when you start a session twice, check session_id() first:<br><br>if (session_id() == "")<br>&nbsp; session_start();</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121311">  
  <a class="name">
  <strong class="user"><em>axew3 at axew3 dot com</em></strong></a><div class="date" title="2017-07-04 10:30"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121311">
<div class="phpcode"><code><span class="html">
I just need with easy, count how many times the page reload over the site, may to add a warning popup, while the counter is 0:<br><br>session_start();<br>if(isset($_SESSION['count'])){<br>$count = $_SESSION['count'];<br>$count++; <br>$count = $_SESSION['count'] = $count;<br>} else {<br>&nbsp; &nbsp; $count = $_SESSION['count'] = 0;<br>}<br>echo $count;<br><br>//session_destroy();</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112973">  
  <a class="name">
  <strong class="user"><em>ilnomedellaccount at gmail dot com</em></strong></a><div class="date" title="2013-08-13 03:53"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom112973">
<div class="phpcode"><code><span class="html">
A note about session_start(), custom handlers and database foreign key constraints, which I think may be of some use...<br><br>We know that if we want our sessions into a database table (rather than the default storage), we can refer to session_set_save_handler(...) to get them there. Note that session_set_save_handler must (obviously) be called before session_start(), but let me get to the point...<br><br>Upon calling session_start() the "first time", when the session does not already exist, php will spawn a new session but will not call the write handler until script execution finishes.<br><br>Thus, the session at this point exists in the server process memory, but won't be visible as a row in the DB before the script ends.<br><br>This seems reasonable, because this avoids some unnecessary database access and resource usage before we even populate our session with meaningfull and definitive data, but this also has side-effects.<br><br>In my case, the script called session_start() to make sure a session was initiated, then used session_id() to populate another table in the DB, which had foreign_key constraint to the "sessions" table. This failed because no session was in the db at that point, yet!<br><br>I know I could simply force the creation of the row in the DB by manually calling the write handler after session_start(), when necessary, but I am not sure if this is the best possible approach.<br><br>As soon as I find an "elegant" solution, or a completely different approach, I will post some working sample code.<br><br>In the meanwhile... have fun!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="70007">  
  <a class="name">
  <strong class="user"><em>ben dot morin at spaboom dot com</em></strong></a><div class="date" title="2006-09-29 09:49"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom70007">
<div class="phpcode"><code><span class="html">
James at skinsupport dot com raises a good point (warning) about additional requests from the browser.&nbsp; The request for favicon.ico, depending on how it is handled, can have unintended results on your sessions.&nbsp; <br><br>For example, suppose you have ErrorDocument 404 /signin.php, no favicon.ico file and all pages in your site where the user signs in are also redirected to /signin.php if they're not already signed in.&nbsp; <br><br>If signin.php does any clean up or reassigning of session_id (as all good signin.php pages should) then the additional request from the browser for favicon.ico could potentially corrupt the session as set by the actual request.&nbsp; <br><br>Kudos to James for pointing it out and shame on me for skimming past it and not seeing how it applied to my problem.&nbsp; Thanks too to the Firefox Live HTTP Headers extension for showing the additional request.&nbsp; <br><br>Don't waste days or even hours on this if your session cookies are not being sent or if the session data isn't what you expect it to be.&nbsp; At a minimum, eliminate this case and see if any additional requests could be at fault.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96491">  
  <a class="name">
  <strong class="user"><em>info.at.merchandisinginteractive.sk</em></strong></a><div class="date" title="2010-03-01 06:46"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom96491">
<div class="phpcode"><code><span class="html">
A handy script that checks fot the presence of uft-8 byte order mark (BOM) in all files in all directories starting on current dir. Combined from the work of other people here...
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">fopen_utf8 </span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$file </span><span class="keyword">= @</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$bom </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);
<br>&nbsp; &nbsp; if (</span><span class="default">$bom </span><span class="keyword">!= </span><span class="string">b"\xEF\xBB\xBF"</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; else
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>} 
<br>
<br>function </span><span class="default">file_array</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$exclude </span><span class="keyword">= </span><span class="string">".|..|design"</span><span class="keyword">, </span><span class="default">$recursive </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$path </span><span class="keyword">= </span><span class="default">rtrim</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="string">"/"</span><span class="keyword">) . </span><span class="string">"/"</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$folder_handle </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$exclude_array </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"|"</span><span class="keyword">, </span><span class="default">$exclude</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= array();
<br>&nbsp; &nbsp; while(</span><span class="default">false </span><span class="keyword">!== (</span><span class="default">$filename </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$folder_handle</span><span class="keyword">))) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">), </span><span class="default">$exclude_array</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$path </span><span class="keyword">. </span><span class="default">$filename </span><span class="keyword">. </span><span class="string">"/"</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Need to include full "path" or it's an infinite loop
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">$recursive</span><span class="keyword">) </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">file_array</span><span class="keyword">(</span><span class="default">$path </span><span class="keyword">. </span><span class="default">$filename </span><span class="keyword">. </span><span class="string">"/"</span><span class="keyword">, </span><span class="default">$exclude</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">fopen_utf8</span><span class="keyword">(</span><span class="default">$path </span><span class="keyword">. </span><span class="default">$filename</span><span class="keyword">) )
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//$result[] = $filename;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">echo (</span><span class="default">$path </span><span class="keyword">. </span><span class="default">$filename </span><span class="keyword">. </span><span class="string">"&lt;br&gt;"</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br>}
<br>
<br></span><span class="default">$files </span><span class="keyword">= </span><span class="default">file_array</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="95377">  
  <a class="name">
  <strong class="user"><em>info at nospam dot mmfilm dot sk</em></strong></a><div class="date" title="2009-12-29 07:58"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom95377">
<div class="phpcode"><code><span class="html">
For those of you running in problems with UTF-8 encoded files:<br><br>I was getting an error because of the BOM, although i set Dreamweaver to "save as" the without the BOM. It appears that DW will not change this setting in already existing files. After creating a new file withou the BOM, everything worked well.<br><br>I also recommend <a rel="nofollow" target="_blank">http://people.w3.org/rishida/utils/bomtester/index.php</a> - a utility that remote checks for the presence of BOM.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102254">  
  <a class="name">
  <strong class="user"><em>anon at ymous dot com</em></strong></a><div class="date" title="2011-02-04 01:51"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom102254">
<div class="phpcode"><code><span class="html">
I am trying to get a session created by a browser call to be used by a command line cli-&gt;curl php call (in this case, both calls to the same server and php.ini), for a set of flexible media import routines, <br><br>but the cli-&gt;curl call always starts a new session despite me putting PHPSESSID=validID as the first parameter for the url called by curl.<br><br>I was able to fix it by calling session_id($_GET['PHPSESSID']) before calling session_start() in the script called via curl.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92356">  
  <a class="name">
  <strong class="user"><em>dstuff at brainsware dot org</em></strong></a><div class="date" title="2009-07-21 05:53"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom92356">
<div class="phpcode"><code><span class="html">
It seems like spaces in the name don't work either - got a new session id generated each time</span>
</code></div>
  </div>
 </div>
  <div class="note" id="73952">  
  <a class="name">
  <strong class="user"><em>leandroico---at---gmail---dot---com</em></strong></a><div class="date" title="2007-03-17 04:21"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom73952">
<div class="phpcode"><code><span class="html">
TAGS: session_start headers output errors include_once require_once php tag new line<br><br>Errors with output headers related to *session_start()* being called inside include files.<br><br>If you are starting your session inside an include file you must be aware of the presence of undesired characters after php end tag.<br><br>Let's take an example:<br>&gt; page.php<br><span class="default">&lt;?php<br></span><span class="keyword">include_once </span><span class="string">'i_have_php_end_tag.inc.php'</span><span class="keyword">;<br>include_once </span><span class="string">'init_session.inc.php'</span><span class="keyword">;<br><br>echo </span><span class="string">"Damn! Why I'm having these output header errors?"</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>&gt; i_have_php_end_tag.inc.php<br><span class="default">&lt;?php<br>$_JUST_A_GLOBAL_VAR </span><span class="keyword">= </span><span class="string">'Yes, a global var, indeed'</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>&gt; init_session.inc.php<br><span class="default">&lt;?php<br>session_start</span><span class="keyword">();<br></span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'blabla'</span><span class="keyword">] = </span><span class="default">123</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>With all this stuff we will get an error, something like:<br>"... Cannot send session cache limiter - headers already sent (output started at ...", right?<br><br>To solve this problem we have to ignore all output sent by include files. To ensure that we need to use the couple of functions: *ob_start()* and *ob_end_clean()* to suppress the output. So, all we have to do is changing the *page.php* to this:<br><br><span class="default">&lt;?php<br>ob_start</span><span class="keyword">();<br>include_once </span><span class="string">'i_have_php_end_tag.inc.php'</span><span class="keyword">;<br>include_once </span><span class="string">'init_session.inc.php'</span><span class="keyword">;<br></span><span class="default">ob_end_clean</span><span class="keyword">();<br><br>echo </span><span class="string">"Woo hoo! All right! Die you undesired outputs!!!"</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105447">  
  <a class="name">
  <strong class="user"><em>sanjuro at 1up-games dot com</em></strong></a><div class="date" title="2011-08-18 11:56"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom105447">
<div class="phpcode"><code><span class="html">
The problem with SID is that if on occasions you don't start a session, instead of outputting an empty string for transparent integration it will return the regular undefined constant notice. So you might want to test the constant with defined() beforehand.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="60018">  
  <a class="name">
  <strong class="user"><em>james at skinsupport dot com</em></strong></a><div class="date" title="2005-12-22 06:17"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom60018">
<div class="phpcode"><code><span class="html">
One thing of note that caused me three days of trouble:<br><br>It's important to note that Firefox (for one) makes two calls to the server automatically.&nbsp; One for the page, and one for favicon.ico.<br><br>If you are setting session variables (as I was) to certain values when a page exists, and other values when pages don't exist, the values for non-existent pages will overwrite the values for existing pages if favicon.ico doesn't exist.<br><br>I doubt many of you are doing this, but if you are, this is a consideration you need to address or you'll be bald over the course of a three day period!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="33369">  
  <a class="name">
  <strong class="user"><em>m dot kuiphuis at hccnet dot nl</em></strong></a><div class="date" title="2003-06-24 03:37"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom33369">
<div class="phpcode"><code><span class="html">
[Editors Note: For more information about this
<br><a rel="nofollow" target="_blank">http://www.zvon.org/tmRFC/RFC882/Output/chapter5.html</a> ]
<br> 
<br>I use name-based virtual hosting on Linux with Apache and PHP 4.3.2. 
<br>Every time when I refreshed (by pressing F5 in Internet Explorer) I noticed that I got a new session_id. Simultaneously browsing the same site with Netscape didn't give me that problem. First I thought this was some PHP issue (before I tested it with Netscape), but after searching a lot on the internet I found the problem.
<br>Since I was using name based virtual hosting for my testserver and we have different webshops for different customers I used the syntax webshop_customername.servername.nl as the domain-name.
<br>The _ in the domain name seemed to be the problem. Internet Explorer just denies setting the cookie on the client when there is a special character (like an _ ) in the domain name. For more information regarding this issue: <a rel="nofollow" target="_blank">http://support.microsoft.com/default.aspx?scid=kb;EN-US;316112</a> 
<br>Stupidly enough, this information was related to asp (yuk :o)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="53293">  
  <a class="name">
  <strong class="user"><em>erm[at]the[dash]erm[dot]com</em></strong></a><div class="date" title="2005-05-27 01:04"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom53293">
<div class="phpcode"><code><span class="html">
If you are insane like me, and want to start a session from the cli so other scripts can access the same information.<br><br>I don't know how reliable this is.&nbsp; The most obvious use I can see is setting pids.<br><br>// temp.php<br><br>#!/usr/bin/php -q<br><span class="default">&lt;?php<br><br>session_id </span><span class="keyword">(</span><span class="string">"temp"</span><span class="keyword">);<br></span><span class="default">session_start</span><span class="keyword">();<br><br>if (</span><span class="default">$_SESSION</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$_SESSION</span><span class="keyword">);<br>}<br><br></span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'test'</span><span class="keyword">] = </span><span class="string">"this is a test if sessions are usable inside scripts"</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>// Temp 2<br><br>#!/usr/bin/php -q<br><span class="default">&lt;?php<br><br>session_id </span><span class="keyword">(</span><span class="string">"temp"</span><span class="keyword">);<br></span><span class="default">session_start</span><span class="keyword">();<br><br>&nbsp; &nbsp; </span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$_SESSION</span><span class="keyword">);<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50905">  
  <a class="name">
  <strong class="user"><em>hbertini at sapo dot pt</em></strong></a><div class="date" title="2005-03-13 12:29"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom50905">
<div class="phpcode"><code><span class="html">
workaround when using session variables in a .php file referred by a frame (.html, or other file type) at a different server than the one serving the .php:<br><br>Under these conditions IE6 or later silently refuses the session cookie that is attempted to create (either implicitly or explicitly by invoquing session_start()).<br><br>As a consequence, your session variable will return an empty value.<br><br>According to MS kb, the workaround is to add a header that says your remote .php page will not abuse from the fact that permission has been granted.<br><br>Place this header on the .php file that will create/update the session variables you want:<br><br><span class="default">&lt;?php header</span><span class="keyword">(</span><span class="string">'P3P: CP="CAO PSA OUR"'</span><span class="keyword">); </span><span class="default">?&gt;<br></span><br>Regards,<br>Hugo</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121310">  
  <a class="name">
  <strong class="user"><em>axew3 at axew3 dot com</em></strong></a><div class="date" title="2017-07-04 10:19"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121310">
<div class="phpcode"><code><span class="html">
I need, with easy, count how many times the page reload over the site, may to add a warning popup, while the counter is 0 ...<br>session_start();<br>if(isset($_SESSION['count'])){<br>$count = $_SESSION['count'];<br>$count++; <br>$count = $_SESSION['count'] = $count;<br>} else {<br>&nbsp; &nbsp; $count = $_SESSION['count'] = 0;<br>}<br>echo $count;<br><br>//session_destroy();</span>
</code></div>
  </div>
 </div>
  <div class="note" id="81378">  
  <a class="name">
  <strong class="user"><em>jphansen at uga dot edu</em></strong></a><div class="date" title="2008-02-25 11:12"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom81378">
<div class="phpcode"><code><span class="html">
I just wrote that session_start() will erase your querystring variable(s) once called. I want to clarify that it will only do this if a variable by the same subscript is defined in $_SESSION[].</span>
</code></div>
  </div>
 </div>
  <div class="note" id="120708">  
  <a class="name">
  <strong class="user"><em>ivijan dot stefan at gmail dot com</em></strong></a><div class="date" title="2017-02-26 07:59"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom120708">
<div class="phpcode"><code><span class="html">
How to fix session_start error?<br><br>Sometimes when you made plugins, addons or some components in projects you need to check if session is started and if is not, you need to start it with no session_start() errors.<br><br>Here is my tested solution what currently work on +9000 domains and in one my plugin but also in some custom works.<br><br><span class="default">&lt;?php<br></span><span class="keyword">if (</span><span class="default">strnatcmp</span><span class="keyword">(</span><span class="default">phpversion</span><span class="keyword">(),</span><span class="string">'5.4.0'</span><span class="keyword">) &gt;= </span><span class="default">0</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; if (</span><span class="default">session_status</span><span class="keyword">() == </span><span class="default">PHP_SESSION_NONE</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">session_start</span><span class="keyword">();<br>&nbsp; &nbsp; }<br>}<br>else<br>{<br>&nbsp; &nbsp; if(</span><span class="default">session_id</span><span class="keyword">() == </span><span class="string">''</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">session_start</span><span class="keyword">();<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;<br></span><br>Feel free to use it and don't worry, be happy. ;)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="123632">  
  <a class="name">
  <strong class="user"><em>Nathan</em></strong></a><div class="date" title="2019-02-21 03:30"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom123632">
<div class="phpcode"><code><span class="html">
Btw you can use:<br><br>if (!isset($_SESSION)) {<br>// We love every user<br>session_start();<br>// Then refresh for changes to take affect<br>header("location: ../../");<br>} elseif ($_SESSION["user] == "123ABC - abcmouse.com") {<br>/* We don't like this user, so let's kick them out of<br> the session */<br>session_destroy();<br>// Then refresh for changes to take affect<br>header("location: ../../");<br>}</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->

  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from www.php.net/manual/en/function.session-start.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:46:52 GMT -->

</body></html>