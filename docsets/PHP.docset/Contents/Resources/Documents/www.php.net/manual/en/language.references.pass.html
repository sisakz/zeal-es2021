<html><!-- Mirrored from www.php.net/manual/en/language.references.pass.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 02:33:13 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Passing by Reference</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="language.references.pass.html">
 <link rel="shorturl" href="https://www.php.net/references.pass">
 <link rel="alternate" href="https://www.php.net/references.pass" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="language.references.html">
 <link rel="prev" href="language.references.arent.html">
 <link rel="next" href="language.references.return.html">

 <link rel="alternate" href="language.references.pass.html" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/language.references.pass.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/language.references.pass.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/language.references.pass.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/language.references.pass.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/language.references.pass.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/ro/language.references.pass.php" hreflang="ro">
 <link rel="alternate" href="https://www.php.net/manual/ru/language.references.pass.php" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/language.references.pass.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/language.references.pass.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0aba.css?t=1539771603&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2ecf.css?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedba57.css?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached3afa.css?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>


</head>
<body class="docs " style="">


<div class="headsup"><a href="https://www.php.net/conferences/index.php#id2021-09-08-1">Longhorn PHP 2021</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.attributes.html">Attributes</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="langref.html">Language Reference</a></li>      <li><a href="language.references.html">References Explained</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="language.references.pass" class="sect1">
   <h2 class="title">Passing by Reference</h2>
   <p class="para">
   You can pass a variable by reference to a function so the function
   can modify the variable. The syntax is as follows:
    </p><div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">(&amp;</span><span style="color: #0000BB">$var</span><span style="color: #007700">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$var</span><span style="color: #007700">++;<br>}<br><br></span><span style="color: #0000BB">$a</span><span style="color: #007700">=</span><span style="color: #0000BB">5</span><span style="color: #007700">;<br></span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br></span><span style="color: #FF8000">//&nbsp;$a&nbsp;is&nbsp;6&nbsp;here<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      There is no reference sign on a function call - only on
      function definitions. Function definitions alone are enough to
      correctly pass the argument by reference.
     </span>
    </p></blockquote>
  <p></p>
  <p class="para">
  The following things can be passed by reference:
   </p><ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      Variables, i.e. <code class="literal">foo($a)</code>
     </span>
    </li>
    <li class="listitem">
     <p class="para">
      References returned from functions, i.e.:
    </p><div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">(&amp;</span><span style="color: #0000BB">$var</span><span style="color: #007700">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$var</span><span style="color: #007700">++;<br>}<br>function&nbsp;&amp;</span><span style="color: #0000BB">bar</span><span style="color: #007700">()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">bar</span><span style="color: #007700">());<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
    See more about <a href="language.references.return.html" class="link">returning by reference</a>. 
     <p></p>
    </li>
  </ul>
  <p></p>
  <p class="para">
  No other expressions should be passed by reference, as the
  result is undefined. For example, the following examples of passing
  by reference are invalid:
    </p><div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">(&amp;</span><span style="color: #0000BB">$var</span><span style="color: #007700">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$var</span><span style="color: #007700">++;<br>}<br>function&nbsp;</span><span style="color: #0000BB">bar</span><span style="color: #007700">()&nbsp;</span><span style="color: #FF8000">//&nbsp;Note&nbsp;the&nbsp;missing&nbsp;&amp;<br></span><span style="color: #007700">{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">bar</span><span style="color: #007700">());&nbsp;</span><span style="color: #FF8000">//&nbsp;Produces&nbsp;a&nbsp;notice<br><br></span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;Expression,&nbsp;not&nbsp;variable<br></span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">5</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;Produces&nbsp;fatal&nbsp;error<br><br></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">Foobar<br></span><span style="color: #007700">{<br>}<br><br></span><span style="color: #0000BB">foo</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">Foobar</span><span style="color: #007700">())&nbsp;</span><span style="color: #FF8000">//&nbsp;Produces&nbsp;a&nbsp;notice&nbsp;as&nbsp;of&nbsp;PHP&nbsp;7.0.7<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Notice:&nbsp;Only&nbsp;variables&nbsp;should&nbsp;be&nbsp;passed&nbsp;by&nbsp;reference<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   <p></p>
  </div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="115919">  
  <a class="name">
  <strong class="user"><em>tnestved at yahoo dot com</em></strong></a><div class="date" title="2014-10-14 01:54"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom115919">
<div class="phpcode"><code><span class="html">
By removing the ability to include the reference sign on function calls where pass-by-reference is incurred (I.e., function definition uses &amp;), the readability of the code suffers, as one has to look at the function definition to know if the variable being passed is by-ref or not (I.e., potential to be modified).&nbsp; If both function calls and function definitions require the reference sign (I.e., &amp;), readability is improved, and it also lessens the potential of an inadvertent error in the code itself.&nbsp; Going full on fatal error in 5.4.0 now forces everyone to have less readable code.&nbsp; That is, does a function merely use the variable, or potentially modify it...now we have to find the function definition and physically look at it to know, whereas before we would know the intent immediately.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="123995">  
  <a class="name">
  <strong class="user"><em>ccb_bc at hotmail dot com</em></strong></a><div class="date" title="2019-07-01 05:58"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom123995">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php <br></span><span class="comment">// PHP &gt;= 5.6<br><br>// Here we use the 'use' operator to create a variable within the scope of the function. Although it may seem that the newly created variable has something to do with '$x' that is outside the function, we are actually creating a '$x' variable within the function that has nothing to do with the '$x' variable outside the function. We are talking about the same names but different content locations in memory.<br></span><span class="default">$x </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">;<br>(function() use (</span><span class="default">$x</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">$x</span><span class="keyword">*</span><span class="default">$x</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">); </span><span class="comment">// 100<br></span><span class="keyword">})();<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">); </span><span class="comment">// 10<br><br>// Now the magic happens with using the reference (&amp;). Now we are actually accessing the contents of the '$y' variable that is outside the scope of the function. All the actions that we perform with the variable '$y' within the function will be reflected outside the scope of this same function. Remembering this would be an impure function in the functional paradigm, since we are changing the value of a variable by reference.<br></span><span class="default">$y </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">;<br>(function() use (&amp;</span><span class="default">$y</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">$y</span><span class="keyword">*</span><span class="default">$y</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">); </span><span class="comment">// 100<br></span><span class="keyword">})();<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">); </span><span class="comment">// 100<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="117305">  
  <a class="name">
  <strong class="user"><em>mike at eastghost dot com</em></strong></a><div class="date" title="2015-05-19 07:06"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom117305">
<div class="phpcode"><code><span class="html">
beware unset()&nbsp; destroys references<br><br>$x = 'x';<br>change( $x );<br>echo $x; // outputs "x" not "q23"&nbsp; ---- remove the unset() and output is "q23" not "x"<br><br>function change( &amp; $x )<br>{<br>&nbsp; &nbsp; unset( $x );<br>&nbsp; &nbsp; $x = 'q23';<br>&nbsp; &nbsp; return true;<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121134">  
  <a class="name">
  <strong class="user"><em>nickshanks at nickshanks dot com</em></strong></a><div class="date" title="2017-05-26 12:49"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121134">
<div class="phpcode"><code><span class="html">
For anyone wondering, the copy-on-write behaviour just does the Right Thing™ when an array is passed to a function not by-ref which then passes it through to another function by-ref without writing to it. For example:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">do_sort</span><span class="keyword">(array </span><span class="default">$array</span><span class="keyword">) : array {<br>&nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, function (</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">strnatcasecmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">], </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]);<br>&nbsp; &nbsp; });<br><br>&nbsp; &nbsp; return </span><span class="default">$array</span><span class="keyword">;<br>}<br><br></span><span class="default">$data </span><span class="keyword">= [<br>&nbsp; &nbsp; [<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'one'</span><span class="keyword">,<br>&nbsp; &nbsp; ], [<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'two'</span><span class="keyword">,<br>&nbsp; &nbsp; ], [<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'three'</span><span class="keyword">,<br>&nbsp; &nbsp; ], [<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'four'</span><span class="keyword">,<br>&nbsp; &nbsp; ],<br>];<br><br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br></span><span class="default">do_sort</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">); </span><span class="comment">// does not affect value of $data<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br></span><span class="default">$data </span><span class="keyword">= </span><span class="default">do_sort</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="125374">  
  <a class="name">
  <strong class="user"><em>yiangforwork at gmail dot com</em></strong></a><div class="date" title="2020-09-17 01:35"><strong>11 months ago</strong></div>
  <div class="text" id="Hcom125374">
<div class="phpcode"><code><span class="html">
function set(&amp;$arr) {<br>&nbsp; &nbsp; $test = 10;<br>&nbsp; &nbsp; $arr = &amp;$test;<br>}<br><br>$arr = [1, 2, 3];<br>set( $arr );<br><br>var_dump( $arr );&nbsp; &nbsp; // [1, 2, 3]<br><br>If you changed a reference variable with a new `Address`, the variable it originally pointed to won't change.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="126194">  
  <a class="name">
  <strong class="user"><em>tianyiw at vip dot qq dot com</em></strong></a><div class="date" title="2021-06-25 07:51"><strong>2 months ago</strong></div>
  <div class="text" id="Hcom126194">
<div class="phpcode"><code><span class="html">
I designed a class that can easily pass references.<br><br><span class="default">&lt;?php<br></span><span class="comment">#### Problem 1<br></span><span class="keyword">function </span><span class="default">problem</span><span class="keyword">(&amp;</span><span class="default">$value</span><span class="keyword">)<br>{<br>}<br></span><span class="default">problem</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">); </span><span class="comment">// cannot be passed by reference<br><br>#### Problem 2<br></span><span class="keyword">class </span><span class="default">problem2<br></span><span class="keyword">{<br>&nbsp; &nbsp; static function </span><span class="default">__callStatic</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, &amp;</span><span class="default">$arguments</span><span class="keyword">) </span><span class="comment">// cannot take arguments by reference <br>&nbsp; &nbsp; </span><span class="keyword">{<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;<br></span><br>My solution 👇<br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">Reference<br></span><span class="keyword">{<br>&nbsp; &nbsp; function </span><span class="default">__construct</span><span class="keyword">(public </span><span class="default">mixed </span><span class="keyword">&amp;</span><span class="default">$data</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * create <br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param mixed $data<br>&nbsp; &nbsp;&nbsp; * @return self<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">static function &amp;</span><span class="default">create</span><span class="keyword">(</span><span class="default">mixed </span><span class="keyword">&amp;</span><span class="default">$data</span><span class="keyword">): </span><span class="default">self<br>&nbsp; &nbsp; </span><span class="keyword">{<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$data </span><span class="keyword">instanceof </span><span class="default">self</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$data</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r </span><span class="keyword">= new </span><span class="default">self</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$r</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * get value<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param mixed $reference<br>&nbsp; &nbsp;&nbsp; * @return mixed<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">static function &amp;</span><span class="default">get</span><span class="keyword">(</span><span class="default">mixed </span><span class="keyword">&amp;</span><span class="default">$reference</span><span class="keyword">): </span><span class="default">mixed<br>&nbsp; &nbsp; </span><span class="keyword">{<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$reference </span><span class="keyword">instanceof </span><span class="default">self</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$reference</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="comment">#### Problem solving 1 ####<br><br></span><span class="keyword">function </span><span class="default">test</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= &amp;</span><span class="default">Reference</span><span class="keyword">::</span><span class="default">get</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">); </span><span class="comment">// values OR reference<br>&nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="string">"test-</span><span class="default">$value</span><span class="string">"</span><span class="keyword">;<br>&nbsp; &nbsp; return </span><span class="default">$value</span><span class="keyword">;<br>}<br><br>echo </span><span class="default">test</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">), </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// test-1<br><br></span><span class="default">$val </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br>echo </span><span class="default">test</span><span class="keyword">(</span><span class="default">Reference</span><span class="keyword">::</span><span class="default">create</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)), </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// test-2<br></span><span class="keyword">echo </span><span class="default">$val</span><span class="keyword">, </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// test-2<br><br>#### Problem solving 2 ####<br></span><span class="keyword">class </span><span class="default">TestCall<br></span><span class="keyword">{<br>&nbsp; &nbsp; static function </span><span class="default">__callStatic</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$arguments</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= &amp;</span><span class="default">Reference</span><span class="keyword">::</span><span class="default">get</span><span class="keyword">(</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="string">"</span><span class="default">$name</span><span class="string">-</span><span class="default">$value</span><span class="string">"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br>echo </span><span class="default">TestCall</span><span class="keyword">::</span><span class="default">test</span><span class="keyword">(</span><span class="default">3</span><span class="keyword">), </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// test-3<br><br></span><span class="default">$val </span><span class="keyword">= </span><span class="default">4</span><span class="keyword">;<br>echo </span><span class="default">TestCall</span><span class="keyword">::</span><span class="default">test</span><span class="keyword">(</span><span class="default">Reference</span><span class="keyword">::</span><span class="default">create</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)), </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// test-4<br></span><span class="keyword">echo </span><span class="default">$val</span><span class="keyword">, </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// test-4</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="124383">  
  <a class="name">
  <strong class="user"><em>Jason Steelman</em></strong></a><div class="date" title="2019-11-12 06:13"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom124383">
<div class="phpcode"><code><span class="html">
Within a class, passing array elements by reference which don't exist are added to the array as null. Compared to a normal function, this changes the behavior of the function from throwing an error to creating a new (null) entry in the referenced array with a new key.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">class </span><span class="default">foo </span><span class="keyword">{ <br>&nbsp; &nbsp; public </span><span class="default">$arr </span><span class="keyword">= [</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="string">'apple'</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="string">'banana'</span><span class="keyword">];<br>&nbsp; &nbsp; public function </span><span class="default">normalFunction</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; public function &amp;</span><span class="default">referenceReturningFunction</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">$bar </span><span class="keyword">= new </span><span class="default">foo</span><span class="keyword">();<br></span><span class="default">$var </span><span class="keyword">= </span><span class="default">$bar</span><span class="keyword">-&gt;</span><span class="default">normalFunction</span><span class="keyword">(</span><span class="string">'beer'</span><span class="keyword">); </span><span class="comment">//Notice Error. Undefined index beer<br></span><span class="default">$var </span><span class="keyword">= &amp;</span><span class="default">$bar</span><span class="keyword">-&gt;</span><span class="default">referenceReturningFunction</span><span class="keyword">(</span><span class="string">'beer'</span><span class="keyword">); </span><span class="comment">// No error. The value of $bar is now null<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$bar</span><span class="keyword">-&gt;</span><span class="default">arr</span><span class="keyword">);<br></span><span class="comment">/**<br>[<br>&nbsp; "a" =&gt; "apple",<br>&nbsp; "b" =&gt; "banana",<br>&nbsp; "beer" =&gt; null,<br>],<br>*/<br><br></span><span class="default">?&gt;<br></span>This is in no way a "bug" - the framework is performing as designed, but it took careful thought to figure out what was going on. PHP7.3</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114705">  
  <a class="name">
  <strong class="user"><em>phpnet at holodyn dot com</em></strong></a><div class="date" title="2014-03-26 06:38"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom114705">
<div class="phpcode"><code><span class="html">
The notes indicate that a function variable reference will receive a deprecated warning in the 5.3 series, however when calling the function via call_user_func the operation aborts without fatal error.<br><br>This is not a "bug" since it is not likely worth resolving, however should be noted in this documentation.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109550">  
  <a class="name">
  <strong class="user"><em>diabolos @t gmail dot com</em></strong></a><div class="date" title="2012-07-27 02:46"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom109550">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br><br></span><span class="comment">/*<br><br>&nbsp; This function internally swaps the contents between <br>&nbsp; two simple variables using 'passing by reference'.<br><br>&nbsp; Some programming languages have such a swap function <br>&nbsp; built in, but PHP seems to lack such a function.&nbsp; So, <br>&nbsp; one was created to fill the need.&nbsp; It only handles <br>&nbsp; simple, single variables, not arrays, but it is<br>&nbsp; still a very handy tool to have.<br><br>&nbsp; No value is actually returned by this function, but <br>&nbsp; the contents of the indicated variables will be <br>&nbsp; exchanged (swapped) after the call.<br>*/<br><br>// ------------------------------------------<br>// Demo call of the swap(...) function below.<br><br> </span><span class="default">$a </span><span class="keyword">= </span><span class="default">123.456</span><span class="keyword">;<br> </span><span class="default">$b </span><span class="keyword">= </span><span class="string">'abcDEF'</span><span class="keyword">;<br>&nbsp; <br> print </span><span class="string">"&lt;pre&gt;Define:\na = </span><span class="default">$a</span><span class="string">\nb = '</span><span class="default">$b</span><span class="string">'&lt;/pre&gt;"</span><span class="keyword">;<br> </span><span class="default">swap</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">);<br> print </span><span class="string">"&lt;pre&gt;After swap(a,b):\na = '</span><span class="default">$a</span><span class="string">'\nb = </span><span class="default">$b</span><span class="string">&lt;/pre&gt;"</span><span class="keyword">;<br><br></span><span class="comment">// -------------------------------<br><br>&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">swap </span><span class="keyword">(&amp;</span><span class="default">$arg1</span><span class="keyword">, &amp;</span><span class="default">$arg2</span><span class="keyword">)<br>{<br><br></span><span class="comment">// Swap contents of indicated variables.<br>&nbsp;&nbsp; </span><span class="default">$w</span><span class="keyword">=</span><span class="default">$arg1</span><span class="keyword">;&nbsp;&nbsp; </span><span class="default">$arg1</span><span class="keyword">=</span><span class="default">$arg2</span><span class="keyword">;&nbsp;&nbsp; </span><span class="default">$arg2</span><span class="keyword">=</span><span class="default">$w</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="68835">  
  <a class="name">
  <strong class="user"><em>fdelizy at unfreeze dot net</em></strong></a><div class="date" title="2006-08-12 09:32"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom68835">
<div class="phpcode"><code><span class="html">
Some have noticed that reference parameters can not be assigned a default value. It's actually wrong, they can be assigned a value as the other variables, but can't have a "default reference value", for instance this code won't compile :<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">use_reference</span><span class="keyword">( </span><span class="default">$someParam</span><span class="keyword">, &amp;</span><span class="default">$param </span><span class="keyword">=&amp; </span><span class="default">$POST </span><span class="keyword">)<br>{<br> ...<br>} <br></span><span class="default">?&gt;<br></span><br>But this one will work :<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">use_reference</span><span class="keyword">( </span><span class="default">$someParam</span><span class="keyword">, &amp;</span><span class="default">$param </span><span class="keyword">= </span><span class="default">null </span><span class="keyword">)<br></span><span class="default">?&gt;<br></span><br>So here is a workaround to have a default value for reference parameters :<br><br><span class="default">&lt;?php<br>$array1 </span><span class="keyword">= array ( </span><span class="string">'test'</span><span class="keyword">, </span><span class="string">'test2' </span><span class="keyword">);<br><br>function </span><span class="default">AddTo</span><span class="keyword">( </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">, &amp;</span><span class="default">$array </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; if ( </span><span class="default">$array </span><span class="keyword">== </span><span class="default">null </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">=&amp; </span><span class="default">$_POST</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[ </span><span class="default">$key </span><span class="keyword">] = </span><span class="default">$val </span><span class="keyword">;<br>}<br><br></span><span class="default">AddTo</span><span class="keyword">( </span><span class="string">"indirect test"</span><span class="keyword">, </span><span class="string">"test"</span><span class="keyword">, </span><span class="default">$array1 </span><span class="keyword">);<br></span><span class="default">AddTo</span><span class="keyword">( </span><span class="string">"indirect POST test"</span><span class="keyword">, </span><span class="string">"test" </span><span class="keyword">);<br><br>echo </span><span class="string">"Array 1 " </span><span class="keyword">;<br></span><span class="default">print_r </span><span class="keyword">( </span><span class="default">$array1</span><span class="keyword">);<br><br>echo </span><span class="string">"_POST "</span><span class="keyword">;<br></span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$_POST </span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>And this scripts output is :<br><br>Array 1 Array<br>(<br>&nbsp; &nbsp; [0] =&gt; test<br>&nbsp; &nbsp; [1] =&gt; test2<br>&nbsp; &nbsp; [indirect test] =&gt; test<br>)<br>_POST Array<br>(<br>&nbsp; &nbsp; [indirect POST test] =&gt; test<br>)<br><br>Of course that means you can only assign default reference to globals or super globals variables. <br><br>Have fun</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121535">  
  <a class="name">
  <strong class="user"><em>fladnag at zerezo dot com</em></strong></a><div class="date" title="2017-08-18 09:29"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121535">
<div class="phpcode"><code><span class="html">
Beware of using references with anonymous function and "use" keyword :<br><br>If you have a PHP version between 5.3 and &lt; 5.3.10, "use" keyword break the reference :<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">withRef</span><span class="keyword">(&amp;</span><span class="default">$arg</span><span class="keyword">) {<br>&nbsp; echo </span><span class="string">'withRef - BEGIN - '</span><span class="keyword">.</span><span class="default">$arg</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// 1<br>&nbsp; </span><span class="default">$func </span><span class="keyword">= function() use(</span><span class="default">$arg</span><span class="keyword">) { </span><span class="comment">/* do nothing, just declare using $arg */ </span><span class="keyword">};<br>&nbsp; </span><span class="default">$arg </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br>&nbsp; echo </span><span class="string">'withRef - END - '</span><span class="keyword">.</span><span class="default">$arg</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// 2<br></span><span class="keyword">}<br><br></span><span class="default">$arg </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br>echo </span><span class="string">'withRef - BEFORE - '</span><span class="keyword">.</span><span class="default">$arg</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// 1<br></span><span class="default">withRef</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">);<br></span><span class="comment">// in PHP 5.3 &lt; 5.3.10 : display 1<br>// in PHP 5.3 &gt;= 5.3.10 : display 2<br></span><span class="keyword">echo </span><span class="string">'withRef - AFTER - '</span><span class="keyword">.</span><span class="default">$arg</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>A workaround is to use a copy of the reference variable in "use" keyword :<br><span class="default">&lt;?php<br>&nbsp; </span><span class="keyword">...<br>&nbsp; </span><span class="default">$arg2 </span><span class="keyword">= </span><span class="default">$arg</span><span class="keyword">;<br>&nbsp; </span><span class="default">$func </span><span class="keyword">= function() use(</span><span class="default">$arg2</span><span class="keyword">) { </span><span class="comment">/* do nothing, just declare using $arg2 */ </span><span class="keyword">};</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="117220">  
  <a class="name">
  <strong class="user"><em>no at spam dot please</em></strong></a><div class="date" title="2015-05-05 08:36"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom117220">
<div class="phpcode"><code><span class="html">
agreed : this change produces less readable code.<br><br>additionally, it breaks many existing perfectly working codes which are not portable anymore and in some cases will require complex modifications<br><br>another issue regards the fatal error that is produced : how the hell am i supposed to do if i want to allow the user to use a value that is not even in a variable, or the return or a function call, or use call_user_func... this produces many occasions for a code to even break at run time</span>
</code></div>
  </div>
 </div>
  <div class="note" id="49950">  
  <a class="name">
  <strong class="user"><em>pillepop2003 at yahoo dot de</em></strong></a><div class="date" title="2005-02-13 08:08"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom49950">
<div class="phpcode"><code><span class="html">
PHP has a strange behavior when passing a part of an array by reference, that does not yet exist.<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">func</span><span class="keyword">(&amp;</span><span class="default">$a</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// void();<br>&nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$a</span><span class="keyword">[</span><span class="string">'one'</span><span class="keyword">] =</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">func</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'two'</span><span class="keyword">]);<br></span><span class="default">?&gt;</span>&nbsp; &nbsp; <br><br>var_dump($a) returns<br><br>&nbsp; &nbsp; array(2) {<br>&nbsp; &nbsp; &nbsp; &nbsp; ["one"]=&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; int(1)<br>&nbsp; &nbsp; &nbsp; &nbsp; ["two"]=&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; NULL<br>&nbsp; &nbsp; }<br><br>...which seems to be not intentional!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="45554">  
  <a class="name">
  <strong class="user"><em>Sergio Santana: ssantana at tlaloc dot imta dot mx</em></strong></a><div class="date" title="2004-09-10 08:25"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom45554">
<div class="phpcode"><code><span class="html">
Sometimes we need functions for building or modifying arrays whose elements are to be references to other variables (arrays or objects for instance). In this example, I wrote two functions 'tst' and 'tst1' that perform this task. Note how the functions are written, and how they are used.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">tst</span><span class="keyword">(&amp;</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$r</span><span class="keyword">) {
<br>&nbsp; </span><span class="comment">// The argument '$arr' is declared to be passed by reference, 
<br>&nbsp; // but '$r' is not;
<br>&nbsp; // however, in the function's body, we use a reference to 
<br>&nbsp; // the '$r' argument
<br>&nbsp; 
<br>&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, &amp;</span><span class="default">$r</span><span class="keyword">); 
<br>&nbsp; </span><span class="comment">// Alternatively, this also could be $arr[] = &amp;$r (in this case)
<br></span><span class="keyword">}
<br>&nbsp; 
<br></span><span class="default">$arr0 </span><span class="keyword">= array();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// an empty array
<br></span><span class="default">$arr1 </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// the array to be referenced in $arr0
<br>
<br>// Note how we call the function:
<br></span><span class="default">tst</span><span class="keyword">(</span><span class="default">$arr0</span><span class="keyword">, &amp;</span><span class="default">$arr1</span><span class="keyword">); </span><span class="comment">// We are passing a reference to '$arr1' in the call !
<br>
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr0</span><span class="keyword">); </span><span class="comment">// Contains just the reference to $arr1
<br>
<br></span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$arr0</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">); </span><span class="comment">// we add another element to $arr0
<br></span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">, </span><span class="default">18</span><span class="keyword">); </span><span class="comment">// we add another element to $arr1 as well
<br>
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">);&nbsp; 
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr0</span><span class="keyword">); </span><span class="comment">// Changes in $arr1 are reflected in $arr0
<br>
<br>// -----------------------------------------
<br>// A simpler way to do this:
<br>
<br></span><span class="keyword">function </span><span class="default">tst1</span><span class="keyword">(&amp;</span><span class="default">$arr</span><span class="keyword">, &amp;</span><span class="default">$r</span><span class="keyword">) {
<br>&nbsp; </span><span class="comment">// Both arguments '$arr' and '$r" are declared to be passed by
<br>&nbsp; // reference, 
<br>&nbsp; // again, in the function's body, we use a reference to 
<br>&nbsp; // the '$r' argument
<br>&nbsp; 
<br>&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, &amp;</span><span class="default">$r</span><span class="keyword">); 
<br>&nbsp; </span><span class="comment">// Alternatively, this also could be $arr[] = &amp;$r (in this case)
<br></span><span class="keyword">}
<br>
<br>&nbsp; 
<br></span><span class="default">$arr0 </span><span class="keyword">= array();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// an empty array
<br></span><span class="default">$arr1 </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// the array to be referenced in $arr0
<br>
<br>// Note how we call the function:
<br></span><span class="default">tst1</span><span class="keyword">(</span><span class="default">$arr0</span><span class="keyword">, </span><span class="default">$arr1</span><span class="keyword">); </span><span class="comment">// 'tst1' understands '$r' is a reference to '$arr1'
<br>
<br></span><span class="keyword">echo </span><span class="string">"-------- 2nd. alternative ------------ &lt;br&gt;\n"</span><span class="keyword">;
<br>
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr0</span><span class="keyword">); </span><span class="comment">// Contains just the reference to $arr1
<br>
<br></span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$arr0</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">); </span><span class="comment">// we add another element to $arr0
<br></span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">, </span><span class="default">18</span><span class="keyword">);
<br>
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">);&nbsp; 
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr0</span><span class="keyword">); </span><span class="comment">// Changes in $arr1 are reflected in $arr0
<br>
<br>// This outputs:
<br>// X-Powered-By: PHP/4.1.2
<br>// Content-type: text/html
<br>// 
<br>// Array
<br>// (
<br>//&nbsp; &nbsp;&nbsp; [0] =&gt; Array
<br>//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 2
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 3
<br>//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )
<br>// 
<br>// )
<br>// Array
<br>// (
<br>//&nbsp; &nbsp;&nbsp; [0] =&gt; 1
<br>//&nbsp; &nbsp;&nbsp; [1] =&gt; 2
<br>//&nbsp; &nbsp;&nbsp; [2] =&gt; 3
<br>//&nbsp; &nbsp;&nbsp; [3] =&gt; 18
<br>// )
<br>// Array
<br>// (
<br>//&nbsp; &nbsp;&nbsp; [0] =&gt; Array
<br>//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 2
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 3
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; 18
<br>//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )
<br>// 
<br>//&nbsp; &nbsp;&nbsp; [1] =&gt; 5
<br>// )
<br>// -------- 2nd. alternative ------------ 
<br>// Array
<br>// (
<br>//&nbsp; &nbsp;&nbsp; [0] =&gt; Array
<br>//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 2
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 3
<br>//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )
<br>// 
<br>// )
<br>// Array
<br>// (
<br>//&nbsp; &nbsp;&nbsp; [0] =&gt; 1
<br>//&nbsp; &nbsp;&nbsp; [1] =&gt; 2
<br>//&nbsp; &nbsp;&nbsp; [2] =&gt; 3
<br>//&nbsp; &nbsp;&nbsp; [3] =&gt; 18
<br>// )
<br>// Array
<br>// (
<br>//&nbsp; &nbsp;&nbsp; [0] =&gt; Array
<br>//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 2
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 3
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; 18
<br>//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )
<br>// 
<br>//&nbsp; &nbsp;&nbsp; [1] =&gt; 5
<br>// )
<br></span><span class="default">?&gt;
<br></span>
<br>In both cases we get the same result.
<br>
<br>I hope this is somehow useful
<br>
<br>Sergio.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="48484">  
  <a class="name">
  <strong class="user"><em>obscvresovl at NOSPAM dot hotmail dot com</em></strong></a><div class="date" title="2004-12-25 10:51"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom48484">
<div class="phpcode"><code><span class="html">
Just a simple note...
<br>
<br><span class="default">&lt;?php
<br>
<br>$num </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br>
<br>function </span><span class="default">blah</span><span class="keyword">(&amp;</span><span class="default">$var</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$var</span><span class="keyword">++;
<br>}
<br>
<br></span><span class="default">blah</span><span class="keyword">(</span><span class="default">$num</span><span class="keyword">);
<br>
<br>echo </span><span class="default">$num</span><span class="keyword">; </span><span class="comment">#2
<br>
<br></span><span class="default">?&gt;
<br></span>
<br><span class="default">&lt;?php
<br>
<br>$num </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br>
<br>function </span><span class="default">blah</span><span class="keyword">()
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$var </span><span class="keyword">=&amp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">"num"</span><span class="keyword">];
<br>&nbsp; &nbsp; </span><span class="default">$var</span><span class="keyword">++;
<br>}
<br>
<br></span><span class="default">blah</span><span class="keyword">();
<br>
<br>echo </span><span class="default">$num</span><span class="keyword">; </span><span class="comment">#2
<br>
<br></span><span class="default">?&gt;
<br></span>
<br>Both codes do the same thing! The second code "explains" how passage of parameters by reference works.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="120351">  
  <a class="name">
  <strong class="user"><em>pallsopp at gmail dot com</em></strong></a><div class="date" title="2016-12-19 08:32"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom120351">
<div class="phpcode"><code><span class="html">
The comment by tnestved at yahoo dot com is incorrect as it is based purely on perception and not architecture. The method passing the object should not care whether it is by ref or by val, and nor should the reader.<br><br>If we are talking about readability and perception, then the receiving method needs to show that the object coming in is a reference, not an object instance, otherwise the reader is perplexed why the object is not returned.<br><br>Good functional headers alleviate all issues in this case.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->

  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from www.php.net/manual/en/language.references.pass.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 02:33:13 GMT -->

</body></html>