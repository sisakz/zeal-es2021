<html><!-- Mirrored from www.php.net/manual/en/function.odbc-longreadlen.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:27:24 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>odbc_longreadlen</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.odbc-longreadlen.html">
 <link rel="shorturl" href="https://www.php.net/odbc-longreadlen">
 <link rel="alternate" href="https://www.php.net/odbc-longreadlen" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.uodbc.html">
 <link rel="prev" href="function.odbc-gettypeinfo.html">
 <link rel="next" href="function.odbc-next-result.html">

 <link rel="alternate" href="function.odbc-longreadlen.html" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.odbc-longreadlen.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.odbc-longreadlen.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.odbc-longreadlen.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/function.odbc-longreadlen.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.odbc-longreadlen.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/ro/function.odbc-longreadlen.php" hreflang="ro">
 <link rel="alternate" href="https://www.php.net/manual/ru/function.odbc-longreadlen.php" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/function.odbc-longreadlen.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.odbc-longreadlen.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0aba.css?t=1539771603&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2ecf.css?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedba57.css?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached3afa.css?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>


</head>
<body class="docs " style="">


<div class="headsup"><a href="https://www.php.net/conferences/index.php#id2021-09-08-1">Longhorn PHP 2021</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.attributes.html">Attributes</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.database.html">Database Extensions</a></li>      <li><a href="refs.database.abstract.html">Abstraction Layers</a></li>      <li><a href="book.uodbc.html">ODBC</a></li>      <li><a href="ref.uodbc.html">ODBC Functions</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="function.odbc-longreadlen" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">odbc_longreadlen</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">odbc_longreadlen</span> â€” <span class="dc-title">Handling of LONG columns</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.odbc-longreadlen-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>odbc_longreadlen</strong></span>(<span class="methodparam"><span class="type">resource</span> <code class="parameter">$statement</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$length</code></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   Controls handling of <code class="literal">LONG</code>, <code class="literal">LONGVARCHAR</code> and <code class="literal">LONGVARBINARY</code> columns.
   The default length can be set using the
   <a href="odbc.configuration.html#ini.uodbc.defaultlrl" class="link">uodbc.defaultlrl</a> <var class="filename">php.ini</var> directive.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.odbc-longreadlen-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>
    
     <dt>
<code class="parameter">statement</code></dt>

     <dd>

      <p class="para">
       The result identifier.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">length</code></dt>

     <dd>

      <p class="para">
       The number of bytes returned to PHP is controlled by the parameter
       length. If it is set to <code class="literal">0</code>, long column data is passed through to the
       client (i.e. printed) when retrieved with <span class="function"><a href="function.odbc-result.html" class="function">odbc_result()</a></span>.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.odbc-longreadlen-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>true</code></strong> on success or <strong><code>false</code></strong> on failure.
  </p>
 </div>

 <div class="refsect1 notes" id="refsect1-function.odbc-longreadlen-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    Handling of <code class="literal">LONGVARBINARY</code> columns is also affected by
    <span class="function"><a href="function.odbc-binmode.html" class="function">odbc_binmode()</a></span>.
   </p>
  <p></p></blockquote>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="55538">  
  <a class="name">
  <strong class="user"><em>php dot net dot notes at webqs dot com</em></strong></a><div class="date" title="2005-08-06 06:12"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom55538">
<div class="phpcode"><code><span class="html">
Hi<br><br>If you are experiencing troubles with truncated and/or strangely encoded data when using PHP with MS SQL via ODBC try setting odbc.defaultlrl ( in php.ini or via ini_set() ) to a largish number, say 65536, as stated in the other notes here. <br>The trick is to know how long your data is going to be, so you may want to provide some overhead. Unfortunately you have to know how long your piece of string is before you cut it.<br><br>Doing this will allow your app to read up to this amount in one go. I'm sure there is a reason for this behaviour but I hadn't experienced anything like it in 5 years of MySQL and Postgres development.<br><br>If you still experience problems AND are using unicode data in the long column of your table, make sure it is set to type "ntext", if it is "text". MSDN has some info on data types for Unicode data.<br>This caused about 3 days of headaches for me, "binary" data crashing browsers and cyclical result sets (i.e repeating data after odbc.defaultlrl bytes). <br><br>This fix was only found by poking things with sticks.<br><br>HTH</span>
</code></div>
  </div>
 </div>
  <div class="note" id="118857">  
  <a class="name">
  <strong class="user"><em>Eion Robb</em></strong></a><div class="date" title="2016-02-17 10:26"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom118857">
<div class="phpcode"><code><span class="html">
It's not mentioned in the notes here, but odbc_longreadlen($result, 0); only affects the output from odbc_result().&nbsp; Setting the read length to 0 (or less than zero) will just output a blank string in the odbc_fetch_object(), odbc_fetch_array() and odbc_result_all() functions</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92380">  
  <a class="name">
  <strong class="user"><em>egil at wp dot pl</em></strong></a><div class="date" title="2009-07-22 02:06"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom92380">
<div class="phpcode"><code><span class="html">
I've tried to use a suggestion in the first comment but that didn't actually worked as I would expect... I wanted to get all data no matter how big it is, but strange things happened and I finally found this solution (works fine at least for MS SQL 2000 for at least few MB of binary data):<br><br><span class="default">&lt;?php<br></span><span class="comment">// connection<br></span><span class="default">$link </span><span class="keyword">= </span><span class="default">odbc_connect</span><span class="keyword">(</span><span class="default">$odbc_source_name</span><span class="keyword">, </span><span class="default">$user</span><span class="keyword">, </span><span class="default">$pass</span><span class="keyword">);<br><br></span><span class="comment">// query (note - one row in this example)<br></span><span class="default">$sql </span><span class="keyword">= </span><span class="string">'SELECT image_data_column FROM some_table WHERE record_id=1'</span><span class="keyword">;<br><br></span><span class="comment">// run<br></span><span class="default">$result </span><span class="keyword">= </span><span class="default">odbc_exec </span><span class="keyword">(</span><span class="default">$link</span><span class="keyword">, </span><span class="default">$sql</span><span class="keyword">)<br>if (!</span><span class="default">$result</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">trigger_error </span><span class="keyword">(</span><span class="string">'[sql] exec: '</span><span class="keyword">.</span><span class="default">$sql</span><span class="keyword">, </span><span class="default">E_USER_ERROR</span><span class="keyword">);<br>}<br><br></span><span class="comment">// fetch settings<br></span><span class="default">odbc_binmode </span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">ODBC_BINMODE_PASSTHRU</span><span class="keyword">); <br></span><span class="default">odbc_longreadlen </span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br><br></span><span class="comment">// get contents<br></span><span class="default">ob_start</span><span class="keyword">(); </span><span class="comment">// you would probably need to move this inside if you expect more rows<br></span><span class="keyword">while (</span><span class="default">odbc_fetch_row</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">))<br>{<br>&nbsp; &nbsp; </span><span class="default">odbc_result</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">); </span><span class="comment">// this actually echos all of the contents of the image_data_column<br></span><span class="keyword">}<br></span><span class="default">odbc_free_result</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br></span><span class="default">$contents </span><span class="keyword">= </span><span class="default">ob_get_clean</span><span class="keyword">();<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="48015">  
  <a class="name">
  <strong class="user"><em>jdcard at inreach dot com</em></strong></a><div class="date" title="2004-12-08 09:37"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom48015">
<div class="phpcode"><code><span class="html">
I was reading from a MEMO field (long varchar) in MSAccess, but the data was consistently truncated at 255 characters. I tried all the combinations of odbc_longreadlen() and odbc_binmode()&nbsp; (and odbc.defaultlrl) that I could think of but none of them resolved the problem.<br><br>The only fix that worked was to modify my query from "SELECT Field1, Field2 FROM TableName" to "SELECT * FROM TableName".<br><br>I suspect that you could cast the field to force the appropriate data type, but when it finally worked after three days of struggle I didn't even try.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="25495">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2002-09-25 05:00"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom25495">
<div class="phpcode"><code><span class="html">
An alternative is to adjust your php.ini file and set:<br>odbc.defaultlrl=65536<br>Or something else sufficiently large.<br>lrl = long read length</span>
</code></div>
  </div>
 </div>
  <div class="note" id="10103">  
  <a class="name">
  <strong class="user"><em>jasendorf at lcounty dot com</em></strong></a><div class="date" title="2000-12-13 04:26"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom10103">
<div class="phpcode"><code><span class="html">
I had a heck of a time figuring out what to do with this function.&nbsp; Here's a little piece of code from Jason Lee which I found that might help someone else...
<br>
<br>$cur = odbc_exec($cnx, $query); 
<br>if(!$cur) { 
<br>/* error handler */ 
<br>} 
<br>
<br>odbc_binmode($cur, ODBC_BINMODE_PASSTHRU); 
<br>odbc_longreadlen($cur, 16384); /* Allow 16kb thru */ 
<br>
<br>while(odbc_fetch_row($cur)) { 
<br>$bigger_than_4096_var = odbc_result($cur, 1); 
<br>/* etc... */ 
<br>
<br>Hope this helps someone, John</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->

  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from www.php.net/manual/en/function.odbc-longreadlen.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:27:24 GMT -->

</body></html>