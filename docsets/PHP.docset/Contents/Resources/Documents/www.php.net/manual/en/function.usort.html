<html><!-- Mirrored from www.php.net/manual/en/function.usort.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:47:55 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>usort</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.usort.html">
 <link rel="shorturl" href="https://www.php.net/usort">
 <link rel="alternate" href="https://www.php.net/usort" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.array.html">
 <link rel="prev" href="function.uksort.html">
 <link rel="next" href="book.classobj.html">

 <link rel="alternate" href="function.usort.html" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.usort.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.usort.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.usort.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/function.usort.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.usort.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/ro/function.usort.php" hreflang="ro">
 <link rel="alternate" href="https://www.php.net/manual/ru/function.usort.php" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/function.usort.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.usort.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0aba.css?t=1539771603&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2ecf.css?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedba57.css?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached3afa.css?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>


</head>
<body class="docs " style="">


<div class="headsup"><a href="https://www.php.net/conferences/index.php#id2021-09-08-1">Longhorn PHP 2021</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.attributes.html">Attributes</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></li>      <li><a href="book.array.html">Arrays</a></li>      <li><a href="ref.array.html">Array Functions</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="function.usort" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">usort</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">usort</span> â€” <span class="dc-title">Sort an array by values using a user-defined comparison function</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.usort-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>usort</strong></span>(<span class="methodparam"><span class="type">array</span> <code class="parameter reference">&amp;$array</code></span>, <span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$callback</code></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   Sorts <code class="parameter">array</code> in place by values using a
   user-supplied comparison function to determine the order.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
 </p><p class="para">
  If two members compare as equal, they retain their original order.
  Prior to PHP 8.0.0, their relative order in the sorted array was undefined.
 </p>
<p></p></blockquote>

  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">This function
assigns new keys to the elements in <code class="parameter">array</code>.
It will remove any existing keys that may have been assigned, rather
than just reordering the keys.</span></p></blockquote>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.usort-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>
    
     <dt>
<code class="parameter">array</code></dt>

     <dd>

      <p class="para">
       The input array.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">callback</code></dt>

     <dd>

      <p class="para">
       The comparison function must return an integer less than, equal to, or greater than zero if the first argument is considered to be respectively less than, equal to, or greater than the second.
      </p>
      <div class="methodsynopsis dc-description"><span class="methodname"><span class="replaceable">callback</span></span>(<span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$a</code></span>, <span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$b</code></span>): <span class="type">int</span></div>

     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.usort-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Always returns <strong><code>true</code></strong>.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.usort-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4974">
    <p><strong>Example #1 <span class="function"><strong>usort()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">cmp</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)&nbsp;?&nbsp;-</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">6</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">usort</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cmp"</span><span style="color: #007700">);<br><br>foreach&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">:&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>0: 1
1: 2
2: 3
3: 5
4: 6
</pre></div>
    </div>
   </div>
  <p></p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    Obviously in this trivial case the <span class="function"><a href="function.sort.html" class="function">sort()</a></span>
    function would be more appropriate.
   </p>
  <p></p></blockquote>
  <p class="para">
   </p><div class="example" id="example-4975">
    <p><strong>Example #2 
     <span class="function"><strong>usort()</strong></span> example using multi-dimensional array
    </strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">cmp</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">strcmp</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">[</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">]);<br>}<br><br></span><span style="color: #0000BB">$fruits</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"lemons"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$fruits</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"apples"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$fruits</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">][</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"grapes"</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">usort</span><span style="color: #007700">(</span><span style="color: #0000BB">$fruits</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cmp"</span><span style="color: #007700">);<br><br>while&nbsp;(list(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">each</span><span style="color: #007700">(</span><span style="color: #0000BB">$fruits</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\$fruits[</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">]:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">[</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     When sorting a multi-dimensional array, <var class="varname">$a</var> and
    <var class="varname">$b</var> contain references to the first index of the array.
    </p></div>
    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>$fruits[0]: apples
$fruits[1]: grapes
$fruits[2]: lemons
</pre></div>
    </div>
   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-4976">
    <p><strong>Example #3 
     <span class="function"><strong>usort()</strong></span> example using a member function of an object
    </strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">TestObj&nbsp;</span><span style="color: #007700">{<br>&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">TestObj</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;This&nbsp;is&nbsp;the&nbsp;static&nbsp;comparing&nbsp;function:&nbsp;*/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">static&nbsp;function&nbsp;</span><span style="color: #0000BB">cmp_obj</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$al&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bl&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">$b</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$al&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">$bl</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(</span><span style="color: #0000BB">$al&nbsp;</span><span style="color: #007700">&gt;&nbsp;</span><span style="color: #0000BB">$bl</span><span style="color: #007700">)&nbsp;?&nbsp;+</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">:&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><br></span><span style="color: #0000BB">$a</span><span style="color: #007700">[]&nbsp;=&nbsp;new&nbsp;</span><span style="color: #0000BB">TestObj</span><span style="color: #007700">(</span><span style="color: #DD0000">"c"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$a</span><span style="color: #007700">[]&nbsp;=&nbsp;new&nbsp;</span><span style="color: #0000BB">TestObj</span><span style="color: #007700">(</span><span style="color: #DD0000">"b"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$a</span><span style="color: #007700">[]&nbsp;=&nbsp;new&nbsp;</span><span style="color: #0000BB">TestObj</span><span style="color: #007700">(</span><span style="color: #DD0000">"d"</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">usort</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"TestObj"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cmp_obj"</span><span style="color: #007700">));<br><br>foreach&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>b
c
d
</pre></div>
    </div>
   </div>
   <div class="example" id="example-4977">
    <p><strong>Example #4 
     <span class="function"><strong>usort()</strong></span> example using a <a href="functions.anonymous.html" class="link">closure</a>
     to sort a multi-dimensional array
    </strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$array</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">'key_a'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'z'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'key_b'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'c'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">'key_a'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'x'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'key_b'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'b'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">'key_a'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'y'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'key_b'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'a'</span><span style="color: #007700">);<br><br>function&nbsp;</span><span style="color: #0000BB">build_sorter</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;function&nbsp;(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)&nbsp;use&nbsp;(</span><span style="color: #0000BB">$key</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">strnatcmp</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>}<br><br></span><span style="color: #0000BB">usort</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">build_sorter</span><span style="color: #007700">(</span><span style="color: #DD0000">'key_b'</span><span style="color: #007700">));<br><br>foreach&nbsp;(</span><span style="color: #0000BB">$array&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">[</span><span style="color: #DD0000">'key_a'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">',&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">[</span><span style="color: #DD0000">'key_b'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>y, a
x, b
z, c
</pre></div>
    </div>
   </div>
  <p></p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.usort-seealso">
  <h3 class="title">See Also</h3>
  <ul class="simplelist">
   <li class="member"><span class="function"><a href="function.uasort.html" class="function" rel="rdfs-seeAlso">uasort()</a> - Sort an array with a user-defined comparison function and maintain index association</span></li>
   <li class="member"><span class="function"><a href="function.uksort.html" class="function" rel="rdfs-seeAlso">uksort()</a> - Sort an array by keys using a user-defined comparison function</span></li>
   <li class="member">The <a href="array.sorting.html" class="link">comparison of array sorting functions</a></li>
  </ul>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="120344">  
  <a class="name">
  <strong class="user"><em>grzeniufication at gmail dot com</em></strong></a><div class="date" title="2016-12-16 07:56"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom120344">
<div class="phpcode"><code><span class="html">
Just wanted to show off the beauty of PHPs spaceship operator in this use case.<br><br><span class="default">&lt;?php </span><span class="comment">// tested on PHP 7.1<br></span><span class="default">$a </span><span class="keyword">= [</span><span class="default">2</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="default">7</span><span class="keyword">];<br></span><span class="default">$asc </span><span class="keyword">= </span><span class="default">$desc </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">;<br></span><span class="default">usort</span><span class="keyword">(</span><span class="default">$asc</span><span class="keyword">, function (</span><span class="default">int $a</span><span class="keyword">, </span><span class="default">int $b</span><span class="keyword">) { return (</span><span class="default">$a </span><span class="keyword">&lt;=&gt; </span><span class="default">$b</span><span class="keyword">); });<br></span><span class="default">usort</span><span class="keyword">(</span><span class="default">$desc</span><span class="keyword">, function (</span><span class="default">int $a</span><span class="keyword">, </span><span class="default">int $b</span><span class="keyword">) { return -(</span><span class="default">$a </span><span class="keyword">&lt;=&gt; </span><span class="default">$b</span><span class="keyword">); });<br></span><span class="default">print_r</span><span class="keyword">([ </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$asc</span><span class="keyword">, </span><span class="default">$desc </span><span class="keyword">]);<br><br></span><span class="comment">/**<br> * Getting ahead of myself but... If arrow function syntax was possible:<br> * usort($asc, (int $a, int $b) =&gt; ($a &lt;=&gt; $b));<br> * usort($desc, (int $a, int $b) =&gt; -($a &lt;=&gt; $b));<br> */<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108116">  
  <a class="name">
  <strong class="user"><em>zuallauz at gmail dot com</em></strong></a><div class="date" title="2012-03-29 09:56"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom108116">
<div class="phpcode"><code><span class="html">
When trying to do some custom sorting with objects and an anonymous function it wasn't entirely clear how this usort function works. I think it probably uses a quicksort in the background. Basically it actually moves the $b variable up or down in respect to the $a variable. It does NOT move the $a variable inside the callback function. This is key to getting your logic right in the comparisons.<br><br>If you return -1 that moves the $b variable down the array, return 1 moves $b up the array and return 0 keeps $b in the same place. <br><br>To test I cut down my code to sorting a simple array from highest priority to lowest.<br><br><span class="default">&lt;?php<br>$priorities </span><span class="keyword">= array(</span><span class="default">5</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">7</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br><br></span><span class="default">usort</span><span class="keyword">(</span><span class="default">$priorities</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; if (</span><span class="default">$a </span><span class="keyword">== </span><span class="default">$b</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"a (</span><span class="default">$a</span><span class="string">) is same priority as b (</span><span class="default">$b</span><span class="string">), keeping the same\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else if (</span><span class="default">$a </span><span class="keyword">&gt; </span><span class="default">$b</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"a (</span><span class="default">$a</span><span class="string">) is higher priority than b (</span><span class="default">$b</span><span class="string">), moving b down array\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; return -</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"b (</span><span class="default">$b</span><span class="string">) is higher priority than a (</span><span class="default">$a</span><span class="string">), moving b up array\n"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>});<br><br>echo </span><span class="string">"Sorted priorities:\n"</span><span class="keyword">;<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$priorities</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>Output:<br><br>b (8) is higher priority than a (3), moving b up array<br>b (5) is higher priority than a (3), moving b up array<br>b (7) is higher priority than a (3), moving b up array<br>a (3) is same priority as b (3), keeping the same<br>a (8) is higher priority than b (3), moving b down array<br>b (8) is higher priority than a (7), moving b up array<br>b (8) is higher priority than a (5), moving b up array<br>b (8) is higher priority than a (3), moving b up array<br>a (5) is higher priority than b (3), moving b down array<br>a (7) is higher priority than b (5), moving b down array<br><br>Sorted priorities:<br>array(5) {<br>&nbsp; [0]=&gt; int(8)<br>&nbsp; [1]=&gt; int(7)<br>&nbsp; [2]=&gt; int(5)<br>&nbsp; [3]=&gt; int(3)<br>&nbsp; [4]=&gt; int(3)<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121635">  
  <a class="name">
  <strong class="user"><em>user dot boba at gmail dot com</em></strong></a><div class="date" title="2017-09-13 05:10"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom121635">
<div class="phpcode"><code><span class="html">
PHP7 spaceship operator very helpful in sorting function callback<br><br><a rel="nofollow" target="_blank">http://php.net/manual/en/migration70.new-features.php#migration70.new-features.spaceship-op</a><br><br><span class="default">&lt;?php<br><br></span><span class="comment">// PHP &lt; 7 example<br></span><span class="keyword">function </span><span class="default">cmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; if (</span><span class="default">$a </span><span class="keyword">== </span><span class="default">$b</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return (</span><span class="default">$a </span><span class="keyword">&lt; </span><span class="default">$b</span><span class="keyword">) ? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">;<br>}<br><br></span><span class="comment">// PHP7 example<br></span><span class="keyword">function </span><span class="default">cmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; return </span><span class="default">$a </span><span class="keyword">&lt;=&gt; </span><span class="default">$b</span><span class="keyword">;<br>}</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105764">  
  <a class="name">
  <strong class="user"><em>Gok6tm</em></strong></a><div class="date" title="2011-09-13 06:09"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom105764">
<div class="phpcode"><code><span class="html">
this is a new multisort function for sorting on multiple subfield like it will be in sql : 'ORDER BY field1, field2'
<br>number of sort field is undefined
<br><span class="default">&lt;?php
<br>
<br>$array</span><span class="keyword">[] = array(</span><span class="string">'soc' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'code'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">);
<br></span><span class="default">$array</span><span class="keyword">[] = array(</span><span class="string">'soc' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'code'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">);
<br></span><span class="default">$array</span><span class="keyword">[] = array(</span><span class="string">'soc' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'code'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">);
<br></span><span class="default">$array</span><span class="keyword">[] = array(</span><span class="string">'soc' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'code'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">);
<br></span><span class="default">$array</span><span class="keyword">[] = array(</span><span class="string">'soc' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'code'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">);
<br></span><span class="default">$array</span><span class="keyword">[] = array(</span><span class="string">'soc' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'code'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">);
<br></span><span class="default">$array</span><span class="keyword">[] = array(</span><span class="string">'soc' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'code'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">);
<br>
<br></span><span class="comment">//usage
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">multiSort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'soc'</span><span class="keyword">, </span><span class="string">'code'</span><span class="keyword">));
<br>
<br>function </span><span class="default">multiSort</span><span class="keyword">() {
<br>&nbsp; &nbsp; </span><span class="comment">//get args of the function
<br>&nbsp; &nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();
<br>&nbsp; &nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);
<br>&nbsp; &nbsp; if (</span><span class="default">$c </span><span class="keyword">&lt; </span><span class="default">2</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; </span><span class="comment">//get the array to sort
<br>&nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br>&nbsp; &nbsp; </span><span class="comment">//sort with an anoymous function using args
<br>&nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) use(</span><span class="default">$args</span><span class="keyword">) {
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cmp </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; while(</span><span class="default">$cmp </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$c</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cmp </span><span class="keyword">= </span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[ </span><span class="default">$args</span><span class="keyword">[ </span><span class="default">$i </span><span class="keyword">] ], </span><span class="default">$b</span><span class="keyword">[ </span><span class="default">$args</span><span class="keyword">[ </span><span class="default">$i </span><span class="keyword">] ]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$cmp</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; });
<br>
<br>&nbsp; &nbsp; return </span><span class="default">$array</span><span class="keyword">;
<br>
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>output:
<br>Array
<br>(
<br>&nbsp; &nbsp; [0] =&gt; Array
<br>&nbsp; &nbsp; &nbsp; &nbsp; (
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [soc] =&gt; 1
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [code] =&gt; 1
<br>&nbsp; &nbsp; &nbsp; &nbsp; )
<br>
<br>&nbsp; &nbsp; [1] =&gt; Array
<br>&nbsp; &nbsp; &nbsp; &nbsp; (
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [soc] =&gt; 1
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [code] =&gt; 1
<br>&nbsp; &nbsp; &nbsp; &nbsp; )
<br>
<br>&nbsp; &nbsp; [2] =&gt; Array
<br>&nbsp; &nbsp; &nbsp; &nbsp; (
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [soc] =&gt; 1
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [code] =&gt; 2
<br>&nbsp; &nbsp; &nbsp; &nbsp; )
<br>
<br>&nbsp; &nbsp; [3] =&gt; Array
<br>&nbsp; &nbsp; &nbsp; &nbsp; (
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [soc] =&gt; 2
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [code] =&gt; 1
<br>&nbsp; &nbsp; &nbsp; &nbsp; )
<br>
<br>&nbsp; &nbsp; [4] =&gt; Array
<br>&nbsp; &nbsp; &nbsp; &nbsp; (
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [soc] =&gt; 2
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [code] =&gt; 5
<br>&nbsp; &nbsp; &nbsp; &nbsp; )
<br>
<br>&nbsp; &nbsp; [5] =&gt; Array
<br>&nbsp; &nbsp; &nbsp; &nbsp; (
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [soc] =&gt; 3
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [code] =&gt; 1
<br>&nbsp; &nbsp; &nbsp; &nbsp; )
<br>
<br>&nbsp; &nbsp; [6] =&gt; Array
<br>&nbsp; &nbsp; &nbsp; &nbsp; (
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [soc] =&gt; 3
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [code] =&gt; 2
<br>&nbsp; &nbsp; &nbsp; &nbsp; )
<br>
<br>)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="118871">  
  <a class="name">
  <strong class="user"><em>Nsisodia91 at gmail dot com</em></strong></a><div class="date" title="2016-02-19 12:12"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom118871">
<div class="phpcode"><code><span class="html">
You can also sort multi-dimensional array for multiple values like as<br><br><span class="default">&lt;?php <br>$arr </span><span class="keyword">= [<br>&nbsp; &nbsp; [<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"name"</span><span class="keyword">=&gt; </span><span class="string">"Sally"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"nick_name"</span><span class="keyword">=&gt; </span><span class="string">"sal"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"availability"</span><span class="keyword">=&gt; </span><span class="string">"0"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"is_fav"</span><span class="keyword">=&gt; </span><span class="string">"0"<br>&nbsp; &nbsp; </span><span class="keyword">],<br>&nbsp; &nbsp; [<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"name"</span><span class="keyword">=&gt; </span><span class="string">"David"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"nick_name"</span><span class="keyword">=&gt; </span><span class="string">"dav07"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"availability"</span><span class="keyword">=&gt; </span><span class="string">"0"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"is_fav"</span><span class="keyword">=&gt; </span><span class="string">"1"<br>&nbsp; &nbsp; </span><span class="keyword">],<br>&nbsp; &nbsp; [<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"name"</span><span class="keyword">=&gt; </span><span class="string">"Zen"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"nick_name"</span><span class="keyword">=&gt; </span><span class="string">"zen"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"availability"</span><span class="keyword">=&gt; </span><span class="string">"1"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"is_fav"</span><span class="keyword">=&gt; </span><span class="string">"0"<br>&nbsp; &nbsp; </span><span class="keyword">],<br>&nbsp; &nbsp; [<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"name"</span><span class="keyword">=&gt; </span><span class="string">"Jackson"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"nick_name"</span><span class="keyword">=&gt; </span><span class="string">"jack"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"availability"</span><span class="keyword">=&gt; </span><span class="string">"1"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"is_fav"</span><span class="keyword">=&gt; </span><span class="string">"1"<br>&nbsp; &nbsp; </span><span class="keyword">],<br>&nbsp; &nbsp; [<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"name"</span><span class="keyword">=&gt; </span><span class="string">"Rohit"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"nick_name"</span><span class="keyword">=&gt; </span><span class="string">"rod"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"availability"</span><span class="keyword">=&gt; </span><span class="string">"0"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"is_fav"</span><span class="keyword">=&gt; </span><span class="string">"0"<br>&nbsp; &nbsp; </span><span class="keyword">],<br><br>];<br><br></span><span class="default">usort</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">,function(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'is_fav'</span><span class="keyword">] - </span><span class="default">$a</span><span class="keyword">[</span><span class="string">'is_fav'</span><span class="keyword">];<br>&nbsp; &nbsp; </span><span class="default">$c </span><span class="keyword">.= </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'availability'</span><span class="keyword">] - </span><span class="default">$a</span><span class="keyword">[</span><span class="string">'availability'</span><span class="keyword">];<br>&nbsp; &nbsp; </span><span class="default">$c </span><span class="keyword">.= </span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'nick_name'</span><span class="keyword">],</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'nick_name'</span><span class="keyword">]);<br>&nbsp; &nbsp; return </span><span class="default">$c</span><span class="keyword">;<br>});<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>Output:<br><br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [name] =&gt; Jackson<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [nick_name] =&gt; jack<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [availability] =&gt; 1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [is_fav] =&gt; 1<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [1] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [name] =&gt; David<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [nick_name] =&gt; dav07<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [availability] =&gt; 0<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [is_fav] =&gt; 1<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [2] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [name] =&gt; Zen<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [nick_name] =&gt; zen<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [availability] =&gt; 1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [is_fav] =&gt; 0<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [3] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [name] =&gt; Rohit<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [nick_name] =&gt; rod<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [availability] =&gt; 0<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [is_fav] =&gt; 0<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [4] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [name] =&gt; Sally<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [nick_name] =&gt; sal<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [availability] =&gt; 0<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [is_fav] =&gt; 0<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89977">  
  <a class="name">
  <strong class="user"><em>gmail.com - nmcquay</em></strong></a><div class="date" title="2009-03-31 12:25"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom89977">
<div class="phpcode"><code><span class="html">
I wrote a wrapper for usort that lets you use something similar to an SQL ORDER BY clause. It can sort arrays of associative arrays and arrays of objects and I think it would work with some hybrid case.
<br>
<br>Example of how the function works:
<br>
<br><span class="default">&lt;?php
<br>$testAry </span><span class="keyword">= array(
<br>&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">),
<br>&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">),
<br>&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">),
<br>&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">),
<br>&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">),
<br>&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">)
<br>);
<br>
<br></span><span class="default">Utility</span><span class="keyword">::</span><span class="default">orderBy</span><span class="keyword">(</span><span class="default">$testAry</span><span class="keyword">, </span><span class="string">'a ASC, b DESC'</span><span class="keyword">);
<br>
<br></span><span class="comment">//Result:
<br></span><span class="default">$testAry </span><span class="keyword">= array(
<br>&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">),
<br>&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">),
<br>&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">),
<br>&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">),
<br>&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">),
<br>&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">)
<br>);
<br></span><span class="default">?&gt;
<br></span>
<br>To sort an array of objects you would do something like:
<br>Utility::orderBy($objectAry, 'getCreationDate() DESC, getSubOrder() ASC');
<br>
<br>This would sort an array of objects that have methods getCreationDate() and getSubOrder().
<br>
<br>Here is the function:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">class </span><span class="default">Utility </span><span class="keyword">{
<br>&nbsp; &nbsp; </span><span class="comment">/*
<br>&nbsp; &nbsp; * @param array $ary the array we want to sort
<br>&nbsp; &nbsp; * @param string $clause a string specifying how to sort the array similar to SQL ORDER BY clause
<br>&nbsp; &nbsp; * @param bool $ascending that default sorts fall back to when no direction is specified
<br>&nbsp; &nbsp; * @return null
<br>&nbsp; &nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">public static function </span><span class="default">orderBy</span><span class="keyword">(&amp;</span><span class="default">$ary</span><span class="keyword">, </span><span class="default">$clause</span><span class="keyword">, </span><span class="default">$ascending </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$clause </span><span class="keyword">= </span><span class="default">str_ireplace</span><span class="keyword">(</span><span class="string">'order by'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$clause</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$clause </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\s+/'</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$clause</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">, </span><span class="default">$clause</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dirMap </span><span class="keyword">= array(</span><span class="string">'desc' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'asc' </span><span class="keyword">=&gt; -</span><span class="default">1</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$def </span><span class="keyword">= </span><span class="default">$ascending </span><span class="keyword">? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$keyAry </span><span class="keyword">= array();
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dirAry </span><span class="keyword">= array();
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">));
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$keyAry</span><span class="keyword">[] = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset(</span><span class="default">$key</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dir </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]));
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dirAry</span><span class="keyword">[] = </span><span class="default">$dirMap</span><span class="keyword">[</span><span class="default">$dir</span><span class="keyword">] ? </span><span class="default">$dirMap</span><span class="keyword">[</span><span class="default">$dir</span><span class="keyword">] : </span><span class="default">$def</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dirAry</span><span class="keyword">[] = </span><span class="default">$def</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fnBody </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$keyAry</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&gt;= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$k </span><span class="keyword">= </span><span class="default">$keyAry</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="default">$dirAry</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$f </span><span class="keyword">= -</span><span class="default">1 </span><span class="keyword">* </span><span class="default">$t</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aStr </span><span class="keyword">= </span><span class="string">'$a[\''</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">.</span><span class="string">'\']'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bStr </span><span class="keyword">= </span><span class="string">'$b[\''</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">.</span><span class="string">'\']'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">, </span><span class="string">'('</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aStr </span><span class="keyword">= </span><span class="string">'$a-&gt;'</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bStr </span><span class="keyword">= </span><span class="string">'$b-&gt;'</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$fnBody </span><span class="keyword">== </span><span class="string">''</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fnBody </span><span class="keyword">.= </span><span class="string">"if(</span><span class="keyword">{</span><span class="default">$aStr</span><span class="keyword">}</span><span class="string"> == </span><span class="keyword">{</span><span class="default">$bStr</span><span class="keyword">}</span><span class="string">) { return 0; }\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fnBody </span><span class="keyword">.= </span><span class="string">"return (</span><span class="keyword">{</span><span class="default">$aStr</span><span class="keyword">}</span><span class="string"> &lt; </span><span class="keyword">{</span><span class="default">$bStr</span><span class="keyword">}</span><span class="string">) ? </span><span class="keyword">{</span><span class="default">$t</span><span class="keyword">}</span><span class="string"> : </span><span class="keyword">{</span><span class="default">$f</span><span class="keyword">}</span><span class="string">;\n"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fnBody </span><span class="keyword">= </span><span class="string">"if(</span><span class="keyword">{</span><span class="default">$aStr</span><span class="keyword">}</span><span class="string"> == </span><span class="keyword">{</span><span class="default">$bStr</span><span class="keyword">}</span><span class="string">) {\n" </span><span class="keyword">. </span><span class="default">$fnBody</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fnBody </span><span class="keyword">.= </span><span class="string">"}\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fnBody </span><span class="keyword">.= </span><span class="string">"return (</span><span class="keyword">{</span><span class="default">$aStr</span><span class="keyword">}</span><span class="string"> &lt; </span><span class="keyword">{</span><span class="default">$bStr</span><span class="keyword">}</span><span class="string">) ? </span><span class="keyword">{</span><span class="default">$t</span><span class="keyword">}</span><span class="string"> : </span><span class="keyword">{</span><span class="default">$f</span><span class="keyword">}</span><span class="string">;\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$fnBody</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$sortFn </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$b'</span><span class="keyword">, </span><span class="default">$fnBody</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$ary</span><span class="keyword">, </span><span class="default">$sortFn</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="38827">  
  <a class="name">
  <strong class="user"><em>sreid at sea-to-sky dot net</em></strong></a><div class="date" title="2004-01-07 08:22"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom38827">
<div class="phpcode"><code><span class="html">
As the manual says, "If two members compare as equal, their order in the sorted array is undefined." This means that the sort used is not "stable" and may change the order of elements that compare equal.
<br>
<br>Sometimes you really do need a stable sort. For example, if you sort a list by one field, then sort it again by another field, but don't want to lose the ordering from the previous field. In that case it is better to use usort with a comparison function that takes both fields into account, but if you can't do that then use the function below. It is a merge sort, which is guaranteed O(n*log(n)) complexity, which means it stays reasonably fast even when you use larger lists (unlike bubblesort and insertion sort, which are O(n^2)). 
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">mergesort</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$cmp_function </span><span class="keyword">= </span><span class="string">'strcmp'</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="comment">// Arrays of size &lt; 2 require no action.
<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) &lt; </span><span class="default">2</span><span class="keyword">) return;
<br>&nbsp; &nbsp; </span><span class="comment">// Split the array in half
<br>&nbsp; &nbsp; </span><span class="default">$halfway </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) / </span><span class="default">2</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$array1 </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$halfway</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$array2 </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$halfway</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="comment">// Recurse to sort the two halves
<br>&nbsp; &nbsp; </span><span class="default">mergesort</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$cmp_function</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">mergesort</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">, </span><span class="default">$cmp_function</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="comment">// If all of $array1 is &lt;= all of $array2, just append them.
<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$cmp_function</span><span class="keyword">, </span><span class="default">end</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">), </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &lt; </span><span class="default">1</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; return;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; </span><span class="comment">// Merge the two sorted arrays into a single sorted array
<br>&nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= array();
<br>&nbsp; &nbsp; </span><span class="default">$ptr1 </span><span class="keyword">= </span><span class="default">$ptr2 </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; while (</span><span class="default">$ptr1 </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">) &amp;&amp; </span><span class="default">$ptr2 </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$cmp_function</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">[</span><span class="default">$ptr1</span><span class="keyword">], </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$ptr2</span><span class="keyword">]) &lt; </span><span class="default">1</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$array1</span><span class="keyword">[</span><span class="default">$ptr1</span><span class="keyword">++];
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$ptr2</span><span class="keyword">++];
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; </span><span class="comment">// Merge the remainder
<br>&nbsp; &nbsp; </span><span class="keyword">while (</span><span class="default">$ptr1 </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">)) </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$array1</span><span class="keyword">[</span><span class="default">$ptr1</span><span class="keyword">++];
<br>&nbsp; &nbsp; while (</span><span class="default">$ptr2 </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">)) </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$ptr2</span><span class="keyword">++];
<br>&nbsp; &nbsp; return;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93194">  
  <a class="name">
  <strong class="user"><em>Will Shaver</em></strong></a><div class="date" title="2009-08-27 02:31"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom93194">
<div class="phpcode"><code><span class="html">
An even better implementation of osort [than my original, posted on 24-AUG-09 (since deleted)], allowing for multiple properties and directions.&nbsp; With php 5.3.0 sorting by properties of an object becomes MUCH simpler.&nbsp; Note that this uses anonymous functions / closures. Might find reviewing the php docs on that useful.&nbsp; Look below for examples for previous version of php.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">osort</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$props</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$props</span><span class="keyword">))
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$props </span><span class="keyword">= array(</span><span class="default">$props </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">); 
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) use (</span><span class="default">$props</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$props </span><span class="keyword">as </span><span class="default">$prop </span><span class="keyword">=&gt; </span><span class="default">$ascending</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">$prop </span><span class="keyword">!= </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">$prop</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$ascending</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">$prop </span><span class="keyword">&gt; </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">$prop </span><span class="keyword">? </span><span class="default">1 </span><span class="keyword">: -</span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">$prop </span><span class="keyword">&gt; </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">$prop </span><span class="keyword">? </span><span class="default">1 </span><span class="keyword">: -</span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; return -</span><span class="default">1</span><span class="keyword">; </span><span class="comment">//if all props equal&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="keyword">});&nbsp; &nbsp; 
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>Usage:
<br>
<br><span class="default">&lt;?php
<br>osort</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">, array(</span><span class="string">"Color" </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">, </span><span class="string">"Size" </span><span class="keyword">=&gt; </span><span class="default">false</span><span class="keyword">));
<br></span><span class="comment">//or
<br></span><span class="default">osort</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">, </span><span class="string">"Color"</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="64034">  
  <a class="name">
  <strong class="user"><em>stephen in koto</em></strong></a><div class="date" title="2006-04-05 10:28"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom64034">
<div class="phpcode"><code><span class="html">
For using usort inside a method in an object, where the callback sort method is in the same object, this works:
<br>
<br><span class="default">&lt;?php usort</span><span class="keyword">(</span><span class="default">$arr_to_sort</span><span class="keyword">, array(</span><span class="default">$this</span><span class="keyword">, </span><span class="string">"sort_terms_by_criteria"</span><span class="keyword">)); </span><span class="default">?&gt;
<br></span>
<br>If you wish to keep elements in their original or reverse order if they are the same length, just don't return zero for items that compare the same. Return a 1 or -1, as appropriate.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="54901">  
  <a class="name">
  <strong class="user"><em>dmhouse at gmail dot com</em></strong></a><div class="date" title="2005-07-19 02:09"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom54901">
<div class="phpcode"><code><span class="html">
The easiest way to compare two integers is just to take the second away from the first. For example, say you wanted to sort by an integer property of an object. Your comparison function would look like this:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">compare_counts</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br>&nbsp; return </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">count </span><span class="keyword">- </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">count</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>This works because you don't necessarily have to return -1, 0 or 1, the manual states any integer less than, equal to or greater than 0 is OK.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113851">  
  <a class="name">
  <strong class="user"><em>Gerald Schneider</em></strong></a><div class="date" title="2013-12-09 07:57"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom113851">
<div class="phpcode"><code><span class="html">
usort returns null when the sorting function is not (yet) defined. The function has to be defined before usort is called, afterwards doesn't work.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121037">  
  <a class="name">
  <strong class="user"><em>121616591 at qq dot com</em></strong></a><div class="date" title="2017-05-02 09:49"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121037">
<div class="phpcode"><code><span class="html">
You can also sort multi-dimensional array for multiple values like as<br><span class="default">&lt;?php<br>$arr </span><span class="keyword">= array(<br>&nbsp; &nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, </span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="default">6</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">),<br>&nbsp; &nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">, </span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'c'</span><span class="keyword">),<br>&nbsp; &nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">, </span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'b'</span><span class="keyword">),<br>&nbsp; &nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">4</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">, </span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'d'</span><span class="keyword">),<br>);<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">arrayOrderBy</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="string">'age asc,sex asc,name desc'</span><span class="keyword">));<br><br>function </span><span class="default">arrayOrderBy</span><span class="keyword">(array &amp;</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$order </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br>&nbsp; &nbsp; if (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$order</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$orders </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">, </span><span class="default">$order</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) use(</span><span class="default">$orders</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$orders </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; list(</span><span class="default">$field</span><span class="keyword">, </span><span class="default">$sort</span><span class="keyword">) = </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'trim'</span><span class="keyword">, </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!(isset(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">]) &amp;&amp; isset(</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">]))) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">strcasecmp</span><span class="keyword">(</span><span class="default">$sort</span><span class="keyword">, </span><span class="string">'desc'</span><span class="keyword">) === </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">$b</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">$tmp</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">]) &amp;&amp; </span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">]) ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$a</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">] - </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">], </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">implode</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">);<br>&nbsp; &nbsp; });<br>&nbsp; &nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>output:<br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [id] =&gt; 1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [age] =&gt; 1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [sex] =&gt; 6<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [name] =&gt; a<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [1] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [id] =&gt; 4<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [age] =&gt; 2<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [sex] =&gt; 1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [name] =&gt; d<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [2] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [id] =&gt; 2<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [age] =&gt; 3<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [sex] =&gt; 1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [name] =&gt; c<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [3] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [id] =&gt; 3<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [age] =&gt; 3<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [sex] =&gt; 1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [name] =&gt; b<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="78984">  
  <a class="name">
  <strong class="user"><em>Sid_M</em></strong></a><div class="date" title="2007-11-05 05:54"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom78984">
<div class="phpcode"><code><span class="html">
The sample function for having the sort function be a class method has a comment identifying the sorting function as static, however the function does not have the static keyword. In PHP 5 (at least as configured on my server), usort will fail, identifying the method as non-static. Preceding the function keyword with the static keyword fixed the problem.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97750">  
  <a class="name">
  <strong class="user"><em>xaguilars at gmail dot com</em></strong></a><div class="date" title="2010-05-06 04:03"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom97750">
<div class="phpcode"><code><span class="html">
I'd like to share with the community my function for sorting an array of arrays or objects containing associative data. This could be used, for example, with a MySQL result.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">sort_by</span><span class="keyword">(</span><span class="default">$field</span><span class="keyword">, &amp;</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$sorting</span><span class="keyword">=</span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">$case_insensitive</span><span class="keyword">=</span><span class="default">true</span><span class="keyword">){<br>&nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) &amp;&amp; (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">) &amp;&amp; ( ( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &amp;&amp; isset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$field</span><span class="keyword">]) ) || ( </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &amp;&amp; isset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]-&gt;</span><span class="default">$field</span><span class="keyword">) ) ) ){<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$case_insensitive</span><span class="keyword">==</span><span class="default">true</span><span class="keyword">) </span><span class="default">$strcmp_fn </span><span class="keyword">= </span><span class="string">"strnatcasecmp"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; else </span><span class="default">$strcmp_fn </span><span class="keyword">= </span><span class="string">"strnatcmp"</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$sorting</span><span class="keyword">==</span><span class="default">SORT_ASC</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fn </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$b'</span><span class="keyword">, </span><span class="string">'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(is_object($a) &amp;&amp; is_object($b)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return '</span><span class="keyword">.</span><span class="default">$strcmp_fn</span><span class="keyword">.</span><span class="string">'($a-&gt;'</span><span class="keyword">.</span><span class="default">$field</span><span class="keyword">.</span><span class="string">', $b-&gt;'</span><span class="keyword">.</span><span class="default">$field</span><span class="keyword">.</span><span class="string">');<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else if(is_array($a) &amp;&amp; is_array($b)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return '</span><span class="keyword">.</span><span class="default">$strcmp_fn</span><span class="keyword">.</span><span class="string">'($a["'</span><span class="keyword">.</span><span class="default">$field</span><span class="keyword">.</span><span class="string">'"], $b["'</span><span class="keyword">.</span><span class="default">$field</span><span class="keyword">.</span><span class="string">'"]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else return 0;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fn </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$b'</span><span class="keyword">, </span><span class="string">'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(is_object($a) &amp;&amp; is_object($b)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return '</span><span class="keyword">.</span><span class="default">$strcmp_fn</span><span class="keyword">.</span><span class="string">'($b-&gt;'</span><span class="keyword">.</span><span class="default">$field</span><span class="keyword">.</span><span class="string">', $a-&gt;'</span><span class="keyword">.</span><span class="default">$field</span><span class="keyword">.</span><span class="string">');<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else if(is_array($a) &amp;&amp; is_array($b)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return '</span><span class="keyword">.</span><span class="default">$strcmp_fn</span><span class="keyword">.</span><span class="string">'($b["'</span><span class="keyword">.</span><span class="default">$field</span><span class="keyword">.</span><span class="string">'"], $a["'</span><span class="keyword">.</span><span class="default">$field</span><span class="keyword">.</span><span class="string">'"]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else return 0;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$fn</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="116264">  
  <a class="name">
  <strong class="user"><em>bob at thecaverlys dot net</em></strong></a><div class="date" title="2014-12-03 03:10"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom116264">
<div class="phpcode"><code><span class="html">
Below is a variation on Example #4 that implements a multi-key natural sort on an associative array and can be called in such a way as to allow reversing the sort order and/or making the comparison case insensitive on a key by key basis.<br><br>Test code is included in the file â€“ run it from the command line with: php sortUtils.php<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> *&nbsp; &nbsp; sortUtils.php<br>*/<br><br>/**<br> *&nbsp; &nbsp; mknatsort() - Multi-Key Natural Sort for associative arrays<br> *<br> *&nbsp; &nbsp; Uses the usort() function to perform a natural sort on a multi-dimensional<br> *&nbsp; &nbsp; array on multiple keys. Optionally specifying the sort order for each key<br> *&nbsp; &nbsp; and/or ignoring the case for each key value.<br> *<br> *&nbsp; &nbsp; @param array $data_array The array to be sorted.<br> *&nbsp; &nbsp; @param mixed $keys The list of keys to be sorted by. This may be a single<br> *&nbsp; &nbsp; &nbsp; &nbsp; key or an array of keys<br> *&nbsp; &nbsp; @param boolean $reverse Specify whether or not to reverse the sort order. If<br> *&nbsp; &nbsp; &nbsp; &nbsp; there are multiple keys then $reverse may be an array of booleans - one<br> *&nbsp; &nbsp; &nbsp; &nbsp; per key.<br> *&nbsp; &nbsp; @param boolean $ignorecase Specify whether or not to ignore the case when<br> *&nbsp; &nbsp; &nbsp; &nbsp; comparing key values.reverse the sort order. If there are multiple keys<br> *&nbsp; &nbsp; &nbsp; &nbsp; then $ignorecase may be an array of booleans - one per key.<br>*/<br></span><span class="keyword">function </span><span class="default">mknatsort </span><span class="keyword">( &amp;</span><span class="default">$data_array</span><span class="keyword">, </span><span class="default">$keys</span><span class="keyword">, </span><span class="default">$reverse</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">, </span><span class="default">$ignorecase</span><span class="keyword">=</span><span class="default">false </span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="comment">// make sure $keys is an array<br>&nbsp; &nbsp; </span><span class="keyword">if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">)) </span><span class="default">$keys </span><span class="keyword">= array(</span><span class="default">$keys</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$data_array</span><span class="keyword">, </span><span class="default">sortcompare</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">, </span><span class="default">$reverse</span><span class="keyword">, </span><span class="default">$ignorecase</span><span class="keyword">) );<br>}<br><br>function </span><span class="default">sortcompare</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">, </span><span class="default">$reverse</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">, </span><span class="default">$ignorecase</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; return function (</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) use (</span><span class="default">$keys</span><span class="keyword">, </span><span class="default">$reverse</span><span class="keyword">, </span><span class="default">$ignorecase</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cnt</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// check each key in the order specified<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">foreach ( </span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// check the value for ignorecase and do natural compare accordingly<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ignore </span><span class="keyword">= </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$ignorecase</span><span class="keyword">) ? </span><span class="default">$ignorecase</span><span class="keyword">[</span><span class="default">$cnt</span><span class="keyword">] : </span><span class="default">$ignorecase</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$ignore </span><span class="keyword">? </span><span class="default">strnatcasecmp </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) : </span><span class="default">strnatcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// check the value for reverse and reverse the sort order accordingly<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$revcmp </span><span class="keyword">= </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$reverse</span><span class="keyword">) ? </span><span class="default">$reverse</span><span class="keyword">[</span><span class="default">$cnt</span><span class="keyword">] : </span><span class="default">$reverse</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$revcmp </span><span class="keyword">? (</span><span class="default">$result </span><span class="keyword">* -</span><span class="default">1</span><span class="keyword">) : </span><span class="default">$result</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// the first key that results in a non-zero comparison determines<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // the order of the elements<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if ( </span><span class="default">$result </span><span class="keyword">!= </span><span class="default">0 </span><span class="keyword">) break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cnt</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$result</span><span class="keyword">;<br>&nbsp; &nbsp; };<br>} </span><span class="comment">// end sortcompare()<br><br>// test code that will be skipped if this is included in the web environment<br>// test with: php sortUtils.php from the command line<br></span><span class="default">$sapi_type </span><span class="keyword">= </span><span class="default">php_sapi_name</span><span class="keyword">();<br>if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$sapi_type</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">) == </span><span class="string">'cli'</span><span class="keyword">) {<br><br>&nbsp; &nbsp; </span><span class="comment">// the following shows several examples of usage and the resulting output.<br>&nbsp; &nbsp; </span><span class="default">$test</span><span class="keyword">[] = array(</span><span class="string">'Status'</span><span class="keyword">=&gt;</span><span class="string">'In Progress'</span><span class="keyword">, </span><span class="string">'comment'</span><span class="keyword">=&gt;</span><span class="string">'This looks good.'</span><span class="keyword">, </span><span class="string">'user_name'</span><span class="keyword">=&gt;</span><span class="string">'John Doe'</span><span class="keyword">, </span><span class="string">'date_modified'</span><span class="keyword">=&gt;</span><span class="string">'06/13/2014 11:20 AM'</span><span class="keyword">, </span><span class="string">'role'</span><span class="keyword">=&gt;</span><span class="string">'Senior Account Manager'</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$test</span><span class="keyword">[] = array(</span><span class="string">'Status'</span><span class="keyword">=&gt;</span><span class="string">'In Progress'</span><span class="keyword">, </span><span class="string">'comment'</span><span class="keyword">=&gt;</span><span class="string">'This looks good, please approve.'</span><span class="keyword">, </span><span class="string">'user_name'</span><span class="keyword">=&gt;</span><span class="string">'John Doe'</span><span class="keyword">, </span><span class="string">'date_modified'</span><span class="keyword">=&gt;</span><span class="string">'06/13/2014 11:19 AM'</span><span class="keyword">, </span><span class="string">'role'</span><span class="keyword">=&gt;</span><span class="string">'Account Manager'</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$test</span><span class="keyword">[] = array(</span><span class="string">'Status'</span><span class="keyword">=&gt;</span><span class="string">'In Progress'</span><span class="keyword">, </span><span class="string">'comment'</span><span class="keyword">=&gt;</span><span class="string">'This looks good.'</span><span class="keyword">, </span><span class="string">'user_name'</span><span class="keyword">=&gt;</span><span class="string">'Jane Smith'</span><span class="keyword">, </span><span class="string">'date_modified'</span><span class="keyword">=&gt;</span><span class="string">'06/13/2014 11:19 AM'</span><span class="keyword">, </span><span class="string">'role'</span><span class="keyword">=&gt;</span><span class="string">'Senior Account Manager'</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$test</span><span class="keyword">[] = array(</span><span class="string">'Status'</span><span class="keyword">=&gt;</span><span class="string">'Returned'</span><span class="keyword">, </span><span class="string">'comment'</span><span class="keyword">=&gt;</span><span class="string">'There is not enough informartion.&nbsp; Please add the following.'</span><span class="keyword">, </span><span class="string">'user_name'</span><span class="keyword">=&gt;</span><span class="string">'John Doe'</span><span class="keyword">, </span><span class="string">'date_modified'</span><span class="keyword">=&gt;</span><span class="string">'06/13/2014 11:15 AM'</span><span class="keyword">, </span><span class="string">'role'</span><span class="keyword">=&gt;</span><span class="string">'Account Manager'</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$test</span><span class="keyword">[] = array(</span><span class="string">'Status'</span><span class="keyword">=&gt;</span><span class="string">'In Progress'</span><span class="keyword">, </span><span class="string">'comment'</span><span class="keyword">=&gt;</span><span class="string">'I am currently reviewing this.'</span><span class="keyword">, </span><span class="string">'user_name'</span><span class="keyword">=&gt;</span><span class="string">'John Doe'</span><span class="keyword">, </span><span class="string">'date_modified'</span><span class="keyword">=&gt;</span><span class="string">'06/13/2014 11:14 AM'</span><span class="keyword">, </span><span class="string">'role'</span><span class="keyword">=&gt;</span><span class="string">'Account Manager'</span><span class="keyword">);<br>&nbsp; &nbsp; echo </span><span class="string">"Original array: "</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br><br>&nbsp; &nbsp; echo </span><span class="string">"Sorted on date_modified: "</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">mknatsort</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">, array(</span><span class="string">'date_modified'</span><span class="keyword">) );<br>&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br><br>&nbsp; &nbsp; echo </span><span class="string">"Sorted on role(reversed) &amp; date_modified: "</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">mknatsort</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">, array(</span><span class="string">'role'</span><span class="keyword">,</span><span class="string">'date_modified'</span><span class="keyword">),array(</span><span class="default">true</span><span class="keyword">,</span><span class="default">false</span><span class="keyword">) );<br>&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br><br>&nbsp; &nbsp; echo </span><span class="string">"Sorted on role &amp; date_modified(reversed): "</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">mknatsort</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">, array(</span><span class="string">'role'</span><span class="keyword">,</span><span class="string">'date_modified'</span><span class="keyword">),array(</span><span class="default">false</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">) );<br>&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89919">  
  <a class="name">
  <strong class="user"><em>luke dot semerau at gmail dot com</em></strong></a><div class="date" title="2009-03-28 12:25"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom89919">
<div class="phpcode"><code><span class="html">
If you need to use usort with a key in the calling method, I wrote this as a utility:<br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">usort_comparison</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">, </span><span class="default">$method</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$usorter </span><span class="keyword">= &amp;new </span><span class="default">Usort</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">, </span><span class="default">$method</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">);<br>&nbsp; &nbsp; return array(</span><span class="default">$usorter</span><span class="keyword">, </span><span class="string">"sort"</span><span class="keyword">);<br>}<br><br>class </span><span class="default">Usort </span><span class="keyword">{<br>&nbsp; &nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">, </span><span class="default">$method</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">obj </span><span class="keyword">= </span><span class="default">$obj</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">method </span><span class="keyword">= </span><span class="default">$method</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key </span><span class="keyword">= </span><span class="default">$key</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; function </span><span class="default">sort</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">obj</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">method</span><span class="keyword">), array(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">));<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">?&gt;<br></span><br><span class="default">&lt;?php<br><br></span><span class="keyword">require_once(</span><span class="string">"util/usort.php"</span><span class="keyword">);<br><br>class </span><span class="default">Foo </span><span class="keyword">{<br>&nbsp; &nbsp; </span><span class="default">$items </span><span class="keyword">= array(</span><span class="default">FooBar</span><span class="keyword">(</span><span class="default">13</span><span class="keyword">), </span><span class="default">FooBar</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">));<br>&nbsp; &nbsp; public function </span><span class="default">sorter</span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-</span><span class="default">items</span><span class="keyword">, </span><span class="default">usort_comparison</span><span class="keyword">(</span><span class="string">"Foo"</span><span class="keyword">, </span><span class="string">"_cmp"</span><span class="keyword">, </span><span class="string">"item"</span><span class="keyword">));<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; public static function </span><span class="default">_cmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strcasecmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>}<br><br>class </span><span class="default">FooBar </span><span class="keyword">{<br>&nbsp; &nbsp; public </span><span class="default">$item</span><span class="keyword">;<br>&nbsp; &nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">item </span><span class="keyword">= </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">?&gt;<br></span><br>~ simple example... but in the way I need to use it was the key was used in a switch statement to choose the different member of the object to compare against dynamically (as in, sort by x or y or z)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="15030">  
  <a class="name">
  <strong class="user"><em>josh at wintelcom dot net</em></strong></a><div class="date" title="2001-08-24 06:58"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom15030">
<div class="phpcode"><code><span class="html">
This lets you sort an associative multi-dimensional array by multiple key/field names.&nbsp; Much similiar to the SQL clause ORDER BY.&nbsp; Enjoy.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">cmp </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {
<br>
<br>&nbsp; &nbsp; </span><span class="comment">// Populate this array with your values...
<br>&nbsp; &nbsp; // Below is the SQL equivalent of
<br>&nbsp; &nbsp; // select * from blah ORDER BY date desc, type asc, name asc
<br>
<br>&nbsp; &nbsp; </span><span class="default">$vals </span><span class="keyword">= array(
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'date' </span><span class="keyword">=&gt; </span><span class="string">'d'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'type' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'a'
<br>&nbsp; &nbsp; </span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; while(list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$vals</span><span class="keyword">)) {
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$val </span><span class="keyword">== </span><span class="string">"d"</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$a</span><span class="keyword">[</span><span class="string">"</span><span class="default">$key</span><span class="string">"</span><span class="keyword">] &gt; </span><span class="default">$b</span><span class="keyword">[</span><span class="string">"</span><span class="default">$key</span><span class="string">"</span><span class="keyword">]) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return -</span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$a</span><span class="keyword">[</span><span class="string">"</span><span class="default">$key</span><span class="string">"</span><span class="keyword">] &lt; </span><span class="default">$b</span><span class="keyword">[</span><span class="string">"</span><span class="default">$key</span><span class="string">"</span><span class="keyword">]) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$val </span><span class="keyword">== </span><span class="string">"a"</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$a</span><span class="keyword">[</span><span class="string">"</span><span class="default">$key</span><span class="string">"</span><span class="keyword">] &lt; </span><span class="default">$b</span><span class="keyword">[</span><span class="string">"</span><span class="default">$key</span><span class="string">"</span><span class="keyword">]) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return -</span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$a</span><span class="keyword">[</span><span class="string">"</span><span class="default">$key</span><span class="string">"</span><span class="keyword">] &gt; </span><span class="default">$b</span><span class="keyword">[</span><span class="string">"</span><span class="default">$key</span><span class="string">"</span><span class="keyword">]) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; }
<br>
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="42535">  
  <a class="name">
  <strong class="user"><em>Raveler at telenet dot be</em></strong></a><div class="date" title="2004-05-20 10:02"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom42535">
<div class="phpcode"><code><span class="html">
The array_alternate_multisort function written by robert below doesn't work. There are several bugs in the code and it doesn't work when sorting by multiple keys because the order of the first key isn't taken into account when sorting by the second key and so on. Also, because robert uses strcasecmp the algorithm doesn't work properly with floats or other variable types. Here's the improved version:<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">SortArray</span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arguments </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$c </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$c </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arguments</span><span class="keyword">); </span><span class="default">$c </span><span class="keyword">+= </span><span class="default">2</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">$c </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">], array(</span><span class="string">"ASC"</span><span class="keyword">, </span><span class="string">"DESC"</span><span class="keyword">))) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">.= </span><span class="string">'if ($a["'</span><span class="keyword">.</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">].</span><span class="string">'"] != $b["'</span><span class="keyword">.</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">].</span><span class="string">'"]) {'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">$c </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">] == </span><span class="string">"ASC"</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">.= </span><span class="string">'return ($a["'</span><span class="keyword">.</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">].</span><span class="string">'"] &lt; $b["'</span><span class="keyword">.</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">].</span><span class="string">'"] ? -1 : 1); }'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">.= </span><span class="string">'return ($a["'</span><span class="keyword">.</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">].</span><span class="string">'"] &lt; $b["'</span><span class="keyword">.</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">].</span><span class="string">'"] ? 1 : -1); }'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">.= </span><span class="string">'return 0;'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$compare </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$b'</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$compare</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$array</span><span class="keyword">;<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111883">  
  <a class="name">
  <strong class="user"><em>Hayley Watson</em></strong></a><div class="date" title="2013-04-08 10:30"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom111883">
<div class="phpcode"><code><span class="html">
As the documentation says, the comparison function needs to return an integer that is either "less than, equal to, or greater than zero". There is no requirement to restrict the value returned to -1, 0, 1.<br><br><span class="default">&lt;?php<br>usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br>&nbsp; &nbsp; if(</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">integer_property </span><span class="keyword">&gt; </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">integer_property</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; elseif(</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">integer_property </span><span class="keyword">&lt; </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">integer_property</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return -</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>});<br></span><span class="default">?&gt;<br></span><br>can be simplified to<br><br><span class="default">&lt;?php<br>usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br>&nbsp; &nbsp; return </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">integer_property </span><span class="keyword">- </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">integer_property</span><span class="keyword">;<br>});<br></span><span class="default">?&gt;<br></span><br>This of course applies to any comparison function that calculates an integer "score" for each of its arguments to decide which is "greater".</span>
</code></div>
  </div>
 </div>
  <div class="note" id="25360">  
  <a class="name">
  <strong class="user"><em>mkr at binarywerks dot dk</em></strong></a><div class="date" title="2002-09-20 09:29"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom25360">
<div class="phpcode"><code><span class="html">
If you want to sort an array according to another array acting as a priority list, you can use this function.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">listcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)
<br>{
<br>&nbsp; global </span><span class="default">$order</span><span class="keyword">;
<br>
<br>&nbsp; foreach(</span><span class="default">$order </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; if(</span><span class="default">$a</span><span class="keyword">==</span><span class="default">$value</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; if(</span><span class="default">$b</span><span class="keyword">==</span><span class="default">$value</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>}
<br>
<br></span><span class="default">$order</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"first"</span><span class="keyword">;
<br></span><span class="default">$order</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="string">"second"</span><span class="keyword">;
<br></span><span class="default">$order</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = </span><span class="string">"third"</span><span class="keyword">;
<br>
<br></span><span class="default">$array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"second"</span><span class="keyword">;
<br></span><span class="default">$array</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="string">"first"</span><span class="keyword">;
<br></span><span class="default">$array</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = </span><span class="string">"third"</span><span class="keyword">;
<br></span><span class="default">$array</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] = </span><span class="string">"fourth"</span><span class="keyword">;
<br></span><span class="default">$array</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">] = </span><span class="string">"second"</span><span class="keyword">;
<br></span><span class="default">$array</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">] = </span><span class="string">"first"</span><span class="keyword">;
<br></span><span class="default">$array</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">] = </span><span class="string">"second"</span><span class="keyword">;
<br>
<br></span><span class="default">usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">"listcmp"</span><span class="keyword">);
<br>
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="70423">  
  <a class="name">
  <strong class="user"><em>svenxy AT nospam gmx net</em></strong></a><div class="date" title="2006-10-16 01:58"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom70423">
<div class="phpcode"><code><span class="html">
This will sort subnets correctly:<br><br><span class="default">&lt;?php<br><br>$zones </span><span class="keyword">= <br>array(</span><span class="string">'192.168.11'</span><span class="keyword">,<br></span><span class="string">'192.169.12'</span><span class="keyword">,<br></span><span class="string">'192.168.13'</span><span class="keyword">,<br></span><span class="string">'192.167.14'</span><span class="keyword">,<br></span><span class="string">'192.168.15'</span><span class="keyword">,<br></span><span class="string">'122.168.16'</span><span class="keyword">,<br></span><span class="string">'192.168.17'<br></span><span class="keyword">);<br><br>function </span><span class="default">sort_subnets </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$a_arr </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$b_arr </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">);<br>&nbsp; &nbsp; foreach (</span><span class="default">range</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">) as </span><span class="default">$i</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">$a_arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] &lt; </span><span class="default">$b_arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return -</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif ( </span><span class="default">$a_arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] &gt; </span><span class="default">$b_arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return -</span><span class="default">1</span><span class="keyword">;<br>}<br><br></span><span class="default">usort</span><span class="keyword">(</span><span class="default">$zones</span><span class="keyword">, </span><span class="string">'sort_subnets'</span><span class="keyword">);<br>print </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$zones</span><span class="keyword">);<br>print </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="22849">  
  <a class="name">
  <strong class="user"><em>alex at netflex dot nl</em></strong></a><div class="date" title="2002-07-02 04:10"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom22849">
<div class="phpcode"><code><span class="html">
This function will sort on more then one values, test and have fun<br><br>&lt;pre&gt;<br><span class="default">&lt;?php<br><br>&nbsp; $array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"a"</span><span class="keyword">;<br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">3</span><span class="keyword">;<br><br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"a"</span><span class="keyword">;<br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">2</span><span class="keyword">;<br><br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"a"</span><span class="keyword">;<br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">5</span><span class="keyword">;<br><br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"b"</span><span class="keyword">;<br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">8</span><span class="keyword">;<br><br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"b"</span><span class="keyword">;<br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br><br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"b"</span><span class="keyword">;<br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">0</span><span class="keyword">;<br><br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"c"</span><span class="keyword">;<br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">5</span><span class="keyword">;<br><br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"c"</span><span class="keyword">;<br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">7</span><span class="keyword">;<br><br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">8</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"c"</span><span class="keyword">;<br>&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">8</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">3</span><span class="keyword">;<br><br>&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br><br>&nbsp; </span><span class="default">$sort_array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"name"</span><span class="keyword">;<br>&nbsp; </span><span class="default">$sort_array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'sort'</span><span class="keyword">] = </span><span class="string">"ASC"</span><span class="keyword">;<br>&nbsp; </span><span class="default">$sort_array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'case'</span><span class="keyword">] = </span><span class="default">TRUE</span><span class="keyword">;<br><br>&nbsp; </span><span class="default">$sort_array</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"id"</span><span class="keyword">;<br>&nbsp; </span><span class="default">$sort_array</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'case'</span><span class="keyword">] = </span><span class="default">FALSE</span><span class="keyword">;<br><br>&nbsp; </span><span class="default">sortx</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$sort_array</span><span class="keyword">);<br><br>&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br><br>&nbsp; function </span><span class="default">sortx</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$sort </span><span class="keyword">= array()) {<br>&nbsp; &nbsp; </span><span class="default">$function </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; while (list(</span><span class="default">$key</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$sort</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'case'</span><span class="keyword">])&amp;&amp;(</span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'case'</span><span class="keyword">] == </span><span class="default">TRUE</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$function </span><span class="keyword">.= </span><span class="string">'if (strtolower($a["' </span><span class="keyword">. </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">'"])&lt;&gt;strtolower($b["' </span><span class="keyword">. </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">'"])) { return (strtolower($a["' </span><span class="keyword">. </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">'"]) '</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$function </span><span class="keyword">.= </span><span class="string">'if ($a["' </span><span class="keyword">. </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">'"]&lt;&gt;$b["' </span><span class="keyword">. </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">'"]) { return ($a["' </span><span class="keyword">. </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">'"] '</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'sort'</span><span class="keyword">])&amp;&amp;(</span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'sort'</span><span class="keyword">] == </span><span class="string">"DESC"</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$function </span><span class="keyword">.= </span><span class="string">'&lt;'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$function </span><span class="keyword">.= </span><span class="string">'&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'case'</span><span class="keyword">])&amp;&amp;(</span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'case'</span><span class="keyword">] == </span><span class="default">TRUE</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$function </span><span class="keyword">.= </span><span class="string">' strtolower($b["' </span><span class="keyword">. </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">'"])) ? 1 : -1; } else'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$function </span><span class="keyword">.= </span><span class="string">' $b["' </span><span class="keyword">. </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">'"]) ? 1 : -1; } else'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$function </span><span class="keyword">.= </span><span class="string">' { return 0; }'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a, $b'</span><span class="keyword">, </span><span class="default">$function</span><span class="keyword">));<br>&nbsp; }<br><br></span><span class="default">?&gt;<br></span>&lt;/pre&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="12047">  
  <a class="name">
  <strong class="user"><em>bo at erichsen dot com</em></strong></a><div class="date" title="2001-03-20 05:16"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom12047">
<div class="phpcode"><code><span class="html">
when using usort to refer to a function inside a class i have succesfully used:
<br>
<br><span class="default">&lt;?php usort</span><span class="keyword">(</span><span class="default">$myarray</span><span class="keyword">,array(</span><span class="default">$this</span><span class="keyword">,</span><span class="string">"cmp"</span><span class="keyword">)); </span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="117659">  
  <a class="name">
  <strong class="user"><em>me at evertpot dot com</em></strong></a><div class="date" title="2015-07-16 11:13"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom117659">
<div class="phpcode"><code><span class="html">
I see many people here (including the official examples) write their callbacks rather clumsily like this:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br>&nbsp; if (</span><span class="default">$a </span><span class="keyword">=== </span><span class="default">$b</span><span class="keyword">) {<br>&nbsp; &nbsp; return </span><span class="default">0</span><span class="keyword">;<br>&nbsp; } elseif (</span><span class="default">$a </span><span class="keyword">&lt; </span><span class="default">$b</span><span class="keyword">) {<br>&nbsp; &nbsp; return -</span><span class="default">1</span><span class="keyword">;&nbsp; <br>&nbsp; } else {<br>&nbsp; &nbsp; return </span><span class="default">1</span><span class="keyword">;<br>&nbsp; }<br>}<br></span><span class="default">?&gt;<br></span><br>Or if they are a bit more clever:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br><br>&nbsp; if (</span><span class="default">$a </span><span class="keyword">=== </span><span class="default">$b</span><span class="keyword">) {<br>&nbsp; &nbsp; return </span><span class="default">0</span><span class="keyword">;<br>&nbsp; } else {<br>&nbsp; &nbsp; return </span><span class="default">$a </span><span class="keyword">&lt; </span><span class="default">$b </span><span class="keyword">? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">;<br>&nbsp; }<br>}<br></span><span class="default">?&gt;<br></span><br>But this can by simplified further to:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br>&nbsp; return </span><span class="default">$a </span><span class="keyword">- </span><span class="default">$b</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109329">  
  <a class="name">
  <strong class="user"><em>Jian Wu</em></strong></a><div class="date" title="2012-07-06 09:16"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom109329">
<div class="phpcode"><code><span class="html">
The usort function actually moves $b up when the callback function returns both 0 and 1.&nbsp; If you want to preserve the original order in the array, return 1 when $a == $b instead of 0.&nbsp; Try this code below to see how usort alters the order of the original array when all values are the same.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">class </span><span class="default">TestObj </span><span class="keyword">{
<br>&nbsp; &nbsp; private </span><span class="default">$name</span><span class="keyword">;
<br>&nbsp; &nbsp; private </span><span class="default">$id</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; function </span><span class="default">TestObj</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$id</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="default">$name</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">= </span><span class="default">$id</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; static function </span><span class="default">cmp_obj</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$al </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bl </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$al </span><span class="keyword">== </span><span class="default">$bl</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">0</span><span class="keyword">; </span><span class="comment">// return 1 if you don't want $b to go in front of $a
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}
<br>&nbsp; &nbsp; &nbsp; &nbsp; return (</span><span class="default">$al </span><span class="keyword">&gt; </span><span class="default">$bl</span><span class="keyword">) ? +</span><span class="default">1 </span><span class="keyword">: -</span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>}
<br>
<br></span><span class="default">$a</span><span class="keyword">[] = new </span><span class="default">TestObj</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br></span><span class="default">$a</span><span class="keyword">[] = new </span><span class="default">TestObj</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);
<br></span><span class="default">$a</span><span class="keyword">[] = new </span><span class="default">TestObj</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);
<br>
<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);
<br></span><span class="default">usort</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, array(</span><span class="string">"TestObj"</span><span class="keyword">, </span><span class="string">"cmp_obj"</span><span class="keyword">));
<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83989">  
  <a class="name">
  <strong class="user"><em>drorasta</em></strong></a><div class="date" title="2008-06-22 10:16"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom83989">
<div class="phpcode"><code><span class="html">
Here's how you can usort() a multidimensional array (like in example #2 above) within a class:
<br>
<br><span class="default">&lt;?php usort</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">, array(</span><span class="string">"className"</span><span class="keyword">, </span><span class="string">"cmp"</span><span class="keyword">)); </span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="60777">  
  <a class="name">
  <strong class="user"><em>sydney at totoche dot org</em></strong></a><div class="date" title="2006-01-16 01:44"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom60777">
<div class="phpcode"><code><span class="html">
Instead of doing&nbsp; :
<br>
<br><span class="default">&lt;?php $strc </span><span class="keyword">= </span><span class="default">strcmp</span><span class="keyword">( </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$f</span><span class="keyword">]), </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$f</span><span class="keyword">]) ); </span><span class="default">?&gt;
<br></span>
<br>you could do this : 
<br>
<br><span class="default">&lt;?php $strc </span><span class="keyword">= </span><span class="default">strcasecmp</span><span class="keyword">( </span><span class="default">$a</span><span class="keyword">[</span><span class="default">$f</span><span class="keyword">], </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$f</span><span class="keyword">] ); </span><span class="default">?&gt;
<br></span>
<br>which is more efficient and is does case insensitive comparison according to the current locale.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="14104">  
  <a class="name">
  <strong class="user"><em>franky at iname dot com</em></strong></a><div class="date" title="2001-07-17 03:08"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom14104">
<div class="phpcode"><code><span class="html">
For sort multi-array by specific index
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">cmp </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)
<br>{&nbsp;&nbsp; 
<br> global </span><span class="default">$w_o</span><span class="keyword">;
<br> if (</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$w_o</span><span class="keyword">] == </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$w_o</span><span class="keyword">]) return </span><span class="default">0</span><span class="keyword">;
<br> return (</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$w_o</span><span class="keyword">] &lt; </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$w_o</span><span class="keyword">]) ? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">;
<br>}
<br></span><span class="comment"># the index is the second element of 
<br># each row
<br>
<br></span><span class="default">$w_o </span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;
<br></span><span class="default">usort</span><span class="keyword">(</span><span class="default">$my_arry_info</span><span class="keyword">,</span><span class="string">"cmp"</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="8587">  
  <a class="name">
  <strong class="user"><em>derek at luddite dot net</em></strong></a><div class="date" title="2000-09-18 11:35"><strong>20 years ago</strong></div>
  <div class="text" id="Hcom8587">
<div class="phpcode"><code><span class="html">
Needed a date sort and I didn't know if one was available so I wrote one. Maybe it'll help someone:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">DateSort</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">,</span><span class="default">$d</span><span class="keyword">=</span><span class="string">"-"</span><span class="keyword">) {
<br>&nbsp; &nbsp; if (</span><span class="default">$a </span><span class="keyword">== </span><span class="default">$b</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; } else {&nbsp; </span><span class="comment">//Convert into dates and compare
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">list(</span><span class="default">$am</span><span class="keyword">,</span><span class="default">$ad</span><span class="keyword">,</span><span class="default">$ay</span><span class="keyword">)=</span><span class="default">split</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; list(</span><span class="default">$bm</span><span class="keyword">,</span><span class="default">$bd</span><span class="keyword">,</span><span class="default">$by</span><span class="keyword">)=</span><span class="default">split</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$am</span><span class="keyword">,</span><span class="default">$ad</span><span class="keyword">,</span><span class="default">$ay</span><span class="keyword">) &lt; </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$bm</span><span class="keyword">,</span><span class="default">$bd</span><span class="keyword">,</span><span class="default">$by</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return -</span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>$d is the delimeter</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87884">  
  <a class="name">
  <strong class="user"><em>jalil at measat dot org</em></strong></a><div class="date" title="2008-12-28 05:37"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom87884">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php
<br></span><span class="comment">/*---------------------------------------------------------
<br>* my own home made easy object sort, which
<br>* i cannot find anywhere on the net
<br>* at all, tut. i can find only complicated ones,
<br>* which brings me a headache.
<br>*
<br>* You can enhance it to return all sorts of error
<br>* conditions if you wish,
<br>* i need nothing but a false return upon failure to sort,
<br>* so that is the only error i have here
<br>*
<br>* Example usage:
<br>*
<br>* INPUT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; -&nbsp; &nbsp; &nbsp;&nbsp; $objects_array
<br>// an array of objects for sorting
<br>
<br>* PARAMETERS&nbsp; &nbsp; -&nbsp; &nbsp; &nbsp;&nbsp; property
<br>// the property of the object to be sorted
<br>
<br>* OUTPUT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&nbsp; &nbsp; &nbsp;&nbsp; $engine
<br>// an engine object created by new,
<br>// with your arrays of objects sorted according to your
<br>// selected property
<br>//( the sorting is done upon sort object creation )
<br>*
<br>* Code Examples
<br>*
<br>* $engine = new objSorter($objects_array);
<br>// sorts on FIRST property -&nbsp; default
<br>
<br>* $engine = new objSorter($objects_array,'property');
<br>// sort on ANY specific property
<br>*--------------------------------------------------------*/
<br>
<br></span><span class="keyword">class </span><span class="default">objSorter 
<br></span><span class="keyword">{
<br>var </span><span class="default">$property</span><span class="keyword">;
<br>var </span><span class="default">$sorted</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; function </span><span class="default">ObjSorter</span><span class="keyword">(</span><span class="default">$objects_array</span><span class="keyword">,</span><span class="default">$property</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">) 
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$sample&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">$objects_array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$vars&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$sample</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$property</span><span class="keyword">))
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$sample</span><span class="keyword">-&gt;</span><span class="default">$property</span><span class="keyword">)) 
<br></span><span class="comment">// make sure requested property is correct for the object
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">{&nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">property </span><span class="keyword">= </span><span class="default">$property</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$objects_array</span><span class="keyword">, array(</span><span class="default">$this</span><span class="keyword">,</span><span class="string">'_compare'</span><span class="keyword">));
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sorted&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;&nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; else
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; list(</span><span class="default">$property</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">)&nbsp; &nbsp;&nbsp; = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$sample</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">property&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$property</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$objects_array</span><span class="keyword">, array(</span><span class="default">$this</span><span class="keyword">,</span><span class="string">'_compare'</span><span class="keyword">));
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sorted&nbsp; &nbsp; </span><span class="keyword">= (</span><span class="default">$objects_array</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; function </span><span class="default">_compare</span><span class="keyword">(</span><span class="default">$apple</span><span class="keyword">, </span><span class="default">$orange</span><span class="keyword">) 
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$property&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">property</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$apple</span><span class="keyword">-&gt;</span><span class="default">$property </span><span class="keyword">== </span><span class="default">$orange</span><span class="keyword">-&gt;</span><span class="default">$property</span><span class="keyword">) return </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; return (</span><span class="default">$apple</span><span class="keyword">-&gt;</span><span class="default">$property </span><span class="keyword">&lt; </span><span class="default">$orange</span><span class="keyword">-&gt;</span><span class="default">$property</span><span class="keyword">) ? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>} </span><span class="comment">// end class
<br></span><span class="default">?&gt;
<br></span>
<br>USAGE EXAMPLE
<br>DUMP ORIGINAL
<br>user Object ( [name] =&gt; Yunihe Jopoba [age] =&gt; 27 [richness] =&gt; Ã¢â€šÂ¬ 899,970 )
<br>user Object ( [name] =&gt; Janirevi Fakejorumoa [age] =&gt; 19 [richness] =&gt; Ã¢â€šÂ¬ 219,078 )
<br>user Object ( [name] =&gt; Korejowi Mezede [age] =&gt; 95 [richness] =&gt; Ã¢â€šÂ¬ 3,272 )
<br>user Object ( [name] =&gt; Nugoaivu Jongyi [age] =&gt; 84 [richness] =&gt; Ã¢â€šÂ¬ 94,853 )
<br>user Object ( [name] =&gt; Cepomase Buaesukoyua [age] =&gt; 32 [richness] =&gt; Ã¢â€šÂ¬ 677,180 )
<br>user Object ( [name] =&gt; Vejosehona Auva [age] =&gt; 20 [richness] =&gt; Ã¢â€šÂ¬ 144,540 )
<br>user Object ( [name] =&gt; Fewame Wojuvuzo [age] =&gt; 69 [richness] =&gt; Ã¢â€šÂ¬ 198,231 )
<br>user Object ( [name] =&gt; Risuku Zagedobu [age] =&gt; 48 [richness] =&gt; Ã¢â€šÂ¬ 763,860 )
<br>user Object ( [name] =&gt; Fazurada Aayu [age] =&gt; 16 [richness] =&gt; Ã¢â€šÂ¬ 302,352 )
<br>
<br>SORTED by age
<br>
<br><span class="default">&lt;?php
<br>$objects&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">= new </span><span class="default">ObjSorter</span><span class="keyword">(</span><span class="default">$objects_array</span><span class="keyword">,</span><span class="string">'age'</span><span class="keyword">);
<br>if (</span><span class="default">$objects</span><span class="keyword">-&gt;</span><span class="default">sorted</span><span class="keyword">)
<br>{
<br></span><span class="default">$objects_array&nbsp; </span><span class="keyword">= </span><span class="default">$objects</span><span class="keyword">-&gt;</span><span class="default">sorted</span><span class="keyword">;
<br>foreach (</span><span class="default">$objects_array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$object</span><span class="keyword">) { </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">); echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">; }
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>user Object ( [name] =&gt; Fazurada Aayu [age] =&gt; 16 [richness] =&gt; Ã¢â€šÂ¬ 302,352 )
<br>user Object ( [name] =&gt; Janirevi Fakejorumoa [age] =&gt; 19 [richness] =&gt; Ã¢â€šÂ¬ 219,078 )
<br>user Object ( [name] =&gt; Vejosehona Auva [age] =&gt; 20 [richness] =&gt; Ã¢â€šÂ¬ 144,540 )
<br>user Object ( [name] =&gt; Yunihe Jopoba [age] =&gt; 27 [richness] =&gt; Ã¢â€šÂ¬ 899,970 )
<br>user Object ( [name] =&gt; Cepomase Buaesukoyua [age] =&gt; 32 [richness] =&gt; Ã¢â€šÂ¬ 677,180 )
<br>user Object ( [name] =&gt; Risuku Zagedobu [age] =&gt; 48 [richness] =&gt; Ã¢â€šÂ¬ 763,860 )
<br>user Object ( [name] =&gt; Fewame Wojuvuzo [age] =&gt; 69 [richness] =&gt; Ã¢â€šÂ¬ 198,231 )
<br>user Object ( [name] =&gt; Nugoaivu Jongyi [age] =&gt; 84 [richness] =&gt; Ã¢â€šÂ¬ 94,853 )
<br>user Object ( [name] =&gt; Korejowi Mezede [age] =&gt; 95 [richness] =&gt; Ã¢â€šÂ¬ 3,272 )
<br>
<br>SORTED by richness
<br>
<br><span class="default">&lt;?php
<br>$objects&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">= new </span><span class="default">ObjSorter</span><span class="keyword">(</span><span class="default">$objects_array</span><span class="keyword">,</span><span class="string">'richness'</span><span class="keyword">);
<br>if (</span><span class="default">$objects</span><span class="keyword">-&gt;</span><span class="default">sorted</span><span class="keyword">)
<br>{
<br></span><span class="default">$objects_array&nbsp; </span><span class="keyword">= </span><span class="default">$objects</span><span class="keyword">-&gt;</span><span class="default">sorted</span><span class="keyword">;
<br>foreach (</span><span class="default">$objects_array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$object</span><span class="keyword">) { </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">); echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">; }
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>user Object ( [name] =&gt; Vejosehona Auva [age] =&gt; 20 [richness] =&gt; Ã¢â€šÂ¬ 144,540 )
<br>user Object ( [name] =&gt; Fewame Wojuvuzo [age] =&gt; 69 [richness] =&gt; Ã¢â€šÂ¬ 198,231 )
<br>user Object ( [name] =&gt; Janirevi Fakejorumoa [age] =&gt; 19 [richness] =&gt; Ã¢â€šÂ¬ 219,078 )
<br>user Object ( [name] =&gt; Korejowi Mezede [age] =&gt; 95 [richness] =&gt; Ã¢â€šÂ¬ 3,272 )
<br>user Object ( [name] =&gt; Fazurada Aayu [age] =&gt; 16 [richness] =&gt; Ã¢â€šÂ¬ 302,352 )
<br>user Object ( [name] =&gt; Cepomase Buaesukoyua [age] =&gt; 32 [richness] =&gt; Ã¢â€šÂ¬ 677,180 )
<br>user Object ( [name] =&gt; Risuku Zagedobu [age] =&gt; 48 [richness] =&gt; Ã¢â€šÂ¬ 763,860 )
<br>user Object ( [name] =&gt; Yunihe Jopoba [age] =&gt; 27 [richness] =&gt; Ã¢â€šÂ¬ 899,970 )
<br>user Object ( [name] =&gt; Nugoaivu Jongyi [age] =&gt; 84 [richness] =&gt; Ã¢â€šÂ¬ 94,853 )
<br>
<br>Simulated wrong property request ( dumb property )
<br>
<br><span class="default">&lt;?php
<br>$objects&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">= new </span><span class="default">ObjSorter</span><span class="keyword">(</span><span class="default">$objects_array</span><span class="keyword">,</span><span class="string">'dumb property'</span><span class="keyword">);
<br>if (</span><span class="default">$objects</span><span class="keyword">-&gt;</span><span class="default">sorted</span><span class="keyword">)
<br>{
<br></span><span class="default">$objects_array&nbsp; </span><span class="keyword">= </span><span class="default">$objects</span><span class="keyword">-&gt;</span><span class="default">sorted</span><span class="keyword">;
<br>foreach (</span><span class="default">$objects_array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$object</span><span class="keyword">) { </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">); echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">; }
<br>}
<br>else echo </span><span class="string">'DUMB ERROR'</span><span class="keyword">;
<br></span><span class="default">?&gt;
<br></span>
<br>DUMB ERROR</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106761">  
  <a class="name">
  <strong class="user"><em>admin at gosenz dot com</em></strong></a><div class="date" title="2011-12-04 08:58"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom106761">
<div class="phpcode"><code><span class="html">
sort multi-dimentional arrays in class with usort<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">ArraySort<br></span><span class="keyword">{<br>&nbsp; &nbsp; private </span><span class="default">$arr </span><span class="keyword">= array();<br><br>&nbsp; &nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">arr </span><span class="keyword">= </span><span class="default">$arr</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; public function </span><span class="default">doSort</span><span class="keyword">()<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cmp </span><span class="keyword">= function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Do Some Comparation<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">arr</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">arr</span><span class="keyword">, </span><span class="default">$cmp</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">arr</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104873">  
  <a class="name">
  <strong class="user"><em>Lea Hayes</em></strong></a><div class="date" title="2011-07-12 05:55"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom104873">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php
<br></span><span class="comment">/**
<br> * Sort array of objects by field.
<br> *
<br> * @param array $objects Array of objects to sort.
<br> * @param string $on Name of field.
<br> * @param string $order (ASC|DESC)
<br> */
<br></span><span class="keyword">function </span><span class="default">sort_on_field</span><span class="keyword">(&amp;</span><span class="default">$objects</span><span class="keyword">, </span><span class="default">$on</span><span class="keyword">, </span><span class="default">$order </span><span class="keyword">= </span><span class="string">'ASC'</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$comparer </span><span class="keyword">= (</span><span class="default">$order </span><span class="keyword">=== </span><span class="string">'DESC'</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; ? </span><span class="string">"return -strcmp(\$a-&gt;</span><span class="keyword">{</span><span class="default">$on</span><span class="keyword">}</span><span class="string">,\$b-&gt;</span><span class="keyword">{</span><span class="default">$on</span><span class="keyword">}</span><span class="string">);"
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">: </span><span class="string">"return strcmp(\$a-&gt;</span><span class="keyword">{</span><span class="default">$on</span><span class="keyword">}</span><span class="string">,\$b-&gt;</span><span class="keyword">{</span><span class="default">$on</span><span class="keyword">}</span><span class="string">);"</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$objects</span><span class="keyword">, </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$b'</span><span class="keyword">, </span><span class="default">$comparer</span><span class="keyword">));
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104649">  
  <a class="name">
  <strong class="user"><em>bcsj</em></strong></a><div class="date" title="2011-06-28 11:12"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom104649">
<div class="phpcode"><code><span class="html">
Sorting a multidimensional array by a subkey seem to be one of the bigger challenges when using usort. At least if one want the key to be dynamic. For anyone interested this code seemed to work rather well for me:<br><br><span class="default">&lt;?php<br><br>usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,array(new </span><span class="default">cmp</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">), </span><span class="string">"cmp__"</span><span class="keyword">));<br><br>class </span><span class="default">cmp </span><span class="keyword">{<br>&nbsp; &nbsp; var </span><span class="default">$key</span><span class="keyword">;<br>&nbsp; &nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key </span><span class="keyword">= </span><span class="default">$key</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; function </span><span class="default">cmp__</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] == </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) return </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; return ((</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] &gt; </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) ? </span><span class="default">1 </span><span class="keyword">: -</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107372">  
  <a class="name">
  <strong class="user"><em>andi_mclean at ntlworld dot com</em></strong></a><div class="date" title="2012-02-04 03:58"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom107372">
<div class="phpcode"><code><span class="html">
I needed a sort method that would sort strings but take note of any numbers and would compare them as number. I also want to ignore any non alphanumerical characters.<br><br>Eg.<br>Slot 1 Example<br>Slot 10 Example<br>Slot 2 Example<br><br>Should infact be<br>Slot 1 Example<br>Slot 2 Example<br>Slot 10 Example<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">sort_with_numbers</span><span class="keyword">(</span><span class="default">$a </span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$size </span><span class="keyword">= </span><span class="default">min</span><span class="keyword">(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">), </span><span class="default">count</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">));<br>&nbsp; &nbsp; for(</span><span class="default">$index </span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$index </span><span class="keyword">&lt; </span><span class="default">$size</span><span class="keyword">; ++</span><span class="default">$index</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$a1 </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"[^A-Za-z0-9]"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$b1 </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"[^A-Za-z0-9]"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$equal </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">) &amp;&amp; </span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$b1</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$equal </span><span class="keyword">= </span><span class="default">$a1 </span><span class="keyword">- </span><span class="default">$b1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$equal </span><span class="keyword">= </span><span class="default">strcasecmp</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">,</span><span class="default">$b1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$equal </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return -</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$equal </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">count</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) - </span><span class="default">count</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);&nbsp; &nbsp; <br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="23305">  
  <a class="name">
  <strong class="user"><em>prozac at iguanasoft dot com</em></strong></a><div class="date" title="2002-07-15 05:55"><strong>19 years ago</strong></div>
  <div class="text" id="Hcom23305">
<div class="phpcode"><code><span class="html">
Here is a simple example of converting a timestamp date("U") into a date. This sorts by that day and then by string value alphabetically.
<br>
<br>I hope it saves someone some time... Happy PHP'in!
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">//data to sort
<br></span><span class="default">$shared</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">"page_id"</span><span class="keyword">] = </span><span class="string">"2025731470"</span><span class="keyword">;
<br></span><span class="default">$shared</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">"page_id"</span><span class="keyword">] = </span><span class="string">"2025731450"</span><span class="keyword">;
<br></span><span class="default">$shared</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">"page_id"</span><span class="keyword">] = </span><span class="string">"1025731456"</span><span class="keyword">;
<br></span><span class="default">$shared</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="string">"page_id"</span><span class="keyword">] = </span><span class="string">"1025731460"</span><span class="keyword">;
<br></span><span class="default">$shared</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">"username"</span><span class="keyword">] = </span><span class="string">"larry"</span><span class="keyword">;
<br></span><span class="default">$shared</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">"username"</span><span class="keyword">] = </span><span class="string">"alvin"</span><span class="keyword">;
<br></span><span class="default">$shared</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">"username"</span><span class="keyword">] = </span><span class="string">"garth"</span><span class="keyword">;
<br></span><span class="default">$shared</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="string">"username"</span><span class="keyword">] = </span><span class="string">"harvy"</span><span class="keyword">;
<br>
<br></span><span class="comment">//function to convert timestamp to date
<br></span><span class="keyword">function </span><span class="default">convert_timestamp</span><span class="keyword">(</span><span class="default">$timestamp</span><span class="keyword">){
<br>&nbsp; &nbsp; </span><span class="default">$limit</span><span class="keyword">=</span><span class="default">date</span><span class="keyword">(</span><span class="string">"U"</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$limiting</span><span class="keyword">=</span><span class="default">$timestamp</span><span class="keyword">-</span><span class="default">$limit</span><span class="keyword">;
<br>&nbsp; &nbsp; return </span><span class="default">date </span><span class="keyword">(</span><span class="string">"Ymd"</span><span class="keyword">, </span><span class="default">mktime </span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$limiting</span><span class="keyword">));
<br>}
<br></span><span class="comment">//comparison function
<br></span><span class="keyword">function </span><span class="default">cmp </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$l</span><span class="keyword">=</span><span class="default">convert_timestamp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="string">"page_id"</span><span class="keyword">]);
<br>&nbsp; &nbsp; </span><span class="default">$k</span><span class="keyword">=</span><span class="default">convert_timestamp</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="string">"page_id"</span><span class="keyword">]);
<br>&nbsp; &nbsp; if(</span><span class="default">$k</span><span class="keyword">==</span><span class="default">$l</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="string">"username"</span><span class="keyword">], </span><span class="default">$b</span><span class="keyword">[</span><span class="string">"username"</span><span class="keyword">]);
<br>&nbsp; &nbsp; }else{
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">, </span><span class="default">$l</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>}
<br>
<br></span><span class="comment">//sort array
<br></span><span class="default">usort</span><span class="keyword">(</span><span class="default">$shared</span><span class="keyword">, </span><span class="string">"cmp"</span><span class="keyword">);
<br>
<br></span><span class="comment">//display sorted info
<br></span><span class="keyword">while (list (</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">each </span><span class="keyword">(</span><span class="default">$shared</span><span class="keyword">)) {
<br>&nbsp; &nbsp; echo </span><span class="string">"\$shared[</span><span class="default">$key</span><span class="string">]: "</span><span class="keyword">;
<br>&nbsp; &nbsp; echo </span><span class="default">$value</span><span class="keyword">[</span><span class="string">"page_id"</span><span class="keyword">];
<br>&nbsp; &nbsp; echo </span><span class="string">" username: "</span><span class="keyword">;
<br>&nbsp; &nbsp; echo </span><span class="default">$value</span><span class="keyword">[</span><span class="string">"username"</span><span class="keyword">];
<br>&nbsp; &nbsp; echo </span><span class="string">"&lt;break_tag&gt;"</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>This will output:
<br>$shared[0]: 2025731450&nbsp;&nbsp; username: alvin
<br>$shared[1]: 2025731470&nbsp;&nbsp; username: larry
<br>$shared[2]: 1025731456&nbsp;&nbsp; username: garth
<br>$shared[3]: 1025731460&nbsp;&nbsp; username: harvy</span>
</code></div>
  </div>
 </div>
  <div class="note" id="123923">  
  <a class="name">
  <strong class="user"><em>gus dot antoniassi at gmail dot com</em></strong></a><div class="date" title="2019-06-10 01:23"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom123923">
<div class="phpcode"><code><span class="html">
This is a simple way to sort based on a "priority list":<br><br><span class="default">&lt;?php<br><br>$order </span><span class="keyword">= [</span><span class="default">1</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">];<br></span><span class="default">$arr </span><span class="keyword">=&nbsp;&nbsp; [<br>&nbsp; &nbsp; [ </span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">0 </span><span class="keyword">],<br>&nbsp; &nbsp; [ </span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">1 </span><span class="keyword">],<br>&nbsp; &nbsp; [ </span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">2 </span><span class="keyword">],<br>&nbsp; &nbsp; [ </span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">3 </span><span class="keyword">],<br>];<br><br></span><span class="default">uasort</span><span class="keyword">(<br>&nbsp; &nbsp; </span><span class="default">$arr</span><span class="keyword">, <br>&nbsp; &nbsp; function (</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) use (</span><span class="default">$order</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">], </span><span class="default">$order</span><span class="keyword">) &lt;=&gt; </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">], </span><span class="default">$order</span><span class="keyword">); <br>&nbsp; &nbsp; }<br>);<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>This will return:<br><br>Array<br>(<br>&nbsp; &nbsp; [1] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [id] =&gt; 1<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [3] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [id] =&gt; 3<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [0] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [id] =&gt; 0<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [2] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [id] =&gt; 2<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>)<br><br>Note that if you have a value in $arr that is not on the $order list, you will need additional checks since the array_search function returns FALSE for undefined indexes.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="120470">  
  <a class="name">
  <strong class="user"><em>inigo dot grimbergen at gmail dot com</em></strong></a><div class="date" title="2017-01-14 06:51"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom120470">
<div class="phpcode"><code><span class="html">
to sort with numeric and empty values&nbsp; and have the smallest on top:<br><span class="default">&lt;?php<br>&nbsp; &nbsp; usort</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">$a </span><span class="keyword">== </span><span class="default">null </span><span class="keyword">&amp;&amp; </span><span class="default">$b </span><span class="keyword">!= </span><span class="default">null </span><span class="keyword">) return </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">$a </span><span class="keyword">!= </span><span class="default">null </span><span class="keyword">&amp;&amp; </span><span class="default">$b </span><span class="keyword">== </span><span class="default">null </span><span class="keyword">) return -</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$a </span><span class="keyword">&gt; </span><span class="default">$b </span><span class="keyword">? </span><span class="default">1 </span><span class="keyword">: -</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; });<br></span><span class="default">?&gt;<br></span>returns<br>1<br>2<br>3<br>null<br>null<br>null</span>
</code></div>
  </div>
 </div>
  <div class="note" id="126198">  
  <a class="name">
  <strong class="user"><em>jab_creations at yahoo dot com</em></strong></a><div class="date" title="2021-06-25 03:01"><strong>2 months ago</strong></div>
  <div class="text" id="Hcom126198">
<div class="phpcode"><code><span class="html">
The usort function should not be used for associative arrays where the base keys need to retain their names, otherwise this:<br><br>$a = array('example' =&gt; 'hello');<br><br>Will be converted to:<br><br>$a = array(0 =&gt; 'hello');<br><br>To retain key names in associative arrays you can simply replace usort with uasort; for me it was a drop-in replacement without having to change anything else.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="123532">  
  <a class="name">
  <strong class="user"><em>chris at candm dot org dot uk</em></strong></a><div class="date" title="2019-01-19 01:15"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom123532">
<div class="phpcode"><code><span class="html">
In case anyone is interested, comparative timings over 100000000 runs<br>Based on comparing integers (500 and 501)<br>Spaceship:4<br>()?: operator:10<br>Subtraction:2<br><br>Based on comparing floats (500.1 and 501.3) (caveats noted)<br>Spaceship:5<br>()?: operator:9<br>Subtraction:3<br><br>Based on comparing strings ("five" and "four")<br>Spaceship:7<br>()?: operator:17<br>(Subtraction obviously not available)<br><br>Note: a dummy run was done with an empty loop and the elapsed time for this was subtracted from each of the above times so that they reflect ONLY the time to do the comparisons. As for significance. unless you are doing very large numbers of comparisons where spaceships are the order of the day, the difference is insignificant.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="54957">  
  <a class="name">
  <strong class="user"><em>Jeremy Swinborne</em></strong></a><div class="date" title="2005-07-20 01:56"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom54957">
<div class="phpcode"><code><span class="html">
When I query a DB I usually put my record set inside of a multi-dimentional array.&nbsp; I finally wrote a program that will allow you to sort your record set by column after you put it in an array.
<br>
<br><span class="default">&lt;?php
<br>$test </span><span class="keyword">= array();
<br></span><span class="default">$test</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">'jeremy'</span><span class="keyword">;
<br></span><span class="default">$test</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'email'</span><span class="keyword">] = </span><span class="string">'lala@example.com'</span><span class="keyword">;
<br></span><span class="default">$test</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'phone'</span><span class="keyword">] = </span><span class="string">'123-123-1234'</span><span class="keyword">;
<br></span><span class="default">$test</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'trick'</span><span class="keyword">] = </span><span class="string">'mezopia'</span><span class="keyword">;
<br>
<br></span><span class="default">$test</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">'Amanda'</span><span class="keyword">;
<br></span><span class="default">$test</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'email'</span><span class="keyword">] = </span><span class="string">'hot@example.com'</span><span class="keyword">;
<br></span><span class="default">$test</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'phone'</span><span class="keyword">] = </span><span class="string">'123-123-1235'</span><span class="keyword">;
<br></span><span class="default">$test</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'trick'</span><span class="keyword">] = </span><span class="string">'youarecool'</span><span class="keyword">;
<br>
<br></span><span class="default">$test</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">'john'</span><span class="keyword">;
<br></span><span class="default">$test</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'email'</span><span class="keyword">] = </span><span class="string">'wowee@example.com'</span><span class="keyword">;
<br></span><span class="default">$test</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'phone'</span><span class="keyword">] = </span><span class="string">'123-123-3333'</span><span class="keyword">;
<br></span><span class="default">$test</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'trick'</span><span class="keyword">] = </span><span class="string">'goneinanhour'</span><span class="keyword">;
<br>
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">columnSort</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">));
<br>
<br>function </span><span class="default">columnSort</span><span class="keyword">(</span><span class="default">$unsorted</span><span class="keyword">, </span><span class="default">$column</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$sorted </span><span class="keyword">= </span><span class="default">$unsorted</span><span class="keyword">;
<br>&nbsp; &nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$sorted</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br>&nbsp; &nbsp; &nbsp; for (</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$sorted</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++)
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$sorted</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">][</span><span class="default">$column</span><span class="keyword">] &gt; </span><span class="default">$sorted</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">][</span><span class="default">$column</span><span class="keyword">]) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">$sorted</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$sorted</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$sorted</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$sorted</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">] = </span><span class="default">$tmp</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">$sorted</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="30766">  
  <a class="name">
  <strong class="user"><em>skrebbel at operamail dot com</em></strong></a><div class="date" title="2003-03-27 01:59"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom30766">
<div class="phpcode"><code><span class="html">
here's another recursive multisort, however a clean and fast one that is class-based (but works as well outside classes) and does not uglify your global namespace at all. note that strnatcmp is used, but one could use something else of course.
<br>
<br>btw, for arrays in which the rows/columns are 'swapped', use array_multisort().
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">class </span><span class="default">Banana </span><span class="keyword">{
<br>&nbsp; &nbsp; var </span><span class="default">$aData</span><span class="keyword">;</span><span class="comment">//the array we want to sort.
<br>&nbsp; &nbsp; </span><span class="keyword">var </span><span class="default">$aSortkeys</span><span class="keyword">;</span><span class="comment">//the order in which we want the array to be sorted.
<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">_sortcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">strnatcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">aSortkeys</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]],</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">aSortkeys</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$r</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">aSortkeys</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) </span><span class="default">$r </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_sortcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$r</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; function </span><span class="default">sort</span><span class="keyword">() {
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">aSortkeys</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">aData</span><span class="keyword">,array(</span><span class="default">$this</span><span class="keyword">,</span><span class="string">"_sortcmp"</span><span class="keyword">));
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">$B </span><span class="keyword">= new </span><span class="default">Banana</span><span class="keyword">;
<br></span><span class="default">$B</span><span class="keyword">-&gt;</span><span class="default">aData </span><span class="keyword">= array(
<br>&nbsp; &nbsp; array(</span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"hank"</span><span class="keyword">, </span><span class="string">"headsize" </span><span class="keyword">=&gt; </span><span class="string">"big"</span><span class="keyword">, </span><span class="string">"age" </span><span class="keyword">=&gt; </span><span class="default">32</span><span class="keyword">),
<br>&nbsp; &nbsp; array(</span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"frank"</span><span class="keyword">, </span><span class="string">"headsize" </span><span class="keyword">=&gt; </span><span class="string">"huge"</span><span class="keyword">, </span><span class="string">"age" </span><span class="keyword">=&gt; </span><span class="default">36</span><span class="keyword">)
<br>);
<br></span><span class="default">$B</span><span class="keyword">-&gt;</span><span class="default">aSortkeys </span><span class="keyword">= array(</span><span class="string">"age"</span><span class="keyword">,</span><span class="string">"name"</span><span class="keyword">);
<br></span><span class="default">$B</span><span class="keyword">-&gt;</span><span class="default">sort</span><span class="keyword">();
<br>
<br></span><span class="default">?&gt;
<br></span>sorry for the ugly indenting, but i couldn't get it any better in this note adder thing.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->

  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from www.php.net/manual/en/function.usort.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:47:55 GMT -->

</body></html>