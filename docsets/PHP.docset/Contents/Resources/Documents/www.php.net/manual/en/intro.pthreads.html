<html><!-- Mirrored from www.php.net/manual/en/intro.pthreads.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 05:25:41 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Introduction</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="intro.pthreads.html">
 <link rel="shorturl" href="intro.pthreads.html">
 <link rel="alternate" href="intro.pthreads.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="book.pthreads.html">
 <link rel="prev" href="book.pthreads.html">
 <link rel="next" href="pthreads.setup.html">

 <link rel="alternate" href="intro.pthreads.html" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/intro.pthreads.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/intro.pthreads.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/intro.pthreads.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/intro.pthreads.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/intro.pthreads.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/ro/intro.pthreads.php" hreflang="ro">
 <link rel="alternate" href="https://www.php.net/manual/ru/intro.pthreads.php" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/intro.pthreads.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/intro.pthreads.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0aba.css?t=1539771603&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2ecf.css?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedba57.css?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached3afa.css?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>


</head>
<body class="docs " style="">


<div class="headsup"><a href="https://www.php.net/conferences/index.php#id2021-09-08-1">Longhorn PHP 2021</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.attributes.html">Attributes</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.fileprocess.process.html">Process Control Extensions</a></li>      <li><a href="book.pthreads.html">pthreads</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="intro.pthreads" class="preface">
  <h1 class="title">Introduction</h1>
  <p class="para">
   pthreads is an object-orientated API that provides all of the tools needed
   for multi-threading in PHP. PHP applications can create, read, write,
   execute and synchronize with Threads, Workers and Threaded objects.
  </p>
  <div class="warning"><strong class="warning">Warning</strong>
   <p class="simpara">
    This extension is considered unmaintained and dead.
   </p>
  </div>
  <div class="tip"><strong class="tip">Tip</strong>
   <p class="simpara">
    Consider using <a href="book.parallel.html" class="link">parallel</a> instead.
   </p>
  </div>
  <div class="warning"><strong class="warning">Warning</strong>
   <p class="para">
    The pthreads extension cannot be used in a web server environment.
    Threading in PHP is therefore restricted to CLI-based applications only.
   </p>
  </div>
  <div class="warning"><strong class="warning">Warning</strong>
   <p class="para">
    pthreads (v3) can only be used with PHP 7.2+: This is due to ZTS
    mode being unsafe in 7.0 and 7.1.
   </p>
  </div>
  <p class="para">
   The <span class="classname"><a href="class.threaded.html" class="classname">Threaded</a></span> class forms the basis of the
   functionality that allows pthreads to operate. It exposes synchronization
   methods and some useful interfaces for the programmer.
  </p>
  <p class="para">
   The <span class="classname"><a href="class.thread.html" class="classname">Thread</a></span> class enables for threads to be created by
   simply extending it and implementing a <code class="literal">run</code> method. Any
   members can be written to and read by any context with a reference to the
   thread. Any context can also execute any public and protected methods. 
   The body of the run method will be executed in a separate thread when the
   <span class="methodname"><a href="thread.start.html" class="methodname">Thread::start()</a></span> method of the implementation is
   called from the context that created it. Only the context that creates a
   thread can start and join it.
  </p>
  <p class="para">
   The <span class="classname"><a href="class.worker.html" class="classname">Worker</a></span> class has a persistent state, and will be
   available from the call to <span class="methodname"><a href="thread.start.html" class="methodname">Thread::start()</a></span> (an
   inherited method) until the object goes out of scope, or is explicitly
   shutdown (via <span class="methodname"><a href="worker.shutdown.html" class="methodname">Worker::shutdown()</a></span>). Any context with a
   reference to the worker object can stack tasks onto the Worker (via 
   <span class="methodname"><a href="worker.stack.html" class="methodname">Worker::stack()</a></span>), where these tasks will be executed
   by the worker in a separate thread. The <code class="literal">run</code> method of a
   worker object will be executed before any objects on the worker's stack,
   enabling for resources to be initialized that the objects to be executed may
   need.
  </p>
  <p class="para">
   The <span class="classname"><a href="class.pool.html" class="classname">Pool</a></span> class is used to create a group of workers
   to distribute <span class="classname"><a href="class.threaded.html" class="classname">Threaded</a></span> objects amongst them. It is
   the easiest and most efficient way of using multiple threads in PHP
   applications.
  </p>
  <div class="caution"><strong class="caution">Caution</strong>
   <p class="para">
    The <span class="classname"><a href="class.pool.html" class="classname">Pool</a></span> class does not extend the
    <span class="classname"><a href="class.threaded.html" class="classname">Threaded</a></span> class, and so pool-based objects are
    considered a normal PHP objects. As such, its instances of it should not be
    shared amongst different contexts.
   </p>
  </div>
  <p class="para">
   The <span class="classname"><a href="class.volatile.html" class="classname">Volatile</a></span> class is new to pthreads v3. It is used
   to denote mutable <span class="classname"><a href="class.threaded.html" class="classname">Threaded</a></span> properties of
   <span class="classname"><a href="class.threaded.html" class="classname">Threaded</a></span> classes (since these are now immutable by
   default). It is also used to store PHP arrays in
   <span class="classname"><a href="class.threaded.html" class="classname">Threaded</a></span> contexts.
  </p>
  <p class="para">
   Synchronization is an important ability when threading. All of the objects
   that pthreads creates have built in synchronization in the (which will be
   familiar to java programmers) form of
   <span class="methodname"><a href="threaded.wait.html" class="methodname">Threaded::wait()</a></span> and
   <span class="methodname"><a href="threaded.notify.html" class="methodname">Threaded::notify()</a></span>. Calling
   <span class="methodname"><a href="threaded.wait.html" class="methodname">Threaded::wait()</a></span> on an object will cause the context
   to wait for another context to call
   <span class="methodname"><a href="threaded.notify.html" class="methodname">Threaded::notify()</a></span> on the same object. This mechanism
   allows for powerful synchronization between <span class="classname"><a href="class.threaded.html" class="classname">Threaded</a></span>
   objects in PHP.
  </p>
  <div class="caution"><strong class="caution">Caution</strong>
  <p class="para">
   Any objects that are intended for use in the multi-threaded parts of your
   application should extend <span class="classname"><a href="class.threaded.html" class="classname">Threaded</a></span>.
  </p>
  </div>
  <p class="para">
 Data Storage:
 As a rule of thumb, any data type that can be serialized can be used as a member of a Threaded object, it can be read and written from any context with a reference to the Threaded Object. 
 Not every type of data is stored serially, basic types are stored in their true form. 
 Complex types, Arrays, and Objects that are not Threaded are stored serially; they can be read and written to the Threaded Object from any context with a reference.
 With the exception of Threaded Objects any reference used to set a member of a Threaded Object is separated from the reference in the Threaded Object; 
 the same data can be read directly from the Threaded Object at any time by any context with a reference to the Threaded Object.
  </p>
  <p class="para">
 Static Members:
 When a new context is created ( Thread or Worker ), they are generally copied, but resources and objects with internal state are nullified (for safety reasons). This allows them to function as a kind of thread local storage. For example, upon starting the context, a class whose static members include connection information for a database server, and the connection itself, will only have the simple connection information copied, not the connection. Allowing the new context to initiate a connection in the same way as the context that created it, storing the connection in the same place without affecting the original context.
  </p>
  <div class="caution"><strong class="caution">Caution</strong>
  <p class="para">
 When print_r, var_dump and other object debug functions are executed, they do not include recursion protection.
  </p>
  </div>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
 Resources:
 The extensions and functionality that define resources in PHP are completely unprepared for this kind of environment; pthreads makes provisions for Resources to be shared among contexts, however, for most types of resource it should be considered unsafe. Extreme caution and care should be used when sharing resources among contexts.
   </p>
  <p></p></blockquote>
  <div class="caution"><strong class="caution">Caution</strong>
   <p class="para">
 In the environment which pthreads executes, some restrictions and limitations are necessary in order to provide a stable environment.
   </p>
  </div>
 </div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="124131">  
  <a class="name">
  <strong class="user"><em>Anon</em></strong></a><div class="date" title="2019-08-23 04:40"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom124131">
<div class="phpcode"><code><span class="html">
Joe Watkins the creator of pthreads and parallel announced in February this year (2019) that pthreads will no longer be maintained after PHP 7.4 due to architectural flaws.<br><br>For the future instead of pthread, parallel should be used.<br><br>Announcement: <br><a rel="nofollow" target="_blank">https://github.com/krakjoe/pthreads/issues/929#issue-410636734</a></span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->

  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from www.php.net/manual/en/intro.pthreads.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 05:25:41 GMT -->

</body></html>