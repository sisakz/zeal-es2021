<html><!-- Mirrored from www.php.net/manual/en/ref.image.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 05:21:53 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>GD and Image Functions</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="ref.image.html">
 <link rel="shorturl" href="https://www.php.net/image">
 <link rel="alternate" href="https://www.php.net/image" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="book.image.html">
 <link rel="prev" href="image.examples.merged-watermark.html">
 <link rel="next" href="function.gd-info.html">

 <link rel="alternate" href="ref.image.html" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/ref.image.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/ref.image.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/ref.image.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/ref.image.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/ref.image.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/ro/ref.image.php" hreflang="ro">
 <link rel="alternate" href="https://www.php.net/manual/ru/ref.image.php" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/ref.image.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/ref.image.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0aba.css?t=1539771603&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2ecf.css?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedba57.css?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached3afa.css?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>


</head>
<body class="docs " style="">


<div class="headsup"><a href="https://www.php.net/conferences/index.php#id2021-09-08-1">Longhorn PHP 2021</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.attributes.html">Attributes</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.utilspec.image.html">Image Processing and Generation</a></li>      <li><a href="book.image.html">GD</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="ref.image" class="reference">
 <h1 class="title">GD and Image Functions</h1>

 





































































































































































































































































































































































































































































































































































































<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.gd-info.html">gd_info</a> — Retrieve information about the currently installed GD library</li><li><a href="function.getimagesize.html">getimagesize</a> — Get the size of an image</li><li><a href="function.getimagesizefromstring.html">getimagesizefromstring</a> — Get the size of an image from a string</li><li><a href="function.image-type-to-extension.html">image_type_to_extension</a> — Get file extension for image type</li><li><a href="function.image-type-to-mime-type.html">image_type_to_mime_type</a> — Get Mime-Type for image-type returned by getimagesize,
   exif_read_data, exif_thumbnail, exif_imagetype</li><li><a href="function.image2wbmp.html">image2wbmp</a> — Output image to browser or file</li><li><a href="function.imageaffine.html">imageaffine</a> — Return an image containing the affine transformed src image, using an optional clipping area</li><li><a href="function.imageaffinematrixconcat.html">imageaffinematrixconcat</a> — Concatenate two affine transformation matrices</li><li><a href="function.imageaffinematrixget.html">imageaffinematrixget</a> — Get an affine transformation matrix</li><li><a href="function.imagealphablending.html">imagealphablending</a> — Set the blending mode for an image</li><li><a href="function.imageantialias.html">imageantialias</a> — Should antialias functions be used or not</li><li><a href="function.imagearc.html">imagearc</a> — Draws an arc</li><li><a href="function.imagebmp.html">imagebmp</a> — Output a BMP image to browser or file</li><li><a href="function.imagechar.html">imagechar</a> — Draw a character horizontally</li><li><a href="function.imagecharup.html">imagecharup</a> — Draw a character vertically</li><li><a href="function.imagecolorallocate.html">imagecolorallocate</a> — Allocate a color for an image</li><li><a href="function.imagecolorallocatealpha.html">imagecolorallocatealpha</a> — Allocate a color for an image</li><li><a href="function.imagecolorat.html">imagecolorat</a> — Get the index of the color of a pixel</li><li><a href="function.imagecolorclosest.html">imagecolorclosest</a> — Get the index of the closest color to the specified color</li><li><a href="function.imagecolorclosestalpha.html">imagecolorclosestalpha</a> — Get the index of the closest color to the specified color + alpha</li><li><a href="function.imagecolorclosesthwb.html">imagecolorclosesthwb</a> — Get the index of the color which has the hue, white and blackness</li><li><a href="function.imagecolordeallocate.html">imagecolordeallocate</a> — De-allocate a color for an image</li><li><a href="function.imagecolorexact.html">imagecolorexact</a> — Get the index of the specified color</li><li><a href="function.imagecolorexactalpha.html">imagecolorexactalpha</a> — Get the index of the specified color + alpha</li><li><a href="function.imagecolormatch.html">imagecolormatch</a> — Makes the colors of the palette version of an image more closely match the true color version</li><li><a href="function.imagecolorresolve.html">imagecolorresolve</a> — Get the index of the specified color or its closest possible alternative</li><li><a href="function.imagecolorresolvealpha.html">imagecolorresolvealpha</a> — Get the index of the specified color + alpha or its closest possible alternative</li><li><a href="function.imagecolorset.html">imagecolorset</a> — Set the color for the specified palette index</li><li><a href="function.imagecolorsforindex.html">imagecolorsforindex</a> — Get the colors for an index</li><li><a href="function.imagecolorstotal.html">imagecolorstotal</a> — Find out the number of colors in an image's palette</li><li><a href="function.imagecolortransparent.html">imagecolortransparent</a> — Define a color as transparent</li><li><a href="function.imageconvolution.html">imageconvolution</a> — Apply a 3x3 convolution matrix, using coefficient and offset</li><li><a href="function.imagecopy.html">imagecopy</a> — Copy part of an image</li><li><a href="function.imagecopymerge.html">imagecopymerge</a> — Copy and merge part of an image</li><li><a href="function.imagecopymergegray.html">imagecopymergegray</a> — Copy and merge part of an image with gray scale</li><li><a href="function.imagecopyresampled.html">imagecopyresampled</a> — Copy and resize part of an image with resampling</li><li><a href="function.imagecopyresized.html">imagecopyresized</a> — Copy and resize part of an image</li><li><a href="function.imagecreate.html">imagecreate</a> — Create a new palette based image</li><li><a href="function.imagecreatefrombmp.html">imagecreatefrombmp</a> — Create a new image from file or URL</li><li><a href="function.imagecreatefromgd2.html">imagecreatefromgd2</a> — Create a new image from GD2 file or URL</li><li><a href="function.imagecreatefromgd2part.html">imagecreatefromgd2part</a> — Create a new image from a given part of GD2 file or URL</li><li><a href="function.imagecreatefromgd.html">imagecreatefromgd</a> — Create a new image from GD file or URL</li><li><a href="function.imagecreatefromgif.html">imagecreatefromgif</a> — Create a new image from file or URL</li><li><a href="function.imagecreatefromjpeg.html">imagecreatefromjpeg</a> — Create a new image from file or URL</li><li><a href="function.imagecreatefrompng.html">imagecreatefrompng</a> — Create a new image from file or URL</li><li><a href="function.imagecreatefromstring.html">imagecreatefromstring</a> — Create a new image from the image stream in the string</li><li><a href="function.imagecreatefromwbmp.html">imagecreatefromwbmp</a> — Create a new image from file or URL</li><li><a href="function.imagecreatefromwebp.html">imagecreatefromwebp</a> — Create a new image from file or URL</li><li><a href="function.imagecreatefromxbm.html">imagecreatefromxbm</a> — Create a new image from file or URL</li><li><a href="function.imagecreatefromxpm.html">imagecreatefromxpm</a> — Create a new image from file or URL</li><li><a href="function.imagecreatetruecolor.html">imagecreatetruecolor</a> — Create a new true color image</li><li><a href="function.imagecrop.html">imagecrop</a> — Crop an image to the given rectangle</li><li><a href="function.imagecropauto.html">imagecropauto</a> — Crop an image automatically using one of the available modes</li><li><a href="function.imagedashedline.html">imagedashedline</a> — Draw a dashed line</li><li><a href="function.imagedestroy.html">imagedestroy</a> — Destroy an image</li><li><a href="function.imageellipse.html">imageellipse</a> — Draw an ellipse</li><li><a href="function.imagefill.html">imagefill</a> — Flood fill</li><li><a href="function.imagefilledarc.html">imagefilledarc</a> — Draw a partial arc and fill it</li><li><a href="function.imagefilledellipse.html">imagefilledellipse</a> — Draw a filled ellipse</li><li><a href="function.imagefilledpolygon.html">imagefilledpolygon</a> — Draw a filled polygon</li><li><a href="function.imagefilledrectangle.html">imagefilledrectangle</a> — Draw a filled rectangle</li><li><a href="function.imagefilltoborder.html">imagefilltoborder</a> — Flood fill to specific color</li><li><a href="function.imagefilter.html">imagefilter</a> — Applies a filter to an image</li><li><a href="function.imageflip.html">imageflip</a> — Flips an image using a given mode</li><li><a href="function.imagefontheight.html">imagefontheight</a> — Get font height</li><li><a href="function.imagefontwidth.html">imagefontwidth</a> — Get font width</li><li><a href="function.imageftbbox.html">imageftbbox</a> — Give the bounding box of a text using fonts via freetype2</li><li><a href="function.imagefttext.html">imagefttext</a> — Write text to the image using fonts using FreeType 2</li><li><a href="function.imagegammacorrect.html">imagegammacorrect</a> — Apply a gamma correction to a GD image</li><li><a href="function.imagegd2.html">imagegd2</a> — Output GD2 image to browser or file</li><li><a href="function.imagegd.html">imagegd</a> — Output GD image to browser or file</li><li><a href="function.imagegetclip.html">imagegetclip</a> — Get the clipping rectangle</li><li><a href="function.imagegetinterpolation.html">imagegetinterpolation</a> — Get the interpolation method</li><li><a href="function.imagegif.html">imagegif</a> — Output image to browser or file</li><li><a href="function.imagegrabscreen.html">imagegrabscreen</a> — Captures the whole screen</li><li><a href="function.imagegrabwindow.html">imagegrabwindow</a> — Captures a window</li><li><a href="function.imageinterlace.html">imageinterlace</a> — Enable or disable interlace</li><li><a href="function.imageistruecolor.html">imageistruecolor</a> — Finds whether an image is a truecolor image</li><li><a href="function.imagejpeg.html">imagejpeg</a> — Output image to browser or file</li><li><a href="function.imagelayereffect.html">imagelayereffect</a> — Set the alpha blending flag to use layering effects</li><li><a href="function.imageline.html">imageline</a> — Draw a line</li><li><a href="function.imageloadfont.html">imageloadfont</a> — Load a new font</li><li><a href="function.imageopenpolygon.html">imageopenpolygon</a> — Draws an open polygon</li><li><a href="function.imagepalettecopy.html">imagepalettecopy</a> — Copy the palette from one image to another</li><li><a href="function.imagepalettetotruecolor.html">imagepalettetotruecolor</a> — Converts a palette based image to true color</li><li><a href="function.imagepng.html">imagepng</a> — Output a PNG image to either the browser or a file</li><li><a href="function.imagepolygon.html">imagepolygon</a> — Draws a polygon</li><li><a href="function.imagerectangle.html">imagerectangle</a> — Draw a rectangle</li><li><a href="function.imageresolution.html">imageresolution</a> — Get or set the resolution of the image</li><li><a href="function.imagerotate.html">imagerotate</a> — Rotate an image with a given angle</li><li><a href="function.imagesavealpha.html">imagesavealpha</a> — Whether to retain full alpha channel information when saving PNG images</li><li><a href="function.imagescale.html">imagescale</a> — Scale an image using the given new width and height</li><li><a href="function.imagesetbrush.html">imagesetbrush</a> — Set the brush image for line drawing</li><li><a href="function.imagesetclip.html">imagesetclip</a> — Set the clipping rectangle</li><li><a href="function.imagesetinterpolation.html">imagesetinterpolation</a> — Set the interpolation method</li><li><a href="function.imagesetpixel.html">imagesetpixel</a> — Set a single pixel</li><li><a href="function.imagesetstyle.html">imagesetstyle</a> — Set the style for line drawing</li><li><a href="function.imagesetthickness.html">imagesetthickness</a> — Set the thickness for line drawing</li><li><a href="function.imagesettile.html">imagesettile</a> — Set the tile image for filling</li><li><a href="function.imagestring.html">imagestring</a> — Draw a string horizontally</li><li><a href="function.imagestringup.html">imagestringup</a> — Draw a string vertically</li><li><a href="function.imagesx.html">imagesx</a> — Get image width</li><li><a href="function.imagesy.html">imagesy</a> — Get image height</li><li><a href="function.imagetruecolortopalette.html">imagetruecolortopalette</a> — Convert a true color image to a palette image</li><li><a href="function.imagettfbbox.html">imagettfbbox</a> — Give the bounding box of a text using TrueType fonts</li><li><a href="function.imagettftext.html">imagettftext</a> — Write text to the image using TrueType fonts</li><li><a href="function.imagetypes.html">imagetypes</a> — Return the image types supported by this PHP build</li><li><a href="function.imagewbmp.html">imagewbmp</a> — Output image to browser or file</li><li><a href="function.imagewebp.html">imagewebp</a> — Output a WebP image to browser or file</li><li><a href="function.imagexbm.html">imagexbm</a> — Output an XBM image to browser or file</li><li><a href="function.iptcembed.html">iptcembed</a> — Embeds binary IPTC data into a JPEG image</li><li><a href="function.iptcparse.html">iptcparse</a> — Parse a binary IPTC block into single tags</li><li><a href="function.jpeg2wbmp.html">jpeg2wbmp</a> — Convert JPEG image file to WBMP image file</li><li><a href="function.png2wbmp.html">png2wbmp</a> — Convert PNG image file to WBMP image file</li></ul>
</div>

<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="57909">  
  <a class="name">
  <strong class="user"><em>michal-ok at o2 dot pl</em></strong></a><div class="date" title="2005-10-18 02:29"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom57909">
<div class="phpcode"><code><span class="html">
The image sharpen function (by Alex R. Austin) provided below seems to be very resource hungry and I couldn't make it work on two different servers - trying to sharpen a 413 x 413 image I ended up with "Fatal error: Allowed memory size of 8388608 bytes exhausted" or "Internal Server Error" or the script terminated without notice. Because I had no priviliges to change the default memory limit on these servers I started looking for other sharpen functions. I have come across a php Unsharp Mask function which works like a charm on both of the servers I dealt with. It can be found at <a rel="nofollow" target="_blank">http://vikjavev.no/hovudsida/umtestside.php.</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="63064">  
  <a class="name">
  <strong class="user"><em>felipensp at gmail dot com</em></strong></a><div class="date" title="2006-03-12 09:17"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom63064">
<div class="phpcode"><code><span class="html">
Representation decimal of a color in hexadecimal for use on functions of library GD.<br><br><span class="default">&lt;?php<br><br>&nbsp; &nbsp; </span><span class="comment">// Representation hexadecimal<br>&nbsp; &nbsp; </span><span class="default">$var </span><span class="keyword">= </span><span class="string">'#FFFFFF'</span><span class="keyword">;<br><br>&nbsp; &nbsp; function </span><span class="default">getRgbFromGd</span><span class="keyword">(</span><span class="default">$color_hex</span><span class="keyword">) {<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'hexdec'</span><span class="keyword">, </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'|'</span><span class="keyword">, </span><span class="default">wordwrap</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$color_hex</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">, </span><span class="string">'|'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">)));<br><br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">getRgbFromGd</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">));<br><br>&nbsp; &nbsp; </span><span class="comment">// Output: Array ( [0] =&gt; 255 [1] =&gt; 255 [2] =&gt; 255 )<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87238">  
  <a class="name">
  <strong class="user"><em>chuckstudios at gmail dot com</em></strong></a><div class="date" title="2008-11-25 09:18"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom87238">
<div class="phpcode"><code><span class="html">
I wrote a simple function to convert an image resource to PGM (portable graymap) in order to feed it to an OCR program. It works just like the rest of the image output functions, and will convert to grayscale for you:<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">imagepgm</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$filename </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pgm </span><span class="keyword">= </span><span class="string">"P5 "</span><span class="keyword">.</span><span class="default">imagesx</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">).</span><span class="string">" "</span><span class="keyword">.</span><span class="default">imagesy</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">).</span><span class="string">" 255\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$y </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$y </span><span class="keyword">&lt; </span><span class="default">imagesy</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">); </span><span class="default">$y</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">imagesx</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">); </span><span class="default">$x</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$colors </span><span class="keyword">= </span><span class="default">imagecolorsforindex</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">imagecolorat</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pgm </span><span class="keyword">.= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">0.3 </span><span class="keyword">* </span><span class="default">$colors</span><span class="keyword">[</span><span class="string">"red"</span><span class="keyword">] + </span><span class="default">0.59 </span><span class="keyword">* </span><span class="default">$colors</span><span class="keyword">[</span><span class="string">"green"</span><span class="keyword">] + </span><span class="default">0.11 </span><span class="keyword">* </span><span class="default">$colors</span><span class="keyword">[</span><span class="string">"blue"</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$filename </span><span class="keyword">!= </span><span class="default">null</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="string">"w"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">$pgm</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$pgm</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="63689">  
  <a class="name">
  <strong class="user"><em>shd at earthling dot net</em></strong></a><div class="date" title="2006-03-28 04:44"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom63689">
<div class="phpcode"><code><span class="html">
If you happen to need a way to output a Windows BMP file (e.g. when using the PEAR ExcelWriter), feel free to use the following code:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">imagebmp </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$fn </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; if (!</span><span class="default">$im</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; if (</span><span class="default">$fn </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) </span><span class="default">$fn </span><span class="keyword">= </span><span class="string">'php://output'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$f </span><span class="keyword">= </span><span class="default">fopen </span><span class="keyword">(</span><span class="default">$fn</span><span class="keyword">, </span><span class="string">"w"</span><span class="keyword">);<br>&nbsp; &nbsp; if (!</span><span class="default">$f</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">//Image dimensions<br>&nbsp; &nbsp; </span><span class="default">$biWidth </span><span class="keyword">= </span><span class="default">imagesx </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$biHeight </span><span class="keyword">= </span><span class="default">imagesy </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$biBPLine </span><span class="keyword">= </span><span class="default">$biWidth </span><span class="keyword">* </span><span class="default">3</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$biStride </span><span class="keyword">= (</span><span class="default">$biBPLine </span><span class="keyword">+ </span><span class="default">3</span><span class="keyword">) &amp; ~</span><span class="default">3</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$biSizeImage </span><span class="keyword">= </span><span class="default">$biStride </span><span class="keyword">* </span><span class="default">$biHeight</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$bfOffBits </span><span class="keyword">= </span><span class="default">54</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$bfSize </span><span class="keyword">= </span><span class="default">$bfOffBits </span><span class="keyword">+ </span><span class="default">$biSizeImage</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">//BITMAPFILEHEADER<br>&nbsp; &nbsp; </span><span class="default">fwrite </span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">, </span><span class="string">'BM'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">fwrite </span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">, </span><span class="default">pack </span><span class="keyword">(</span><span class="string">'VvvV'</span><span class="keyword">, </span><span class="default">$bfSize</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$bfOffBits</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">//BITMAPINFO (BITMAPINFOHEADER)<br>&nbsp; &nbsp; </span><span class="default">fwrite </span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">, </span><span class="default">pack </span><span class="keyword">(</span><span class="string">'VVVvvVVVVVV'</span><span class="keyword">, </span><span class="default">40</span><span class="keyword">, </span><span class="default">$biWidth</span><span class="keyword">, </span><span class="default">$biHeight</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">24</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$biSizeImage</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$numpad </span><span class="keyword">= </span><span class="default">$biStride </span><span class="keyword">- </span><span class="default">$biBPLine</span><span class="keyword">;<br>&nbsp; &nbsp; for (</span><span class="default">$y </span><span class="keyword">= </span><span class="default">$biHeight </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">; </span><span class="default">$y </span><span class="keyword">&gt;= </span><span class="default">0</span><span class="keyword">; --</span><span class="default">$y</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">$biWidth</span><span class="keyword">; ++</span><span class="default">$x</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$col </span><span class="keyword">= </span><span class="default">imagecolorat </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fwrite </span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">, </span><span class="default">pack </span><span class="keyword">(</span><span class="string">'V'</span><span class="keyword">, </span><span class="default">$col</span><span class="keyword">), </span><span class="default">3</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$numpad</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fwrite </span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">, </span><span class="default">pack </span><span class="keyword">(</span><span class="string">'C'</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">));<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">fclose </span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">);<br>&nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>It works the same way as regular imagejpeg/imagepng do and only supports GD2.0 true colour bitmaps (which is what's required by ExcelWriter).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="37131">  
  <a class="name">
  <strong class="user"><em>jeff at lushmedia dot com</em></strong></a><div class="date" title="2003-11-04 08:52"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom37131">
<div class="phpcode"><code><span class="html">
I wrote an online overview of the image functions that people might find useful. In addition to a general overview of the various function categories and code samples, I have included many interactive examples of the functions, allowing viewers to experiment with the parameters, and seeing the results in real time. The presentation is located at New York PHP<br><a rel="nofollow" target="_blank">http://www.nyphp.org/content/presentations/GDintro/</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="120217">  
  <a class="name">
  <strong class="user"><em>delabahan at gmail dot com</em></strong></a><div class="date" title="2016-11-24 05:44"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom120217">
<div class="phpcode"><code><span class="html">
This is an example of get high resolution images.<br><br><span class="default">&lt;?php<br> </span><span class="comment">/**<br> * Class name&nbsp; &nbsp; &nbsp; : resizeImage<br> * Created by&nbsp;&nbsp; : wang<br> * Description&nbsp;&nbsp; : This class is to resize the image from original size to new size <br> */<br></span><span class="keyword">class </span><span class="default">resizeImage<br></span><span class="keyword">{<br>&nbsp; &nbsp;&nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Function name : resize_img<br>&nbsp; &nbsp;&nbsp; * Description&nbsp;&nbsp; : This function is to resize image <br>&nbsp; &nbsp;&nbsp; * @param&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : $origimg variable is the original image <br>&nbsp; &nbsp;&nbsp; * @param&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : $newimg variable is the new image <br>&nbsp; &nbsp;&nbsp; * @param&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : $w variable is the width of image <br>&nbsp; &nbsp;&nbsp; * @param&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : $f variable is the height of image <br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public&nbsp; function </span><span class="default">resize_img</span><span class="keyword">(</span><span class="default">$origimg</span><span class="keyword">,</span><span class="default">$newimg</span><span class="keyword">,</span><span class="default">$w</span><span class="keyword">,</span><span class="default">$h</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$info </span><span class="keyword">= </span><span class="default">getimagesize</span><span class="keyword">(</span><span class="default">$origimg</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$mime&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$info</span><span class="keyword">[</span><span class="string">'mime'</span><span class="keyword">];<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Make sure that the requested file is actually an image<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$mime</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">) != </span><span class="string">'image/'</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'HTTP/1.1 400 Bad Request'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="string">'Error: requested file is not an accepted type: ' </span><span class="keyword">.</span><span class="default">$origimg</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; exit();<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Check they extention of image<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$extension </span><span class="keyword">= </span><span class="default">image_type_to_extension</span><span class="keyword">(</span><span class="default">$info</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$extension</span><span class="keyword">) == </span><span class="string">'.png'</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$img </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">resize_imagepng</span><span class="keyword">(</span><span class="default">$origimg</span><span class="keyword">,</span><span class="default">$w</span><span class="keyword">, </span><span class="default">$h</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">$newimg</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }elseif(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$extension</span><span class="keyword">) == </span><span class="string">'.jpeg'</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$img </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">resize_imagejpeg</span><span class="keyword">(</span><span class="default">$origimg</span><span class="keyword">, </span><span class="default">$w</span><span class="keyword">, </span><span class="default">$h</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imagejpeg</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">$newimg</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }elseif(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$extension </span><span class="keyword">== </span><span class="string">'.gif'</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$img </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">resize_imagegif</span><span class="keyword">(</span><span class="default">$origimg</span><span class="keyword">, </span><span class="default">$w</span><span class="keyword">, </span><span class="default">$h</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imagegif</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">$newimg</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; }<br>&nbsp; &nbsp;&nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * End function name : resize_img<br>&nbsp; &nbsp;&nbsp; */<br><br>&nbsp; &nbsp;&nbsp; /**<br>&nbsp; &nbsp;&nbsp; * Function name : resize_imagepng<br>&nbsp; &nbsp;&nbsp; * Description&nbsp;&nbsp; : This function is to resize png image <br>&nbsp; &nbsp;&nbsp; * @param&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : $file variable is the original image <br>&nbsp; &nbsp;&nbsp; * @param&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : $w variable is the width of image <br>&nbsp; &nbsp;&nbsp; * @param&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : $f variable is the height of image <br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">private function </span><span class="default">resize_imagepng</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$w</span><span class="keyword">, </span><span class="default">$h</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp;&nbsp; list(</span><span class="default">$width</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">) = </span><span class="default">getimagesize</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$src </span><span class="keyword">= </span><span class="default">imagecreatefrompng</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dst </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">$w</span><span class="keyword">, </span><span class="default">$h</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagecopyresampled</span><span class="keyword">(</span><span class="default">$dst</span><span class="keyword">, </span><span class="default">$src</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$w</span><span class="keyword">, </span><span class="default">$h</span><span class="keyword">, </span><span class="default">$width</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$dst</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp;&nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * End function name : resize_imagepng<br>&nbsp; &nbsp;&nbsp; */<br><br>&nbsp; &nbsp;&nbsp; /**<br>&nbsp; &nbsp;&nbsp; * Function name : resize_imagejpeg<br>&nbsp; &nbsp;&nbsp; * Description&nbsp;&nbsp; : This function is to resize jpeg image <br>&nbsp; &nbsp;&nbsp; * @param&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : $file variable is the original image <br>&nbsp; &nbsp;&nbsp; * @param&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : $w variable is the width of image <br>&nbsp; &nbsp;&nbsp; * @param&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : $f variable is the height of image <br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">private function </span><span class="default">resize_imagejpeg</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$w</span><span class="keyword">, </span><span class="default">$h</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp;&nbsp; list(</span><span class="default">$width</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">) = </span><span class="default">getimagesize</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$src </span><span class="keyword">= </span><span class="default">imagecreatefromjpeg</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dst </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">$w</span><span class="keyword">, </span><span class="default">$h</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagecopyresampled</span><span class="keyword">(</span><span class="default">$dst</span><span class="keyword">, </span><span class="default">$src</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$w</span><span class="keyword">, </span><span class="default">$h</span><span class="keyword">, </span><span class="default">$width</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$dst</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp;&nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * End function name : resize_imagejpeg<br>&nbsp; &nbsp;&nbsp; */<br><br>&nbsp; &nbsp;&nbsp; /**<br>&nbsp; &nbsp;&nbsp; * Function name : resize_imagegif<br>&nbsp; &nbsp;&nbsp; * Description&nbsp;&nbsp; : This function is to resize gif image <br>&nbsp; &nbsp;&nbsp; * @param&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : $file variable is the original image <br>&nbsp; &nbsp;&nbsp; * @param&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : $w variable is the width of image <br>&nbsp; &nbsp;&nbsp; * @param&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : $f variable is the height of image <br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">private function </span><span class="default">resize_imagegif</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$w</span><span class="keyword">, </span><span class="default">$h</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp;&nbsp; list(</span><span class="default">$width</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">) = </span><span class="default">getimagesize</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$src </span><span class="keyword">= </span><span class="default">imagecreatefromgif</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dst </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">$w</span><span class="keyword">, </span><span class="default">$h</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagecopyresampled</span><span class="keyword">(</span><span class="default">$dst</span><span class="keyword">, </span><span class="default">$src</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$w</span><span class="keyword">, </span><span class="default">$h</span><span class="keyword">, </span><span class="default">$width</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$dst</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp;&nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * End function name : resize_imagegif<br>&nbsp; &nbsp;&nbsp; */<br></span><span class="keyword">}<br></span><span class="comment">/**<br>* End class name : resizeImage<br>*/<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106150">  
  <a class="name">
  <strong class="user"><em>ingo at jache dot de</em></strong></a><div class="date" title="2011-10-14 03:16"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom106150">
<div class="phpcode"><code><span class="html">
I know this might look somewhat superfluous to others, but i once came across a situation where i needed a *strong* blur on an image without having ImageMagick installed. Executing the convolution-filter several times on the same image is awfully slow and still doesn't give a good blur.<br><br>The function below accepts a truecolor-image and a blur-factor between 0.0 and 1.0. Beware: It's still quite slow.<br><br><span class="default">&lt;?php<br><br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">blurImage</span><span class="keyword">(</span><span class="default">$srcimg</span><span class="keyword">,</span><span class="default">$blur</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$blur </span><span class="keyword">= </span><span class="default">$blur</span><span class="keyword">*</span><span class="default">$blur</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$blur </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">min</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">$blur</span><span class="keyword">));<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$srcw </span><span class="keyword">= </span><span class="default">imagesx</span><span class="keyword">(</span><span class="default">$srcimg</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$srch </span><span class="keyword">= </span><span class="default">imagesy</span><span class="keyword">(</span><span class="default">$srcimg</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dstimg </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">$srcw</span><span class="keyword">,</span><span class="default">$srch</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$f1a </span><span class="keyword">= </span><span class="default">$blur</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$f1b </span><span class="keyword">= </span><span class="default">1.0 </span><span class="keyword">- </span><span class="default">$blur</span><span class="keyword">;<br><br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cr </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$cg </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$cb </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nr </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$ng </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$nb </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rgb </span><span class="keyword">= </span><span class="default">imagecolorat</span><span class="keyword">(</span><span class="default">$srcimg</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$or </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$og </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ob </span><span class="keyword">= (</span><span class="default">$rgb</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//-------------------------------------------------<br>&nbsp; &nbsp; &nbsp; &nbsp; // first line is a special case<br>&nbsp; &nbsp; &nbsp; &nbsp; //-------------------------------------------------<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">$srcw</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">$srch</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; while (</span><span class="default">$x</span><span class="keyword">--)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//horizontal blurren<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rgb </span><span class="keyword">= </span><span class="default">imagecolorat</span><span class="keyword">(</span><span class="default">$srcimg</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cr </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cg </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cb </span><span class="keyword">= (</span><span class="default">$rgb</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nr </span><span class="keyword">= (</span><span class="default">$cr </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$or </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ng </span><span class="keyword">= (</span><span class="default">$cg </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$og </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nb </span><span class="keyword">= (</span><span class="default">$cb </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$ob </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);&nbsp; &nbsp; <br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$or </span><span class="keyword">= </span><span class="default">$nr</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$og </span><span class="keyword">= </span><span class="default">$ng</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ob </span><span class="keyword">= </span><span class="default">$nb</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imagesetpixel</span><span class="keyword">(</span><span class="default">$dstimg</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">,(</span><span class="default">$nr </span><span class="keyword">&lt;&lt; </span><span class="default">16</span><span class="keyword">) | (</span><span class="default">$ng </span><span class="keyword">&lt;&lt; </span><span class="default">8</span><span class="keyword">) | (</span><span class="default">$nb</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//-------------------------------------------------<br><br>&nbsp; &nbsp; &nbsp; &nbsp; //-------------------------------------------------<br>&nbsp; &nbsp; &nbsp; &nbsp; // now process the entire picture<br>&nbsp; &nbsp; &nbsp; &nbsp; //-------------------------------------------------<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">$srch</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; while (</span><span class="default">$y</span><span class="keyword">--)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rgb </span><span class="keyword">= </span><span class="default">imagecolorat</span><span class="keyword">(</span><span class="default">$srcimg</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$or </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$og </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ob </span><span class="keyword">= (</span><span class="default">$rgb</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">$srcw</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while (</span><span class="default">$x</span><span class="keyword">--)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//horizontal <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rgb </span><span class="keyword">= </span><span class="default">imagecolorat</span><span class="keyword">(</span><span class="default">$srcimg</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cr </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cg </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cb </span><span class="keyword">= (</span><span class="default">$rgb</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nr </span><span class="keyword">= (</span><span class="default">$cr </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$or </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ng </span><span class="keyword">= (</span><span class="default">$cg </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$og </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nb </span><span class="keyword">= (</span><span class="default">$cb </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$ob </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$or </span><span class="keyword">= </span><span class="default">$nr</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$og </span><span class="keyword">= </span><span class="default">$ng</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ob </span><span class="keyword">= </span><span class="default">$nb</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//vertical <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rgb </span><span class="keyword">= </span><span class="default">imagecolorat</span><span class="keyword">(</span><span class="default">$dstimg</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$vr </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$vg </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$vb </span><span class="keyword">= (</span><span class="default">$rgb</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nr </span><span class="keyword">= (</span><span class="default">$nr </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$vr </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ng </span><span class="keyword">= (</span><span class="default">$ng </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$vg </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nb </span><span class="keyword">= (</span><span class="default">$nb </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$vb </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$vr </span><span class="keyword">= </span><span class="default">$nr</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$vg </span><span class="keyword">= </span><span class="default">$ng</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$vb </span><span class="keyword">= </span><span class="default">$nb</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imagesetpixel</span><span class="keyword">(</span><span class="default">$dstimg</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">,(</span><span class="default">$nr </span><span class="keyword">&lt;&lt; </span><span class="default">16</span><span class="keyword">) | (</span><span class="default">$ng </span><span class="keyword">&lt;&lt; </span><span class="default">8</span><span class="keyword">) | (</span><span class="default">$nb</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//-------------------------------------------------<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">$dstimg</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; <br><br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$srcimg </span><span class="keyword">= </span><span class="default">imagecreatefromjpeg</span><span class="keyword">(</span><span class="string">"test.jpg"</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$dstimg </span><span class="keyword">= </span><span class="default">blurImage</span><span class="keyword">(</span><span class="default">$srcimg</span><span class="keyword">,</span><span class="default">0.2</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-type: image/jpeg'</span><span class="keyword">);<br>&nbsp; &nbsp; echo( </span><span class="default">imagejpeg</span><span class="keyword">(</span><span class="default">$dstimg</span><span class="keyword">) );<br>&nbsp; &nbsp; exit();<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; <br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="120139">  
  <a class="name">
  <strong class="user"><em>mpyw</em></strong></a><div class="date" title="2016-11-10 08:45"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom120139">
<div class="phpcode"><code><span class="html">
This is an example of black-and-white imagebmp() implementation. <br><br><span class="default">&lt;?php<br><br></span><span class="comment">/**<br> * Output a black-and-white BMP image to either the browser or a file.<br> * <br> * @param resource $image<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; An image resource, returned by one of the image creation functions,<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; such as imagecreatetruecolor().<br> *<br> * @param string|null $to<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The path or an open stream resource<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (which is automatically being closed after this function returns)<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; to save the file to.<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If not set or NULL, the raw image stream will be outputted directly.<br> *<br> * @param float $threshold<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The number in the range of 0.0 to 1.0.<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Brighter for larger, or darker for smaller.<br> *<br> * @return bool Returns TRUE on success or FALSE on failure.<br> * <br> */<br></span><span class="keyword">function </span><span class="default">imagebwbmp</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$to </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$threshold </span><span class="keyword">= </span><span class="default">0.5</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; if (</span><span class="default">func_num_args</span><span class="keyword">() &lt; </span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fmt </span><span class="keyword">= </span><span class="string">"imagebwbmp() expects a least 1 parameters, %d given"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">sprintf</span><span class="keyword">(</span><span class="default">$fmt</span><span class="keyword">, </span><span class="default">func_num_args</span><span class="keyword">()), </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (!</span><span class="default">is_resource</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fmt </span><span class="keyword">= </span><span class="string">"imagebwbmp() expects parameter 1 to be resource, %s given"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">sprintf</span><span class="keyword">(</span><span class="default">$fmt</span><span class="keyword">, </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">)), </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$threshold</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fmt </span><span class="keyword">= </span><span class="string">"imagebwbmp() expects parameter 3 to be float, %s given"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">sprintf</span><span class="keyword">(</span><span class="default">$fmt</span><span class="keyword">, </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$threshold</span><span class="keyword">)), </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; if (</span><span class="default">get_resource_type</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">) !== </span><span class="string">'gd'</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$msg </span><span class="keyword">= </span><span class="string">"imagebwbmp(): supplied resource is not a valid gd resource"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">$msg</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; switch (</span><span class="default">true</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">$to </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">is_resource</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">) &amp;&amp; </span><span class="default">get_resource_type</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">) === </span><span class="string">'stream'</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">) &amp;&amp; </span><span class="default">$to </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">, </span><span class="string">'wb'</span><span class="keyword">):<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/[waxc+]/'</span><span class="keyword">, </span><span class="default">stream_get_meta_data</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">)[</span><span class="string">'mode'</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; default:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$msg </span><span class="keyword">= </span><span class="string">"imagebwbmp(): Invalid 2nd parameter, it must a writable filename or a writable stream"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">$msg</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; if (</span><span class="default">$to </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$to </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">'php://output'</span><span class="keyword">, </span><span class="string">'wb'</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="default">$biWidth </span><span class="keyword">= </span><span class="default">imagesx</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$biHeight </span><span class="keyword">= </span><span class="default">imagesy</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$biSizeImage </span><span class="keyword">= ((int)</span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$biWidth </span><span class="keyword">/ </span><span class="default">32</span><span class="keyword">) * </span><span class="default">32 </span><span class="keyword">/ </span><span class="default">8 </span><span class="keyword">* </span><span class="default">$biHeight</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$bfOffBits </span><span class="keyword">= </span><span class="default">54 </span><span class="keyword">+ </span><span class="default">4 </span><span class="keyword">* </span><span class="default">2</span><span class="keyword">; </span><span class="comment">// Use two colors (black and white)<br>&nbsp; &nbsp; </span><span class="default">$bfSize </span><span class="keyword">= </span><span class="default">$bfOffBits </span><span class="keyword">+ </span><span class="default">$biSizeImage</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">, </span><span class="string">'BM'</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">, </span><span class="default">pack</span><span class="keyword">(</span><span class="string">'VvvV'</span><span class="keyword">, </span><span class="default">$bfSize</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$bfOffBits</span><span class="keyword">));<br>&nbsp; &nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">, </span><span class="default">pack</span><span class="keyword">(</span><span class="string">'VVVvvVVVVVV'</span><span class="keyword">, </span><span class="default">40</span><span class="keyword">, </span><span class="default">$biWidth</span><span class="keyword">, </span><span class="default">$biHeight</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$biSizeImage</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">));<br>&nbsp; &nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">, </span><span class="string">"\xff\xff\xff\x00"</span><span class="keyword">); </span><span class="comment">// white<br>&nbsp; &nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">, </span><span class="string">"\x00\x00\x00\x00"</span><span class="keyword">); </span><span class="comment">// black<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="keyword">for (</span><span class="default">$y </span><span class="keyword">= </span><span class="default">$biHeight </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">; </span><span class="default">$y </span><span class="keyword">&gt;= </span><span class="default">0</span><span class="keyword">; --</span><span class="default">$y</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$byte </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">$biWidth</span><span class="keyword">; ++</span><span class="default">$x</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rgb </span><span class="keyword">= </span><span class="default">imagecolorsforindex</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">imagecolorat</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= (</span><span class="default">0.299 </span><span class="keyword">* </span><span class="default">$rgb</span><span class="keyword">[</span><span class="string">'red'</span><span class="keyword">] + </span><span class="default">0.587 </span><span class="keyword">* </span><span class="default">$rgb</span><span class="keyword">[</span><span class="string">'green'</span><span class="keyword">] + </span><span class="default">0.114 </span><span class="keyword">* </span><span class="default">$rgb</span><span class="keyword">[</span><span class="string">'blue'</span><span class="keyword">]) / </span><span class="default">0xff</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$color </span><span class="keyword">= (int)(</span><span class="default">$value </span><span class="keyword">&gt; </span><span class="default">$threshold</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$byte </span><span class="keyword">= (</span><span class="default">$byte </span><span class="keyword">&lt;&lt; </span><span class="default">1</span><span class="keyword">) | </span><span class="default">$color</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$x </span><span class="keyword">% </span><span class="default">8 </span><span class="keyword">=== </span><span class="default">7</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">, </span><span class="default">pack</span><span class="keyword">(</span><span class="string">'C'</span><span class="keyword">, </span><span class="default">$byte</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$byte </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$x </span><span class="keyword">% </span><span class="default">8</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">, </span><span class="default">pack</span><span class="keyword">(</span><span class="string">'C'</span><span class="keyword">, </span><span class="default">$byte </span><span class="keyword">&lt;&lt; (</span><span class="default">8 </span><span class="keyword">- </span><span class="default">$x </span><span class="keyword">% </span><span class="default">8</span><span class="keyword">)));<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$x </span><span class="keyword">% </span><span class="default">32</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">, </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">"\x00"</span><span class="keyword">, (int)((</span><span class="default">32 </span><span class="keyword">- </span><span class="default">$x </span><span class="keyword">% </span><span class="default">32</span><span class="keyword">) / </span><span class="default">8</span><span class="keyword">)));<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="79996">  
  <a class="name">
  <strong class="user"><em>ph_corp at yahoo dot fr</em></strong></a><div class="date" title="2007-12-23 03:19"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom79996">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br><br></span><span class="comment">/**<br>HSL/RGB conversion functions<br>very useful for a lot of applications<br>**/<br><br></span><span class="keyword">function </span><span class="default">RBGtoHSL </span><span class="keyword">( </span><span class="default">$R</span><span class="keyword">, </span><span class="default">$G</span><span class="keyword">, </span><span class="default">$B </span><span class="keyword">)<br>{<br><br>&nbsp; &nbsp; </span><span class="default">$var_R </span><span class="keyword">= ( </span><span class="default">$R </span><span class="keyword">/ </span><span class="default">255 </span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$var_G </span><span class="keyword">= ( </span><span class="default">$G </span><span class="keyword">/ </span><span class="default">255 </span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$var_B </span><span class="keyword">= ( </span><span class="default">$B </span><span class="keyword">/ </span><span class="default">255 </span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="default">$var_Min </span><span class="keyword">= </span><span class="default">min</span><span class="keyword">( </span><span class="default">$var_R</span><span class="keyword">, </span><span class="default">$var_G</span><span class="keyword">, </span><span class="default">$var_B </span><span class="keyword">)<br>&nbsp; &nbsp; </span><span class="default">$var_Max </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">( </span><span class="default">$var_R</span><span class="keyword">, </span><span class="default">$var_G</span><span class="keyword">, </span><span class="default">$var_B </span><span class="keyword">)<br>&nbsp; &nbsp; </span><span class="default">$del_Max </span><span class="keyword">= </span><span class="default">$var_Max </span><span class="keyword">- </span><span class="default">$var_Min<br><br>&nbsp; &nbsp; $L </span><span class="keyword">= ( </span><span class="default">$var_Max </span><span class="keyword">+ </span><span class="default">$var_Min </span><span class="keyword">) / </span><span class="default">2</span><span class="keyword">;<br><br>&nbsp; &nbsp; if ( </span><span class="default">$del_Max </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$H </span><span class="keyword">= </span><span class="default">0<br>&nbsp; &nbsp; &nbsp;&nbsp; $S </span><span class="keyword">= </span><span class="default">0<br>&nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; else<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">$L </span><span class="keyword">&lt; </span><span class="default">0.5 </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$S </span><span class="keyword">= </span><span class="default">$del_Max </span><span class="keyword">/ ( </span><span class="default">$var_Max </span><span class="keyword">+ </span><span class="default">$var_Min </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$S </span><span class="keyword">= </span><span class="default">$del_Max </span><span class="keyword">/ ( </span><span class="default">2 </span><span class="keyword">- </span><span class="default">$var_Max </span><span class="keyword">- </span><span class="default">$var_Min </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$del_R </span><span class="keyword">= ( ( ( </span><span class="default">$var_Max </span><span class="keyword">- </span><span class="default">$var_R </span><span class="keyword">) / </span><span class="default">6 </span><span class="keyword">) + ( </span><span class="default">$del_Max </span><span class="keyword">/ </span><span class="default">2 </span><span class="keyword">) ) / </span><span class="default">$del_Max</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$del_G </span><span class="keyword">= ( ( ( </span><span class="default">$var_Max </span><span class="keyword">- </span><span class="default">$var_G </span><span class="keyword">) / </span><span class="default">6 </span><span class="keyword">) + ( </span><span class="default">$del_Max </span><span class="keyword">/ </span><span class="default">2 </span><span class="keyword">) ) / </span><span class="default">$del_Max</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$del_B </span><span class="keyword">= ( ( ( </span><span class="default">$var_Max </span><span class="keyword">- </span><span class="default">$var_B </span><span class="keyword">) / </span><span class="default">6 </span><span class="keyword">) + ( </span><span class="default">$del_Max </span><span class="keyword">/ </span><span class="default">2 </span><span class="keyword">) ) / </span><span class="default">$del_Max</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">$var_R </span><span class="keyword">== </span><span class="default">$var_Max </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$H </span><span class="keyword">= </span><span class="default">$del_B </span><span class="keyword">- </span><span class="default">$del_G</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else if ( </span><span class="default">$var_G </span><span class="keyword">== </span><span class="default">$var_Max </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$H </span><span class="keyword">= ( </span><span class="default">1 </span><span class="keyword">/ </span><span class="default">3 </span><span class="keyword">) + </span><span class="default">$del_R </span><span class="keyword">- </span><span class="default">$del_B</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else if ( </span><span class="default">$var_B </span><span class="keyword">== </span><span class="default">$var_Max </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$H </span><span class="keyword">= ( </span><span class="default">2 </span><span class="keyword">/ </span><span class="default">3 </span><span class="keyword">) + </span><span class="default">$del_G </span><span class="keyword">- </span><span class="default">$del_R</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">$H </span><span class="keyword">&lt; </span><span class="default">0 </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$H </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">$H </span><span class="keyword">&gt; </span><span class="default">1 </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$H </span><span class="keyword">-= </span><span class="default">1<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br><br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return array( </span><span class="default">$H</span><span class="keyword">, </span><span class="default">$S</span><span class="keyword">, </span><span class="default">$L </span><span class="keyword">);<br><br>}<br><br>function </span><span class="default">HuetoRGB</span><span class="keyword">( </span><span class="default">$v1</span><span class="keyword">, </span><span class="default">$v2</span><span class="keyword">, </span><span class="default">$vH </span><span class="keyword">)<br>{<br>&nbsp; &nbsp; if ( </span><span class="default">$vH </span><span class="keyword">&lt; </span><span class="default">0 </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$vH </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if ( </span><span class="default">$vH </span><span class="keyword">&gt; </span><span class="default">1 </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$vH </span><span class="keyword">-= </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if ( ( </span><span class="default">6 </span><span class="keyword">* </span><span class="default">$vH </span><span class="keyword">) &lt; </span><span class="default">1 </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return ( </span><span class="default">$v1 </span><span class="keyword">+ ( </span><span class="default">$v2 </span><span class="keyword">- </span><span class="default">$v1 </span><span class="keyword">) * </span><span class="default">6 </span><span class="keyword">* </span><span class="default">$vH </span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if ( ( </span><span class="default">2 </span><span class="keyword">* </span><span class="default">$vH </span><span class="keyword">) &lt; </span><span class="default">1 </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return ( </span><span class="default">$v2 </span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if ( ( </span><span class="default">3 </span><span class="keyword">* </span><span class="default">$vH </span><span class="keyword">) &lt; </span><span class="default">2 </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return ( </span><span class="default">$v1 </span><span class="keyword">+ ( </span><span class="default">$v2 </span><span class="keyword">- </span><span class="default">$v1 </span><span class="keyword">) * ( ( </span><span class="default">2 </span><span class="keyword">/ </span><span class="default">3 </span><span class="keyword">) - </span><span class="default">$vH </span><span class="keyword">) * </span><span class="default">6 </span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return ( </span><span class="default">$v1 </span><span class="keyword">)<br>}<br><br>function </span><span class="default">HSLtoRGB </span><span class="keyword">( </span><span class="default">$H</span><span class="keyword">, </span><span class="default">$S</span><span class="keyword">, </span><span class="default">$L </span><span class="keyword">)<br>{<br><br>&nbsp; &nbsp; if ( </span><span class="default">$S </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$R </span><span class="keyword">= </span><span class="default">$L </span><span class="keyword">* </span><span class="default">255</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$G </span><span class="keyword">= </span><span class="default">$L </span><span class="keyword">* </span><span class="default">255</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$B </span><span class="keyword">= </span><span class="default">$L </span><span class="keyword">* </span><span class="default">255</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">$L </span><span class="keyword">&lt; </span><span class="default">0.5 </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$var_2 </span><span class="keyword">= </span><span class="default">$L </span><span class="keyword">* ( </span><span class="default">1 </span><span class="keyword">+ </span><span class="default">$S </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$var_2 </span><span class="keyword">= ( </span><span class="default">$L </span><span class="keyword">+ </span><span class="default">$S </span><span class="keyword">) - ( </span><span class="default">$S </span><span class="keyword">* </span><span class="default">$L </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$var_1 </span><span class="keyword">= </span><span class="default">2 </span><span class="keyword">* </span><span class="default">$L </span><span class="keyword">- </span><span class="default">$var_2</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$R </span><span class="keyword">= </span><span class="default">255 </span><span class="keyword">* </span><span class="default">HuetoRGB</span><span class="keyword">( </span><span class="default">$var_1</span><span class="keyword">, </span><span class="default">$var_2</span><span class="keyword">, </span><span class="default">$H </span><span class="keyword">+ ( </span><span class="default">1 </span><span class="keyword">/ </span><span class="default">3 </span><span class="keyword">) );<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$G </span><span class="keyword">= </span><span class="default">255 </span><span class="keyword">* </span><span class="default">HuetoRGB</span><span class="keyword">( </span><span class="default">$var_1</span><span class="keyword">, </span><span class="default">$var_2</span><span class="keyword">, </span><span class="default">$H </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$B </span><span class="keyword">= </span><span class="default">255 </span><span class="keyword">* </span><span class="default">HuetoRGB</span><span class="keyword">( </span><span class="default">$var_1</span><span class="keyword">, </span><span class="default">$var_2</span><span class="keyword">, </span><span class="default">$H </span><span class="keyword">- ( </span><span class="default">1 </span><span class="keyword">/ </span><span class="default">3 </span><span class="keyword">) );<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return array( </span><span class="default">$R</span><span class="keyword">, </span><span class="default">$G</span><span class="keyword">, </span><span class="default">$B </span><span class="keyword">);<br><br>}<br><br>function </span><span class="default">distance </span><span class="keyword">( </span><span class="default">$R1</span><span class="keyword">, </span><span class="default">$G1</span><span class="keyword">, </span><span class="default">$B1</span><span class="keyword">, </span><span class="default">$R2</span><span class="keyword">, </span><span class="default">$G2</span><span class="keyword">, </span><span class="default">$B2 </span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">sqrt </span><span class="keyword">( ( </span><span class="default">$R1 </span><span class="keyword">- </span><span class="default">$R2 </span><span class="keyword">)*( </span><span class="default">$R1 </span><span class="keyword">- </span><span class="default">$R2 </span><span class="keyword">) + ( </span><span class="default">$G1 </span><span class="keyword">- </span><span class="default">$G2 </span><span class="keyword">)*( </span><span class="default">$G1 </span><span class="keyword">- </span><span class="default">$G2 </span><span class="keyword">) + ( </span><span class="default">$B1 </span><span class="keyword">- </span><span class="default">$B2 </span><span class="keyword">)*( </span><span class="default">$B1 </span><span class="keyword">- </span><span class="default">$B2 </span><span class="keyword">) );<br>&nbsp; &nbsp; return ( </span><span class="default">$result </span><span class="keyword">);<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->

  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from www.php.net/manual/en/ref.image.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 05:21:53 GMT -->

</body></html>