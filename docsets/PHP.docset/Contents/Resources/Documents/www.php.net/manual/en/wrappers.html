<html><!-- Mirrored from www.php.net/manual/en/wrappers.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 01:25:13 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Supported Protocols and Wrappers</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="wrappers.html">
 <link rel="shorturl" href="wrappers.html">
 <link rel="alternate" href="wrappers.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="langref.html">
 <link rel="prev" href="context.zip.html">
 <link rel="next" href="wrappers.file.html">

 <link rel="alternate" href="wrappers.html" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/wrappers.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/wrappers.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/wrappers.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/wrappers.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/wrappers.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/ro/wrappers.php" hreflang="ro">
 <link rel="alternate" href="https://www.php.net/manual/ru/wrappers.php" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/wrappers.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/wrappers.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0aba.css?t=1539771603&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2ecf.css?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedba57.css?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached3afa.css?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>


</head>
<body class="docs " style="">


<div class="headsup"><a href="https://www.php.net/conferences/index.php#id2021-09-08-1">Longhorn PHP 2021</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.attributes.html">Attributes</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="langref.html">Language Reference</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="wrappers" class="reference">
 <h1 class="title">Supported Protocols and Wrappers</h1>
 <div class="partintro">
  <p class="para">
   PHP comes with many built-in wrappers for various URL-style protocols
   for use with the filesystem functions such as <span class="function"><a href="function.fopen.html" class="function">fopen()</a></span>,
   <span class="function"><a href="function.copy.html" class="function">copy()</a></span>, <span class="function"><a href="function.file-exists.html" class="function">file_exists()</a></span> and
   <span class="function"><a href="function.filesize.html" class="function">filesize()</a></span>.
   In addition to these wrappers, it is possible to register custom wrappers
   using the <span class="function"><a href="function.stream-wrapper-register.html" class="function">stream_wrapper_register()</a></span> function.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    The URL syntax used to describe a wrapper only supports the
    <code class="literal">scheme://...</code> syntax. The <code class="literal">scheme:/</code>
    and <code class="literal">scheme:</code> syntaxes are not supported.
   </span>
  </p></blockquote>
 </div>
 
 







 







 







 







 







 







 







 







 







 







 







 







 
<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="wrappers.file.html">file://</a> — Accessing local filesystem</li><li><a href="wrappers.http.html">http://</a> — Accessing HTTP(s) URLs</li><li><a href="wrappers.ftp.html">ftp://</a> — Accessing FTP(s) URLs</li><li><a href="wrappers.php.html">php://</a> — Accessing various I/O streams</li><li><a href="wrappers.compression.html">zlib://</a> — Compression Streams</li><li><a href="wrappers.data.html">data://</a> — Data (RFC 2397)</li><li><a href="wrappers.glob.html">glob://</a> — Find pathnames matching pattern</li><li><a href="wrappers.phar.html">phar://</a> — PHP Archive</li><li><a href="wrappers.ssh2.html">ssh2://</a> — Secure Shell 2</li><li><a href="wrappers.rar.html">rar://</a> — RAR</li><li><a href="wrappers.audio.html">ogg://</a> — Audio streams</li><li><a href="wrappers.expect.html">expect://</a> — Process Interaction Streams</li></ul>
</div>

<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="121519">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2017-08-13 12:37"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121519">
<div class="phpcode"><code><span class="html">
If you want to filter incoming data through php://input use this:<br><br>file_get_contents("php://filter/read=string.strip_tags/resource=php://input");<br><br>I couldn't find any documentation to explain how to do this. All the examples I came across suggested that a full and actual URL had to be used (which didn't work for me).<br><br>This seems to work though.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="122253">  
  <a class="name">
  <strong class="user"><em>Hayley Watson</em></strong></a><div class="date" title="2018-01-10 11:56"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom122253">
<div class="phpcode"><code><span class="html">
Even though their names will be the same, you can have more than one //memory or //temp stream open concurrently; each time you fopen() such a stream, a NEW stream will be opened independently of the others.<br><br>This is hinted at by the fact you don't add any unique identifier to the path when creating such streams, but isn't said explicitly.<br><br><span class="default">&lt;?php<br><br>$hello </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">'php://memory'</span><span class="keyword">, </span><span class="string">'r+'</span><span class="keyword">); </span><span class="comment">// $hello, $php, $world are all different streams.<br></span><span class="default">$php&nbsp; </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">'php://memory'</span><span class="keyword">, </span><span class="string">'r+'</span><span class="keyword">);<br></span><span class="default">$world </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">'php://memory'</span><span class="keyword">, </span><span class="string">'r+'</span><span class="keyword">); </span><span class="comment">// They're not the same stream opened three times.<br><br></span><span class="default">fputs</span><span class="keyword">(</span><span class="default">$hello</span><span class="keyword">, </span><span class="string">"Hello "</span><span class="keyword">);<br></span><span class="default">fputs</span><span class="keyword">(</span><span class="default">$php</span><span class="keyword">, </span><span class="string">"PHP "</span><span class="keyword">);<br></span><span class="default">rewind</span><span class="keyword">(</span><span class="default">$php</span><span class="keyword">);<br></span><span class="default">fputs</span><span class="keyword">(</span><span class="default">$world</span><span class="keyword">, </span><span class="string">"World!"</span><span class="keyword">);<br></span><span class="default">rewind</span><span class="keyword">(</span><span class="default">$hello</span><span class="keyword">);<br></span><span class="default">rewind</span><span class="keyword">(</span><span class="default">$world</span><span class="keyword">);<br><br>echo </span><span class="string">'['</span><span class="keyword">, </span><span class="default">stream_get_contents</span><span class="keyword">(</span><span class="default">$hello</span><span class="keyword">), </span><span class="string">']['</span><span class="keyword">, </span><span class="default">stream_get_contents</span><span class="keyword">(</span><span class="default">$php</span><span class="keyword">), </span><span class="string">']['</span><span class="keyword">, </span><span class="default">stream_get_contents</span><span class="keyword">(</span><span class="default">$world</span><span class="keyword">), </span><span class="string">']'</span><span class="keyword">;<br></span><span class="comment">// If they were the same stream the output would be "[World!][World!][World!]".<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111570">  
  <a class="name">
  <strong class="user"><em>fabacrans__ at __nospamhotmail__ dot __com</em></strong></a><div class="date" title="2013-03-05 12:06"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom111570">
<div class="phpcode"><code><span class="html">
You can use "php://input" to accept and parse "PUT", "DELETE", etc. requests.<br><br><span class="default">&lt;?php<br></span><span class="comment">// Example to parse "PUT" requests <br></span><span class="default">parse_str</span><span class="keyword">(</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'php://input'</span><span class="keyword">), </span><span class="default">$_PUT</span><span class="keyword">);<br><br></span><span class="comment">// The result<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$_PUT</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>(very useful for Restful API)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75751">  
  <a class="name">
  <strong class="user"><em>sander at medicore dot nl</em></strong></a><div class="date" title="2007-06-14 04:25"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom75751">
<div class="phpcode"><code><span class="html">
to create a raw tcp listener system i use the following:<br><br>xinetd daemon with config like:<br>service test<br>{<br>&nbsp; &nbsp; &nbsp; &nbsp; disable&nbsp; &nbsp; &nbsp; = no<br>&nbsp; &nbsp; &nbsp; &nbsp; type&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; = UNLISTED<br>&nbsp; &nbsp; &nbsp; &nbsp; socket_type&nbsp; = stream<br>&nbsp; &nbsp; &nbsp; &nbsp; protocol&nbsp; &nbsp;&nbsp; = tcp<br>&nbsp; &nbsp; &nbsp; &nbsp; bind&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; = 127.0.0.1<br>&nbsp; &nbsp; &nbsp; &nbsp; port&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; = 12345<br>&nbsp; &nbsp; &nbsp; &nbsp; wait&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; = no<br>&nbsp; &nbsp; &nbsp; &nbsp; user&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; = apache<br>&nbsp; &nbsp; &nbsp; &nbsp; group&nbsp; &nbsp; &nbsp; &nbsp; = apache<br>&nbsp; &nbsp; &nbsp; &nbsp; instances&nbsp; &nbsp; = 10<br>&nbsp; &nbsp; &nbsp; &nbsp; server&nbsp; &nbsp; &nbsp;&nbsp; = /usr/local/bin/php<br>&nbsp; &nbsp; &nbsp; &nbsp; server_args&nbsp; = -n [your php file here]<br>&nbsp; &nbsp; &nbsp; &nbsp; only_from&nbsp; &nbsp; = 127.0.0.1 #gotta love the security#<br>&nbsp; &nbsp; &nbsp; &nbsp; log_type&nbsp; &nbsp;&nbsp; = FILE /var/log/phperrors.log<br>&nbsp; &nbsp; &nbsp; &nbsp; log_on_success += DURATION<br>}<br><br>now use fgets(STDIN) to read the input. Creates connections pretty quick, works like a charm.Writing can be done using the STDOUT, or just echo. Be aware that you're completely bypassing the webserver and thus certain variables will not be available.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="67950">  
  <a class="name">
  <strong class="user"><em>heitorsiller at uol dot com dot br</em></strong></a><div class="date" title="2006-07-07 07:55"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom67950">
<div class="phpcode"><code><span class="html">
For reading a XML stream, this will work just fine:<br><span class="default">&lt;?php<br><br>$arq </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'php://input'</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>Then you can parse the XML like this:<br><br><span class="default">&lt;?php<br><br>$xml </span><span class="keyword">= </span><span class="default">xml_parser_create</span><span class="keyword">();<br><br></span><span class="default">xml_parse_into_struct</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">, </span><span class="default">$arq</span><span class="keyword">, </span><span class="default">$vs</span><span class="keyword">);<br><br></span><span class="default">xml_parser_free</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br><br></span><span class="default">$data </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br><br>foreach(</span><span class="default">$vs </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">){<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$v</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">] == </span><span class="default">3 </span><span class="keyword">&amp;&amp; </span><span class="default">$v</span><span class="keyword">[</span><span class="string">'type'</span><span class="keyword">] == </span><span class="string">'complete'</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$data </span><span class="keyword">.= </span><span class="string">"\n"</span><span class="keyword">.</span><span class="default">$v</span><span class="keyword">[</span><span class="string">'tag'</span><span class="keyword">].</span><span class="string">" -&gt; "</span><span class="keyword">.</span><span class="default">$v</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">];<br>}<br><br>echo </span><span class="default">$data</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>PS.: This is particularly useful for receiving mobile originated (MO) SMS messages from cellular phone companies.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102269">  
  <a class="name">
  <strong class="user"><em>sebastian dot krebs at kingcrunch dot de</em></strong></a><div class="date" title="2011-02-04 04:49"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom102269">
<div class="phpcode"><code><span class="html">
The stream php://temp/maxmemory:$limit stores the data in memory unless the limit is reached. Then it will write the whole content the a temporary file and frees the memory. I didnt found a way to get at least some of the data back to memory.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69277">  
  <a class="name">
  <strong class="user"><em>ben dot johansen at gmail dot com</em></strong></a><div class="date" title="2006-08-29 11:02"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom69277">
<div class="phpcode"><code><span class="html">
Example of how to use the php://input to get raw post data<br><br>//read the raw data in<br>$roughHTTPPOST = file_get_contents("php://input"); <br>//parse it into vars<br>parse_str($roughHTTPPOST);<br><br>if you do readfile("php://input") you will get the length of the post data</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108529">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2012-05-04 07:00"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom108529">
<div class="phpcode"><code><span class="html">
For php://filter the /resource=foo part must come last. And foo needs no escaping at all.<br>php://filter/resource=foo/read=somefilter would try to open a file 'foo/read=somefilter' while php://filter/read=somefilter/resource=foo will open file 'foo' with the somefilter filter applied.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="42722">  
  <a class="name">
  <strong class="user"><em>aidan at php dot net</em></strong></a><div class="date" title="2004-05-27 03:34"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom42722">
<div class="phpcode"><code><span class="html">
The contants:<br><br>* STDIN<br>* STDOUT<br>* STDERR<br><br>Were introduced in PHP 4.3.0 and are synomous with the fopen('php://stdx') result resource.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109657">  
  <a class="name">
  <strong class="user"><em>php at rapsys dot eu</em></strong></a><div class="date" title="2012-08-06 02:00"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom109657">
<div class="phpcode"><code><span class="html">
Here is a snippet to read compressed raw post data without enabling global variables.<br><br>I needed it to read xml posted data submitted by ocs agent. The data was sent as Content-Type: application/x-compressed (zlib compressed data).<br><br>It seems related to an old bug which still seems broken :<br><a rel="nofollow" target="_blank">https://bugs.php.net/bug.php?id=49411</a><br><br>The important part is the default window set to 15 instead of -15.<br><br>Code snippet<br><span class="default">&lt;?php<br>$data </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br></span><span class="default">$fh </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">'php://input'</span><span class="keyword">, </span><span class="string">'rb'</span><span class="keyword">);<br></span><span class="default">stream_filter_append</span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">, </span><span class="string">'zlib.inflate'</span><span class="keyword">, </span><span class="default">STREAM_FILTER_READ</span><span class="keyword">, array(</span><span class="string">'window'</span><span class="keyword">=&gt;</span><span class="default">15</span><span class="keyword">));<br>while(!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">)) {<br>&nbsp; &nbsp; </span><span class="default">$data </span><span class="keyword">.= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">, </span><span class="default">8192</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77169">  
  <a class="name">
  <strong class="user"><em>jerry at gii dot co dot jp</em></strong></a><div class="date" title="2007-08-17 10:11"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom77169">
<div class="phpcode"><code><span class="html">
Not only are STDIN, STDOUT, and STDERR only allowed for CLI programs, but they are not allowed for programs that are read from STDIN. That can confuse you if you try to type in a simple test program.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83220">  
  <a class="name">
  <strong class="user"><em>gjaman at gmail dot com</em></strong></a><div class="date" title="2008-05-15 02:15"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom83220">
<div class="phpcode"><code><span class="html">
You can decompress (gzip) a input stream by combining wrappers:<br><br>eg:&nbsp; $x = file_get_contents("compress.zlib://php://input"); <br><br>I used this method to decompress a gzip stream that was pushed to my webserver</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69255">  
  <a class="name">
  <strong class="user"><em>ben dot johansen at gmail dot com</em></strong></a><div class="date" title="2006-08-29 12:33"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom69255">
<div class="phpcode"><code><span class="html">
In trying to do AJAX with PHP and Javascript, I came upon an issue where the POST argument from the following javascript could not be read in via PHP 5 using the $_REQUEST or $_POST. I finally figured out how to read in the raw data using the php://input directive.<br>&nbsp; &nbsp; <br>Javascript code:<br>=============<br>&nbsp; &nbsp; &nbsp; //create request instance&nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; xhttp = new XMLHttpRequest();<br>&nbsp; &nbsp; &nbsp; // set the event handler<br>&nbsp; &nbsp; &nbsp; xhttp.onreadystatechange = serviceReturn;<br>&nbsp; &nbsp; &nbsp; // prep the call, http method=POST, true=asynchronous call<br>&nbsp; &nbsp; &nbsp; var Args = 'number='+NbrValue;<br>&nbsp; &nbsp; &nbsp; xhttp.open("POST", "<a rel="nofollow" target="_blank">http://</a><span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'SERVER_NAME'</span><span class="keyword">] </span><span class="default">?&gt;</span>/webservices/ws_service.php", true);<br>&nbsp; &nbsp; &nbsp; // send the call with args<br>&nbsp; &nbsp; &nbsp; xhttp.send(Args);<br><br>PHP Code:<br>&nbsp; &nbsp; //read the raw data in<br>&nbsp; &nbsp; $roughHTTPPOST = file_get_contents("php://input"); <br>&nbsp; &nbsp; //parse it into vars<br>&nbsp; &nbsp; parse_str($roughHTTPPOST);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="35009">  
  <a class="name">
  <strong class="user"><em>sam at bigwig dot net</em></strong></a><div class="date" title="2003-08-15 08:02"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom35009">
<div class="phpcode"><code><span class="html">
[ Editor's Note: There is a way to know.&nbsp; All response headers (from both the final responding server and intermediate redirecters) can be found in $http_response_header or stream_get_meta_data() as described above. ]
<br>
<br>If you open an HTTP url and the server issues a Location style redirect, the redirected contents will be read but you can't find out that this has happened.
<br>
<br>So if you then parse the returned html and try and rationalise relative URLs you could get it wrong.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112027">  
  <a class="name">
  <strong class="user"><em>Justin Megawarne</em></strong></a><div class="date" title="2013-04-23 04:42"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom112027">
<div class="phpcode"><code><span class="html">
If my understanding of the implementing code is correct, every time you open a php://memory stream, you get new storage allocated. That is to say, php://memory isn't a shared bank of memory.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="70739">  
  <a class="name">
  <strong class="user"><em>ben dot johansen at gmail dot com</em></strong></a><div class="date" title="2006-10-25 02:57"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom70739">
<div class="phpcode"><code><span class="html">
followup:<br><br>I found that if I added this line to the AJAX call, the values would show up in the $_POST<br><br>xhttp.setRequestHeader('Content-Type',<br>'application/x-www-form-urlencoded');</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115688">  
  <a class="name">
  <strong class="user"><em>vibhavsinha91 at gmail dot com</em></strong></a><div class="date" title="2014-09-08 10:35"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom115688">
<div class="phpcode"><code><span class="html">
While writing to error stream, error_log() function comes as a shorthand to writing to php://stderr . This function also allows writing to web server log when running through a web server such as apache.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108918">  
  <a class="name">
  <strong class="user"><em>aaron dot mason+php at thats-too-much dot info</em></strong></a><div class="date" title="2012-06-05 01:46"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom108918">
<div class="phpcode"><code><span class="html">
Be aware of code injection, folks - like anything else you take from the user, SANITISE IT FIRST.&nbsp; This cannot be stressed enough - if I had a dollar for each time I saw code where form input was taken and directly used (by myself as well, I've been stupid too) I'd probably own PHP.&nbsp; While using data from a form in a URL wrapper is asking for trouble, you can greatly minimise the trouble by making sure your inputs are sane and not likely to provide an opening for the LulzSec of the world to cause havoc.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105029">  
  <a class="name">
  <strong class="user"><em>leonid at shagabutdinov dot com</em></strong></a><div class="date" title="2011-07-22 09:45"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom105029">
<div class="phpcode"><code><span class="html">
For https for windows enable this extension:<br><br>extension=php_openssl.dll</span>
</code></div>
  </div>
 </div>
  <div class="note" id="52272">  
  <a class="name">
  <strong class="user"><em>chris at free-source dot com</em></strong></a><div class="date" title="2005-04-26 12:52"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom52272">
<div class="phpcode"><code><span class="html">
If you're looking for a unix based smb wrapper there isn't one built in,&nbsp; but I've had luck with <a rel="nofollow" target="_blank">http://www.zevils.com/cgi-bin/viewcvs.cgi/libsmbclient-php/</a> (tarball link at the end).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="59151">  
  <a class="name">
  <strong class="user"><em>nyvsld at gmail dot com</em></strong></a><div class="date" title="2005-11-27 10:28"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom59151">
<div class="phpcode"><code><span class="html">
php://stdin supports fseek() and fstat() function call, <br>while php://input doesn't.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="37842">  
  <a class="name">
  <strong class="user"><em>lupti at yahoo dot com</em></strong></a><div class="date" title="2003-11-29 02:04"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom37842">
<div class="phpcode"><code><span class="html">
I find using file_get_contents with php://input is very handy and efficient. Here is the code:<br><br>$request = "";<br>$request = file_get_contents("php://input");<br><br>I don't need to declare the URL filr string as "r". It automatically handles open the file with read.<br><br>I can then use this $request string to your XMLparser as data.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="45947">  
  <a class="name">
  <strong class="user"><em>nargy at yahoo dot com</em></strong></a><div class="date" title="2004-09-24 03:16"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom45947">
<div class="phpcode"><code><span class="html">
When opening php://output in append mode you get an error, the way to do it:<br>$fp=fopen("php://output","w");<br>fwrite($fp,"Hello, world !&lt;BR&gt;\n");<br>fclose($fp);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="118742">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2016-01-28 08:58"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom118742">
<div class="phpcode"><code><span class="html">
Note that STDIN and similar are defined only in CLI</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114380">  
  <a class="name">
  <strong class="user"><em>oliver at codeinline dot com</em></strong></a><div class="date" title="2014-02-13 07:14"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom114380">
<div class="phpcode"><code><span class="html">
A useful way to handle large file uploads is to do something like:<br><br>copy(("php://input"),$tmpfile);<br><br>as this avoids using lots of memory just to buffer the file content.<br><br>The correct mime type for this should be "application/octet-stream" however if you set this or any other recognised mime type other than "multipart/form-data" on your POST then $HTTP_RAW_POST_DATA is populated and the memory is consumed anyway. <br><br>Setting the mime type to "multipart/form-data" raises “PHP Warning:&nbsp; Missing boundary in multipart/form-data POST data in Unknown on line 0” however it seems to work without a problem.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="125392">  
  <a class="name">
  <strong class="user"><em>kazdotkanso at geeemail dot com</em></strong></a><div class="date" title="2020-09-25 06:28"><strong>11 months ago</strong></div>
  <div class="text" id="Hcom125392">
<div class="phpcode"><code><span class="html">
The php://fd/ wrapper is only supported in the cli tool.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="122563">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2018-03-29 06:02"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom122563">
<div class="phpcode"><code><span class="html">
Be forewarned:<br><br>the file:// protocol used in file_get_contents is used as the default for "any unrecognized protocol." Thus:<br><br>aldfjadlfadfladfl://whatever<br><br>will deliver the same as <br><br>file://whatever</span>
</code></div>
  </div>
 </div>
  <div class="note" id="118262">  
  <a class="name">
  <strong class="user"><em>ohcc at 163 dot com</em></strong></a><div class="date" title="2015-11-05 06:45"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom118262">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="comment">//enable $HTTP_RAW_POST_DATA when necessary<br>&nbsp; &nbsp; </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'always_populate_raw_post_data'</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$HTTP_RAW_POST_DATA </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'php://input'</span><span class="keyword">);<br>&nbsp; &nbsp; echo </span><span class="default">$HTTP_RAW_POST_DATA</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112090">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2013-05-01 09:17"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom112090">
<div class="phpcode"><code><span class="html">
In PHP 5.4+ you can read multipart data via php://input if you set enable_post_data_reading to Off. <br><br>Of course if you set it to off, the $_POST and $_FILES superglobals won't be populated at all. It's entirely up to you to parse the data now.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112334">  
  <a class="name">
  <strong class="user"><em>dave at 4mation dot com dot au</em></strong></a><div class="date" title="2013-06-03 04:46"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom112334">
<div class="phpcode"><code><span class="html">
The use of php://temp/maxmemory as a stream counts towards the memory usage of the script; you are not specifying a new memory pool by using this type of stream.<br>As noted in the documentation however, this stream type will start to write to a file after the specified maxmemory limit is exceeded. This file buffer is NOT observed by the memory limit.<br>This is handy if you want your script to have a reasonably small memory limit (eg 32MB) but but still be able to handle a huge amount of data in a stream (eg 256MB)<br><br>The only works if you use stream functions like fputs(); if you use $buffer .= 'string'; or $buffer = $buffer . 'string'; you're calling your stream data back into PHP and this will hit the limiter.<br><br>As a practical example:<br><br><span class="default">&lt;?php<br></span><span class="comment">// 0.5MB memory limit<br></span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'memory_limit'</span><span class="keyword">, </span><span class="string">'0.5M'</span><span class="keyword">);<br></span><span class="comment">// 2MB stream limit<br></span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">'php://temp/maxmemory:1048576'</span><span class="keyword">, </span><span class="string">'r+'</span><span class="keyword">);<br></span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br></span><span class="comment">// Attempt to write 1MB to the stream<br></span><span class="keyword">while (</span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">1</span><span class="keyword">*</span><span class="default">1024</span><span class="keyword">*</span><span class="default">1024</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">fputs</span><span class="keyword">(</span><span class="default">$buffer</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$x</span><span class="keyword">++;<br>}<br>echo </span><span class="string">"This will never be displayed"</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>However, change fopen to use php://temp/maxmemory:1 (one byte, rather than one megabyte) and it will begin writing to the unlimited file stream immediately, avoiding memory limit errors.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="116170">  
  <a class="name">
  <strong class="user"><em>nguyenanthuan at gmail dot com</em></strong></a><div class="date" title="2014-11-18 11:05"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom116170">
<div class="phpcode"><code><span class="html">
Each stream pointer to php://memory and php://temp has its own memory allocation, so you can open many stream pointers to store your separated values.<br><br><span class="default">&lt;?php<br>$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"php://temp"</span><span class="keyword">, </span><span class="string">"r+"</span><span class="keyword">);<br></span><span class="default">$fp2 </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"php://temp"</span><span class="keyword">, </span><span class="string">"r+"</span><span class="keyword">);<br><br></span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="string">"line1\n"</span><span class="keyword">);<br></span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp2</span><span class="keyword">, </span><span class="string">"line4\n"</span><span class="keyword">);<br></span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="string">"line2\n"</span><span class="keyword">);<br></span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp2</span><span class="keyword">, </span><span class="string">"line5\n"</span><span class="keyword">);<br></span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="string">"line3\n"</span><span class="keyword">);<br></span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp2</span><span class="keyword">, </span><span class="string">"line6\n"</span><span class="keyword">);<br><br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">memory_get_usage</span><span class="keyword">());<br><br></span><span class="default">rewind</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br>while(!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">)) {<br>&nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">1024</span><span class="keyword">));<br>}<br></span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">memory_get_usage</span><span class="keyword">());<br><br></span><span class="default">rewind</span><span class="keyword">(</span><span class="default">$fp2</span><span class="keyword">);<br>while(!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp2</span><span class="keyword">)) {<br>&nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fp2</span><span class="keyword">, </span><span class="default">1024</span><span class="keyword">));<br>}<br></span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp2</span><span class="keyword">);<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">memory_get_usage</span><span class="keyword">());<br></span><span class="default">?&gt;<br></span><br>Closing their stream handles will also free the allocated memory.<br><br>php://memory stream type is MEMORY, while php://temp stream type is STDIO FILE*.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->

  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from www.php.net/manual/en/wrappers.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 01:25:18 GMT -->

</body></html>