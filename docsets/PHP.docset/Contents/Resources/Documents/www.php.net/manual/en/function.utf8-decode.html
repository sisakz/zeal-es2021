<html><!-- Mirrored from www.php.net/manual/en/function.utf8-decode.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:46:02 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>utf8_decode</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.utf8-decode.html">
 <link rel="shorturl" href="https://www.php.net/utf8-decode">
 <link rel="alternate" href="https://www.php.net/utf8-decode" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.xml.html">
 <link rel="prev" href="ref.xml.html">
 <link rel="next" href="function.utf8-encode.html">

 <link rel="alternate" href="function.utf8-decode.html" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.utf8-decode.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.utf8-decode.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.utf8-decode.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/function.utf8-decode.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.utf8-decode.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/ro/function.utf8-decode.php" hreflang="ro">
 <link rel="alternate" href="https://www.php.net/manual/ru/function.utf8-decode.php" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/function.utf8-decode.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.utf8-decode.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0aba.css?t=1539771603&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2ecf.css?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedba57.css?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached3afa.css?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>


</head>
<body class="docs " style="">


<div class="headsup"><a href="https://www.php.net/conferences/index.php#id2021-09-08-1">Longhorn PHP 2021</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.attributes.html">Attributes</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.xml.html">XML Manipulation</a></li>      <li><a href="book.xml.html">XML Parser</a></li>      <li><a href="ref.xml.html">XML Parser Functions</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="function.utf8-decode" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">utf8_decode</h1> 
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">utf8_decode</span> — <span class="dc-title">
   Converts a string with ISO-8859-1 characters encoded with UTF-8
   to single-byte ISO-8859-1
  </span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.utf8-decode-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>utf8_decode</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>): <span class="type">string</span></div>

  <p class="para rdfs-comment">
   This function converts the string <code class="parameter">string</code> from the
   <code class="literal">UTF-8</code> encoding to <code class="literal">ISO-8859-1</code>. Bytes
   in the string which are not valid <code class="literal">UTF-8</code>, and
   <code class="literal">UTF-8</code> characters which do not exist in
   <code class="literal">ISO-8859-1</code> (that is, characters above
   <code class="literal">U+00FF</code>) are replaced with <code class="literal">?</code>.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    Many web pages marked as using the <code class="literal">ISO-8859-1</code> character
    encoding actually use the similar <code class="literal">Windows-1252</code> encoding,
    and web browsers will interpret <code class="literal">ISO-8859-1</code> web pages as
    <code class="literal">Windows-1252</code>. <code class="literal">Windows-1252</code> features
    additional printable characters, such as the Euro sign
    (<code class="literal">€</code>) and curly quotes (<code class="literal">“</code>
    <code class="literal">”</code>), instead of certain <code class="literal">ISO-8859-1</code>
    control characters. This function will not convert such
    <code class="literal">Windows-1252</code> characters correctly. Use a different
    function if <code class="literal">Windows-1252</code> conversion is required.
   </p>
  <p></p></blockquote>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.utf8-decode-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>
    
     <dt>
<code class="parameter">string</code></dt>

     <dd>

      <p class="para">
       A UTF-8 encoded string.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.utf8-decode-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the ISO-8859-1 translation of <code class="parameter">string</code>.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.utf8-decode-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>7.2.0</td>
       <td>
        This function has been moved to the core of PHP, and therefore lifting the requirement 
        on the XML extension for this function to be available.
       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.utf8-decode-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.utf8-encode.html" class="function" rel="rdfs-seeAlso">utf8_encode()</a> - Encodes an ISO-8859-1 string to UTF-8</span> - Performs the reverse conversion</li>
    <li class="member"><span class="function"><a href="function.mb-convert-encoding.html" class="function" rel="rdfs-seeAlso">mb_convert_encoding()</a> - Convert character encoding</span> - Converts between various character encodings, including UTF-8, ISO-8859-1 and Windows-1252</li>
    <li class="member"><span class="function"><a href="function.iconv.html" class="function" rel="rdfs-seeAlso">iconv()</a> - Convert string to requested character encoding</span> - Converts between various character encodings</li>
    <li class="member"><span class="function"><a href="function.recode-string.html" class="function" rel="rdfs-seeAlso">recode_string()</a> - Recode a string according to a recode request</span> - Converts between various character encodings</li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="88488">  
  <a class="name">
  <strong class="user"><em>info at vanylla dot it</em></strong></a><div class="date" title="2009-01-26 12:21"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom88488">
<div class="phpcode"><code><span class="html">
IMPORTANT: when converting UTF8 data that contains the EURO sign DON'T USE utf_decode function.<br><br>utf_decode converts the data into ISO-8859-1 charset. But ISO-8859-1 charset does not contain the EURO sign, therefor the EURO sign will be converted into a question mark character '?'<br><br>In order to convert properly UTF8 data with EURO sign you must use:<br><br>iconv("UTF-8", "CP1252", $data)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104907">  
  <a class="name">
  <strong class="user"><em>deceze at gmail dot com</em></strong></a><div class="date" title="2011-07-14 07:01"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom104907">
<div class="phpcode"><code><span class="html">
Please note that utf8_decode simply converts a string encoded in UTF-8 to ISO-8859-1. A more appropriate name for it would be utf8_to_iso88591. If your text is already encoded in ISO-8859-1, you do not need this function. If you don't want to use ISO-8859-1, you do not need this function.<br><br>Note that UTF-8 can represent many more characters than ISO-8859-1. Trying to convert a UTF-8 string that contains characters that can't be represented in ISO-8859-1 to ISO-8859-1 will garble your text and/or cause characters to go missing. Trying to convert text that is not encoded in UTF-8 using this function will most likely garble the text.<br><br>If you need to convert any text from any encoding to any other encoding, look at iconv() instead.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="39517">  
  <a class="name">
  <strong class="user"><em>Aidan Kehoe &lt;php-manual at parhasard dot net&gt;</em></strong></a><div class="date" title="2004-01-31 05:35"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom39517">
<div class="phpcode"><code><span class="html">
The fastest way I've found to check if something is valid UTF-8 is <br><span class="default">&lt;?php <br></span><span class="keyword">if (</span><span class="default">iconv</span><span class="keyword">(</span><span class="string">'UTF-8'</span><span class="keyword">, </span><span class="string">'UTF-8'</span><span class="keyword">, </span><span class="default">$input</span><span class="keyword">) != </span><span class="default">$input</span><span class="keyword">) { <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/* It's not UTF-8--for me, it's probably CP1252, the Windows<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; version of Latin 1, with directed quotation marks and<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; the Euro sign.&nbsp; */<br></span><span class="keyword">}<br> </span><span class="default">?&gt;</span>. <br>The iconv() C library fails if it's told a string is UTF-8 and it isn't; the PHP one doesn't, it just returns the conversion up to the point of failure, so you have to compare the result to the input to find out if the conversion succeeded.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110494">  
  <a class="name">
  <strong class="user"><em>christoffer</em></strong></a><div class="date" title="2012-10-29 10:35"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom110494">
<div class="phpcode"><code><span class="html">
The preferred way to use this on an array would be with the built in PHP function "array_map()", as for example:<br>$array = array_map("utf8_decode", $array);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104379">  
  <a class="name">
  <strong class="user"><em>gabriel arobase gabsoftware dot com</em></strong></a><div class="date" title="2011-06-12 08:41"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom104379">
<div class="phpcode"><code><span class="html">
If you want to retrieve some UTF-8 data from your database, you don't need utf8_decode().<br><br>Simply do the following query before any SELECT :<br><br>$result = mysql_query("SET NAMES utf8");</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121290">  
  <a class="name">
  <strong class="user"><em>Aleksandr</em></strong></a><div class="date" title="2017-06-30 02:46"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121290">
<div class="phpcode"><code><span class="html">
In addition to note by yannikh at gmeil dot com, another way to decode strings with non-latin chars from unix console like<br><br>C=RU, L=\xD0\x9C\xD0\xBE\xD1\x81\xD0\xBA\xD0\xB2\xD0\xB0,<br><br><span class="default">&lt;?php preg_replace_callback</span><span class="keyword">(</span><span class="string">'/\\\\x([0-9A-F]{2})/'</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">){ return </span><span class="default">pack</span><span class="keyword">(</span><span class="string">'H*'</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]); }, </span><span class="default">$str</span><span class="keyword">); </span><span class="default">?&gt;<br></span><br>The code above will output:<br>C=RU, L=Москва,</span>
</code></div>
  </div>
 </div>
  <div class="note" id="81599">  
  <a class="name">
  <strong class="user"><em>lukasz dot mlodzik at gmail dot com</em></strong></a><div class="date" title="2008-03-05 04:46"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom81599">
<div class="phpcode"><code><span class="html">
Update to MARC13 function utf2iso()<br>I'm using it to handle AJAX POST calls. <br>Despite using <br>http.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded'; charset='utf-8'); <br>it still code Polish letters using UTF-16<br><br>This is only for Polish letters:<br> <br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">utf16_2_utf8 </span><span class="keyword">(</span><span class="default">$nowytekst</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0104'</span><span class="keyword">,</span><span class="string">'Ą'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ą<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0106'</span><span class="keyword">,</span><span class="string">'Ć'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ć<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0118'</span><span class="keyword">,</span><span class="string">'Ę'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ę<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0141'</span><span class="keyword">,</span><span class="string">'Ł'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ł<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0143'</span><span class="keyword">,</span><span class="string">'Ń'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ń<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u00D3'</span><span class="keyword">,</span><span class="string">'Ó'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ó<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u015A'</span><span class="keyword">,</span><span class="string">'Ś'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ś<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0179'</span><span class="keyword">,</span><span class="string">'Ź'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ź<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u017B'</span><span class="keyword">,</span><span class="string">'Ż'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ż<br>&nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0105'</span><span class="keyword">,</span><span class="string">'ą'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ą<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0107'</span><span class="keyword">,</span><span class="string">'ć'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ć<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0119'</span><span class="keyword">,</span><span class="string">'ę'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ę<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0142'</span><span class="keyword">,</span><span class="string">'ł'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ł<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u0144'</span><span class="keyword">,</span><span class="string">'ń'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ń<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u00F3'</span><span class="keyword">,</span><span class="string">'ó'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ó<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u015B'</span><span class="keyword">,</span><span class="string">'ś'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ś<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u017A'</span><span class="keyword">,</span><span class="string">'ź'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ź<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%u017C'</span><span class="keyword">,</span><span class="string">'ż'</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ż<br>&nbsp;&nbsp; </span><span class="keyword">return (</span><span class="default">$nowytekst</span><span class="keyword">);<br>&nbsp;&nbsp; }&nbsp; &nbsp; <br></span><span class="default">?&gt;<br></span><br>Everything goes smooth, but it doesn't change '%u00D3','Ó' and '%u00F3','ó'. I dont have idea what to do with that.<br><br>Remember! File must be saved in UTF-8 coding.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="119280">  
  <a class="name">
  <strong class="user"><em>kode68</em></strong></a><div class="date" title="2016-05-02 06:09"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom119280">
<div class="phpcode"><code><span class="html">
Update Answer from okx dot oliver dot koenig at gmail dot com for PHP 5.6 since e/ modifier is depreciated<br><br>// This finally helped me to do the job, thanks to Blackbit, had to modify deprecated ereg:<br>// original comment: "Squirrelmail contains a nice function in the sources to convert unicode to entities:"<br><br>function charset_decode_utf_8($string)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; /* Only do the slow convert if there are 8-bit characters */<br>&nbsp; &nbsp; &nbsp; &nbsp; if ( !preg_match("/[\200-\237]/", $string) &amp;&amp; !preg_match("/[\241-\377]/", $string) )<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $string;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; // decode three byte unicode characters<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $string = preg_replace_callback("/([\340-\357])([\200-\277])([\200-\277])/",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; create_function ('$matches', 'return \'&amp;#\'.((ord($matches[1])-224)*4096+(ord($matches[2])-128)*64+(ord($matches[3])-128)).\';\';'),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $string);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; // decode two byte unicode characters<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $string = preg_replace_callback("/([\300-\337])([\200-\277])/",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; create_function ('$matches', 'return \'&amp;#\'.((ord($matches[1])-192)*64+(ord($matches[2])-128)).\';\';'),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $string);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return $string;<br>&nbsp; &nbsp; }<br><br>Enjoy</span>
</code></div>
  </div>
 </div>
  <div class="note" id="49185">  
  <a class="name">
  <strong class="user"><em>rasmus at flajm dot se</em></strong></a><div class="date" title="2005-01-19 02:57"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom49185">
<div class="phpcode"><code><span class="html">
If you don't have the multibyte extension installed, here's a function to decode UTF-16 encoded strings. It support both BOM-less and BOM'ed strings, (big- and little-endian byte order.)<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * Decode UTF-16 encoded strings.<br> * <br> * Can handle both BOM'ed data and un-BOM'ed data. <br> * Assumes Big-Endian byte order if no BOM is available.<br> * <br> * @param&nbsp;&nbsp; string&nbsp; $str&nbsp; UTF-16 encoded data to decode.<br> * @return&nbsp; string&nbsp; UTF-8 / ISO encoded data.<br> * @access&nbsp; public<br> * @version 0.1 / 2005-01-19<br> * @author&nbsp; Rasmus Andersson {@link <a rel="nofollow" target="_blank">http://rasmusandersson.se/}</a><br> * @package Groupies<br> */<br></span><span class="keyword">function </span><span class="default">utf16_decode</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">) {<br>&nbsp; &nbsp; if( </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) &lt; </span><span class="default">2 </span><span class="keyword">) return </span><span class="default">$str</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$bom_be </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$c0 </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">});<br>&nbsp; &nbsp; </span><span class="default">$c1 </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">1</span><span class="keyword">});<br>&nbsp; &nbsp; if( </span><span class="default">$c0 </span><span class="keyword">== </span><span class="default">0xfe </span><span class="keyword">&amp;&amp; </span><span class="default">$c1 </span><span class="keyword">== </span><span class="default">0xff </span><span class="keyword">) { </span><span class="default">$str </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">); }<br>&nbsp; &nbsp; elseif( </span><span class="default">$c0 </span><span class="keyword">== </span><span class="default">0xff </span><span class="keyword">&amp;&amp; </span><span class="default">$c1 </span><span class="keyword">== </span><span class="default">0xfe </span><span class="keyword">) { </span><span class="default">$str </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">); </span><span class="default">$bom_be </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">; }<br>&nbsp; &nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$newstr </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$len</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">+=</span><span class="default">2</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">$bom_be </span><span class="keyword">) { </span><span class="default">$val </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">})&nbsp;&nbsp; &lt;&lt; </span><span class="default">4</span><span class="keyword">; </span><span class="default">$val </span><span class="keyword">+= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">}); }<br>&nbsp; &nbsp; &nbsp; &nbsp; else {&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$val </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">}) &lt;&lt; </span><span class="default">4</span><span class="keyword">; </span><span class="default">$val </span><span class="keyword">+= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">}); }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$newstr </span><span class="keyword">.= (</span><span class="default">$val </span><span class="keyword">== </span><span class="default">0x228</span><span class="keyword">) ? </span><span class="string">"\n" </span><span class="keyword">: </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$newstr</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="116271">  
  <a class="name">
  <strong class="user"><em>sashott at gmail dot com</em></strong></a><div class="date" title="2014-12-04 11:57"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom116271">
<div class="phpcode"><code><span class="html">
Use of utf8_decode was not enough for me by get page content from another site. Problem appear by different alphabet from standard latin. As example some chars (corresponding to HTML codes &amp;bdquo; , &amp;nbsp; and others) are converted to "?" or "xA0" (hex value). You need to make some conversion before execute utf8_decode. And you can not replace simple, that they can be part of 2 bytes code for a char (UTF-8 use 2 bytes). Next is for cyrillic alphabet, but for other must be very close.<br><br>function convertMethod($text){<br>&nbsp; &nbsp; //Problem is that utf8_decode convert HTML chars for &amp;bdquo; and other to ? or &amp;nbsp; to \xA0. And you can not replace, that they are in some char bytes and you broke cyrillic (or other alphabet) chars.<br>&nbsp; &nbsp; $problem_enc=array(<br>&nbsp; &nbsp; &nbsp; &nbsp; 'euro',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'sbquo',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'bdquo',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'hellip',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'dagger',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'Dagger',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'permil',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'lsaquo',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'lsquo',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'rsquo',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'ldquo',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'rdquo',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'bull',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'ndash',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'mdash',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'trade',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'rsquo',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'brvbar',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'copy',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'laquo',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'reg',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'plusmn',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'micro',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'para',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'middot',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'raquo',<br>&nbsp; &nbsp; &nbsp; &nbsp; 'nbsp'<br>&nbsp; &nbsp; );<br>&nbsp; &nbsp; $text=mb_convert_encoding($text,'HTML-ENTITIES','UTF-8');<br>&nbsp; &nbsp; $text=preg_replace('#(?&lt;!\&amp;ETH;)\&amp;('.implode('|',$problem_enc).');#s','--amp{$1}',$text);<br>&nbsp; &nbsp; $text=mb_convert_encoding($text,'UTF-8','HTML-ENTITIES');<br>&nbsp; &nbsp; $text=utf8_decode($text);<br>&nbsp; &nbsp; $text=mb_convert_encoding($text,'HTML-ENTITIES','UTF-8');<br>&nbsp; &nbsp; $text=preg_replace('#\-\-amp\{([^\}]+)\}#su','&amp;$1;',$text);<br>&nbsp; &nbsp; $text=mb_convert_encoding($text,'UTF-8','HTML-ENTITIES');<br>&nbsp; &nbsp; return $text;<br>}<br><br>If this don't work, try to set "die($text);" on some places to look, what is happen to this row. Is better to test with long text. It is very possible to broke other alphabet character. In this case, it is very possible, that for you alphabet set "&amp;ETH;" is not the right one. You need to set "die($text);" after this preg_replace and look HTML code for character before set "--amp".</span>
</code></div>
  </div>
 </div>
  <div class="note" id="116671">  
  <a class="name">
  <strong class="user"><em>okx dot oliver dot koenig at gmail dot com</em></strong></a><div class="date" title="2015-02-08 11:48"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom116671">
<div class="phpcode"><code><span class="html">
// This finally helped me to do the job, thanks to Blackbit, had to modify deprecated ereg:<br>// original comment: "Squirrelmail contains a nice function in the sources to convert unicode to entities:"<br><br>function charset_decode_utf_8 ($string) {<br>&nbsp; &nbsp; /* Only do the slow convert if there are 8-bit characters */<br>&nbsp; &nbsp; /* avoid using 0xA0 (\240) in ereg ranges. RH73 does not like that */<br>&nbsp; &nbsp; if (!preg_match("/[\200-\237]/", $string)<br>&nbsp; &nbsp;&nbsp; &amp;&amp; !preg_match("/[\241-\377]/", $string)<br>&nbsp; &nbsp; ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return $string;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; // decode three byte unicode characters<br>&nbsp; &nbsp; $string = preg_replace("/([\340-\357])([\200-\277])([\200-\277])/e",<br>&nbsp; &nbsp; &nbsp; &nbsp; "'&amp;#'.((ord('\\1')-224)*4096 + (ord('\\2')-128)*64 + (ord('\\3')-128)).';'",<br>&nbsp; &nbsp; &nbsp; &nbsp; $string<br>&nbsp; &nbsp; );<br><br>&nbsp; &nbsp; // decode two byte unicode characters<br>&nbsp; &nbsp; $string = preg_replace("/([\300-\337])([\200-\277])/e",<br>&nbsp; &nbsp; &nbsp; &nbsp; "'&amp;#'.((ord('\\1')-192)*64+(ord('\\2')-128)).';'",<br>&nbsp; &nbsp; &nbsp; &nbsp; $string<br>&nbsp; &nbsp; );<br><br>&nbsp; &nbsp; return $string;<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="72978">  
  <a class="name">
  <strong class="user"><em>sam</em></strong></a><div class="date" title="2007-02-06 08:20"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom72978">
<div class="phpcode"><code><span class="html">
In addition to yannikh's note, to convert a hex utf8 string<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">echo </span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="string">"\x61\xc3\xb6\x61"</span><span class="keyword">);<br></span><span class="comment">// works as expected<br><br></span><span class="default">$abc</span><span class="keyword">=</span><span class="string">"61c3b661"</span><span class="keyword">;<br></span><span class="default">$newstr </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br></span><span class="default">$l </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$abc</span><span class="keyword">);<br>for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$l</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">+=</span><span class="default">2</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$newstr </span><span class="keyword">.= </span><span class="string">"\x"</span><span class="keyword">.</span><span class="default">$abc</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="default">$abc</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">];<br>}<br>echo </span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$newstr</span><span class="keyword">);<br></span><span class="comment">// or varieties&nbsp; of "\x": "\\x" etc does NOT output what you want<br><br></span><span class="keyword">echo </span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">pack</span><span class="keyword">(</span><span class="string">'H*'</span><span class="keyword">,</span><span class="default">$abc</span><span class="keyword">));<br></span><span class="comment">// this outputs the correct string, like the first line.<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85034">  
  <a class="name">
  <strong class="user"><em>Blackbit</em></strong></a><div class="date" title="2008-08-12 04:40"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom85034">
<div class="phpcode"><code><span class="html">
Squirrelmail contains a nice function in the sources to convert unicode to entities:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">charset_decode_utf_8 </span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; </span><span class="comment">/* Only do the slow convert if there are 8-bit characters */
<br>&nbsp; &nbsp; /* avoid using 0xA0 (\240) in ereg ranges. RH73 does not like that */
<br>&nbsp; &nbsp; </span><span class="keyword">if (! </span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"[\200-\237]"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">) and ! </span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"[\241-\377]"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">))
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$string</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; </span><span class="comment">// decode three byte unicode characters
<br>&nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/([\340-\357])([\200-\277])([\200-\277])/e"</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; \
<br>&nbsp; &nbsp; </span><span class="string">"'&amp;#'.((ord('\\1')-224)*4096 + (ord('\\2')-128)*64 + (ord('\\3')-128)).';'"</span><span class="keyword">,&nbsp; &nbsp; \
<br>&nbsp; &nbsp; </span><span class="default">$string</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; </span><span class="comment">// decode two byte unicode characters
<br>&nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/([\300-\337])([\200-\277])/e"</span><span class="keyword">, \
<br>&nbsp; &nbsp; </span><span class="string">"'&amp;#'.((ord('\\1')-192)*64+(ord('\\2')-128)).';'"</span><span class="keyword">, \
<br>&nbsp; &nbsp; </span><span class="default">$string</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; return </span><span class="default">$string</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84031">  
  <a class="name">
  <strong class="user"><em>punchivan at gmail dot com</em></strong></a><div class="date" title="2008-06-24 02:13"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom84031">
<div class="phpcode"><code><span class="html">
EY! the bug is not in the function 'utf8_decode'. The bug is in the function 'mb_detect_encoding'. If you put a word with a special char at the end like this 'accentué', that will lead to a wrong result (UTF-8) but if you put another char at the end like this 'accentuée' you will get it right. So you should always add a ISO-8859-1 character to your string for this check. My advise is to use a blank space.<br>I´ve tried it and it works! <br><br>function ISO_convert($array)<br>{<br>&nbsp; &nbsp; $array_temp = array();<br>&nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; foreach($array as $name =&gt; $value)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if(is_array($value))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $array_temp[(mb_detect_encoding($name." ",'UTF-8,ISO-8859-1') == 'UTF-8' ? utf8_decode($name) : $name )] = ISO_convert($value);<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $array_temp[(mb_detect_encoding($name." ",'UTF-8,ISO-8859-1') == 'UTF-8' ? utf8_decode($name) : $name )] = (mb_detect_encoding($value." ",'UTF-8,ISO-8859-1') == 'UTF-8' ? utf8_decode($value) : $value );<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return $array_temp; <br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76250">  
  <a class="name">
  <strong class="user"><em>MARC13</em></strong></a><div class="date" title="2007-07-07 07:50"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom76250">
<div class="phpcode"><code><span class="html">
I did this function to convert data from AJAX call to insert to my database.<br>It converts UTF-8 from XMLHttpRequest() to ISO-8859-2 that I use in LATIN2 MySQL database.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">utf2iso</span><span class="keyword">(</span><span class="default">$tekst</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0104"</span><span class="keyword">,</span><span class="string">"\xA1"</span><span class="keyword">,</span><span class="default">$tekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ą<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0106"</span><span class="keyword">,</span><span class="string">"\xC6"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ć<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0118"</span><span class="keyword">,</span><span class="string">"\xCA"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ę<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0141"</span><span class="keyword">,</span><span class="string">"\xA3"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ł<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0143"</span><span class="keyword">,</span><span class="string">"\xD1"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ń<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u00D3"</span><span class="keyword">,</span><span class="string">"\xD3"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ó<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u015A"</span><span class="keyword">,</span><span class="string">"\xA6"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ś<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0179"</span><span class="keyword">,</span><span class="string">"\xAC"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ź<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u017B"</span><span class="keyword">,</span><span class="string">"\xAF"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//Ż<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0105"</span><span class="keyword">,</span><span class="string">"\xB1"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ą<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0107"</span><span class="keyword">,</span><span class="string">"\xE6"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ć<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0119"</span><span class="keyword">,</span><span class="string">"\xEA"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ę<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0142"</span><span class="keyword">,</span><span class="string">"\xB3"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ł<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u0144"</span><span class="keyword">,</span><span class="string">"\xF1"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ń<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u00D4"</span><span class="keyword">,</span><span class="string">"\xF3"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ó<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u015B"</span><span class="keyword">,</span><span class="string">"\xB6"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ś<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u017A"</span><span class="keyword">,</span><span class="string">"\xBC"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ź<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nowytekst </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"%u017C"</span><span class="keyword">,</span><span class="string">"\xBF"</span><span class="keyword">,</span><span class="default">$nowytekst</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//ż<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="keyword">return (</span><span class="default">$nowytekst</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span><br>In my case also the code file that deals with AJAX calls must be in UTF-8 coding.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75723">  
  <a class="name">
  <strong class="user"><em>Sadi</em></strong></a><div class="date" title="2007-06-13 03:38"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom75723">
<div class="phpcode"><code><span class="html">
Once again about polish letters. If you use fananf's solution, make sure that PHP file is coded with cp1250 or else it won't work. It's quite obvious, however I spent some time before I finally figured that out, so I thought I post it here.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75261">  
  <a class="name">
  <strong class="user"><em>alexlevin at kvadro dot net</em></strong></a><div class="date" title="2007-05-20 08:20"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom75261">
<div class="phpcode"><code><span class="html">
If you running Gentoo Linux and encounter problems with some PHP4 applications saying:<br>Call to undefined function: utf8_decode()<br>Try reemerge PHP4 with 'expat' flag enabled.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="70776">  
  <a class="name">
  <strong class="user"><em>paul.hayes at entropedia.co.uk</em></strong></a><div class="date" title="2006-10-27 07:10"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom70776">
<div class="phpcode"><code><span class="html">
I noticed that the utf-8 to html functions below are only for 2 byte long codes. Well I wanted 3 byte support (sorry haven't done 4, 5 or 6). Also I noticed the concatination of the character codes did have the hex prefix 0x and so failed with the large 2 byte codes)<br><br>&lt;?<br>&nbsp; public function utf2html (&amp;$str) {<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; $ret = "";<br>&nbsp; &nbsp; $max = strlen($str);<br>&nbsp; &nbsp; $last = 0;&nbsp; // keeps the index of the last regular character<br>&nbsp; &nbsp; for ($i=0; $i&lt;$max; $i++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; $c = $str{$i};<br>&nbsp; &nbsp; &nbsp; &nbsp; $c1 = ord($c);<br>&nbsp; &nbsp; &nbsp; &nbsp; if ($c1&gt;&gt;5 == 6) {&nbsp; // 110x xxxx, 110 prefix for 2 bytes unicode<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ret .= substr($str, $last, $i-$last); // append all the regular characters we've passed<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c1 &amp;= 31; // remove the 3 bit two bytes prefix<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c2 = ord($str{++$i}); // the next byte<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c2 &amp;= 63;&nbsp; // remove the 2 bit trailing byte prefix<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c2 |= (($c1 &amp; 3) &lt;&lt; 6); // last 2 bits of c1 become first 2 of c2<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c1 &gt;&gt;= 2; // c1 shifts 2 to the right<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ret .= "&amp;#" . ($c1 * 0x100 + $c2) . ";"; // this is the fastest string concatenation<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $last = $i+1;&nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif ($c1&gt;&gt;4 == 14) {&nbsp; // 1110 xxxx, 110 prefix for 3 bytes unicode<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ret .= substr($str, $last, $i-$last); // append all the regular characters we've passed<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c2 = ord($str{++$i}); // the next byte<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c3 = ord($str{++$i}); // the third byte<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c1 &amp;= 15; // remove the 4 bit three bytes prefix<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c2 &amp;= 63;&nbsp; // remove the 2 bit trailing byte prefix<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c3 &amp;= 63;&nbsp; // remove the 2 bit trailing byte prefix<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c3 |= (($c2 &amp; 3) &lt;&lt; 6); // last 2 bits of c2 become first 2 of c3<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c2 &gt;&gt;=2; //c2 shifts 2 to the right<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c2 |= (($c1 &amp; 15) &lt;&lt; 4); // last 4 bits of c1 become first 4 of c2<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c1 &gt;&gt;= 4; // c1 shifts 4 to the right<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ret .= '&amp;#' . (($c1 * 0x10000) + ($c2 * 0x100) + $c3) . ';'; // this is the fastest string concatenation<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $last = $i+1;&nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; $str=$ret . substr($str, $last, $i); // append the last batch of regular characters<br>} <br>?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="59485">  
  <a class="name">
  <strong class="user"><em>php-net at ---NOSPAM---lc dot yi dot org</em></strong></a><div class="date" title="2005-12-08 12:04"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom59485">
<div class="phpcode"><code><span class="html">
I've just created this code snippet to improve the user-customizable emails sent by one of my websites.<br><br>The goal was to use UTF-8 (Unicode) so that non-english users have all the Unicode benefits, BUT also make life seamless for English (or specifically, English MS-Outlook users).&nbsp; The niggle: Outlook prior to 2003 (?)&nbsp; does not properly detect unicode emails.&nbsp; When "smart quotes" from MS Word were pasted into a rich text area and saved in Unicode, then sent by email to an Outlook user, more often than not, these characters were wrongly rendered as "greek". <br><br>So, the following code snippet replaces a few strategic characters into html entities which Outlook XP (and possibly earlier) will render as expected.&nbsp; [Code based on bits of code from previous posts on this and the htmlenties page]<br><span class="default">&lt;?php<br>&nbsp; &nbsp; $badwordchars</span><span class="keyword">=array(<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"\xe2\x80\x98"</span><span class="keyword">, </span><span class="comment">// left single quote<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"\xe2\x80\x99"</span><span class="keyword">, </span><span class="comment">// right single quote<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"\xe2\x80\x9c"</span><span class="keyword">, </span><span class="comment">// left double quote<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"\xe2\x80\x9d"</span><span class="keyword">, </span><span class="comment">// right double quote<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"\xe2\x80\x94"</span><span class="keyword">, </span><span class="comment">// em dash<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"\xe2\x80\xa6" </span><span class="comment">// elipses<br>&nbsp; &nbsp; </span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$fixedwordchars</span><span class="keyword">=array(<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"&amp;#8216;"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"&amp;#8217;"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'&amp;#8220;'</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'&amp;#8221;'</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'&amp;mdash;'</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'&amp;#8230;'<br>&nbsp; &nbsp; </span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$html</span><span class="keyword">=</span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$badwordchars</span><span class="keyword">,</span><span class="default">$fixedwordchars</span><span class="keyword">,</span><span class="default">$html</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="57339">  
  <a class="name">
  <strong class="user"><em>thierry.bo # netcourrier point com</em></strong></a><div class="date" title="2005-09-30 12:38"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom57339">
<div class="phpcode"><code><span class="html">
In response to fhoech (22-Sep-2005 11:55), I just tried a simultaneous test with the file UTF-8-test.txt using your regexp, 'j dot dittmer' (20-Sep-2005 06:30) regexp (message #56962), `php-note-2005` (17-Feb-2005 08:57) regexp in his message on `mb-detect-encoding` page (<a rel="nofollow" target="_blank">http://us3.php.net/manual/en/function.mb-detect-encoding.php#50087</a>) who is using a regexp from the W3C (<a rel="nofollow" target="_blank">http://w3.org/International/questions/qa-forms-utf-8.html</a>), and PHP mb_detect_encoding function.<br><br>Here are a summarize of the results :<br><br>201 lines are valid UTF8 strings using phpnote regexp<br>203 lines are valid UTF8 strings using j.dittmer regexp<br>200 lines are valid UTF8 strings using fhoech regexp<br>239 lines are valid&nbsp; UTF8 strings using using mb_detect_encoding<br><br>Here are the lines with differences (left to right, phpnote, j.dittmer and fhoech) :<br><br>Line #70 : NOT UTF8|IS UTF8!|IS UTF8! :2.1.1 1 byte (U-00000000): "" <br>Line #79 : NOT UTF8|IS UTF8!|IS UTF8! :2.2.1 1 byte (U-0000007F): "" <br>Line #81 : IS UTF8!|IS UTF8!|NOT UTF8 :2.2.3 3 bytes (U-0000FFFF): "&amp;#65535;" | <br>Line #267 : IS UTF8!|IS UTF8!|NOT UTF8 :5.3.1 U+FFFE = ef bf be = "&amp;#65534;" |<br>Line #268 : IS UTF8!|IS UTF8!|NOT UTF8 :5.3.2 U+FFFF = ef bf bf = "&amp;#65535;" | <br><br>Interesting is that you said that your regexp corrected j.dittmer regexp that failed on 5.3 section, but it my test I have the opposite result ?!<br><br>I ran this test on windows XP with PHP 4.3.11dev. Maybe these differences come from operating system, or PHP version. <br><br>For mb_detect_encoding I used the command :<br><br>mb_detect_encoding($line, 'UTF-8, ISO-8859-1, ASCII');</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75952">  
  <a class="name">
  <strong class="user"><em>visus at portsonline dot net</em></strong></a><div class="date" title="2007-06-23 09:08"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom75952">
<div class="phpcode"><code><span class="html">
Following code helped me with mixed (UTF8+ISO-8859-1(x)) encodings. In this case, I have template files made and maintained by designers who do not care about encoding and MySQL data in utf8_binary_ci encoded tables.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">class </span><span class="default">Helper<br></span><span class="keyword">{<br>&nbsp; &nbsp; function </span><span class="default">strSplit</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">$split </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$split</span><span class="keyword">) &amp;&amp; </span><span class="default">$split </span><span class="keyword">&lt; </span><span class="default">1</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= array();<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; while (</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">$split</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$key </span><span class="keyword">.= </span><span class="default">$text</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">};<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$key</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$array</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; function </span><span class="default">UTF8ToHTML</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$search </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$search</span><span class="keyword">[] = </span><span class="string">"/([\\xC0-\\xF7]{1,1}[\\x80-\\xBF]+)/e"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$search</span><span class="keyword">[] = </span><span class="string">"/&amp;#228;/"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$search</span><span class="keyword">[] = </span><span class="string">"/&amp;#246;/"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$search</span><span class="keyword">[] = </span><span class="string">"/&amp;#252;/"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$search</span><span class="keyword">[] = </span><span class="string">"/&amp;#196;/"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$search</span><span class="keyword">[] = </span><span class="string">"/&amp;#214;/"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$search</span><span class="keyword">[] = </span><span class="string">"/&amp;#220;/"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$search</span><span class="keyword">[] = </span><span class="string">"/&amp;#223;/"</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$replace </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">'Helper::_UTF8ToHTML("\\1")'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"ä"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"ö"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"ü"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"Ä"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"Ö"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"ü"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"ß"</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$str</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; function </span><span class="default">_UTF8ToHTML</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; foreach((</span><span class="default">Helper</span><span class="keyword">::</span><span class="default">strSplit</span><span class="keyword">(</span><span class="default">strrev</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">((</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">}) % </span><span class="default">252 </span><span class="keyword">% </span><span class="default">248 </span><span class="keyword">% </span><span class="default">240 </span><span class="keyword">% </span><span class="default">224 </span><span class="keyword">% </span><span class="default">192</span><span class="keyword">) + </span><span class="default">128</span><span class="keyword">).</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">)))) as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ret </span><span class="keyword">+= (</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">) % </span><span class="default">128</span><span class="keyword">) * </span><span class="default">pow</span><span class="keyword">(</span><span class="default">64</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="string">"&amp;#"</span><span class="keyword">.</span><span class="default">$ret</span><span class="keyword">.</span><span class="string">";"</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="comment">// Usage example:<br><br></span><span class="default">$tpl </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">"template.tpl"</span><span class="keyword">);<br></span><span class="comment">/* ... */<br></span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_assoc</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br><br>print(</span><span class="default">Helper</span><span class="keyword">::</span><span class="default">UTF8ToHTML</span><span class="keyword">(</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"{VAR}"</span><span class="keyword">, </span><span class="default">$row</span><span class="keyword">[</span><span class="string">'var'</span><span class="keyword">], </span><span class="default">$tpl</span><span class="keyword">)));<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75941">  
  <a class="name">
  <strong class="user"><em>luka8088 at gmail dot com</em></strong></a><div class="date" title="2007-06-22 07:03"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom75941">
<div class="phpcode"><code><span class="html">
simple UTF-8 to HTML conversion:<br><br>function utf8_to_html ($data)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; return preg_replace("/([\\xC0-\\xF7]{1,1}[\\x80-\\xBF]+)/e", '_utf8_to_html("\\1")', $data);<br>&nbsp; &nbsp; }<br><br>function _utf8_to_html ($data)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; $ret = 0;<br>&nbsp; &nbsp; foreach((str_split(strrev(chr((ord($data{0}) % 252 % 248 % 240 % 224 % 192) + 128) . substr($data, 1)))) as $k =&gt; $v)<br>&nbsp; &nbsp; &nbsp; &nbsp; $ret += (ord($v) % 128) * pow(64, $k);<br>&nbsp; &nbsp; return "&amp;#$ret;";<br>&nbsp; &nbsp; }<br><br>Example:<br>echo utf8_to_html("a b č ć ž こ に ち わ ()[]{}!#$?*");<br><br>Output:<br>a b &amp;#269; &amp;#263; &amp;#382; &amp;#12371; &amp;#12395; &amp;#12385; &amp;#12431; ()[]{}!#$?*</span>
</code></div>
  </div>
 </div>
  <div class="note" id="56962">  
  <a class="name">
  <strong class="user"><em>j dot dittmer at portrix dot net</em></strong></a><div class="date" title="2005-09-20 05:30"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom56962">
<div class="phpcode"><code><span class="html">
The regex in the last comment has some typos. This is a<br>syntactically valid one, don't know if it's correct though.<br>You've to concat the expression in one long line.<br><br>^(<br>[\x00-\x7f]|<br>[\xc2-\xdf][\x80-\xbf]|<br>[\xe0][\xa0-\xbf][\x80-\xbf]|<br>[\xe1-\xec][\x80-\xbf]{2}|<br>[\xed][\x80-\x9f][\x80-\xbf]|<br>[\xee-\xef][\x80-\xbf]{2}|<br>[\xf0][\x90-\xbf][\x80-\xbf]{2}|<br>[\xf1-\xf3][\x80-\xbf]{3}|<br>[\xf4][\x80-\x8f][\x80-\xbf]{2}<br>)*$</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76434">  
  <a class="name">
  <strong class="user"><em>ludvig dot ericson at gmail dot com</em></strong></a><div class="date" title="2007-07-15 10:52"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom76434">
<div class="phpcode"><code><span class="html">
A better way to convert would be to use iconv, see <a rel="nofollow" target="_blank">http://www.php.net/iconv</a> -- example:<br><br><span class="default">&lt;?php<br>$myUnicodeString </span><span class="keyword">= </span><span class="string">"Åäö"</span><span class="keyword">;<br>echo </span><span class="default">iconv</span><span class="keyword">(</span><span class="string">"UTF-8"</span><span class="keyword">, </span><span class="string">"ISO-8859-1"</span><span class="keyword">, </span><span class="default">$myUnicodeString</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>Above would echo out the given variable in ISO-8859-1 encoding, you may replace it with whatever you prefer.<br><br>Another solution to the issue of misdisplayed glyphs is to simply send the document as UTF-8, and of course send UTF-8 data:<br><br><span class="default">&lt;?php<br></span><span class="comment"># Replace text/html with whatever MIME-type you prefer.<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Type: text/html; charset=utf-8"</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71999">  
  <a class="name">
  <strong class="user"><em>Ajgor</em></strong></a><div class="date" title="2006-12-28 05:38"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom71999">
<div class="phpcode"><code><span class="html">
small upgrade for polish decoding:<br><br>function utf82iso88592($text) {<br> $text = str_replace("\xC4\x85", 'ą', $text);<br> $text = str_replace("\xC4\x84", 'Ą', $text);<br> $text = str_replace("\xC4\x87", 'ć', $text);<br> $text = str_replace("\xC4\x86", 'Ć', $text);<br> $text = str_replace("\xC4\x99", 'ę', $text);<br> $text = str_replace("\xC4\x98", 'Ę', $text);<br> $text = str_replace("\xC5\x82", 'ł', $text);<br> $text = str_replace("\xC5\x81", 'Ł', $text);<br> $text = str_replace("\xC3\xB3", 'ó', $text);<br> $text = str_replace("\xC3\x93", 'Ó', $text);<br> $text = str_replace("\xC5\x9B", 'ś', $text);<br> $text = str_replace("\xC5\x9A", 'Ś', $text);<br> $text = str_replace("\xC5\xBC", 'ż', $text);<br> $text = str_replace("\xC5\xBB", 'Ż', $text);<br> $text = str_replace("\xC5\xBA", 'ż', $text);<br> $text = str_replace("\xC5\xB9", 'Ż', $text);<br> $text = str_replace("\xc5\x84", 'ń', $text);<br> $text = str_replace("\xc5\x83", 'Ń', $text);<br><br>return $text;<br>} // utf82iso88592</span>
</code></div>
  </div>
 </div>
  <div class="note" id="37747">  
  <a class="name">
  <strong class="user"><em>gto at interia dot pl</em></strong></a><div class="date" title="2003-11-25 07:12"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom37747">
<div class="phpcode"><code><span class="html">
Correction to function converting utf82iso88592 and iso88592tutf8.<br>Janusz forgot about "&amp;#324;", and "&amp;#380;" exchanged from "&amp;#378;" here and there.<br><br>GTo<br><br>function utf82iso88592($tekscik) {<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC4\x85", "&amp;#261;", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC4\x84", '&amp;#260;', $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC4\x87", '&amp;#263;', $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC4\x86", '&amp;#262;', $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC4\x99", '&amp;#281;', $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC4\x98", '&amp;#280;', $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC5\x82", '&amp;#322;', $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC5\x81", '&amp;#321;', $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC5\x84", '&amp;#324;', $tekscik);&nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC5\x83", '&amp;#323;', $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC3\xB3", '?', $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC3\x93", '?', $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC5\x9B", '&amp;#347;', $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC5\x9A", '&amp;#346;', $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC5\xBC", '&amp;#380;', $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC5\xBB", '&amp;#379;', $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC5\xBA", '&amp;#378;', $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("\xC5\xB9", '&amp;#377;', $tekscik);<br>&nbsp; &nbsp;&nbsp; return $tekscik;<br>} // utf82iso88592<br><br>function iso885922utf8($tekscik) {<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace("&amp;#261;", "\xC4\x85", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('&amp;#260;', "\xC4\x84", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('&amp;#263;', "\xC4\x87", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('&amp;#262;', "\xC4\x86", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('&amp;#281;', "\xC4\x99", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('&amp;#280;', "\xC4\x98", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('&amp;#322;', "\xC5\x82", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('&amp;#321;', "\xC5\x81", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('&amp;#324;', "\xC5\x84", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('&amp;#323;',"\xC5\x83", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('?', "\xC3\xB3", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('?', "\xC3\x93", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('&amp;#347;', "\xC5\x9B", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('&amp;#346;', "\xC5\x9A", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('&amp;#380;', "\xC5\xBC", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('&amp;#379;', "\xC5\xBB", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('&amp;#378;', "\xC5\xBA", $tekscik);<br>&nbsp; &nbsp;&nbsp; $tekscik = str_replace('&amp;#377;', "\xC5\xB9", $tekscik);&nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp;&nbsp; return $tekscik;<br>} // iso885922utf8</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83051">  
  <a class="name">
  <strong class="user"><em>haugas at gmail dot com</em></strong></a><div class="date" title="2008-05-08 02:11"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom83051">
<div class="phpcode"><code><span class="html">
If you don't know exactly, how many times your string is encoded, you can use this function:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">_utf8_decode</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)<br>{<br>&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">;<br>&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; while (</span><span class="default">mb_detect_encoding</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">)==</span><span class="string">"UTF-8"</span><span class="keyword">)<br>&nbsp; {<br>&nbsp; &nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$count</span><span class="keyword">++;<br>&nbsp; }<br>&nbsp; <br>&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">-</span><span class="default">1 </span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; {<br>&nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; }<br>&nbsp; return </span><span class="default">$string</span><span class="keyword">;<br>&nbsp; <br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61120">  
  <a class="name">
  <strong class="user"><em>2ge at NO2geSPAM dot us</em></strong></a><div class="date" title="2006-01-26 01:00"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom61120">
<div class="phpcode"><code><span class="html">
Hello all,
<br>
<br>I like to use COOL (nice) URIs, example: <a rel="nofollow" target="_blank">http://example.com/try-something</a>
<br>I'm using UTF8 as input, so I have to write a function UTF8toASCII to have nice URI. Here is what I come with:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">urlize</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {
<br> </span><span class="default">$search </span><span class="keyword">= array(</span><span class="string">'/[^a-z0-9]/'</span><span class="keyword">, </span><span class="string">'/--+/'</span><span class="keyword">, </span><span class="string">'/^-+/'</span><span class="keyword">, </span><span class="string">'/-+$/' </span><span class="keyword">);
<br> </span><span class="default">$replace </span><span class="keyword">= array( </span><span class="string">'-'</span><span class="keyword">, </span><span class="string">'-'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);
<br> return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">utf2ascii</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">));
<br>}&nbsp; &nbsp;&nbsp; 
<br>
<br>function </span><span class="default">utf2ascii</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {
<br> </span><span class="default">$iso88591&nbsp; </span><span class="keyword">= </span><span class="string">"\\xE0\\xE1\\xE2\\xE3\\xE4\\xE5\\xE6\\xE7"</span><span class="keyword">;
<br> </span><span class="default">$iso88591 </span><span class="keyword">.= </span><span class="string">"\\xE8\\xE9\\xEA\\xEB\\xEC\\xED\\xEE\\xEF"</span><span class="keyword">;
<br> </span><span class="default">$iso88591 </span><span class="keyword">.= </span><span class="string">"\\xF0\\xF1\\xF2\\xF3\\xF4\\xF5\\xF6\\xF7"</span><span class="keyword">;
<br> </span><span class="default">$iso88591 </span><span class="keyword">.= </span><span class="string">"\\xF8\\xF9\\xFA\\xFB\\xFC\\xFD\\xFE\\xFF"</span><span class="keyword">;
<br> </span><span class="default">$ascii </span><span class="keyword">= </span><span class="string">"aaaaaaaceeeeiiiidnooooooouuuuyyy"</span><span class="keyword">;
<br> return </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">mb_strtolower</span><span class="keyword">(</span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">), </span><span class="string">'ISO-8859-1'</span><span class="keyword">),</span><span class="default">$iso88591</span><span class="keyword">,</span><span class="default">$ascii</span><span class="keyword">);
<br>}
<br>
<br>echo </span><span class="default">urlize</span><span class="keyword">(</span><span class="string">"Fucking ?m?l"</span><span class="keyword">);
<br>
<br></span><span class="default">?&gt;
<br></span>
<br>I hope this helps someone.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="59484">  
  <a class="name">
  <strong class="user"><em>yannikh at gmeil dot com</em></strong></a><div class="date" title="2005-12-07 11:34"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom59484">
<div class="phpcode"><code><span class="html">
I had to tackle a very interesting problem:<br><br>I wanted to replace all \xXX in a text by it's letters. Unfortunatelly XX were ASCII and not utf8. I solved my problem that way:<br><span class="default">&lt;?php preg_replace </span><span class="keyword">(</span><span class="string">'/\\\\x([0-9a-fA-F]{2})/e'</span><span class="keyword">, </span><span class="string">"pack('H*',utf8_decode('\\1'))"</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="57070">  
  <a class="name">
  <strong class="user"><em>fhoech</em></strong></a><div class="date" title="2005-09-22 10:55"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom57070">
<div class="phpcode"><code><span class="html">
Sorry, I had a typo in my last comment. Corrected regexp:<br><br>^([\\x00-\\x7f]|<br>[\\xc2-\\xdf][\\x80-\\xbf]|<br>\\xe0[\\xa0-\\xbf][\\x80-\\xbf]|<br>[\\xe1-\\xec][\\x80-\\xbf]{2}|<br>\\xed[\\x80-\\x9f][\\x80-\\xbf]|<br>\\xef[\\x80-\\xbf][\\x80-\\xbd]|<br>\\xee[\\x80-\\xbf]{2}|<br>\xf0[\\x90-\\xbf][\\x80-\\xbf]{2}|<br>[\\xf1-\\xf3][\\x80-\\xbf]{3}|<br>\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})*$</span>
</code></div>
  </div>
 </div>
  <div class="note" id="70561">  
  <a class="name">
  <strong class="user"><em>tobias at code-x dot de</em></strong></a><div class="date" title="2006-10-20 05:13"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom70561">
<div class="phpcode"><code><span class="html">
converting uft8-html sign &amp;#301; to uft8<br><br>&lt;?<br>function uft8html2utf8( $s ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ( !function_exists('uft8html2utf8_callback') ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; function uft8html2utf8_callback($t) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $dec = $t[1];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($dec &lt; 128) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $utf = chr($dec);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if ($dec &lt; 2048) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $utf = chr(192 + (($dec - ($dec % 64)) / 64));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $utf .= chr(128 + ($dec % 64));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $utf = chr(224 + (($dec - ($dec % 4096)) / 4096));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $utf .= chr(128 + ((($dec % 4096) - ($dec % 64)) / 64));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $utf .= chr(128 + ($dec % 64));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $utf;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; return preg_replace_callback('|&amp;#([0-9]{1,});|', 'uft8html2utf8_callback', $s );&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>}<br>echo uft8html2utf8('test: &amp;#301;');<br>?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="57069">  
  <a class="name">
  <strong class="user"><em>fhoech</em></strong></a><div class="date" title="2005-09-22 10:12"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom57069">
<div class="phpcode"><code><span class="html">
JF Sebastian's regex is almost perfect as far as I'm concerned. I found one error (it failed section 5.3 "Other illegal code positions" from <a rel="nofollow" target="_blank">http://www.cl.cam.ac.uk/~mgk25/ucs/examples/UTF-8-test.txt</a>) which I corrected as follows:<br><br>^([\\x00-\\x7f]|<br>[\\xc2-\\xdf][\\x80-\\xbf]|<br>\\xe0[\\xa0-\\xbf][\\x80-\\xbf]|<br>[\\xe1-\\xec][\\x80-\\xbf]{2}|<br>\\xed[\\x80-\\x9f][\\x80-\\xbf]|<br>\\xef[\\x80-\\xbf][\\x80-\\xbc]|<br>\\xee[\\x80-\\xbf]{2}|<br>\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2}|<br>[\\xf1-\\xf3][\\x80-\\xbf]{3}|<br>\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})*$<br><br>(Again, concatenate to one single line to make it work)</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->

  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from www.php.net/manual/en/function.utf8-decode.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:46:02 GMT -->

</body></html>