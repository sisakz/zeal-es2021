<html><!-- Mirrored from www.php.net/manual/en/function.socket-read.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:30:28 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>socket_read</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.socket-read.html">
 <link rel="shorturl" href="https://www.php.net/socket-read">
 <link rel="alternate" href="https://www.php.net/socket-read" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.sockets.html">
 <link rel="prev" href="function.socket-listen.html">
 <link rel="next" href="function.socket-recv.html">

 <link rel="alternate" href="function.socket-read.html" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.socket-read.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.socket-read.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.socket-read.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/function.socket-read.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.socket-read.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/ro/function.socket-read.php" hreflang="ro">
 <link rel="alternate" href="https://www.php.net/manual/ru/function.socket-read.php" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/function.socket-read.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.socket-read.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0aba.css?t=1539771603&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2ecf.css?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedba57.css?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached3afa.css?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>


</head>
<body class="docs " style="">


<div class="headsup"><a href="https://www.php.net/conferences/index.php#id2021-09-08-1">Longhorn PHP 2021</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.attributes.html">Attributes</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.remote.other.html">Other Services</a></li>      <li><a href="book.sockets.html">Sockets</a></li>      <li><a href="ref.sockets.html">Socket Functions</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="function.socket-read" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">socket_read</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.1.0, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">socket_read</span> â€” <span class="dc-title">Reads a maximum of length bytes from a socket</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.socket-read-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>socket_read</strong></span>(<span class="methodparam"><span class="type"><a href="class.socket.html" class="type Socket">Socket</a></span> <code class="parameter">$socket</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$length</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$mode</code><span class="initializer"> = <strong><code>PHP_BINARY_READ</code></strong></span></span>): <span class="type"><span class="type">string</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   The function <span class="function"><strong>socket_read()</strong></span> reads from the <span class="classname"><a href="class.socket.html" class="classname">Socket</a></span> instance
   <code class="parameter">socket</code> created by the
   <span class="function"><a href="function.socket-create.html" class="function">socket_create()</a></span> or
   <span class="function"><a href="function.socket-accept.html" class="function">socket_accept()</a></span> functions. 
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.socket-read-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>
    
     <dt>
<code class="parameter">socket</code></dt>

     <dd>

      <p class="para">
       A <span class="classname"><a href="class.socket.html" class="classname">Socket</a></span> instance created with <span class="function"><a href="function.socket-create.html" class="function">socket_create()</a></span>
       or <span class="function"><a href="function.socket-accept.html" class="function">socket_accept()</a></span>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">length</code></dt>

     <dd>

      <p class="para">
       The maximum number of bytes read is specified by the
       <code class="parameter">length</code> parameter. Otherwise you can use
       <strong><code>\r</code></strong>, <strong><code>\n</code></strong>,
       or <strong><code>\0</code></strong> to end reading (depending on the <code class="parameter">mode</code>
       parameter, see below).
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">mode</code></dt>

     <dd>

      <p class="para">
       Optional <code class="parameter">mode</code> parameter is a named constant:
       </p><ul class="itemizedlist">
        <li class="listitem">
         <span class="simpara">
          <strong><code>PHP_BINARY_READ</code></strong> (Default) - use the system
          <code class="literal">recv()</code> function. Safe for reading binary data.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>PHP_NORMAL_READ</code></strong> - reading stops at
          <code class="literal">\n</code> or <code class="literal">\r</code>.
         </span>
        </li>
       </ul>
      <p></p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.socket-read-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   <span class="function"><strong>socket_read()</strong></span> returns the data as a string on success,
   or <strong><code>false</code></strong> on error (including if the remote host has closed the
   connection). The error code can be retrieved with
   <span class="function"><a href="function.socket-last-error.html" class="function">socket_last_error()</a></span>. This code may be passed to
   <span class="function"><a href="function.socket-strerror.html" class="function">socket_strerror()</a></span> to get a textual representation of
   the error.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    <span class="function"><strong>socket_read()</strong></span> returns a zero length string ("")
    when there is no more data to read.
   </p>
  <p></p></blockquote>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.socket-read-changelog">
  <h3 class="title">Changelog</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>Version</th>
      <th>Description</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
  <td>8.0.0</td>
  <td>
   <code class="parameter">socket</code> is a <span class="classname"><a href="class.socket.html" class="classname">Socket</a></span> instance now;
   previously, it was a <span class="type">resource</span>.
  </td>
 </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 seealso" id="refsect1-function.socket-read-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.socket-accept.html" class="function" rel="rdfs-seeAlso">socket_accept()</a> - Accepts a connection on a socket</span></li>
    <li class="member"><span class="function"><a href="function.socket-bind.html" class="function" rel="rdfs-seeAlso">socket_bind()</a> - Binds a name to a socket</span></li>
    <li class="member"><span class="function"><a href="function.socket-connect.html" class="function" rel="rdfs-seeAlso">socket_connect()</a> - Initiates a connection on a socket</span></li>
    <li class="member"><span class="function"><a href="function.socket-listen.html" class="function" rel="rdfs-seeAlso">socket_listen()</a> - Listens for a connection on a socket</span></li>
    <li class="member"><span class="function"><a href="function.socket-last-error.html" class="function" rel="rdfs-seeAlso">socket_last_error()</a> - Returns the last error on the socket</span></li>
    <li class="member"><span class="function"><a href="function.socket-strerror.html" class="function" rel="rdfs-seeAlso">socket_strerror()</a> - Return a string describing a socket error</span></li>
    <li class="member"><span class="function"><a href="function.socket-write.html" class="function" rel="rdfs-seeAlso">socket_write()</a> - Write to a socket</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="115903">  
  <a class="name">
  <strong class="user"><em>cottton at i-stats dot net</em></strong></a><div class="date" title="2014-10-12 09:39"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom115903">
<div class="phpcode"><code><span class="html">
quote:<br>"Note:<br>socket_read() returns a zero length string ("") when there is no more data to read."<br><br>This is not true!<br><br>In a while loop&nbsp; <br>(example case few bytes to receive - just enough for 1 call, but you use a loop to be sure you received all data)<br>if you use <br>&lt;? socket_set_block($socket); ?&gt;<br>you will get:<br>1st call in loop: data<br>2nd call in loop: a block forever, if there isnt data anymore or w/e happen to the "other side"<br><br>So ofc you want to use <br>&lt;? socket_set_nonblock($socket); ?&gt;<br>and you will get:<br>1st call in loop: data<br>2nd call in loop: socket_read() returns FALSE (bool) and socket_last_error() gives you a SOCKET_EWOULDBLOCK (<a rel="nofollow" target="_blank">http://de1.php.net/manual/de/sockets.constants.php</a>)<br><br>There is not a single time i got a empty string back from socket_read.<br>And im "working" on this problem(bug?) since a week or so.<br><br>You better use socket_recv() instead.<br>(good luck)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75747">  
  <a class="name">
  <strong class="user"><em>nuitari-php at nuitari dot net</em></strong></a><div class="date" title="2007-06-13 11:08"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom75747">
<div class="phpcode"><code><span class="html">
PHP_NORMAL_READ - reading stops at \n or \r.<br><br>This seems to be meant literally.<br>If there is a \r, then it will stop reading, even if there is a \n right after it. You have to call the read again just to get rid of the \n.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="72922">  
  <a class="name">
  <strong class="user"><em>dotpointer</em></strong></a><div class="date" title="2007-02-04 03:27"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom72922">
<div class="phpcode"><code><span class="html">
PHP 5.2.0 / Win32 / Apache 1.3 - It seems like...<br><br>PHP_BINARY_READ - works, but returns '', not FALSE...<br>- is blocking, until data received or connection closed<br>- does pass-through \r\n etc.<br>- returns data on data, '' on connection closed<br>- you can detect closed connection by checking for '' (not FALSE as stated i manual)<br><br>PHP_NORMAL_READ - not working so good...<br>- is non-blocking<br>- does not pass-through \r\n etc.<br>- returns false on no-data, false on connection closed :(<br>- (no way here to detect a closed connection...?)<br>- (is this a bug? <a rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=21880</a> )<br>- (is this a bug? <a rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=21197</a> )<br>- (could not get data from this option at all in fact...)<br><br>PHP_BINARY_READ seems to be the "right way to go" <br>for now. Both checking for '' and false to detect closed <br>connection is probably smart, as this "bug"(?) may <br>be fixed...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="42700">  
  <a class="name">
  <strong class="user"><em>michi at tr51 dot org</em></strong></a><div class="date" title="2004-05-26 12:48"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom42700">
<div class="phpcode"><code><span class="html">
if you'd like to make a "socket_read" on a linux-system connected with a flash-client (v. 6.0 r81) you have to send a string to the connected port:<br><br><span class="default">&lt;?php<br><br>&nbsp;&nbsp; </span><span class="keyword">...&nbsp; </span><span class="comment">//initialising communication<br><br>&nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="string">"ready to get/send data\0"</span><span class="keyword">; <br>&nbsp; &nbsp; </span><span class="default">socket_write</span><span class="keyword">(</span><span class="default">$socket</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="comment">//now you can read from...<br>&nbsp; &nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">socket_read</span><span class="keyword">(</span><span class="default">$socket</span><span class="keyword">, </span><span class="default">MAXLINE</span><span class="keyword">));<br><br>&nbsp; &nbsp; ...&nbsp; </span><span class="comment">// do some stuff, finaly close connection<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="120447">  
  <a class="name">
  <strong class="user"><em>berniev</em></strong></a><div class="date" title="2017-01-11 03:54"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom120447">
<div class="phpcode"><code><span class="html">
It is not obvious from the docs or notes...<br>PHP_NORMAL_MODE is different to PHP_BINARY in that the former blocks regardless of socket_set_nonblock, the latter respects block and nonblock.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="25456">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2002-09-24 11:48"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom25456">
<div class="phpcode"><code><span class="html">
Windows telnet sends/recieves one character at a time. Try adding PHP_NORMAL_READ to the end of socket_read, that might help.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="79314">  
  <a class="name">
  <strong class="user"><em>nad0r1 at hush dot ai</em></strong></a><div class="date" title="2007-11-20 07:59"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom79314">
<div class="phpcode"><code><span class="html">
Another way to bypass the annoying thing with telnet, that send each character as a string ,is to check if the response is "\r\n", that is the string that telnet sends when the user presses enter.<br><br>Here is an example:<br><span class="default">&lt;?php<br>error_reporting</span><span class="keyword">(</span><span class="default">E_ALL</span><span class="keyword">);<br><br></span><span class="comment">/* Allow the script to hang around waiting for connections. */<br></span><span class="default">set_time_limit</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br><br></span><span class="comment">/* Turn on implicit output flushing so we see what we're getting<br> * as it comes in. */<br></span><span class="default">ob_implicit_flush</span><span class="keyword">();<br><br></span><span class="default">$address </span><span class="keyword">= </span><span class="string">'127.0.0.1'</span><span class="keyword">;<br></span><span class="default">$port </span><span class="keyword">= </span><span class="default">100</span><span class="keyword">;<br><br>if ((</span><span class="default">$sock </span><span class="keyword">= </span><span class="default">socket_create</span><span class="keyword">(</span><span class="default">AF_INET</span><span class="keyword">, </span><span class="default">SOCK_STREAM</span><span class="keyword">, </span><span class="default">SOL_TCP</span><span class="keyword">)) === </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; echo </span><span class="string">"socket_create() failed: reason: " </span><span class="keyword">. </span><span class="default">socket_strerror</span><span class="keyword">(</span><span class="default">socket_last_error</span><span class="keyword">()) . </span><span class="string">"\n"</span><span class="keyword">;<br>}<br><br>if (</span><span class="default">socket_bind</span><span class="keyword">(</span><span class="default">$sock</span><span class="keyword">, </span><span class="default">$address</span><span class="keyword">, </span><span class="default">$port</span><span class="keyword">) === </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; echo </span><span class="string">"socket_bind() failed: reason: " </span><span class="keyword">. </span><span class="default">socket_strerror</span><span class="keyword">(</span><span class="default">socket_last_error</span><span class="keyword">(</span><span class="default">$sock</span><span class="keyword">)) . </span><span class="string">"\n"</span><span class="keyword">;<br>}<br>else <br>&nbsp; echo </span><span class="string">'Socket ' </span><span class="keyword">. </span><span class="default">$address </span><span class="keyword">. </span><span class="string">':' </span><span class="keyword">. </span><span class="default">$port </span><span class="keyword">. </span><span class="string">" has been opened\n"</span><span class="keyword">;<br><br>if (</span><span class="default">socket_listen</span><span class="keyword">(</span><span class="default">$sock</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">) === </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; echo </span><span class="string">"socket_listen() failed: reason: " </span><span class="keyword">. </span><span class="default">socket_strerror</span><span class="keyword">(</span><span class="default">socket_last_error</span><span class="keyword">(</span><span class="default">$sock</span><span class="keyword">)) . </span><span class="string">"\n"</span><span class="keyword">;<br>}<br>else <br>&nbsp;&nbsp; echo </span><span class="string">"Listening for new clients..\n"</span><span class="keyword">;<br><br>&nbsp;&nbsp; </span><span class="default">$client_id </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>do {<br>&nbsp; &nbsp; if ((</span><span class="default">$msgsock </span><span class="keyword">= </span><span class="default">socket_accept</span><span class="keyword">(</span><span class="default">$sock</span><span class="keyword">)) === </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"socket_accept() failed: reason: " </span><span class="keyword">. </span><span class="default">socket_strerror</span><span class="keyword">(</span><span class="default">socket_last_error</span><span class="keyword">(</span><span class="default">$sock</span><span class="keyword">)) . </span><span class="string">"\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$client_id </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; echo </span><span class="string">"Client #" </span><span class="keyword">.</span><span class="default">$client_id </span><span class="keyword">.</span><span class="string">": Connect\n"</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">/* Send instructions. */<br>&nbsp; &nbsp; </span><span class="default">$msg </span><span class="keyword">= </span><span class="string">"\nWelcome to the PHP Test Server. \n" </span><span class="keyword">.<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"To quit, type 'quit'. To shut down the server type 'shutdown'.\n"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">socket_write</span><span class="keyword">(</span><span class="default">$msgsock</span><span class="keyword">, </span><span class="default">$msg</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$msg</span><span class="keyword">));<br></span><span class="default">$cur_buf </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; do {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">false </span><span class="keyword">=== (</span><span class="default">$buf </span><span class="keyword">= </span><span class="default">socket_read</span><span class="keyword">(</span><span class="default">$msgsock</span><span class="keyword">, </span><span class="default">2048</span><span class="keyword">))) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"socket_read() failed: reason: " </span><span class="keyword">. </span><span class="default">socket_strerror</span><span class="keyword">(</span><span class="default">socket_last_error</span><span class="keyword">(</span><span class="default">$msgsock</span><span class="keyword">)) . </span><span class="string">"\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break </span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$buf </span><span class="keyword">== </span><span class="string">"\r\n"</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$cur_buf </span><span class="keyword">== </span><span class="string">'quit'</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">'Client #' </span><span class="keyword">.</span><span class="default">$client_id </span><span class="keyword">.</span><span class="string">': Disconnect' </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$cur_buf </span><span class="keyword">== </span><span class="string">'shutdown'</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">socket_close</span><span class="keyword">(</span><span class="default">$msgsock</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break </span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//else {<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$talkback </span><span class="keyword">= </span><span class="string">"Unknown command: " </span><span class="keyword">. </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\r\n"</span><span class="keyword">, </span><span class="string">'\r\n'</span><span class="keyword">, </span><span class="default">$cur_buf</span><span class="keyword">) .</span><span class="string">"\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">socket_write</span><span class="keyword">(</span><span class="default">$msgsock</span><span class="keyword">, </span><span class="default">$talkback</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$talkback</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">echo </span><span class="string">'Client #' </span><span class="keyword">.</span><span class="default">$client_id </span><span class="keyword">.</span><span class="string">': ' </span><span class="keyword">. </span><span class="default">$cur_buf </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cur_buf </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else </span><span class="default">$cur_buf </span><span class="keyword">.= </span><span class="default">$buf</span><span class="keyword">;<br>&nbsp; &nbsp; } while (</span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">socket_close</span><span class="keyword">(</span><span class="default">$msgsock</span><span class="keyword">);<br>} while (</span><span class="default">true</span><span class="keyword">);<br><br></span><span class="default">socket_close</span><span class="keyword">(</span><span class="default">$sock</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="124492">  
  <a class="name">
  <strong class="user"><em>d dot bergloev at gmail dot com</em></strong></a><div class="date" title="2019-12-07 10:04"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom124492">
<div class="phpcode"><code><span class="html">
Binary read is the correct way to read data in most cases, whereas "normal read", is a strange and lazy PHP built mode, that works mostly with terminal data. <br><br>If you want to keep track of closed connections with binary read, the correct way is NOT to switch from binary to "normal", like some suggests. The correct way is to create some test scenarios and see how PHP deals with specific circumstances. <br><br>Here is what a quick test shows, when working with non-blocking sockets. <br><br><span class="default">&lt;?php<br>$input </span><span class="keyword">= </span><span class="default">socket_read</span><span class="keyword">(</span><span class="default">$socket</span><span class="keyword">, </span><span class="default">1024</span><span class="keyword">);<br><br></span><span class="comment">// In most cases, error produces an empty string and not FALSE<br></span><span class="keyword">if (</span><span class="default">$input </span><span class="keyword">=== </span><span class="default">FALSE </span><span class="keyword">|| </span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">= </span><span class="default">socket_last_error</span><span class="keyword">(</span><span class="default">$socket</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="comment">// You MUST clear the error, or it will not change on next read<br>&nbsp; &nbsp; </span><span class="default">socket_clear_error</span><span class="keyword">(</span><span class="default">$socket</span><span class="keyword">);<br><br>&nbsp; &nbsp; if (</span><span class="default">$code </span><span class="keyword">== </span><span class="default">SOCKET_EAGAIN</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Nothing to read from non-blocking socket, try again later...<br><br>&nbsp; &nbsp; </span><span class="keyword">} else {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Connection most likely closed, especially if $code is '0'<br>&nbsp; &nbsp; </span><span class="keyword">}<br><br>} else {<br>&nbsp; &nbsp; </span><span class="comment">// Deal with the data<br></span><span class="keyword">}<br></span><span class="default">?&gt;<br></span><br>There are more errors to consider, but this will get you started.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="122941">  
  <a class="name">
  <strong class="user"><em>Arvy</em></strong></a><div class="date" title="2018-07-13 03:31"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom122941">
<div class="phpcode"><code><span class="html">
On non-blocking sockets, the function will return "" if no data is received, and even if the client disconnects.<br><br>If you want to check if the client disconnected, use ===.<br><br>$ret=socket_read($socket);<br><br>$ret=="" : connected but no data received or client disconnected<br>$ret==="" : client disconnected for sure</span>
</code></div>
  </div>
 </div>
  <div class="note" id="117902">  
  <a class="name">
  <strong class="user"><em>dhaubert dot ti at gmail dot com</em></strong></a><div class="date" title="2015-08-28 03:16"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom117902">
<div class="phpcode"><code><span class="html">
A way to wait for a message response by the socket or take the first message incoming.<br><br>Note that if the server turn offline, you have a socket resource, but while trying socket_read(), it gives you a warning message that will fill your hard drive kickly due to logging.<br><br>The example above try read the message at best 3 times, 3 seconds sleeping for another reading. <br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">waitResponse</span><span class="keyword">(</span><span class="default">$response </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">) {<br>&nbsp;&nbsp; </span><span class="default">$status </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp;&nbsp; </span><span class="default">$tries </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">;<br>&nbsp;&nbsp; </span><span class="default">$counter </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp;&nbsp; while (</span><span class="default">$status </span><span class="keyword">== </span><span class="default">$response</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$status </span><span class="keyword">= </span><span class="default">socket_read</span><span class="keyword">(</span><span class="default">$socket</span><span class="keyword">, </span><span class="default">1024</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">$status</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$counter </span><span class="keyword">&gt;= </span><span class="default">$tries</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$counter</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">sleep</span><span class="keyword">(</span><span class="default">3</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp;&nbsp; }<br>return </span><span class="default">$response</span><span class="keyword">;<br>}</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103154">  
  <a class="name">
  <strong class="user"><em>eng.mrkto.com</em></strong></a><div class="date" title="2011-03-29 04:42"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom103154">
<div class="phpcode"><code><span class="html">
It seems like in socket_* functions in BLOCKING mode where is no way to check if more than $length bytes are still available in socket (like stream_get_meta_data()['unread_bytes']).<br>So you need to choose your prefered maximum $length (like 133693415:) or use non-blocking mode (for realy big data reciving).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89133">  
  <a class="name">
  <strong class="user"><em>t33th4n at gmail dot com</em></strong></a><div class="date" title="2009-02-23 12:53"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom89133">
<div class="phpcode"><code><span class="html">
I don't know if is it stated anywhere with this clearance, but here is the source code for detecting the connection abort/closure for sockets testing with socket_read function:
<br>
<br><span class="default">&lt;?php
<br>$buf </span><span class="keyword">= @</span><span class="default">socket_read</span><span class="keyword">(</span><span class="default">$routes</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$connectionid</span><span class="keyword">][</span><span class="string">'tunnelsrc'</span><span class="keyword">], </span><span class="default">$buffer_size</span><span class="keyword">);
<br>if (</span><span class="default">$buf </span><span class="keyword">=== </span><span class="string">''</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$routes</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$connectionid</span><span class="keyword">][</span><span class="string">'disconnected'</span><span class="keyword">]=</span><span class="string">'Conenction abort at source side'</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>($buf === '') is the key :)
<br>
<br>I was making an ecrypted tunnel script with mcrypt and was annoying that i could not detect the connection abort from any side.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="79853">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2007-12-15 11:11"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom79853">
<div class="phpcode"><code><span class="html">
On non-blocking connections it may not return full length requested.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69039">  
  <a class="name">
  <strong class="user"><em>Niels laukens</em></strong></a><div class="date" title="2006-08-21 12:34"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom69039">
<div class="phpcode"><code><span class="html">
This paragraph is confusing:<br><br>socket_read() returns the data as a string on success, or FALSE on error (including if the remote host has closed the connection). The error code can be retrieved with socket_last_error(). This code may be passed to socket_strerror() to get a textual representation of the error.<br>Note: socket_read() returns a zero length string ("") when there is no more data to read.<br><br>My tests (on PHP 5.1.4) show that when you socket_read() on a shutdown-socket, it returns FALSE when using PHP_NORMAL_READ, but returns "" when reading in PHP_BINARY_READ.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="51063">  
  <a class="name">
  <strong class="user"><em>Bill Kuker</em></strong></a><div class="date" title="2005-03-18 07:31"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom51063">
<div class="phpcode"><code><span class="html">
Just a note that on my system the length seems to have an undocumented upper bound of 65536. I was being lazy and not read()ing in a while loop until I pointed it at real data ;)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="33719">  
  <a class="name">
  <strong class="user"><em>schst at php-tools dot de</em></strong></a><div class="date" title="2003-07-04 06:19"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom33719">
<div class="phpcode"><code><span class="html">
You may download a generic server class at <a rel="nofollow" target="_blank">http://www.php-tools.de</a><br>This class will accept the sockets read data from it and hands it to a callback function. Furthermore there are methods for connection handling included.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84169">  
  <a class="name">
  <strong class="user"><em>tech [{at}] swatcash [{dot}] com</em></strong></a><div class="date" title="2008-07-01 04:23"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom84169">
<div class="phpcode"><code><span class="html">
Messed up the end of my previous one. Corrected version here: <br><br>a simple work around to non-blocking working with normal read is like so:<br><br>$read = array($socket);<br>$write&nbsp; = NULL;<br>$except = NULL;<br>while(1) {<br>&nbsp; &nbsp; $num_changed_sockets = socket_select($read, $write, $except, 0, 1);<br>&nbsp; &nbsp; if ( $num_changed_sockets &gt; '0' ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; socket_read($socket,10000,PHP_NORMAL_READ);<br>&nbsp; &nbsp; } <br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="35416">  
  <a class="name">
  <strong class="user"><em>magicking89 at hotmail dot com</em></strong></a><div class="date" title="2003-08-30 04:01"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom35416">
<div class="phpcode"><code><span class="html">
if you want to use a non block socket you must to use socket_last_error<br><br>if(!socket_last_error($sc)){<br>&nbsp;&nbsp; if($buffer=socket_read($sc,512,PHP_NORMAL_READ)){<br>&nbsp; &nbsp; &nbsp; echo $buffer;<br>&nbsp;&nbsp; }<br>}<br><br>if you use it your script wont take all your memory</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121426">  
  <a class="name">
  <strong class="user"><em>sahel dot nuri at outlook dot com</em></strong></a><div class="date" title="2017-07-24 03:38"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121426">
<div class="phpcode"><code><span class="html">
This little, important fact would save your time.<br>If you want to recognize that your client is disconnected without any message, you have to select the right flag.<br>Because, if you use the flag PHP_BINARY_READ:<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">read</span><span class="keyword">(</span><span class="default">$sock</span><span class="keyword">){<br>&nbsp; &nbsp; while(</span><span class="default">$buf </span><span class="keyword">= @</span><span class="default">socket_read</span><span class="keyword">(</span><span class="default">$sock</span><span class="keyword">, </span><span class="default">1024 </span><span class="keyword">[, </span><span class="default">PHP_BINARY_READ </span><span class="keyword">]))<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$buf </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$buf</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br><br>&nbsp; &nbsp; return </span><span class="default">$buf</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span>and the users disconnects, the function will returns an empty string.<br>But if you use the flag PHP_NORMAL_READ:<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">read</span><span class="keyword">(</span><span class="default">$sock</span><span class="keyword">){<br>&nbsp; &nbsp; while(</span><span class="default">$buf </span><span class="keyword">= @</span><span class="default">socket_read</span><span class="keyword">(</span><span class="default">$sock</span><span class="keyword">, </span><span class="default">1024</span><span class="keyword">, </span><span class="default">PHP_NORMAL_READ</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$buf </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$buf</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br><br>&nbsp; &nbsp; return </span><span class="default">$buf</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span>the function will returns a false.<br><br>I hope this will help you. I wasted one hour of my time to solve this problem.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76069">  
  <a class="name">
  <strong class="user"><em>ein at anti-logic dot com</em></strong></a><div class="date" title="2007-06-28 11:32"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom76069">
<div class="phpcode"><code><span class="html">
the proper way to detect a closed connection is to check socket_last_error.<br><br>Connection reset by peer is 104 (either use socket_strerror or don't suppress errors for the time being to find these out), sooo.<br><br>while($buffer=@socket_read($sock,512,PHP_NORMAL_READ)){<br>&nbsp; &nbsp; echo $buffer;<br>}<br>if(socket_last_error($sock) == 104) {<br>&nbsp; &nbsp; echo "Connection closed";<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76470">  
  <a class="name">
  <strong class="user"><em>jgbustos at gmail dot com</em></strong></a><div class="date" title="2007-07-17 05:47"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom76470">
<div class="phpcode"><code><span class="html">
PHP on win32 developers, please look at this bug report before using the PHP_NORMAL_READ option:<br><br><a rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=21197</a><br><br>In a nutshell, using PHP_NORMAL_READ will make your calls to socket_read() return an empty buffer every time.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->

  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from www.php.net/manual/en/function.socket-read.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:30:28 GMT -->

</body></html>