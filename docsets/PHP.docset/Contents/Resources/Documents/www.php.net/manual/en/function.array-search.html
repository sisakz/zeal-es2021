<html><!-- Mirrored from www.php.net/manual/en/function.array-search.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 09:41:00 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>array_search</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.array-search.html">
 <link rel="shorturl" href="https://www.php.net/array-search">
 <link rel="alternate" href="https://www.php.net/array-search" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.array.html">
 <link rel="prev" href="function.array-reverse.html">
 <link rel="next" href="function.array-shift.html">

 <link rel="alternate" href="function.array-search.html" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.array-search.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.array-search.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.array-search.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/function.array-search.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.array-search.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/ro/function.array-search.php" hreflang="ro">
 <link rel="alternate" href="https://www.php.net/manual/ru/function.array-search.php" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/function.array-search.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.array-search.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0aba.css?t=1539771603&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2ecf.css?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedba57.css?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached3afa.css?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>


</head>
<body class="docs " style="">


<div class="headsup"><a href="https://www.php.net/conferences/index.php#id2021-09-08-1">Longhorn PHP 2021</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.attributes.html">Attributes</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></li>      <li><a href="book.array.html">Arrays</a></li>      <li><a href="ref.array.html">Array Functions</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="function.array-search" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_search</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.5, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">array_search</span> â€” <span class="dc-title">Searches the array for a given value and returns the first corresponding key if successful</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.array-search-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>array_search</strong></span>(<span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$needle</code></span>, <span class="methodparam"><span class="type">array</span> <code class="parameter">$haystack</code></span>, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$strict</code><span class="initializer"> = <strong><code>false</code></strong></span></span>): <span class="type"><span class="type">int</span>|<span class="type">string</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   Searches for <code class="parameter">needle</code> in <code class="parameter">haystack</code>.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.array-search-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>
    
     <dt>
<code class="parameter">needle</code></dt>

     <dd>

      <p class="para">
       The searched value.
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       </p><p class="para">
        If <code class="parameter">needle</code> is a string, the comparison is done
        in a case-sensitive manner.
       </p>
      <p></p></blockquote>
     </dd>

    
    
     <dt>
<code class="parameter">haystack</code></dt>

     <dd>

      <p class="para">
       The array.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">strict</code></dt>

     <dd>

      <p class="para">
       If the third parameter <code class="parameter">strict</code> is set to <strong><code>true</code></strong>
       then the <span class="function"><strong>array_search()</strong></span> function will search for
       <em class="emphasis">identical</em> elements in the
       <code class="parameter">haystack</code>. This means it will also perform a
       <a href="language.types.html" class="link">strict type comparison</a> of the
       <code class="parameter">needle</code> in the <code class="parameter">haystack</code>,
       and objects must be the same instance.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.array-search-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the key for <code class="parameter">needle</code> if it is found in the
   array, <strong><code>false</code></strong> otherwise.
  </p>
  <p class="para">
   If <code class="parameter">needle</code> is found in <code class="parameter">haystack</code>
   more than once, the first matching key is returned. To return the keys for
   all matching values, use <span class="function"><a href="function.array-keys.html" class="function">array_keys()</a></span> with the optional
   <code class="parameter">search_value</code> parameter instead.
  </p>
  <div class="warning"><strong class="warning">Warning</strong><p class="simpara">This function may
return Boolean <strong><code>false</code></strong>, but may also return a non-Boolean value which
evaluates to <strong><code>false</code></strong>. Please read the section on <a href="language.types.boolean.html" class="link">Booleans</a> for more
information. Use <a href="language.operators.comparison.html" class="link">the ===
operator</a> for testing the return value of this
function.</p></div>
 </div>

 <div class="refsect1 examples" id="refsect1-function.array-search-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4913">
    <p><strong>Example #1 <span class="function"><strong>array_search()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$array&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'blue'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'red'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'green'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'red'</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_search</span><span style="color: #007700">(</span><span style="color: #DD0000">'green'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;$key&nbsp;=&nbsp;2;<br></span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_search</span><span style="color: #007700">(</span><span style="color: #DD0000">'red'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$key&nbsp;=&nbsp;1;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.array-search-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.array-keys.html" class="function" rel="rdfs-seeAlso">array_keys()</a> - Return all the keys or a subset of the keys of an array</span></li>
    <li class="member"><span class="function"><a href="function.array-values.html" class="function" rel="rdfs-seeAlso">array_values()</a> - Return all the values of an array</span></li>
    <li class="member"><span class="function"><a href="function.array-key-exists.html" class="function" rel="rdfs-seeAlso">array_key_exists()</a> - Checks if the given key or index exists in the array</span></li>
    <li class="member"><span class="function"><a href="function.in-array.html" class="function" rel="rdfs-seeAlso">in_array()</a> - Checks if a value exists in an array</span></li>
   </ul>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="116635">  
  <a class="name">
  <strong class="user"><em>xfoxawy at gmail dot com</em></strong></a><div class="date" title="2015-02-02 11:30"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom116635">
<div class="phpcode"><code><span class="html">
in (PHP 5 &gt;= 5.5.0) you don't have to write your own function to search through a multi dimensional array<br><br>ex : <br><br>$userdb=Array<br>(<br>&nbsp; &nbsp; (0) =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (uid) =&gt; '100',<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (name) =&gt; 'Sandra Shush',<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (url) =&gt; 'urlof100'<br>&nbsp; &nbsp; &nbsp; &nbsp; ),<br><br>&nbsp; &nbsp; (1) =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (uid) =&gt; '5465',<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (name) =&gt; 'Stefanie Mcmohn',<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (pic_square) =&gt; 'urlof100'<br>&nbsp; &nbsp; &nbsp; &nbsp; ),<br><br>&nbsp; &nbsp; (2) =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (uid) =&gt; '40489',<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (name) =&gt; 'Michael',<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (pic_square) =&gt; 'urlof40489'<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br>);<br><br>simply u can use this<br><br>$key = array_search(40489, array_column($userdb, 'uid'));</span>
</code></div>
  </div>
 </div>
  <div class="note" id="120784">  
  <a class="name">
  <strong class="user"><em>turabgarip at gmail dot com</em></strong></a><div class="date" title="2017-03-10 03:04"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom120784">
<div class="phpcode"><code><span class="html">
About searcing in multi-dimentional arrays; two notes on "xfoxawy at gmail dot com";<br><br>It perfectly searches through multi-dimentional arrays combined with array_column() (min php 5.5.0) but it may not return the values you'd expect.<br><br><span class="default">&lt;?php array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">array_column</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'key'</span><span class="keyword">)); </span><span class="default">?&gt;<br></span><br>Since array_column() will produce a resulting array; it won't preserve your multi-dimentional array's keys. So if you check against your keys, it will fail.<br><br>For example;<br><br><span class="default">&lt;?php<br>$people </span><span class="keyword">= array(<br>&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array(<br>&nbsp; &nbsp; </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'John'</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">'fav_color' </span><span class="keyword">=&gt; </span><span class="string">'green'<br>&nbsp; </span><span class="keyword">),<br>&nbsp; </span><span class="default">5</span><span class="keyword">=&gt; array(<br>&nbsp; &nbsp; </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Samuel'</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">'fav_color' </span><span class="keyword">=&gt; </span><span class="string">'blue'<br>&nbsp; </span><span class="keyword">)<br>);<br><br></span><span class="default">$found_key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'blue'</span><span class="keyword">, </span><span class="default">array_column</span><span class="keyword">(</span><span class="default">$people</span><span class="keyword">, </span><span class="string">'fav_color'</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>Here, you could expect that the $found_key would be "5" but it's NOT. It will be 1. Since it's the second element of the produced array by the array_column() function.<br><br>Secondly, if your array is big, I would recommend you to first assign a new variable so that it wouldn't call array_column() for each element it searches. For a better performance, you could do;<br><br><span class="default">&lt;?php<br>$colors </span><span class="keyword">= </span><span class="default">array_column</span><span class="keyword">(</span><span class="default">$people</span><span class="keyword">, </span><span class="string">'fav_color'</span><span class="keyword">);<br></span><span class="default">$found_key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'blue'</span><span class="keyword">, </span><span class="default">$colors</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="116518">  
  <a class="name">
  <strong class="user"><em>nan at designpromote dot co dot uk</em></strong></a><div class="date" title="2015-01-16 04:45"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom116518">
<div class="phpcode"><code><span class="html">
$array = ['a', 'b', 'c'];<br>$key = array_search('a', $array); //$key = 0<br>if ($key) <br>{<br>//even a element is found in array, but if (0) means false<br>//...<br>}<br><br>//the correct way<br>if (false !== $key)<br>{<br>//....<br>}<br><br>It's what the document stated "may also return a non-Boolean value which evaluates to FALSE."</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91365">  
  <a class="name">
  <strong class="user"><em>buddel</em></strong></a><div class="date" title="2009-06-08 08:13"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom91365">
<div class="phpcode"><code><span class="html">
the recursive function by tony have a small bug. it failes when a key is 0<br><br>here is the corrected version of this helpful function:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">recursive_array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$haystack</span><span class="keyword">) {<br>&nbsp; &nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$current_key</span><span class="keyword">=</span><span class="default">$key</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$needle</span><span class="keyword">===</span><span class="default">$value </span><span class="keyword">OR (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) &amp;&amp; </span><span class="default">recursive_array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$current_key</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121247">  
  <a class="name">
  <strong class="user"><em>mohamedn085 at gmail dot com</em></strong></a><div class="date" title="2017-06-20 04:59"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121247">
<div class="phpcode"><code><span class="html">
Mohamed Nabil <br><br>hallo every body This function matches two arrays like <br>search an array like another or not&nbsp; array_match which can match <br><br>function array_match($arr1,$arr2,$highlevel=false)<br>{<br><br>&nbsp;&nbsp; $keys1=array_keys($arr1);<br>&nbsp;&nbsp; $keys2=array_keys($arr2);<br><br>&nbsp;&nbsp; $values1=array_values($arr1);<br>&nbsp;&nbsp; $values2=array_values($arr2);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp;&nbsp; if ($highlevel)<br>&nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp;&nbsp; if ($keys1 === $keys2 &amp;&amp; $values1 === $values2)<br>&nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return true;<br><br>&nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp;&nbsp; return false;<br>&nbsp; &nbsp;&nbsp; }<br><br>&nbsp; &nbsp;&nbsp; if ($keys1 == $keys2 &amp;&amp; $values1 == $values2)<br>&nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return true;<br><br>&nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp;&nbsp; return false;<br>&nbsp; &nbsp; <br>}<br> var_dump(array_match(['id'=&gt;'1','username'=&gt;'2'],['id'=&gt;'1','username'=&gt;2]));<br>&nbsp; //Output:true <br><br> var_dump(array_match(['id'=&gt;'1','username'=&gt;'2'],['id'=&gt;'1','username'=&gt;2],true));<br> //Output:false</span>
</code></div>
  </div>
 </div>
  <div class="note" id="32883">  
  <a class="name">
  <strong class="user"><em>cue at openxbox dot com</em></strong></a><div class="date" title="2003-06-09 07:50"><strong>18 years ago</strong></div>
  <div class="text" id="Hcom32883">
<div class="phpcode"><code><span class="html">
If you are using the result of array_search in a condition statement, make sure you use the === operator instead of == to test whether or not it found a match.&nbsp; Otherwise, searching through an array with numeric indicies will result in index 0 always getting evaluated as false/null.&nbsp; This nuance cost me a lot of time and sanity, so I hope this helps someone.&nbsp; In case you don't know what I'm talking about, here's an example:
<br>
<br><span class="default">&lt;?php
<br>$code </span><span class="keyword">= array(</span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">, </span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"c"</span><span class="keyword">, </span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">); </span><span class="comment">// infamous abacabb mortal kombat code :-P
<br>
<br>// this is WRONG
<br></span><span class="keyword">while ((</span><span class="default">$key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">)) != </span><span class="default">NULL</span><span class="keyword">)
<br>{
<br> </span><span class="comment">// infinite loop, regardless of the unset
<br> </span><span class="keyword">unset(</span><span class="default">$code</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);
<br>}
<br>
<br></span><span class="comment">// this is _RIGHT_
<br></span><span class="keyword">while ((</span><span class="default">$key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">)) !== </span><span class="default">NULL</span><span class="keyword">)
<br>{
<br> </span><span class="comment">// loop will terminate
<br> </span><span class="keyword">unset(</span><span class="default">$code</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101869">  
  <a class="name">
  <strong class="user"><em>stefano@takys dot it</em></strong></a><div class="date" title="2011-01-14 01:58"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom101869">
<div class="phpcode"><code><span class="html">
for searching case insensitive better this:
<br>
<br><span class="default">&lt;?php
<br>array_search</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">),</span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'strtolower'</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">));
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="123525">  
  <a class="name">
  <strong class="user"><em>pvv at renam dot md</em></strong></a><div class="date" title="2019-01-17 08:12"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom123525">
<div class="phpcode"><code><span class="html">
About searcing in multi-dimentional arrays;&nbsp; <br>note on "xfoxawy at gmail dot com" and turabgarip at gmail dot com;<br><br>$xx = array_column($array, 'NAME', 'ID');<br>will produce an array like :<br> $xx = [<br>[ID_val] =&gt; NAME_val<br>[ID_val] =&gt; NAME_val<br>&nbsp; &nbsp; &nbsp; &nbsp; ]<br><br>so: <br><br>$yy = array_search('tesxt', array_column($array, 'NAME', 'ID'));<br>will output expected ID;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="63338">  
  <a class="name">
  <strong class="user"><em>RichGC</em></strong></a><div class="date" title="2006-03-20 05:54"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom63338">
<div class="phpcode"><code><span class="html">
To expand on previous comments, here are some examples of<br>where using array_search within an IF statement can go<br>wrong when you want to use the array key thats returned.<br><br>Take the following two arrays you wish to search:<br><br><span class="default">&lt;?php<br>$fruit_array </span><span class="keyword">= array(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="string">"pear"</span><span class="keyword">, </span><span class="string">"orange"</span><span class="keyword">);<br></span><span class="default">$fruit_array </span><span class="keyword">= array(</span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="string">"apple"</span><span class="keyword">, </span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="string">"pear"</span><span class="keyword">, </span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="string">"orange"</span><span class="keyword">);<br><br>if (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">))<br></span><span class="comment">//PROBLEM: the first array returns a key of 0 and IF treats it as FALSE<br><br></span><span class="keyword">if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">)))<br></span><span class="comment">//PROBLEM: works on numeric keys of the first array but fails on the second<br><br></span><span class="keyword">if (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">)))<br></span><span class="comment">//PROBLEM: using the above in the wrong order causes $i to always equal 1<br><br></span><span class="keyword">if (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">)<br></span><span class="comment">//PROBLEM: explicit with no extra brackets causes $i to always equal 1<br><br></span><span class="keyword">if ((</span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">)) !== </span><span class="default">FALSE</span><span class="keyword">)<br></span><span class="comment">//YES: works on both arrays returning their keys<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69588">  
  <a class="name">
  <strong class="user"><em>mark dot php at mhudson dot net</em></strong></a><div class="date" title="2006-09-11 05:49"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom69588">
<div class="phpcode"><code><span class="html">
I was going to complain bitterly about array_search() using zero-based indexes, but then I realized I should be using in_array() instead.<br><br>// if ( isset( $_GET['table'] ) and array_search( $_GET['table'], $valid_tables) ) {&nbsp; // BAD: fails on first[0] element<br>// if ( isset( $_GET['table'] ) and ( FALSE !== array_search( $_GET['table'], $valid_tables) ) ) { OK: but wasteful and convoluted<br>&nbsp;&nbsp; if ( isset( $_GET['table'] ) and in_array( $_GET['table'], $valid_tables) ) { // BETTER<br><br>The essence is this: if you really want to know the location of an element in an array, then use array_search, else if you only want to know whether that element exists, then use in_array()</span>
</code></div>
  </div>
 </div>
  <div class="note" id="122377">  
  <a class="name">
  <strong class="user"><em>Xriuk</em></strong></a><div class="date" title="2018-02-10 11:52"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom122377">
<div class="phpcode"><code><span class="html">
Be careful when search for indexes from array_keys() if you have a mixed associative array it will return both strings and integers resulting in comparison errors<br><br><span class="default">&lt;?php<br></span><span class="comment">// This syntax is allowed by PHP<br></span><span class="default">$arr </span><span class="keyword">= array(<br>&nbsp; </span><span class="string">"nice"</span><span class="keyword">,<br>&nbsp; </span><span class="string">"car" </span><span class="keyword">=&gt; </span><span class="string">"fast"</span><span class="keyword">,<br>&nbsp; </span><span class="string">"none"<br></span><span class="keyword">);<br><br></span><span class="comment">// Print the keys<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">));<br><br></span><span class="comment">/* The above prints this, as you can see we have mixed keys<br>array(3) {<br>&nbsp; [0]=&gt;<br>&nbsp; int(0)<br>&nbsp; [1]=&gt;<br>&nbsp; string(3) "car"<br>&nbsp; [2]=&gt;<br>&nbsp; int(1)<br>}<br>*/<br><br>// Search for the index "car"<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"car"</span><span class="keyword">, </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">))); </span><span class="comment">// Prints "int(0)" which is WRONG<br></span><span class="default">?&gt;<br></span><br>This happens because PHP, when comparing strings and integers, casts strings TO integers and this results in most of the cases in string becoming 0, so that's why when array_search() compares the first index (0) with the key "car" it gets true because apparently ("car" == 0) IS TRUE.<br>Setting array_search() to strict mode won't solve the problem because then array_search("0", array_keys($arr)) would return false even if an element with index 0 exists.<br>So my solution just converts all indexes from array_keys() to strings and then compares them correctly:<br><br><span class="default">&lt;?php<br>var_dump</span><span class="keyword">(</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"car"</span><span class="keyword">, </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">"strval"</span><span class="keyword">, </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)))); </span><span class="comment">// Prints "int(1)" which is CORRECT<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110120">  
  <a class="name">
  <strong class="user"><em>sunelbe at gmail dot com</em></strong></a><div class="date" title="2012-09-21 12:19"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom110120">
<div class="phpcode"><code><span class="html">
hey i have a easy multidimensional array search function 
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">search</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$results </span><span class="keyword">= array();
<br>
<br>&nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">))
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) &amp;&amp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] == </span><span class="default">$value</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$results</span><span class="keyword">[] = </span><span class="default">$array</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$subarray</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$results </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$results</span><span class="keyword">, </span><span class="default">search</span><span class="keyword">(</span><span class="default">$subarray</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">));
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; return </span><span class="default">$results</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="122288">  
  <a class="name">
  <strong class="user"><em>thinbegin at gmail dot com</em></strong></a><div class="date" title="2018-01-18 10:18"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom122288">
<div class="phpcode"><code><span class="html">
Despite PHP's amazing assortment of array functions and juggling maneuvers, I found myself needing a way to get the FULL array key mapping to a specific value. This function does that, and returns an array of the appropriate keys to get to said (first) value occurrence.<br><br>function array_recursive_search_key_map($needle, $haystack) {<br>&nbsp; &nbsp; foreach($haystack as $first_level_key=&gt;$value) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ($needle === $value) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return array($first_level_key);<br>&nbsp; &nbsp; &nbsp; &nbsp; } elseif (is_array($value)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $callback = array_recursive_search_key_map($needle, $value);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($callback) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return array_merge(array($first_level_key), $callback);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return false;<br>}<br><br>usage example:<br>-------------------<br><br>$nested_array = $sample_array = array(<br>&nbsp; &nbsp; 'a' =&gt; array(<br>&nbsp; &nbsp; &nbsp; &nbsp; 'one' =&gt; array ('aaa' =&gt; 'apple', 'bbb' =&gt; 'berry', 'ccc' =&gt; 'cantalope'),<br>&nbsp; &nbsp; &nbsp; &nbsp; 'two' =&gt; array ('ddd' =&gt; 'dog', 'eee' =&gt; 'elephant', 'fff' =&gt; 'fox')<br>&nbsp; &nbsp; ),<br>&nbsp; &nbsp; 'b' =&gt; array(<br>&nbsp; &nbsp; &nbsp; &nbsp; 'three' =&gt; array ('ggg' =&gt; 'glad', 'hhh' =&gt; 'happy', 'iii' =&gt; 'insane'),<br>&nbsp; &nbsp; &nbsp; &nbsp; 'four' =&gt; array ('jjj' =&gt; 'jim', 'kkk' =&gt; 'kim', 'lll' =&gt; 'liam')<br>&nbsp; &nbsp; ),<br>&nbsp; &nbsp; 'c' =&gt; array(<br>&nbsp; &nbsp; &nbsp; &nbsp; 'five' =&gt; array ('mmm' =&gt; 'mow', 'nnn' =&gt; 'no', 'ooo' =&gt; 'ohh'),<br>&nbsp; &nbsp; &nbsp; &nbsp; 'six' =&gt; array ('ppp' =&gt; 'pidgeon', 'qqq' =&gt; 'quail', 'rrr' =&gt; 'rooster')<br>&nbsp; &nbsp; )<br>);<br><br>$search_value = 'insane';<br><br>$array_keymap = array_recursive_search_key_map($search_value, $nested_array);<br><br>var_dump($array_keymap);<br>// Outputs:<br>// array(3) {<br>// [0]=&gt;<br>//&nbsp; string(1) "b"<br>//&nbsp; [1]=&gt;<br>//&nbsp; string(5) "three"<br>//&nbsp; [2]=&gt;<br>//&nbsp; string(3) "iii"<br>//}<br><br>----------------------------------------------<br><br>But again, with the above solution, PHP again falls short on how to dynamically access a specific element's value within the nested array. For that, I wrote a 2nd function to pull the value that was mapped above.<br><br>function array_get_nested_value($keymap, $array)<br>{<br>&nbsp; &nbsp; $nest_depth = sizeof($keymap);<br>&nbsp; &nbsp; $value = $array;<br>&nbsp; &nbsp; for ($i = 0; $i &lt; $nest_depth; $i++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; $value = $value[$keymap[$i]];<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return $value;<br>}<br><br>usage example:<br>-------------------<br>echo array_get_nested_value($array_keymap, $nested_array);&nbsp;&nbsp; // insane</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115594">  
  <a class="name">
  <strong class="user"><em>dk at danilok dot com</em></strong></a><div class="date" title="2014-08-21 06:26"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom115594">
<div class="phpcode"><code><span class="html">
I needed a way to return the value of a single specific key, thus:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">recursive_return_array_value_by_key</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">recursive_return_array_value_by_key</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else if(</span><span class="default">$needle </span><span class="keyword">=== </span><span class="default">$key</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="string">"</span><span class="default">$val</span><span class="string">\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$return</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106107">  
  <a class="name">
  <strong class="user"><em>revoke</em></strong></a><div class="date" title="2011-10-11 04:12"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom106107">
<div class="phpcode"><code><span class="html">
Better solution of multidimensional searching.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">multidimensional_search</span><span class="keyword">(</span><span class="default">$parents</span><span class="keyword">, </span><span class="default">$searched</span><span class="keyword">) {
<br>&nbsp; if (empty(</span><span class="default">$searched</span><span class="keyword">) || empty(</span><span class="default">$parents</span><span class="keyword">)) {
<br>&nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; }
<br> 
<br>&nbsp; foreach (</span><span class="default">$parents </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$exists </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; foreach (</span><span class="default">$searched </span><span class="keyword">as </span><span class="default">$skey </span><span class="keyword">=&gt; </span><span class="default">$svalue</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$exists </span><span class="keyword">= (</span><span class="default">$exists </span><span class="keyword">&amp;&amp; IsSet(</span><span class="default">$parents</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="default">$skey</span><span class="keyword">]) &amp;&amp; </span><span class="default">$parents</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="default">$skey</span><span class="keyword">] == </span><span class="default">$svalue</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; if(</span><span class="default">$exists</span><span class="keyword">){ return </span><span class="default">$key</span><span class="keyword">; }
<br>&nbsp; }
<br> 
<br>&nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>}
<br>
<br></span><span class="default">$parents </span><span class="keyword">= array();
<br></span><span class="default">$parents</span><span class="keyword">[] = array(</span><span class="string">'date'</span><span class="keyword">=&gt;</span><span class="default">1320883200</span><span class="keyword">, </span><span class="string">'uid'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">);
<br></span><span class="default">$parents</span><span class="keyword">[] = array(</span><span class="string">'date'</span><span class="keyword">=&gt;</span><span class="default">1320883200</span><span class="keyword">, </span><span class="string">'uid'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">);
<br></span><span class="default">$parents</span><span class="keyword">[] = array(</span><span class="string">'date'</span><span class="keyword">=&gt;</span><span class="default">1318204800</span><span class="keyword">, </span><span class="string">'uid'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">);
<br>
<br>echo </span><span class="default">multidimensional_search</span><span class="keyword">(</span><span class="default">$parents</span><span class="keyword">, array(</span><span class="string">'date'</span><span class="keyword">=&gt;</span><span class="default">1320883200</span><span class="keyword">, </span><span class="string">'uid'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">)); </span><span class="comment">// 1
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="117837">  
  <a class="name">
  <strong class="user"><em>maciej at speccode dot com</em></strong></a><div class="date" title="2015-08-18 05:58"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom117837">
<div class="phpcode"><code><span class="html">
FYI, remember that strict mode is something that might save you hours.<br><br>If you're searching for a string and you have a "true" boolean on the way - you will get it as result (first occurrence). Example below:<br><br><span class="default">&lt;?php<br><br>$arr </span><span class="keyword">= [<br>&nbsp; &nbsp; </span><span class="string">'foo'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'bar'</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">'abc'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'def'</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">'bool'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">'target' </span><span class="keyword">=&gt; </span><span class="string">'xyz'<br></span><span class="keyword">];<br><br></span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">array_search</span><span class="keyword">( </span><span class="string">'xyz'</span><span class="keyword">, </span><span class="default">$arr </span><span class="keyword">) ); </span><span class="comment">//bool<br></span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">array_search</span><span class="keyword">( </span><span class="string">'xyz'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">, </span><span class="default">true </span><span class="keyword">) ); </span><span class="comment">//target<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90711">  
  <a class="name">
  <strong class="user"><em>n-regen</em></strong></a><div class="date" title="2009-05-05 10:36"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom90711">
<div class="phpcode"><code><span class="html">
If you only know a part of a value in an array and want to know the complete value, you can use the following function:<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">array_find</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br>{<br>&nbsp;&nbsp; foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">)<br>&nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$item</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp;&nbsp; }<br>}<br></span><span class="default">?&gt;<br></span>The function returns the complete first value of $haystack that contains $needle.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93833">  
  <a class="name">
  <strong class="user"><em>codeslinger at compsalot dot com</em></strong></a><div class="date" title="2009-10-02 12:22"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom93833">
<div class="phpcode"><code><span class="html">
one thing to be very aware of is that array_search() will fail if the needle is a string and the array itself contains values that are mixture of numbers and strings.&nbsp; (or even a string that looks like a number)
<br>
<br>The problem is that unless you specify "strict" the match is done using ==&nbsp; &nbsp; and in that case any string will match a numeric value of zero which is not what you want.
<br>
<br>-----
<br>
<br>also, php can lookup an index pretty darn fast.&nbsp; for many scenarios, it is practical to maintain multiple arrays, one in which the index of the array is the search key and the normal array that contains the data.
<br>
<br><span class="default">&lt;?php
<br>
<br>&nbsp; $normal</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] = array(</span><span class="string">'key'</span><span class="keyword">=&gt;</span><span class="default">$key</span><span class="keyword">, </span><span class="string">'data'</span><span class="keyword">=&gt;</span><span class="string">'foo'</span><span class="keyword">);
<br>&nbsp; </span><span class="default">$inverse</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$index</span><span class="keyword">;
<br>
<br>&nbsp; </span><span class="comment">//very fast lookup, this beats any other kind of search
<br>
<br>&nbsp; </span><span class="keyword">if (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$inverse</span><span class="keyword">)) 
<br>&nbsp; {
<br>&nbsp; &nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">$inverse</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];
<br>&nbsp; &nbsp; return </span><span class="default">$normal</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">];
<br>&nbsp; }
<br>
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107944">  
  <a class="name">
  <strong class="user"><em>sneskid at hotmail dot com</em></strong></a><div class="date" title="2012-03-15 08:50"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom107944">
<div class="phpcode"><code><span class="html">
I had an array of arrays and needed to find the key of an element by comparing actual reference.<br>Beware that even with strict equality (===) php will equate arrays via their elements recursively, not by a simple internal pointer check as with class objects. The === can be slow for massive arrays and also crash if they contain circular references.<br><br>This function performs reference sniffing in order to return the key for an element that is exactly a reference of needle.<br><br><span class="default">&lt;?php <br></span><span class="keyword">function </span><span class="default">array_ref_search</span><span class="keyword">(&amp;</span><span class="default">$v</span><span class="keyword">, array &amp;</span><span class="default">$s</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)){ return </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">); }<br>&nbsp; &nbsp; foreach(</span><span class="default">$s </span><span class="keyword">as </span><span class="default">$rK </span><span class="keyword">=&gt; &amp;</span><span class="default">$rV</span><span class="keyword">)<br>&nbsp; &nbsp; { </span><span class="comment">// reference sniff<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tV </span><span class="keyword">= </span><span class="default">$v</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; if( (</span><span class="default">$rV </span><span class="keyword">=== (</span><span class="default">$v </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">)) &amp;&amp; (</span><span class="default">$rV </span><span class="keyword">=== (</span><span class="default">$v </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)) ){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">$tV</span><span class="keyword">; return </span><span class="default">$rK</span><span class="keyword">; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">$tV</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">; </span><span class="comment">// use null for php &lt; 4.2.0<br></span><span class="keyword">}<br><br></span><span class="default">$list&nbsp;&nbsp; </span><span class="keyword">= array();<br></span><span class="default">$list</span><span class="keyword">[</span><span class="string">'A'</span><span class="keyword">] = &amp;</span><span class="default">$valA</span><span class="keyword">; </span><span class="default">$list</span><span class="keyword">[</span><span class="string">'B'</span><span class="keyword">] = &amp;</span><span class="default">$valB</span><span class="keyword">;<br><br></span><span class="default">$valA </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$valB </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br>echo </span><span class="string">'array_ref_search: '</span><span class="keyword">, </span><span class="default">array_ref_search</span><span class="keyword">(</span><span class="default">$valB</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">), </span><span class="string">'&lt;/br&gt;'</span><span class="keyword">; </span><span class="comment">// key 'B'<br></span><span class="keyword">echo </span><span class="string">'array_search:&nbsp; &nbsp;&nbsp; '</span><span class="keyword">, </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$valB</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">), </span><span class="string">'&lt;/br&gt;'</span><span class="keyword">; </span><span class="comment">// key 'A'<br><br></span><span class="default">$valA </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">); </span><span class="default">$valB </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br>echo </span><span class="string">'array_ref_search: '</span><span class="keyword">, </span><span class="default">array_ref_search</span><span class="keyword">(</span><span class="default">$valB</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">), </span><span class="string">'&lt;/br&gt;'</span><span class="keyword">; </span><span class="comment">// key 'B'<br></span><span class="keyword">echo </span><span class="string">'array_search:&nbsp; &nbsp;&nbsp; '</span><span class="keyword">, </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$valB</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">), </span><span class="string">'&lt;/br&gt;'</span><span class="keyword">; </span><span class="comment">// key 'A' because ($valA === $valB) is true by elements<br><br></span><span class="default">$valB</span><span class="keyword">[] = &amp;</span><span class="default">$valB</span><span class="keyword">; </span><span class="comment">// circular reference<br></span><span class="keyword">echo </span><span class="string">'array_ref_search: '</span><span class="keyword">, </span><span class="default">array_ref_search</span><span class="keyword">(</span><span class="default">$valB</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">), </span><span class="string">'&lt;/br&gt;'</span><span class="keyword">; </span><span class="comment">// key 'B'<br></span><span class="keyword">echo </span><span class="string">'array_search:&nbsp; &nbsp;&nbsp; '</span><span class="keyword">, </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$valB</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">), </span><span class="string">'&lt;/br&gt;'</span><span class="keyword">; </span><span class="comment">// crash because ($valB === $valB) causes infinite loop<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121432">  
  <a class="name">
  <strong class="user"><em>justeme at sina dot com</em></strong></a><div class="date" title="2017-07-25 08:42"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121432">
<div class="phpcode"><code><span class="html">
/*<br>Be careful!!!<br>when i in php7.1.5<br>below program return int 0<br>is it a bug?<br>*/<br>array_search(0,['a','b','c'])</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90822">  
  <a class="name">
  <strong class="user"><em>tony dot peter at wanadoo dot fr</em></strong></a><div class="date" title="2009-05-11 12:53"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom90822">
<div class="phpcode"><code><span class="html">
A simple recursive array_search function : 
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">recursive_array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$haystack</span><span class="keyword">) {
<br>&nbsp; &nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$current_key</span><span class="keyword">=</span><span class="default">$key</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$needle</span><span class="keyword">===</span><span class="default">$value </span><span class="keyword">OR (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) &amp;&amp; </span><span class="default">recursive_array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">))) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$current_key</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77750">  
  <a class="name">
  <strong class="user"><em>kermes [at] thesevens [dot] net</em></strong></a><div class="date" title="2007-09-11 03:09"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom77750">
<div class="phpcode"><code><span class="html">
A variation of previous searches that returns an array of keys that match the given value:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">array_ksearch</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br>&nbsp; &nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="default">next</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">), </span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">current</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) == </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; return </span><span class="default">$result</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>Usage would be as follows:<br><span class="default">&lt;?php<br>$testArray </span><span class="keyword">= array(</span><span class="string">'one' </span><span class="keyword">=&gt; </span><span class="string">'test1'</span><span class="keyword">, </span><span class="string">'two' </span><span class="keyword">=&gt; </span><span class="string">'test2'</span><span class="keyword">, </span><span class="string">'three' </span><span class="keyword">=&gt; </span><span class="string">'test1'</span><span class="keyword">, </span><span class="string">'four' </span><span class="keyword">=&gt; </span><span class="string">'test2'</span><span class="keyword">, </span><span class="string">'five' </span><span class="keyword">=&gt; </span><span class="string">'test1'</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_ksearch</span><span class="keyword">(</span><span class="default">$testArray</span><span class="keyword">, </span><span class="string">'test1'</span><span class="keyword">));<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77525">  
  <a class="name">
  <strong class="user"><em>robertark at gmail dot com</em></strong></a><div class="date" title="2007-09-01 11:20"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom77525">
<div class="phpcode"><code><span class="html">
A better array_isearch would be to store all results in an array, then return the KEYS stored in $found, such as:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">array_isearch</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">){<br>&nbsp; </span><span class="default">$found </span><span class="keyword">= array();<br>&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; if (</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">) == </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)) </span><span class="default">$found</span><span class="keyword">[] = </span><span class="default">$k</span><span class="keyword">;<br>&nbsp; return </span><span class="default">$found</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>To use, simply have an array to search from then search it, for example:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">array_isearch</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br>&nbsp; </span><span class="default">$found </span><span class="keyword">= array();<br>&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br>&nbsp; &nbsp; if(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">) == </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)) </span><span class="default">$found</span><span class="keyword">[] = </span><span class="default">$k</span><span class="keyword">;<br>&nbsp; return </span><span class="default">$found</span><span class="keyword">;<br>}<br><br></span><span class="default">$stored </span><span class="keyword">= </span><span class="string">"these are an array"</span><span class="keyword">;<br></span><span class="default">$stored </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="default">$stored</span><span class="keyword">);<br><br></span><span class="default">$compare </span><span class="keyword">= array(</span><span class="string">"these"</span><span class="keyword">, </span><span class="string">"are"</span><span class="keyword">, </span><span class="string">"some"</span><span class="keyword">, </span><span class="string">"results"</span><span class="keyword">, </span><span class="string">"stored"</span><span class="keyword">, </span><span class="string">"in"</span><span class="keyword">, </span><span class="string">"an"</span><span class="keyword">, </span><span class="string">"array"</span><span class="keyword">);<br>foreach(</span><span class="default">$stored </span><span class="keyword">as </span><span class="default">$store</span><span class="keyword">) {<br>&nbsp; </span><span class="default">$results </span><span class="keyword">= </span><span class="default">array_isearch</span><span class="keyword">(</span><span class="default">$store</span><span class="keyword">, </span><span class="default">$compare</span><span class="keyword">);<br>&nbsp; foreach(</span><span class="default">$results </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$result</span><span class="keyword">)<br>&nbsp; &nbsp; echo </span><span class="string">"Key: "</span><span class="keyword">.</span><span class="default">$results</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">].</span><span class="string">"&lt;br /&gt;Found: "</span><span class="keyword">.</span><span class="default">$compare</span><span class="keyword">[</span><span class="default">$result</span><span class="keyword">].</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;<br></span><br>Hope this helps :-)<br><br>-Rob</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106056">  
  <a class="name">
  <strong class="user"><em>stooshie at gmail dot com</em></strong></a><div class="date" title="2011-10-06 02:51"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom106056">
<div class="phpcode"><code><span class="html">
Example of a recursive binary search that returns the index rather than boolean.<br><span class="default">&lt;?php<br></span><span class="comment">// returns the index of needle in haystack<br></span><span class="keyword">function </span><span class="default">binSearch</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="comment">// n is only needed if counting depth of search<br>&nbsp; &nbsp; </span><span class="keyword">global </span><span class="default">$n</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$n</span><span class="keyword">++;<br>&nbsp; &nbsp; </span><span class="comment">// get the length of passed array<br>&nbsp; &nbsp; </span><span class="default">$l </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="comment">// if length is 0, problem<br>&nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">$l </span><span class="keyword">&lt;= </span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return -</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">// get the mid element<br>&nbsp; &nbsp; </span><span class="default">$m </span><span class="keyword">= ((</span><span class="default">$l</span><span class="keyword">+(</span><span class="default">$l</span><span class="keyword">%</span><span class="default">2</span><span class="keyword">))/</span><span class="default">2</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="comment">// if mid &gt;= length (e.g. l=1)<br>&nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">$m </span><span class="keyword">&gt;= </span><span class="default">$l</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$m </span><span class="keyword">= </span><span class="default">$m</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">// get the indexed element to compare to the passed element and branch accordingly<br>&nbsp; &nbsp; </span><span class="default">$compare </span><span class="keyword">= </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">];<br>&nbsp; &nbsp; switch(</span><span class="default">true</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; case(</span><span class="default">$compare</span><span class="keyword">&gt;</span><span class="default">$needle</span><span class="keyword">):<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// recurse on the lower half<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_haystack </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$new_haystack</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">binSearch</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$new_haystack</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// return current index - (length of lower half - found index in lower half)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">$m </span><span class="keyword">- (</span><span class="default">$c </span><span class="keyword">- </span><span class="default">$r</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; case(</span><span class="default">$compare</span><span class="keyword">&lt;</span><span class="default">$needle</span><span class="keyword">):<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// recurse on the upper half<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_haystack </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, (</span><span class="default">$l</span><span class="keyword">-</span><span class="default">$m</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$new_haystack</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">binSearch</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$new_haystack</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// return current position + found index in upper half<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">$m </span><span class="keyword">+ </span><span class="default">$r</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; case(</span><span class="default">$compare</span><span class="keyword">==</span><span class="default">$needle</span><span class="keyword">):<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// found it, so return index<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">$m</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="126259">  
  <a class="name">
  <strong class="user"><em>moe at moose dot at</em></strong></a><div class="date" title="2021-07-21 10:39"><strong>1 month ago</strong></div>
  <div class="text" id="Hcom126259">
<div class="phpcode"><code><span class="html">
I needed a function, that returns a value by specifying a keymap to the searched value in a multidimensional array and came up with this.<br><br>$s is the&nbsp; keymap to the needle and $a the haystack array.<br><br><span class="default">&lt;?PHP<br><br></span><span class="comment">// search keymap $s in array $a<br></span><span class="keyword">function </span><span class="default">get_key_in_array</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">)<br>{<br>&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">) &amp;&amp; </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)])) {<br>&nbsp; &nbsp; return </span><span class="default">get_key_in_array</span><span class="keyword">(</span><span class="default">reset</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">), </span><span class="default">$a</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)]);<br>&nbsp; } else {<br>&nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)) </span><span class="default">$s </span><span class="keyword">= </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br>&nbsp; &nbsp; return isset(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$s</span><span class="keyword">])?</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$s</span><span class="keyword">]:</span><span class="default">false</span><span class="keyword">;<br>&nbsp; }<br>}<br><br></span><span class="comment">// usage examples<br>// ------------------------------<br></span><span class="default">$arr </span><span class="keyword">= [</span><span class="string">'foo'</span><span class="keyword">=&gt;[</span><span class="string">'bar'</span><span class="keyword">=&gt;[</span><span class="string">'baz'</span><span class="keyword">=&gt;</span><span class="default">77</span><span class="keyword">]]];<br><br></span><span class="default">$s </span><span class="keyword">= [</span><span class="string">'foo'</span><span class="keyword">=&gt;[</span><span class="string">'bar'</span><span class="keyword">=&gt;</span><span class="string">'baz'</span><span class="keyword">]];<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">get_key_in_array</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">));<br><br></span><span class="default">$s </span><span class="keyword">= [</span><span class="string">'foo'</span><span class="keyword">=&gt;[</span><span class="string">'bar'</span><span class="keyword">=&gt;[</span><span class="string">'baz'</span><span class="keyword">]]];<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">get_key_in_array</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">));<br><br></span><span class="default">$s </span><span class="keyword">= [</span><span class="string">'foo'</span><span class="keyword">=&gt;[</span><span class="string">'bar'</span><span class="keyword">=&gt;[</span><span class="string">'nix'</span><span class="keyword">]]];<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">get_key_in_array</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">));<br><br></span><span class="default">$s </span><span class="keyword">= [</span><span class="string">'foo'</span><span class="keyword">=&gt;</span><span class="string">'bar'</span><span class="keyword">];<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">get_key_in_array</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">));<br><br></span><span class="default">$s </span><span class="keyword">= [</span><span class="string">'foo'</span><span class="keyword">];<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">get_key_in_array</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">));<br><br></span><span class="default">$s </span><span class="keyword">= </span><span class="string">'foo'</span><span class="keyword">;<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">get_key_in_array</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">));<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="126271">  
  <a class="name">
  <strong class="user"><em>moe at moose dot at</em></strong></a><div class="date" title="2021-07-24 10:44"><strong>1 month ago</strong></div>
  <div class="text" id="Hcom126271">
<div class="phpcode"><code><span class="html">
My function get_key_in_array() needed some improvement:<br><br><span class="default">&lt;?PHP<br><br></span><span class="comment">// search keymap $s in array $a<br></span><span class="keyword">function </span><span class="default">get_key_in_array</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">)<br>{<br>&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)]) &amp;&amp; </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)])) {<br>&nbsp; &nbsp; return </span><span class="default">get_key_in_array</span><span class="keyword">(</span><span class="default">reset</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">), </span><span class="default">$a</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)]);<br>&nbsp; } else {<br>&nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)) </span><span class="default">$s</span><span class="keyword">=</span><span class="default">reset</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br>&nbsp; &nbsp; return (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)||</span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">))&amp;&amp;isset(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$s</span><span class="keyword">])?</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$s</span><span class="keyword">]:</span><span class="default">false</span><span class="keyword">;<br>&nbsp; }<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="126183">  
  <a class="name">
  <strong class="user"><em>vikingjs+phpnet at mac dot com</em></strong></a><div class="date" title="2021-06-22 12:05"><strong>2 months ago</strong></div>
  <div class="text" id="Hcom126183">
<div class="phpcode"><code><span class="html">
An implementation of a search function that uses a callback, to allow searching for objects of arbitrary complexity:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">array_usearch</span><span class="keyword">(array </span><span class="default">$array</span><span class="keyword">, </span><span class="default">Closure $test</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$iterator </span><span class="keyword">= new </span><span class="default">ArrayIterator</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br><br>&nbsp; &nbsp; while (</span><span class="default">$found </span><span class="keyword">=== </span><span class="default">false </span><span class="keyword">&amp;&amp; </span><span class="default">$iterator</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">()) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$test</span><span class="keyword">(</span><span class="default">$iterator</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">())) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">$iterator</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$iterator</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">();<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">$found</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>The above takes a closure, rather than a callable, but that could easily be altered. Like array_search, this will return false if no match is found. I made the closure the last parameter in case php one day implements trailing-closure syntax.<br><br>For instance, if you have an array of objects with an id property, you could search for the object with a specific id like this:<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">Thing&nbsp; </span><span class="keyword">{<br>&nbsp; &nbsp; public </span><span class="default">$id</span><span class="keyword">;<br>&nbsp; &nbsp; public </span><span class="default">$name</span><span class="keyword">;<br><br>&nbsp; &nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">, </span><span class="default">$name</span><span class="keyword">, </span><span class="default">$category</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">= </span><span class="default">$id</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="default">$name</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">$listOfThings </span><span class="keyword">= [<br>&nbsp; &nbsp; new </span><span class="default">Thing</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="string">'one'</span><span class="keyword">),<br>&nbsp; &nbsp; new </span><span class="default">Thing</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">, </span><span class="string">'two'</span><span class="keyword">),<br>&nbsp; &nbsp; new </span><span class="default">Thing</span><span class="keyword">(</span><span class="default">3</span><span class="keyword">, </span><span class="string">'three'</span><span class="keyword">),<br>&nbsp; &nbsp; new </span><span class="default">Thing</span><span class="keyword">(</span><span class="default">4</span><span class="keyword">, </span><span class="string">'four'</span><span class="keyword">),<br>];<br><br></span><span class="default">$id4Index </span><span class="keyword">= </span><span class="default">array_usearch</span><span class="keyword">(</span><span class="default">$listOfThings</span><span class="keyword">, function(</span><span class="default">$thing</span><span class="keyword">) {<br>&nbsp; &nbsp; return </span><span class="default">$thing</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">=== </span><span class="default">4</span><span class="keyword">;<br>});<br></span><span class="default">?&gt;<br></span><br>Since the Closure can capture information, it becomes simple to write a function that takes search criteria as parameters, creates a closure with those criteria, and calls the above. A simple example that does the same search as above would be<br><br><span class="default">&lt;?php<br>$idClosure </span><span class="keyword">= function(</span><span class="default">$id</span><span class="keyword">) {<br>&nbsp; &nbsp; return function(</span><span class="default">$item</span><span class="keyword">) use (</span><span class="default">$id</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">= </span><span class="default">$id</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">$id4Index </span><span class="keyword">= </span><span class="default">array_usearch</span><span class="keyword">(</span><span class="default">$idClosure</span><span class="keyword">(</span><span class="default">4</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>It's more complex to set up, but now any search for an id can be written in a single line, making things clean and concise.<br><br>For a more complex example, this function takes an array of key/value pairs and returns the key for the first item in the array that has all those properties with the same values.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">firstIndexMatching</span><span class="keyword">(array </span><span class="default">$array</span><span class="keyword">, array </span><span class="default">$criteria</span><span class="keyword">, </span><span class="default">bool $useStrict </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">) {<br><br>&nbsp; &nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$criteria</span><span class="keyword">) &lt; </span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">// create a closure that has captured the search criteria<br>&nbsp; &nbsp; </span><span class="default">$testWithCriteria </span><span class="keyword">= function(</span><span class="default">$criteria</span><span class="keyword">, </span><span class="default">$useStrict</span><span class="keyword">) {<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return function(</span><span class="default">$item</span><span class="keyword">) use (</span><span class="default">$criteria</span><span class="keyword">, </span><span class="default">$useStrict</span><span class="keyword">) {<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$criteria </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!isset(</span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (</span><span class="default">$useStrict </span><span class="keyword">&amp;&amp; </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">$key </span><span class="keyword">!== </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (!</span><span class="default">$useStrict </span><span class="keyword">&amp;&amp; </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">$key </span><span class="keyword">!= </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; };<br>&nbsp; &nbsp; };<br><br>&nbsp; &nbsp; return </span><span class="default">array_usearch</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$testWithCriteria</span><span class="keyword">(</span><span class="default">$criteria</span><span class="keyword">, </span><span class="default">$useStrict</span><span class="keyword">));<br>}<br></span><span class="default">?&gt;<br></span><br>If you have a list of people, for instance, you can now simply find the person record with a specific first and last name:<br><br><span class="default">&lt;?php<br>$joeSchlabotnikIndex </span><span class="keyword">= </span><span class="default">firstIndexMatching</span><span class="keyword">(</span><span class="default">$people</span><span class="keyword">, [<br>&nbsp; &nbsp; </span><span class="string">'firstName' </span><span class="keyword">=&gt; </span><span class="string">'Joe'</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">'lastName' </span><span class="keyword">=&gt; </span><span class="string">'Schlabotnik'<br></span><span class="keyword">]);<br></span><span class="default">?&gt;<br></span><br>Obviously firstIndexMatching could be modified to use case-insensitive comparisons or anything else that fits your use-case. They idea is capturing the input data.<br><br>The final step is a function that returns the item, rather than its key, or null if no match found:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">firstItemMatching</span><span class="keyword">(array </span><span class="default">$array</span><span class="keyword">, array </span><span class="default">$criteria</span><span class="keyword">, </span><span class="default">bool $useStrict </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="comment">// fun fact: $array[false] is equivalent to $array[0]<br>&nbsp; &nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">firstIndexMatching</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$criteria</span><span class="keyword">, </span><span class="default">$useStrict</span><span class="keyword">);<br>&nbsp; &nbsp; return </span><span class="default">$index </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">? </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] ?? </span><span class="default">null </span><span class="keyword">: </span><span class="default">null</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="126130">  
  <a class="name">
  <strong class="user"><em>vikingjs+phpnet at mac dot com</em></strong></a><div class="date" title="2021-06-01 08:15"><strong>3 months ago</strong></div>
  <div class="text" id="Hcom126130">
<div class="phpcode"><code><span class="html">
An implementation of a search function that uses a callback, to allow searching for objects of arbitrary complexity:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">array_usearch</span><span class="keyword">(array </span><span class="default">$array</span><span class="keyword">, </span><span class="default">Closure $test</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$iterator </span><span class="keyword">= new </span><span class="default">ArrayIterator</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br><br>&nbsp; &nbsp; while (</span><span class="default">$found </span><span class="keyword">=== </span><span class="default">false </span><span class="keyword">&amp;&amp; </span><span class="default">$iterator</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">()) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$test</span><span class="keyword">(</span><span class="default">$iterator</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">())) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">$iterator</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$iterator</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">();<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">$found</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>The above takes a closure, rather than a callable, but that could easily be altered. Like array_search, this will return false if no match is found. I made the closure the last parameter in case php one day implements trailing-closure syntax.<br><br>For instance, if you have an array of objects with an id property, you could search for the object with a specific id like this:<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">Thing&nbsp; </span><span class="keyword">{<br>&nbsp; &nbsp; public </span><span class="default">$id</span><span class="keyword">;<br>&nbsp; &nbsp; public </span><span class="default">$name</span><span class="keyword">;<br><br>&nbsp; &nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">, </span><span class="default">$name</span><span class="keyword">, </span><span class="default">$category</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">= </span><span class="default">$id</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="default">$name</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">$listOfThings </span><span class="keyword">= [<br>&nbsp; &nbsp; new </span><span class="default">Thing</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="string">'one'</span><span class="keyword">),<br>&nbsp; &nbsp; new </span><span class="default">Thing</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">, </span><span class="string">'two'</span><span class="keyword">),<br>&nbsp; &nbsp; new </span><span class="default">Thing</span><span class="keyword">(</span><span class="default">3</span><span class="keyword">, </span><span class="string">'three'</span><span class="keyword">),<br>&nbsp; &nbsp; new </span><span class="default">Thing</span><span class="keyword">(</span><span class="default">4</span><span class="keyword">, </span><span class="string">'four'</span><span class="keyword">),<br>];<br><br></span><span class="default">$id4Index </span><span class="keyword">= </span><span class="default">array_usearch</span><span class="keyword">(</span><span class="default">$listOfThings</span><span class="keyword">, function(</span><span class="default">$thing</span><span class="keyword">) {<br>&nbsp; &nbsp; return </span><span class="default">$thing</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">=== </span><span class="default">4</span><span class="keyword">;<br>});<br></span><span class="default">?&gt;<br></span><br>Since the Closure can capture information, it becomes simple to write a function that takes search criteria as parameters, creates a closure with those criteria, and calls the above. A simple example that does the same search as above would be<br><br><span class="default">&lt;?php<br>$idClosure </span><span class="keyword">= function(</span><span class="default">$id</span><span class="keyword">) {<br>&nbsp; &nbsp; return function(</span><span class="default">$item</span><span class="keyword">) use (</span><span class="default">$id</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">= </span><span class="default">$id</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">$id4Index </span><span class="keyword">= </span><span class="default">array_usearch</span><span class="keyword">(</span><span class="default">$idClosure</span><span class="keyword">(</span><span class="default">4</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>It's more complex to set up, but now any search for an id can be written in a single line, making things clean and concise.<br><br>For a more complex example, this function takes an array of key/value pairs and returns the key for the first item in the array that has all those properties with the same values.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">firstIndexMatching</span><span class="keyword">(array </span><span class="default">$array</span><span class="keyword">, array </span><span class="default">$criteria</span><span class="keyword">, </span><span class="default">bool $useStrict </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">) {<br><br>&nbsp; &nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$criteria</span><span class="keyword">) &lt; </span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">// create a closure that has captured the search criteria<br>&nbsp; &nbsp; </span><span class="default">$testWithCriteria </span><span class="keyword">= function(</span><span class="default">$criteria</span><span class="keyword">, </span><span class="default">$useStrict</span><span class="keyword">) {<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return function(</span><span class="default">$item</span><span class="keyword">) use (</span><span class="default">$criteria</span><span class="keyword">, </span><span class="default">$useStrict</span><span class="keyword">) {<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$criteria </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!isset(</span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (</span><span class="default">$useStrict </span><span class="keyword">&amp;&amp; </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">$key </span><span class="keyword">!== </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (!</span><span class="default">$useStrict </span><span class="keyword">&amp;&amp; </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">$key </span><span class="keyword">!= </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; };<br>&nbsp; &nbsp; };<br><br>&nbsp; &nbsp; return </span><span class="default">array_usearch</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$testWithCriteria</span><span class="keyword">(</span><span class="default">$criteria</span><span class="keyword">, </span><span class="default">$useStrict</span><span class="keyword">));<br>}<br></span><span class="default">?&gt;<br></span><br>If you have a list of people, for instance, you can now simply find the person record with a specific first and last name:<br><br><span class="default">&lt;?php<br>$joeSchlabotnikIndex </span><span class="keyword">= </span><span class="default">firstIndexMatching</span><span class="keyword">(</span><span class="default">$people</span><span class="keyword">, [<br>&nbsp; &nbsp; </span><span class="string">'firstName' </span><span class="keyword">=&gt; </span><span class="string">'Joe'</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">'lastName' </span><span class="keyword">=&gt; </span><span class="string">'Schlabotnik'<br></span><span class="keyword">]);<br></span><span class="default">?&gt;<br></span><br>Obviously firstIndexMatching could be modified to use case-insensitive comparisons or anything else that fits your use-case. They idea is capturing the input data.<br><br>The final step is a function that returns the item, rather than its key, or null if no match found:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">firstItemMatching</span><span class="keyword">(array </span><span class="default">$array</span><span class="keyword">, array </span><span class="default">$criteria</span><span class="keyword">, </span><span class="default">bool $useStrict </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="comment">// fun fact: $array[false] is equivalent to $array[0]<br>&nbsp; &nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">firstIndexMatching</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$criteria</span><span class="keyword">, </span><span class="default">$useStrict</span><span class="keyword">);<br>&nbsp; &nbsp; return </span><span class="default">$index </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">? </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] ?? </span><span class="default">null </span><span class="keyword">: </span><span class="default">null</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="125766">  
  <a class="name">
  <strong class="user"><em>trash-11 at mail dot ru</em></strong></a><div class="date" title="2021-02-03 12:22"><strong>7 months ago</strong></div>
  <div class="text" id="Hcom125766">
<div class="phpcode"><code><span class="html">
array_search of null doesn't return FALSE, be careful</span>
</code></div>
  </div>
 </div>
  <div class="note" id="125022">  
  <a class="name">
  <strong class="user"><em>joe at white-fire dot co dot uk</em></strong></a><div class="date" title="2020-05-18 09:32"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom125022">
<div class="phpcode"><code><span class="html">
By extension of&nbsp; `sunelbe at gmail dot com` solution to search for a specific array element with key value in a multidimensional array, this one also returns the parent. <br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">array_search_multi</span><span class="keyword">(<br>&nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="default">$key</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="default">$value</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="default">$parent </span><span class="keyword">= </span><span class="default">false<br></span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$results </span><span class="keyword">= array();<br><br>&nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) &amp;&amp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] == </span><span class="default">$value</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$results</span><span class="keyword">[] = </span><span class="default">$array</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$id </span><span class="keyword">=&gt; </span><span class="default">$subarray</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">array_search_multi</span><span class="keyword">(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$subarray</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!empty(</span><span class="default">$found</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$parent</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$results</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">] =<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$results </span><span class="keyword">= </span><span class="default">$found</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">$results</span><span class="keyword">;<br>}<br><br></span><span class="default">$array </span><span class="keyword">= array(<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'key1' </span><span class="keyword">=&gt; array(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'ID' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'key2' </span><span class="keyword">=&gt; array(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'ID' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'key3' </span><span class="keyword">=&gt; array(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'ID' </span><span class="keyword">=&gt; </span><span class="default">3<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br>&nbsp; &nbsp; &nbsp; &nbsp; ),<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'key4' </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'key6' </span><span class="keyword">=&gt; array(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'ID' </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'key7' </span><span class="keyword">=&gt; array(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'ID' </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'key8' </span><span class="keyword">=&gt; array(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'ID' </span><span class="keyword">=&gt; </span><span class="default">7</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'value' </span><span class="keyword">=&gt; </span><span class="string">'test'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br>);<br><br></span><span class="default">array_search_multi</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'ID'</span><span class="keyword">, </span><span class="default">7</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br><br>[</span><span class="default">0</span><span class="keyword">] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">ID</span><span class="keyword">] =&gt; </span><span class="default">7<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">value</span><span class="keyword">] =&gt; </span><span class="default">test<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">)<br><br></span><span class="default">array_search_multi</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'ID'</span><span class="keyword">, </span><span class="default">7</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br><br>[</span><span class="default">key6</span><span class="keyword">] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">ID</span><span class="keyword">] =&gt; </span><span class="default">5<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">key7</span><span class="keyword">] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">ID</span><span class="keyword">] =&gt; </span><span class="default">6<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">key8</span><span class="keyword">] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">ID</span><span class="keyword">] =&gt; </span><span class="default">7<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">value</span><span class="keyword">] =&gt; </span><span class="default">test<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">)<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="124881">  
  <a class="name">
  <strong class="user"><em>it2 dot mnr at gmail dot com</em></strong></a><div class="date" title="2020-04-04 06:54"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom124881">
<div class="phpcode"><code><span class="html">
About searcing in multi-dimentional arrays; <br>note on "xfoxawy at gmail dot com":<br><br>If you use your own keys in a multidimensional array, this will not work. Better use for this situation:<br><br>array_search($searchingValue, array_map(function($val){return $val['KEY_NAME'];}, $inputArray));</span>
</code></div>
  </div>
 </div>
  <div class="note" id="124985">  
  <a class="name">
  <strong class="user"><em>nordseebaer at gmx dot de</em></strong></a><div class="date" title="2020-05-08 08:08"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom124985">
<div class="phpcode"><code><span class="html">
It's really important to check the return value is not false! I used array_search() to determine the index of an value to unset this value and then realized that $arr[false] === $arr[0] !<br><br><span class="default">&lt;?php<br>$arr </span><span class="keyword">= [</span><span class="string">'apple'</span><span class="keyword">, </span><span class="string">'banana'</span><span class="keyword">];<br><br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] === </span><span class="string">'apple'</span><span class="keyword">); </span><span class="comment">// true<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">false</span><span class="keyword">] === </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]); </span><span class="comment">// true<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">false</span><span class="keyword">] === </span><span class="string">'apple'</span><span class="keyword">); </span><span class="comment">// true<br><br></span><span class="keyword">unset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'banana'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">)]); </span><span class="comment">//index = 1<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br><br></span><span class="comment">// result<br>//&nbsp;&nbsp; array(1) {<br>//&nbsp; &nbsp;&nbsp; [0]=&gt;<br>//&nbsp; &nbsp;&nbsp; string(5) "apple"<br>//&nbsp;&nbsp; }<br><br></span><span class="keyword">unset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'peach'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">)]); </span><span class="comment">//not found, result is false<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br><br></span><span class="comment">// result<br>//&nbsp;&nbsp; array(0) {<br>//&nbsp;&nbsp; }<br>// because $arr[false] === $arr[0]<br></span><span class="default">?&gt;<br></span><br>So always check the return of array_search!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="124961">  
  <a class="name">
  <strong class="user"><em>yasien dot dwieb at gmail dot com</em></strong></a><div class="date" title="2020-04-28 05:41"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom124961">
<div class="phpcode"><code><span class="html">
Beware when using array_search to a mix of string and integer where prefixes of keys may collide, as in my case I have encountered the following situation:<br><br>Assume you have the following array:<br><span class="default">&lt;?php<br>$arr </span><span class="keyword">= [<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'index 0'</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="string">'index 1'</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">3 </span><span class="keyword">=&gt; </span><span class="string">'index 2'</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'3anothersuffix' </span><span class="keyword">=&gt; </span><span class="string">'index 3'<br></span><span class="keyword">];<br><br></span><span class="default">$index1 </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'3'</span><span class="keyword">, </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)); </span><span class="comment">// 2<br></span><span class="default">$index2 </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'3anothersuffix'</span><span class="keyword">, </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)); </span><span class="comment">//2<br></span><span class="default">?&gt;<br></span><br>$index1 and $index2 will be the same<br><br>after using strict type search:<br><br><span class="default">&lt;?php<br>$index1 </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'3'</span><span class="keyword">, </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">), </span><span class="default">true</span><span class="keyword">); </span><span class="comment">// false<br></span><span class="default">$index2 </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'3anothersuffix'</span><span class="keyword">, </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">), </span><span class="default">true</span><span class="keyword">);&nbsp; </span><span class="comment">//3<br></span><span class="default">?&gt;<br></span><br>it will not find $index1 at all while returning a correct value for $index2;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88465">  
  <a class="name">
  <strong class="user"><em>helenadeus at gmail dot com</em></strong></a><div class="date" title="2009-01-25 01:05"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom88465">
<div class="phpcode"><code><span class="html">
I was trying to use array_search to retrieve all the values that match a given needle, but it turns out only the first match key is returned. I built this little function, which works just like array_search, but returns all the keys that match a given needle instead. The output is an array.<br><br><span class="default">&lt;?php<br><br>$haystack </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">,</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">);<br><br></span><span class="default">$needle </span><span class="keyword">= </span><span class="string">'a'</span><span class="keyword">;<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_search_all</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">));<br><br></span><span class="comment">//Output will be<br>// Array<br>// (<br>//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0]=&gt;1<br>//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1]=&gt;3<br>// )<br><br></span><span class="keyword">function </span><span class="default">array_search_all</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br>{</span><span class="comment">#array_search_match($needle, $haystack) returns all the keys of the values that match $needle in $haystack<br><br>&nbsp; &nbsp; </span><span class="keyword">foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]==</span><span class="default">$needle</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$k</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return (</span><span class="default">$array</span><span class="keyword">);<br><br>&nbsp; &nbsp; <br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87773">  
  <a class="name">
  <strong class="user"><em>azaozz, gmail</em></strong></a><div class="date" title="2008-12-20 05:23"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom87773">
<div class="phpcode"><code><span class="html">
Expanding on the comment by hansen{}cointel.de:<br><br>When searching for a string and the array contains 0 (zero), the string is casted to (int) by the type-casting which is always 0 (perhaps the opposite is the proper behaviour, the array value 0 should have been casted to string). That produces unexpected results if strict comparison is not used:<br><br><span class="default">&lt;?php<br>$a </span><span class="keyword">= array(</span><span class="default">0</span><span class="keyword">, </span><span class="string">"str1"</span><span class="keyword">, </span><span class="string">"str2"</span><span class="keyword">, </span><span class="string">"str3"</span><span class="keyword">);<br>echo </span><span class="string">"<br>str1 = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str1"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">).</span><span class="string">",<br>str2 = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str2"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">).</span><span class="string">",<br>str3 = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str3"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">).</span><span class="string">",<br><br>str1 strict = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str1"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">).</span><span class="string">",<br>str2 strict = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str2"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">).</span><span class="string">",<br>str3 strict = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str3"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>This will return:<br>str1 = 0, str2 = 0, str3 = 0, str1 strict = 1, str2 strict = 2, str3 strict = 3</span>
</code></div>
  </div>
 </div>
  <div class="note" id="122632">  
  <a class="name">
  <strong class="user"><em>miguelserranocabeza at gmail dot com</em></strong></a><div class="date" title="2018-04-18 10:56"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom122632">
<div class="phpcode"><code><span class="html">
For multiarray values i got this solution ;)<br><br>$taxonomy = array(<br>&nbsp; &nbsp; array('index' =&gt; array('AU200_AUD','CN50_USD')),<br>&nbsp; &nbsp; array('mt' =&gt; array('XAG_GBP','XAG_HKD','XAU_GBP','XAU_HKD','XAU_JPY')),<br>&nbsp; &nbsp; array('aud' =&gt; array('AUD_CAD','AUD_CHF','AUD_HKD','AUD_JPY','AUD_NZD','AUD_SGD','AUD_USD')),<br>&nbsp; &nbsp; array('cad' =&gt; array('CAD_CHF','CAD_HKD','CAD_JPY','CAD_SGD','CHF_HKD','CHF_JPY','CHF_ZAR')),<br>&nbsp; &nbsp; array('eur' =&gt; array('EUR_AUD','EUR_CAD','EUR_CHF','EUR_NOK','EUR_NZD','EUR_PLN','EUR_ZAR')),<br>&nbsp; &nbsp; array('gbp' =&gt; array('GBP_AUD','GBP_CAD','GBP_CHF','GBP_USD','GBP_ZAR')),<br>&nbsp; &nbsp; array('hkd' =&gt; array('HKD_JPY')),<br>&nbsp; &nbsp; array('nzd' =&gt; array('NZD_CAD','NZD_CHF','NZD_HKD','NZD_JPY','NZD_SGD','NZD_USD')),<br>&nbsp; &nbsp; array('sgd' =&gt; array('SGD_CHF','SGD_HKD','SGD_JPY')),<br>&nbsp; &nbsp; array('try' =&gt; array('TRY_JPY')),<br>&nbsp; &nbsp; array('usd' =&gt; array('USD_CAD','USD_CHF','USD_CNH','USD_SGD','USD_THB','USD_TRY','USD_ZAR')),<br>&nbsp; &nbsp; array('zar' =&gt; array('ZAR_JPY')),<br>&nbsp; );<br><br>&nbsp; foreach ($taxonomies as $key =&gt; $tax) {<br>&nbsp; &nbsp; foreach ($tax as $value) {<br>&nbsp; &nbsp; &nbsp; if(array_search('SGD_HKD', $value)) $taxonomy = key($tax);<br>&nbsp; &nbsp; }<br>&nbsp; }<br>echo($taxonomy); // this print "sgd"</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121777">  
  <a class="name">
  <strong class="user"><em>t-fav</em></strong></a><div class="date" title="2017-10-19 01:20"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom121777">
<div class="phpcode"><code><span class="html">
Noted some interesting behaviour when using array_search to find the correct index in an array containing an index with a value of 0.<br><br>The following works as expected.<br><br><span class="default">&lt;?php<br><br>$dataSet </span><span class="keyword">= [];<br></span><span class="default">$dataSet</span><span class="keyword">[] = [</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Row A'</span><span class="keyword">, </span><span class="string">'items' </span><span class="keyword">=&gt; [</span><span class="string">'ItemA' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'ItemB' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">]];<br></span><span class="default">$dataSet</span><span class="keyword">[] = [</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Row B'</span><span class="keyword">, </span><span class="string">'items' </span><span class="keyword">=&gt; [</span><span class="string">'ItemA' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'ItemB' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">]];<br><br></span><span class="default">$rows </span><span class="keyword">= [];<br>foreach (</span><span class="default">$dataSet </span><span class="keyword">as </span><span class="default">$dataRow</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$row </span><span class="keyword">= [<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dataRow</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">],<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'ItemA'</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'ItemB'<br>&nbsp; &nbsp; </span><span class="keyword">];<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; foreach (</span><span class="default">$dataRow</span><span class="keyword">[</span><span class="string">'items'</span><span class="keyword">] as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$row</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$row</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$rows</span><span class="keyword">[] = </span><span class="default">$row</span><span class="keyword">;<br>}<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$rows</span><span class="keyword">);<br><br></span><span class="default">It returns</span><span class="keyword">:<br><br>Array<br>(<br>&nbsp; &nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="default">Row A<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] =&gt; </span><span class="default">2<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">)<br>&nbsp; &nbsp; [</span><span class="default">1</span><span class="keyword">] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="default">Row B<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] =&gt; </span><span class="default">2<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">)<br>)<br><br></span><span class="default">However</span><span class="keyword">, </span><span class="default">the following seems to totally ignore the index containing the value 0 </span><span class="keyword">and </span><span class="default">thus returns the wrong index</span><span class="keyword">.<br><br>&lt;?</span><span class="default">php<br><br>$dataSet </span><span class="keyword">= [];<br></span><span class="default">$dataSet</span><span class="keyword">[] = [</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Row A'</span><span class="keyword">, </span><span class="string">'items' </span><span class="keyword">=&gt; [</span><span class="string">'ItemA' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'ItemB' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">]];<br></span><span class="default">$dataSet</span><span class="keyword">[] = [</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Row B'</span><span class="keyword">, </span><span class="string">'items' </span><span class="keyword">=&gt; [</span><span class="string">'ItemA' </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">'ItemB' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">]];<br><br></span><span class="default">$rows </span><span class="keyword">= [];<br>foreach (</span><span class="default">$dataSet </span><span class="keyword">as </span><span class="default">$dataRow</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$row </span><span class="keyword">= [<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dataRow</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">],<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'ItemA'</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'ItemB'<br>&nbsp; &nbsp; </span><span class="keyword">];<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; foreach (</span><span class="default">$dataRow</span><span class="keyword">[</span><span class="string">'items'</span><span class="keyword">] as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$row</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$row</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$rows</span><span class="keyword">[] = </span><span class="default">$row</span><span class="keyword">;<br>}<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$rows</span><span class="keyword">);<br><br></span><span class="default">It returns</span><span class="keyword">:<br><br>Array<br>(<br>&nbsp; &nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="default">Row A<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] =&gt; </span><span class="default">2<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">)<br>&nbsp; &nbsp; [</span><span class="default">1</span><span class="keyword">] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="default">Row B<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">2<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] =&gt; </span><span class="default">ItemB<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">)<br>)<br><br></span><span class="default">However</span><span class="keyword">, </span><span class="default">setting ItemA</span><span class="string">'s value on Row B to '' or false works fine. Also, passing in the third optional parameter [, bool $strict = true ] works correctly as well. Is this intentional behaviour?</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="46762">  
  <a class="name">
  <strong class="user"><em>F?lix Cloutier &lt;felixcca at yahoo dot ca&gt;</em></strong></a><div class="date" title="2004-10-22 05:01"><strong>16 years ago</strong></div>
  <div class="text" id="Hcom46762">
<div class="phpcode"><code><span class="html">
There is no function to count the occurences of needle in haystack, so I made my own one...<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">array_match</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; if( !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) ) return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; while( (</span><span class="default">in_array</span><span class="keyword">( </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack </span><span class="keyword">)) != </span><span class="default">FALSE </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)] = </span><span class="default">md5</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; return </span><span class="default">$i</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>I know it's a bit crappy, but don't ask me too much, I'm still only 13... ;)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="124105">  
  <a class="name">
  <strong class="user"><em>David Spector</em></strong></a><div class="date" title="2019-08-10 11:15"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom124105">
<div class="phpcode"><code><span class="html">
The fastest way to search for a cached value, to find if there is a cycle in your data, to see if a given program state has occurred before, to see whether a value is in a set and then adding it, and for so many similar tasks, is just to do an array dereference:<br><br>&nbsp; &nbsp; $Key=$SomeStateString1.'|'.$SomeStateString2; // State can have multiple substates<br>&nbsp; &nbsp; if (@$StateSet[$Key]) // or use isset()<br>&nbsp; &nbsp; &nbsp; &nbsp; ; // The key already exists: do optional processing here<br>&nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; ; // The key does not yet exist: do optional processing here<br>&nbsp; &nbsp; $StateSet[$Key]=1; // Store state existence (or store associated data values)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82897">  
  <a class="name">
  <strong class="user"><em>dcez at land dot ru</em></strong></a><div class="date" title="2008-04-30 01:15"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom82897">
<div class="phpcode"><code><span class="html">
Simple way to get variable name by using array_search function:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">varname</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">){<br><br>&nbsp; &nbsp; return (isset(</span><span class="default">$var</span><span class="keyword">))? </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">, </span><span class="default">$GLOBALS</span><span class="keyword">) : </span><span class="default">false</span><span class="keyword">;<br><br>}<br><br></span><span class="default">$boogie </span><span class="keyword">= </span><span class="string">'tonight'</span><span class="keyword">;<br><br>echo </span><span class="default">varname</span><span class="keyword">(</span><span class="default">$boogie</span><span class="keyword">);<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="124106">  
  <a class="name">
  <strong class="user"><em>David Spector</em></strong></a><div class="date" title="2019-08-10 11:16"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom124106">
<div class="phpcode"><code><span class="html">
For data lookups that are fast in both directions (key to value, value to key), consider storing and updating both the array and its array_flip() version.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82283">  
  <a class="name">
  <strong class="user"><em>andreas dot damm at maxmachine dot de</em></strong></a><div class="date" title="2008-04-03 04:07"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom82283">
<div class="phpcode"><code><span class="html">
Combining syntax of array_search() and functionality of array_keys() to get all key=&gt;value associations of an array with the given search-value:<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">array_search_values</span><span class="keyword">( </span><span class="default">$m_needle</span><span class="keyword">, </span><span class="default">$a_haystack</span><span class="keyword">, </span><span class="default">$b_strict </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">){<br>&nbsp; &nbsp; return </span><span class="default">array_intersect_key</span><span class="keyword">( </span><span class="default">$a_haystack</span><span class="keyword">, </span><span class="default">array_flip</span><span class="keyword">( </span><span class="default">array_keys</span><span class="keyword">( </span><span class="default">$a_haystack</span><span class="keyword">, </span><span class="default">$m_needle</span><span class="keyword">, </span><span class="default">$b_strict</span><span class="keyword">)));<br>}<br></span><span class="default">?&gt;<br></span><br>Usage:<br><span class="default">&lt;?php<br>$array1 </span><span class="keyword">= array( </span><span class="string">'pre'</span><span class="keyword">=&gt;</span><span class="string">'2'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="string">'1'</span><span class="keyword">, </span><span class="string">'2'</span><span class="keyword">, </span><span class="string">'3'</span><span class="keyword">, </span><span class="string">'post'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">);<br></span><span class="default">print_r</span><span class="keyword">( </span><span class="default">array_search_values</span><span class="keyword">( </span><span class="string">'2'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">));<br></span><span class="default">print_r</span><span class="keyword">( </span><span class="default">array_search_values</span><span class="keyword">( </span><span class="string">'2'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">));<br></span><span class="default">print_r</span><span class="keyword">( </span><span class="default">array_search_values</span><span class="keyword">( </span><span class="default">2</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>Will return:<br>array(4) {<br>&nbsp; &nbsp; ["pre"] =&gt;<br>&nbsp; &nbsp; string(1) "2"<br>&nbsp; &nbsp; [1] =&gt;<br>&nbsp; &nbsp; int(2)<br>&nbsp; &nbsp; [4] =&gt;<br>&nbsp; &nbsp; string(1) "2"<br>&nbsp; &nbsp; ["post"] =&gt;<br>&nbsp; &nbsp; int(2)<br>}<br>array(2) {<br>&nbsp; &nbsp; ["pre"] =&gt;<br>&nbsp; &nbsp; string(1) "2"<br>&nbsp; &nbsp; [4] =&gt;<br>&nbsp; &nbsp; string(1) "2"<br>}<br>array(2) {<br>&nbsp; &nbsp; [1] =&gt;<br>&nbsp; &nbsp; int(2)<br>&nbsp; &nbsp; ["post"] =&gt;<br>&nbsp; &nbsp; int(2)<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="123310">  
  <a class="name">
  <strong class="user"><em>venkatesh dot ksnadar at gmail dot com</em></strong></a><div class="date" title="2018-11-06 11:49"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom123310">
<div class="phpcode"><code><span class="html">
you need to be careful if you are using array_search() with unset() for deleting a value in the searched indexed<br><br>// wrong way<br>$checked = ["1", "2", "3"]; // array with numbers in double quotes<br><br>unset($checked[array_search('on', $checked)]); // this deletes value at 0 index<br><br>// array_search returns mixed data type, which means any type of data will be returned<br>// in the above case it returned false and false is type casted to 0 <br>// so it deletes the value at index zero<br><br>the point to say is never use array_search() with unset() while deleting a value in an array using index.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="122743">  
  <a class="name">
  <strong class="user"><em>grayaahammed at gmail dot com</em></strong></a><div class="date" title="2018-05-17 12:47"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom122743">
<div class="phpcode"><code><span class="html">
this is for searching a value inside a multidimontionnal array, and then return the parent of the parent array that holds the value.<br><br>function recursive_array_search($needle,$haystack) {<br>&nbsp; &nbsp; foreach($haystack as $key=&gt;$value) {<br>&nbsp; &nbsp; &nbsp; &nbsp; $current_key=$key;<br>&nbsp; &nbsp; &nbsp; &nbsp; if($needle===$value OR (is_array($value) &amp;&amp; recursive_array_search($needle,$value))) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $haystack[$key];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return false;<br>}</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->

  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from www.php.net/manual/en/function.array-search.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 09:41:00 GMT -->

</body></html>