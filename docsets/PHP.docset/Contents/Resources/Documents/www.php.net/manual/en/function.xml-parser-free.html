<html><!-- Mirrored from www.php.net/manual/en/function.xml-parser-free.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:32:55 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>xml_parser_free</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.xml-parser-free.html">
 <link rel="shorturl" href="https://www.php.net/xml-parser-free">
 <link rel="alternate" href="https://www.php.net/xml-parser-free" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.xml.html">
 <link rel="prev" href="function.xml-parser-create.html">
 <link rel="next" href="function.xml-parser-get-option.html">

 <link rel="alternate" href="function.xml-parser-free.html" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/function.xml-parser-free.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/function.xml-parser-free.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/function.xml-parser-free.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/function.xml-parser-free.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/function.xml-parser-free.php" hreflang="ja">
 <link rel="alternate" href="https://www.php.net/manual/ro/function.xml-parser-free.php" hreflang="ro">
 <link rel="alternate" href="https://www.php.net/manual/ru/function.xml-parser-free.php" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/function.xml-parser-free.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/function.xml-parser-free.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0aba.css?t=1539771603&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2ecf.css?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedba57.css?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached3afa.css?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>


</head>
<body class="docs " style="">


<div class="headsup"><a href="https://www.php.net/conferences/index.php#id2021-09-08-1">Longhorn PHP 2021</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.attributes.html">Attributes</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.xml.html">XML Manipulation</a></li>      <li><a href="book.xml.html">XML Parser</a></li>      <li><a href="ref.xml.html">XML Parser Functions</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="function.xml-parser-free" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">xml_parser_free</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">xml_parser_free</span> â€” <span class="dc-title">Free an XML parser</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.xml-parser-free-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>xml_parser_free</strong></span>(<span class="methodparam"><span class="type"><a href="class.xmlparser.html" class="type XMLParser">XMLParser</a></span> <code class="parameter">$parser</code></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   Frees the given XML <code class="parameter">parser</code>.
  </p>
  <div class="caution"><strong class="caution">Caution</strong>
   <p class="para">
    In addition to calling <span class="function"><strong>xml_parser_free()</strong></span> when the parsing
    is finished, prior to PHP 8.0.0, it was necessary to also explicitly unset the
    reference to <code class="parameter">parser</code> to avoid memory leaks,
    if the parser resource is referenced from an object, and this object references
    that parser resource.
   </p>
  </div>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.xml-parser-free-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>
    
     <dt>
<code class="parameter">parser</code></dt>

     <dd>

      <span class="simpara">
       A reference to the XML parser to free.
      </span>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.xml-parser-free-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>true</code></strong> on success or <strong><code>false</code></strong> on failure.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.xml-parser-free-changelog">
  <h3 class="title">Changelog</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>Version</th>
      <th>Description</th>
     </tr>

    </thead>

    <tbody class="tbody">
      <tr>
 <td>8.0.0</td>
 <td>
  <code class="parameter">parser</code> expects an <span class="classname"><a href="class.xmlparser.html" class="classname">XMLParser</a></span>
  instance now; previously, a <span class="type">resource</span> was expected.
 </td>
</tr>

    </tbody>
   
  </table>

 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="119795">  
  <a class="name">
  <strong class="user"><em>nidzho</em></strong></a><div class="date" title="2016-08-27 08:12"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom119795">
<div class="phpcode"><code><span class="html">
Unset the parser after calling xml_parser_free() to prevent memory leaks:<br><br><span class="default">&lt;?php<br>xml_parser_free</span><span class="keyword">(</span><span class="default">$parser</span><span class="keyword">);<br>unset(</span><span class="default">$parser</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="57370">  
  <a class="name">
  <strong class="user"><em>dio at edu dot uni-klu dot ac dot at</em></strong></a><div class="date" title="2005-10-01 09:56"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom57370">
<div class="phpcode"><code><span class="html">
If you try to free an XML parser while it is still parsing, strange things will happen - your script will "hang" and no output will be sent to the browser. Consider this pseudo-code example:<br><br>-------<br><br>...<br>if (!xml_parse($parser)) echo 'XML error';<br><br>xml_parser_free($parser);<br><br>...<br><br>function SomeCallbackWhichWasSetBefore(...)<br>{<br>global $parser;<br><br>...<br><br>if (some_error_happened) xml_parser_free($parser);&nbsp; //problem!<br><br>...<br><br>}<br><br>------<br><br>It would be logical that xml_parse would return false if the parser was freed while parsing, right? Wrong! Instead, everything hangs and no output will be sent out (no matter whether output buffering is on or not). It took me more than an hour to figure out why: you cannot free a parser handle that is currently parsing. A simple solution:<br><br>-------<br><br>$xml_error = false;<br>if (!xml_parse($parser))<br>echo 'XML error (directly from parser)';<br>else if ($xml_error)<br>echo 'XML error (from some callback function);<br><br>xml_parser_free($parser);<br><br>...<br><br>function SomeCallbackWhichWasSetBefore(...)<br>{<br>global $parser;<br>global $xml_error;<br><br>if ($xml_error)<br>return;<br><br>...<br><br>if (some_error_occured)<br>{<br>$xml_error = false;<br>return;<br>}<br><br>...<br><br>}<br><br>-------<br><br>If you use this solution you will have to check for $xml_error in every callback function. Essentially what you're doing is that, in case you want to stop parsing because of an error, you continue until xml_parse() is finished (without actually doing anything) and then free the parser and act on the error.<br><br>Of course the underlying problem is that you cannot stop a parser while it is parsing. There should be some function like xml_throw_error() or xml_parser_stop() or whatever, but unfortunately there isn't.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="37022">  
  <a class="name">
  <strong class="user"><em>php dot net at gwprogramming dot com (George Webb)</em></strong></a><div class="date" title="2003-10-30 06:56"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom37022">
<div class="phpcode"><code><span class="html">
I found that with PHP 4.3.4RC1, if you don't call xml_parser_free() before your script ends, some sort of ugliness occurs with the webserver; i.e. the HTTP connection is closed.&nbsp; (The apache error_log says "exit signal Segmentation fault (11)".)<br><br>Usually PHP tends to clean up connections you don't explicitly close (e.g. database connections), but in this case apparently it doesn't.<br><br>Some web browsers (MSIE for one) do not actually show this problem, so you may not actually notice it.&nbsp; Opera 7.11 does show it, which is how I discovered it.<br><br>So don't forget to call xml_parser_free() ... always!</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->

  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from www.php.net/manual/en/function.xml-parser-free.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 11 Sep 2021 06:32:55 GMT -->

</body></html>