<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

<!-- Mirrored from developer.wordpress.org/plugins/javascript/enqueuing/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Aug 2021 16:22:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<!--
<meta property="fb:page_id" content="6427302910" />
-->
<meta name="google-site-verification" content="7VWES_-rcHBcmaQis9mSYamPfNwE03f4vyTj4pfuAw0" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Server Side PHP and Enqueuing</title>
<meta name="referrer" content="always">

		<link href='../../../../fonts.googleapis.com/css.css?family=Open+Sans:300italic,400italic,600italic,400,300,600&amp;subset=latin,cyrillic-ext,greek-ext,greek,vietnamese,latin-ext,cyrillic' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="../../../../s.w.org/style/wp4.css?95" />

<link rel="shortcut icon" href="../../../../s.w.org/favicon.ico?2" type="image/x-icon" />
<link rel="pingback" href="../../../xmlrpc.php" /><meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='../../../../fonts.googleapis.com/index.html' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link rel='dns-prefetch' href='http://www.googletagmanager.com/' />
<link rel='dns-prefetch' href='http://fonts.gstatic.com/' />
<link rel="alternate" type="application/rss+xml" title="WordPress Developer Resources &raquo; Feed" href="../../../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="WordPress Developer Resources &raquo; Comments Feed" href="../../../comments/feed/index.html" />
<meta property="og:title" content="Server Side PHP and Enqueuing | Plugin Developer Handbook | WordPress Developer Resources" />
<meta property="og:site_name" content="WordPress Developer Resources" />
<meta property="og:type" content="website" />
<meta property="og:url" content="../../../index.html" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@WordPress" />
<meta name="description" content="There are two parts to the server side PHP script that are needed to implement AJAX communication. First we need to enqueue the jQuery&hellip;" />
<meta property="og:description" content="There are two parts to the server side PHP script that are needed to implement AJAX communication. First we need to enqueue the jQuery&hellip;" />
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../../../../www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P24PF4B');</script>
			<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/developer.wordpress.org\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.9-alpha-51701"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([10084,65039,8205,55357,56613],[10084,65039,8203,55357,56613])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='dashicons-css'  href='../../../wp-includes/css/dashicons.min.css?ver=5.9-alpha-51701' type='text/css' media='all' />
<link rel='stylesheet' id='admin-bar-css'  href='../../../wp-includes/css/admin-bar.min.css?ver=5.9-alpha-51701' type='text/css' media='all' />
<link rel='stylesheet' id='wp-block-library-css'  href='../../../wp-includes/css/dist/block-library/style.min.css?ver=5.9-alpha-51701' type='text/css' media='all' />
<link rel='stylesheet' id='wporg-handbook-css-css'  href='../../../wp-content/plugins/handbook/stylesheets/callout-boxes.css?ver=20200121' type='text/css' media='all' />
<link rel='stylesheet' id='open-sans-css'  href='../../../../fonts.googleapis.com/css-2.css?family=Open+Sans%3A300italic%2C400italic%2C600italic%2C300%2C400%2C600&amp;subset=latin%2Clatin-ext&amp;display=fallback&amp;ver=5.9-alpha-51701' type='text/css' media='all' />
<link rel='stylesheet' id='wporg-developer-style-css'  href='../../../wp-content/themes/pub/wporg-developer/style.css?ver=3' type='text/css' media='all' />
<link rel='stylesheet' id='wp-dev-sass-compiled-css'  href='../../../wp-content/themes/pub/wporg-developer/stylesheets/main.css?ver=20200713' type='text/css' media='all' />
<link rel='stylesheet' id='awesomplete-css-css'  href='../../../wp-content/themes/pub/wporg-developer/stylesheets/awesomplete.css?ver=20160114' type='text/css' media='all' />
<link rel='stylesheet' id='autocomplete-css-css'  href='../../../wp-content/themes/pub/wporg-developer/stylesheets/autocomplete.css?ver=20171220' type='text/css' media='all' />
<link rel='stylesheet' id='syntaxhighlighter-core-css'  href='../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b' type='text/css' media='all' />
<link rel='stylesheet' id='syntaxhighlighter-theme-default-css'  href='../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b' type='text/css' media='all' />
<script type='text/javascript' src='../../../wp-includes/js/jquery/jquery.min.js?ver=3.6.0' id='jquery-core-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2' id='jquery-migrate-js'></script>
<script type='text/javascript' src='../../../wp-content/plugins/handbook/scripts/handbook.js?ver=20150930' id='wporg-handbook-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/chapters.js?ver=20190603' id='wporg-developer-chapters-js'></script>
<script type='text/javascript' src='../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b' id='syntaxhighlighter-core-js'></script>
<script type='text/javascript' src='../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPhp.js?ver=3.0.9b' id='syntaxhighlighter-brush-php-js'></script>
<link rel="https://api.w.org/" href="https://developer.wordpress.org/wp-json/" /><link rel="alternate" type="application/json" href="https://developer.wordpress.org/wp-json/wp/v2/plugin-handbook/11153" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../xmlrpc-2.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.9-alpha-51701" />
<link rel='shortlink' href='https://developer.wordpress.org/?p=11153' />
<link rel="alternate" type="application/json+oembed" href="https://developer.wordpress.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fdeveloper.wordpress.org%2Fplugins%2Fjavascript%2Fenqueuing%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://developer.wordpress.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fdeveloper.wordpress.org%2Fplugins%2Fjavascript%2Fenqueuing%2F&amp;format=xml" />
<link rel="canonical" href="index.html">
<!-- Stream WordPress user activity plugin v3.6.2 -->
	<style>
		@media screen and (max-width: 782px) {
			#wpadminbar li#wp-admin-bar-log-in,
			#wpadminbar li#wp-admin-bar-register {
				display: block;
			}

			#wpadminbar li#wp-admin-bar-log-in a,
			#wpadminbar li#wp-admin-bar-register a {
				padding: 0 8px;
			}
		}
	</style>
		<style>
			a.github-edit {
				margin-left: .5em;
				font-size: .5em;
				vertical-align: top;
				display: inline-block;
				border: 1px solid #eeeeee;
				border-radius: 2px;
				background: #eeeeee;
				padding: .5em .6em .4em;
				color: black;
				margin-top: 0.1em;
			}
			a.github-edit > * {
				opacity: 0.6;
			}
			a.github-edit:hover > * {
				opacity: 1;
				color: black;
			}
			a.github-edit img {
				height: .8em;
			}
		</style>
		
	<script type="text/javascript">
		jQuery( '<style>.hide-if-js { display: none; }</style>' ).appendTo( 'head' );
		jQuery( function($) {
			$( 'body' ).addClass('js');
		} );
	</script>
<style type="text/css" media="print">#wpadminbar { display:none; }</style>
	<style type="text/css" media="screen">
	</style>
	<script>document.cookie='devicePixelRatio='+((window.devicePixelRatio === undefined) ? 1 : window.devicePixelRatio)+'; path=/';</script>

</head>


<body id="wordpress-org" class="plugin-handbook-template-default single single-plugin-handbook postid-11153 admin-bar no-customize-support single-handbook">
		<div id="wpadminbar" class="nojq nojs">
						<div class="quicklinks" id="wp-toolbar" role="navigation" aria-label="Toolbar">
				<ul id='wp-admin-bar-root-default' class="ab-top-menu"><li id='wp-admin-bar-wp-logo' class="menupop"><a class='ab-item' aria-haspopup="true" href='https://wordpress.org/about/'><span class="ab-icon" aria-hidden="true"></span><span class="screen-reader-text">About WordPress</span></a><div class="ab-sub-wrapper"><ul id='wp-admin-bar-wp-logo-default' class="ab-submenu"><li id='wp-admin-bar-about'><a class='ab-item' href='https://wordpress.org/about/'>About WordPress</a></li></ul><ul id='wp-admin-bar-wp-logo-external' class="ab-sub-secondary ab-submenu"><li id='wp-admin-bar-wporg'><a class='ab-item' href='https://wordpress.org/'>WordPress.org</a></li><li id='wp-admin-bar-documentation'><a class='ab-item' href='https://wordpress.org/support/'>Documentation</a></li><li id='wp-admin-bar-support-forums'><a class='ab-item' href='https://wordpress.org/support/forums/'>Support</a></li><li id='wp-admin-bar-feedback'><a class='ab-item' href='https://wordpress.org/support/forum/requests-and-feedback'>Feedback</a></li></ul></div></li></ul><ul id='wp-admin-bar-top-secondary' class="ab-top-secondary ab-top-menu"><li id='wp-admin-bar-search' class="admin-bar-search"><div class="ab-item ab-empty-item" tabindex="-1"><form action="https://developer.wordpress.org/" method="get" id="adminbarsearch"><input class="adminbar-input" name="s" id="adminbar-search" type="text" value="" maxlength="150" /><label for="adminbar-search" class="screen-reader-text">Search</label><input type="submit" class="adminbar-button" value="Search" /></form></div></li><li id='wp-admin-bar-log-in'><a class='ab-item' href='https://login.wordpress.org/?locale=en_US'>Log In</a></li><li id='wp-admin-bar-register'><a class='ab-item' href='https://login.wordpress.org/register?locale=en_US'>Register</a></li></ul>			</div>
					</div>

		<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P24PF4B" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<div id="wporg-header">
	<div class="wrapper">
	<h1><a href="http://wordpress.org/">WordPress.org</a></h1>				<div id="head-search">
		<form action="http://wordpress.org/search/do-search.php" method="get">
			<label for="global-search" class="screen-reader-text">Search WordPress.org for:</label>
			<input id="global-search" class="text" name="search" type="text" value="" maxlength="150" placeholder="Search WordPress.org" />
			<button type="submit" class="button"><span class="screen-reader-text">Submit</span></button>
		</form>
		</div>
				<div style="clear:both"></div>
		<button id="mobile-menu-button" aria-expanded="false"><span class="screen-reader-text">Toggle Menu</span></button>
		
<nav aria-label="Main Menu">
<ul id="wporg-header-menu">
<li class="menu-item"><a href='http://wordpress.org/showcase/' data-title='See some of the sites built on WordPress.'>Showcase</a></li>
<li class="menu-item"><a href='http://learn.wordpress.org/' data-title='Resources to help you learn more about WordPress and teach it to others.'>Learn</a></li>
<li class="menu-item"><a href='http://wordpress.org/themes/' data-title='Find just the right look for your website.'>Themes</a></li>
<li class="menu-item"><a href='http://wordpress.org/plugins/' data-title='Plugins can extend WordPress to do almost anything you can imagine.'>Plugins</a></li>
<li class="menu-item"><a href='http://wordpress.org/mobile/' data-title='Take your website on the go!'>Mobile</a></li>
<li class="menu-item"><a href='http://wordpress.org/support/' data-title='Forums, documentation, help.'>Support</a><ul class="nav-submenu"><li><a href='http://wordpress.org/support/' title='Documentation, tutorials, best practices.'>Documentation</a></li><li><a href='http://wordpress.org/support/forums/' title='Support and discussion forums.'>Forums</a></li></ul><div class="uparrow"></div></li>
<li class="menu-item"><a href='http://make.wordpress.org/' data-title='Contribute your knowledge.'>Get Involved</a><ul class="nav-submenu"><li><a href='http://wordpress.org/five-for-the-future/' title='How five percent is powering the next generation of the web'>Five for the Future</a></li></ul><div class="uparrow"></div></li>
<li class="menu-item"><a href='http://wordpress.org/about/' data-title='About the WordPress Organization, and where we&#039;re going.'>About</a></li>
<li class="menu-item"><a href='http://wordpress.org/news/' data-title='Come here for the latest scoop.'>Blog</a></li>
<li class="menu-item"><a href='http://wordpress.org/hosting/' data-title='Find a home for your blog.'>Hosting</a></li>
<li id="download" class="button download-button menu-item"><a href='http://wordpress.org/download/' data-title='Get it. Got it? Good.'>Get WordPress</a></li>
</ul>
</nav>
		<div style="clear:both"></div>
	</div>
</div>



<header id="masthead" class="site-header" role="banner">
			<a href="#" id="secondary-toggle" onclick="return false;"><strong>Menu</strong></a>
		<div class="site-branding">
		<h1 class="site-title">
			<a href="../../index.html" rel="home">Plugin Handbook</a>
		</h1>

		
		<nav id="site-navigation" class="main-navigation" role="navigation">
			<button class="menu-toggle dashicons dashicons-arrow-down-alt2" aria-controls="primary-menu" aria-expanded="false" aria-label="Primary Menu"></button>
					</nav>
	</div>
</header><!-- #masthead -->

<div id="page" class="hfeed site devhub-wrap">
	<a href="#main" class="screen-reader-text">Skip to content</a>

			<div id="content" class="site-content">


	<div id="secondary" class="widget-area" role="complementary">
		<a href="#" id="secondary-toggle"></a>
		<div id="secondary-content">
						<aside id="search-4" class="widget widget_search"><div class="search-section section clear hide-if-js">


	
	<form role="search" method="get" class="searchform searchform-handbook" action="https://developer.wordpress.org/plugins/">
		<label for="search-field" class="screen-reader-text">Search for:</label>
		<input type="text" id="search-field" class="search-field" placeholder="Search &hellip;" value="" name="s">
		<button class="button button-primary button-search"><i class="dashicons dashicons-search"></i><span class="screen-reader-text">Search plugins</span></button>
	
	</form>

</div><!-- /search-guide -->
</aside><aside id="nav_menu-3" class="widget widget_nav_menu"><h2 class="widget-title">Chapters</h2><div class="menu-plugin-table-of-contents-container"><ul id="menu-plugin-table-of-contents" class="menu"><li id="menu-item-5791" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-has-children menu-item-5791"><a href="../../intro/index.html">Introduction to Plugin Development</a>
<ul class="sub-menu">
	<li id="menu-item-5792" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-5792"><a href="../../intro/what-is-a-plugin/index.html">What is a Plugin?</a></li>
</ul>
</li>
<li id="menu-item-10905" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-has-children menu-item-10905"><a href="../../plugin-basics/index.html">Plugin Basics</a>
<ul class="sub-menu">
	<li id="menu-item-10916" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-10916"><a href="../../plugin-basics/header-requirements/index.html">Header Requirements</a></li>
	<li id="menu-item-10915" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-10915"><a href="../../plugin-basics/including-a-software-license/index.html">Including a Software License</a></li>
	<li id="menu-item-10927" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-10927"><a href="../../plugin-basics/activation-deactivation-hooks/index.html">Activation / Deactivation Hooks</a></li>
	<li id="menu-item-10926" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-10926"><a href="../../plugin-basics/uninstall-methods/index.html">Uninstall Methods</a></li>
	<li id="menu-item-10925" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-10925"><a href="../../plugin-basics/best-practices/index.html">Best Practices</a></li>
	<li id="menu-item-41303" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-41303"><a href="../../plugin-basics/determining-plugin-and-content-directories/index.html">Determining Plugin and Content Directories</a></li>
</ul>
</li>
<li id="menu-item-10935" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-has-children menu-item-10935"><a href="../../security/index.html">Plugin Security</a>
<ul class="sub-menu">
	<li id="menu-item-11232" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11232"><a href="../../security/checking-user-capabilities/index.html">Checking User Capabilities</a></li>
	<li id="menu-item-11231" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11231"><a href="../../security/data-validation/index.html">Data Validation</a></li>
	<li id="menu-item-11230" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11230"><a href="../../security/securing-input/index.html">Securing (sanitizing) Input</a></li>
	<li id="menu-item-11572" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11572"><a href="../../security/securing-output/index.html">Securing (escaping) Output</a></li>
	<li id="menu-item-11229" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11229"><a href="../../security/nonces/index.html">Nonces</a></li>
</ul>
</li>
<li id="menu-item-10939" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-has-children menu-item-10939"><a href="../../hooks/index.html">Hooks</a>
<ul class="sub-menu">
	<li id="menu-item-10951" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-10951"><a href="../../hooks/actions/index.html">Actions</a></li>
	<li id="menu-item-10950" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-10950"><a href="../../hooks/filters/index.html">Filters</a></li>
	<li id="menu-item-10949" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-10949"><a href="../../hooks/custom-hooks/index.html">Custom Hooks</a></li>
	<li id="menu-item-10948" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-10948"><a href="../../hooks/advanced-topics/index.html">Advanced Topics</a></li>
</ul>
</li>
<li id="menu-item-37669" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-has-children menu-item-37669"><a href="../../privacy/index.html">Privacy</a>
<ul class="sub-menu">
	<li id="menu-item-37670" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-37670"><a href="../../privacy/suggesting-text-for-the-site-privacy-policy/index.html">Policy Content</a></li>
	<li id="menu-item-37671" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-37671"><a href="../../privacy/adding-the-personal-data-exporter-to-your-plugin/index.html">Personal Data Export</a></li>
	<li id="menu-item-37672" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-37672"><a href="../../privacy/adding-the-personal-data-eraser-to-your-plugin/index.html">Personal Data Erasure</a></li>
	<li id="menu-item-37673" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-37673"><a href="../../privacy/privacy-related-options-hooks-and-capabilities/index.html">Advanced Topics</a></li>
</ul>
</li>
<li id="menu-item-10963" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-has-children menu-item-10963"><a href="../../administration-menus/index.html">Administration Menus</a>
<ul class="sub-menu">
	<li id="menu-item-10965" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-10965"><a href="../../administration-menus/top-level-menus/index.html">Top-Level Menus</a></li>
	<li id="menu-item-10964" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-10964"><a href="../../administration-menus/sub-menus/index.html">Sub-Menus</a></li>
</ul>
</li>
<li id="menu-item-10995" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-has-children menu-item-10995"><a href="../../shortcodes/index.html">Shortcodes</a>
<ul class="sub-menu">
	<li id="menu-item-10999" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-10999"><a href="../../shortcodes/basic-shortcodes/index.html">Basic Shortcodes</a></li>
	<li id="menu-item-10998" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-10998"><a href="../../shortcodes/enclosing-shortcodes/index.html">Enclosing Shortcodes</a></li>
	<li id="menu-item-10997" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-10997"><a href="../../shortcodes/shortcodes-with-parameters/index.html">Shortcodes with Parameters</a></li>
	<li id="menu-item-10996" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-10996"><a href="../../shortcodes/tinymce-enhanced-shortcodes/index.html">TinyMCE Enhanced Shortcodes</a></li>
</ul>
</li>
<li id="menu-item-11038" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-has-children menu-item-11038"><a href="../../settings/index.html">Settings</a>
<ul class="sub-menu">
	<li id="menu-item-11041" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11041"><a href="../../settings/settings-api/index.html">Settings API</a></li>
	<li id="menu-item-11043" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11043"><a href="../../settings/using-settings-api/index.html">Using Settings API</a></li>
	<li id="menu-item-11042" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11042"><a href="../../settings/options-api/index.html">Options API</a></li>
	<li id="menu-item-11040" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11040"><a href="../../settings/custom-settings-page/index.html">Custom Settings Page</a></li>
</ul>
</li>
<li id="menu-item-11054" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-has-children menu-item-11054"><a href="../../metadata/index.html">Metadata</a>
<ul class="sub-menu">
	<li id="menu-item-11057" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11057"><a href="../../metadata/managing-post-metadata/index.html">Managing Post Metadata</a></li>
	<li id="menu-item-11056" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11056"><a href="../../metadata/custom-meta-boxes/index.html">Custom Meta Boxes</a></li>
	<li id="menu-item-11055" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11055"><a href="../../metadata/rendering-post-metadata/index.html">Rendering Post Metadata</a></li>
</ul>
</li>
<li id="menu-item-11075" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-has-children menu-item-11075"><a href="../../post-types/index.html">Custom Post Types</a>
<ul class="sub-menu">
	<li id="menu-item-11078" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11078"><a href="../../post-types/registering-custom-post-types/index.html">Registering Custom Post Types</a></li>
	<li id="menu-item-11077" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11077"><a href="../../post-types/working-with-custom-post-types/index.html">Working with Custom Post Types</a></li>
</ul>
</li>
<li id="menu-item-15127" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-has-children menu-item-15127"><a href="../../taxonomies/index.html">Taxonomies</a>
<ul class="sub-menu">
	<li id="menu-item-11076" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11076"><a href="../../taxonomies/working-with-custom-taxonomies/index.html">Working with Custom Taxonomies</a></li>
	<li id="menu-item-15128" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-15128"><a href="../../taxonomies/split-terms-wp-4-2/index.html">Term Splitting (WP 4.2)</a></li>
</ul>
</li>
<li id="menu-item-11095" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-has-children menu-item-11095"><a href="../../users/index.html">Users</a>
<ul class="sub-menu">
	<li id="menu-item-11098" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11098"><a href="../../users/working-with-users/index.html">Working with Users</a></li>
	<li id="menu-item-11097" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11097"><a href="../../users/working-with-user-metadata/index.html">Working with User Metadata</a></li>
	<li id="menu-item-11096" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11096"><a href="../../users/roles-and-capabilities/index.html">Roles and Capabilities</a></li>
</ul>
</li>
<li id="menu-item-11094" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11094"><a href="../../http-api/index.html">HTTP API</a></li>
<li id="menu-item-11155" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook current-plugin-handbook-ancestor current-menu-ancestor current-menu-parent current-plugin-handbook-parent menu-item-has-children menu-item-11155"><a href="../index.html">JavaScript, Ajax, &amp; jQuery</a>
<ul class="sub-menu">
	<li id="menu-item-11662" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11662"><a href="../jquery/index.html">jQuery</a></li>
	<li id="menu-item-11661" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11661"><a href="../ajax/index.html">AJAX</a></li>
	<li id="menu-item-11156" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook current-menu-item menu-item-11156"><a href="index.html" aria-current="page">Server Side PHP and Enqueuing</a></li>
	<li id="menu-item-25267" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-25267"><a href="../heartbeat-api/index.html">Heartbeat API</a></li>
	<li id="menu-item-11663" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11663"><a href="../summary/index.html">Summary</a></li>
</ul>
</li>
<li id="menu-item-11168" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-has-children menu-item-11168"><a href="../../cron/index.html">Cron</a>
<ul class="sub-menu">
	<li id="menu-item-11172" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11172"><a href="../../cron/understanding-wp-cron-scheduling/index.html">Understanding WP-Cron Scheduling</a></li>
	<li id="menu-item-11171" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11171"><a href="../../cron/scheduling-wp-cron-events/index.html">Scheduling WP Cron Events</a></li>
	<li id="menu-item-11170" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11170"><a href="../../cron/hooking-wp-cron-into-the-system-task-scheduler/index.html">Hooking WP-Cron Into the System Task Scheduler</a></li>
	<li id="menu-item-11169" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11169"><a href="../../cron/simple-testing/index.html">Simple Testing of WP-Cron</a></li>
</ul>
</li>
<li id="menu-item-11182" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-has-children menu-item-11182"><a href="../../internationalization/index.html">Internationalization</a>
<ul class="sub-menu">
	<li id="menu-item-11183" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11183"><a href="../../internationalization/localization/index.html">Localization</a></li>
	<li id="menu-item-11184" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11184"><a href="../../internationalization/how-to-internationalize-your-plugin/index.html">How to Internationalize Your Plugin</a></li>
	<li id="menu-item-15321" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-15321"><a href="../../internationalization/security/index.html">Internationalization Security</a></li>
</ul>
</li>
<li id="menu-item-11194" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-has-children menu-item-11194"><a href="../../wordpress-org/index.html">The Plugin Directory</a>
<ul class="sub-menu">
	<li id="menu-item-15320" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-15320"><a href="../../wordpress-org/detailed-plugin-guidelines/index.html">Detailed Plugin Guidelines</a></li>
	<li id="menu-item-11197" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11197"><a href="../../wordpress-org/planning-your-plugin/index.html">Planning Plugins</a></li>
	<li id="menu-item-15317" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-15317"><a href="../../wordpress-org/how-to-use-subversion/index.html">Using Subversion</a></li>
	<li id="menu-item-37546" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-37546"><a href="../../wordpress-org/alerts-and-warnings/index.html">Alerts and Warnings</a></li>
	<li id="menu-item-15319" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-15319"><a href="../../wordpress-org/plugin-developer-faq/index.html">Developer FAQ</a></li>
</ul>
</li>
<li id="menu-item-11204" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-has-children menu-item-11204"><a href="../../developer-tools/index.html">Developer Tools</a>
<ul class="sub-menu">
	<li id="menu-item-11206" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11206"><a href="../../developer-tools/debug-bar-and-add-ons/index.html">Debug Bar and Add-Ons</a></li>
	<li id="menu-item-11205" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-11205"><a href="../../developer-tools/helper-plugins/index.html">Helper Plugins</a></li>
</ul>
</li>
<li id="menu-item-10906" class="menu-item menu-item-type-post_type menu-item-object-plugin-handbook menu-item-10906"><a href="../../credits/index.html">Credits</a></li>
</ul></div></aside>		</div>
	</div><!-- #secondary -->


		<main id="primary" class="site-main post-11153 plugin-handbook type-plugin-handbook status-publish hentry type-handbook" role="main">

		
		<div class="breadcrumb-trail breadcrumbs" itemprop="breadcrumb">
			<span class="trail-browse">Browse:</span> 
			<span class="trail-begin"><a href="../../../index.html" title="WordPress Developer Resources" rel="home">Home</a></span> <span class="sep">&#47;</span> 
			<span class="trail-inner"><a href="../../index.html">Plugin Handbook</a></span> <span class="sep">&#47;</span> 
			<span class="trail-inner"><a href="../index.html" title="JavaScript">JavaScript</a></span> <span class="sep">&#47;</span> <span class="trail-end">Server Side PHP and Enqueuing</span>
		</div>
		
			
<h1>Server Side PHP and Enqueuing</h1>


<style> .toc-jump { text-align: right; font-size: 12px; } .page .toc-heading { margin-top: -50px; padding-top: 50px !important; }</style><div class="table-of-contents"><h2>Topics</h2><ul class="items"><li><a href="#enqueue-script">Enqueue Script</a>
<ul>
<li><a href="#enqueue">Enqueue</a>
<ul>
<li><a href="#register-vs-enqueue">Register vs. Enqueue</a>
</ul></li>
<li><a href="#nonce">Nonce</a></li>
<li><a href="#localize">Localize</a>
</ul></li>
<li><a href="#ajax-action">AJAX Action</a>
<ul>
<li><a href="#data">Data</a>
<ul>
<li><a href="#xml">XML</a></li>
<li><a href="#json">JSON</a></li>
<li><a href="#other">Other</a>
</ul></li>
<li><a href="#die">Die</a></li>
<li><a href="#ajax-handler-summary">AJAX Handler Summary</a></ul>
</div>

<p>There are two parts to the server side PHP script that are needed to implement AJAX communication. First we need to enqueue the jQuery script on the web page and localize any PHP values that the jQuery script needs. Second is the actual handling of the AJAX request.</p>



<h2 class="toc-heading" id="enqueue-script" tabindex="-1">Enqueue Script <a href="#enqueue-script" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Enqueue Script</span></a></h2>



<p>This section covers the two major quirks of AJAX in WordPress that trip up experienced coders new to WordPress. One is the need to enqueue scripts in order to get meta links to appear correctly in the page&#8217;s head section. The other is that <strong>all</strong> AJAX requests need to be sent through <code>wp-admin/admin-ajax.php</code>. Never send requests directly to your plugin pages.</p>



<h3 class="toc-heading" id="enqueue" tabindex="-1">Enqueue <a href="#enqueue" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Enqueue</span></a></h3>



<p>Use the function <code><a href="../../../reference/functions/wp_enqueue_script/index.html">wp_enqueue_script()</a></code> to get WordPress to insert a meta link to your script in the page&#8217;s section. Never hardcode such links in the header template. As a plugin developer, you do not have ready access to the header template, but this rule bears mentioning anyway.</p>



<p>The enqueue function takes three parameters. The first is an arbitrary tag or handle that is used to refer to your script in other functions. The second is the complete URL to your script file. For portability, use <code>plugins_url()</code> to build the proper URL. If you are enqueuing the script for something besides a plugin, use some related function to create a proper URL &#8211; never hardcode it. The third parameter is an array of any script tags that your script is dependent on. Since we are using jQuery to send an AJAX request, you will at least need to list <em>&#8216;jquery&#8217;</em> in the array. Always use an array even if it is for a single dependency. The enqueue call for our example looks like this:</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: php; title: ; notranslate" title="">
wp_enqueue_script(
	'ajax-script',
	plugins_url( '/js/myjquery.js', __FILE__ ),
	array( 'jquery' ),
	'1.0.,0',
	true
);
</pre></div>


<p>You cannot enqueue scripts directly from your plugin code page when it is loaded. Scripts must be enqueued from one of a few action hooks &#8211; which one depends on what sort of page the script needs to be linked to. For administration pages, use <code>admin_enqueue_scripts</code>. For front-end pages use <code>wp_enqueue_scripts</code>, except for the login page, in which case use <code>login_enqueue_scripts</code>.</p>



<p>The <code>admin_enqueue_scripts</code> hook passes the current page filename to your callback. Use this information to only enqueue your script on pages where it is needed. The front-end version does not pass anything. In that case, use template tags such as <code>is_home()</code>, <code>is_single()</code>, etc. to ensure that you only enqueue your script where it is needed. This is the complete enqueue code for our example:</p>


<div class="wp-block-syntaxhighlighter-code "><section class="source-content"><div class="source-code-container"><pre class="brush: php; title: ; notranslate" title="">
add_action( 'admin_enqueue_scripts', 'my_enqueue' );
function my_enqueue( $hook ) {
	if ( 'myplugin_settings.php' !== $hook ) {
		return;
	}
	wp_enqueue_script(
		'ajax-script',
		plugins_url( '/js/myjquery.js', __FILE__ ),
		array( 'jquery' ),
		'1.0.0',
		true
	);
}
</pre></div><p class="source-code-links"><span><a href="#" class="show-complete-source">Expand full source code</a><a href="#" class="less-complete-source">Collapse full source code</a></span></p></section></div>


<p>Why do we use a named function here but use anonymous functions with jQuery? Because closures are only recently supported by PHP. jQuery has supported them for quite some time. Since some people may still be running older versions of PHP, we always use named functions for maximum compatibility. If you have a recent PHP version and are developing only for your own installation, go ahead and use closures if you like.</p>



<h4 class="toc-heading" id="register-vs-enqueue" tabindex="-1">Register vs. Enqueue <a href="#register-vs-enqueue" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Register vs. Enqueue</span></a></h4>



<p>You will see examples in other tutorials that religiously use <code><a href="../../../reference/functions/wp_register_script/index.html">wp_register_script()</a></code>. This is fine, but its use is optional. What is not optional is <code>wp_enqueue_script()</code>. This function must be called in order for your script file to be properly linked on the web page. So why register scripts? It creates a useful tag or handle with which you can easily reference the script in various parts of your code as needed. If you just need your script loaded and are not referencing it elsewhere in your code, there is no need to register it.</p>



<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h3 class="toc-heading" id="nonce" tabindex="-1">Nonce <a href="#nonce" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Nonce</span></a></h3>



<p>You need to create a nonce so that the jQuery AJAX request can be validated as a legitimate request instead of a potentially nefarious request from some unknown bad actor. Only your PHP script and your jQuery script will know this value. When the request is received, you can verify it is the same value created here. This is how to create a nonce for our example:</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: php; title: ; notranslate" title="">
$title_nonce = wp_create_nonce( 'title_example' );
</pre></div>


<p>The parameter <code>title_example</code> can be any arbitrary string. It&#8217;s suggested the string be related to what the nonce is used for, but it can really be anything that suits you.</p>



<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h3 class="toc-heading" id="localize" tabindex="-1">Localize <a href="#localize" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Localize</span></a></h3>



<p>If you recall from the <a href="../jquery/index.html">jQuery Section</a>, data created by PHP for use by jQuery was passed in a global object named <code>my_ajax_obj</code>. In our example, this data was a nonce and the complete URL to <code>admin-ajax.php</code>. The process of assigning object properties and creating the global jQuery object is called <strong>localizing</strong>. This is the localizing code used in our example which uses <code><a href="../../../reference/functions/wp_localize_script/index.html">wp_localize_script()</a></code>.</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: php; title: ; notranslate" title="">
wp_localize_script(
	'ajax-script',
	'my_ajax_obj',
	array(
		'ajax_url' =&gt; admin_url( 'admin-ajax.php' ),
		'nonce'    =&gt; $title_nonce,
	)
);
</pre></div>


<p>Note how our script handle <code>ajax-script</code> is used so that the global object is assigned to the right script. The object is global to our script, not to all scripts. Localization can also be called from the same hook that is used to enqueue scripts. The same goes for creating a nonce, though that particular function can be called virtually anywhere. All of that combined together in a single hook callback looks like this:</p>


<div class="wp-block-syntaxhighlighter-code "><section class="source-content"><div class="source-code-container"><pre class="brush: php; title: ; notranslate" title="">
add_action( 'admin_enqueue_scripts', 'my_enqueue' );

/**
 * Enqueue my scripts and assets.
 *
 * @param $hook
 */
function my_enqueue( $hook ) {
	if ( 'myplugin_settings.php' !== $hook ) {
		return;
	}
	wp_enqueue_script(
		'ajax-script',
		plugins_url( '/js/myjquery.js', __FILE__ ),
		array( 'jquery' ),
		'1.0.0',
		true
	);

	wp_localize_script(
		'ajax-script',
		'my_ajax_obj',
		array(
			'ajax_url' =&gt; admin_url( 'admin-ajax.php' ),
			'nonce'    =&gt; wp_create_nonce( 'title_example' ),
		)
	);
}
</pre></div><p class="source-code-links"><span><a href="#" class="show-complete-source">Expand full source code</a><a href="#" class="less-complete-source">Collapse full source code</a></span></p></section></div>

<div class='callout callout-info'><span class="screen-reader-text">Note:</span>  Remember to only add this nonce localization to the needed pages, do not display a nonce to someone who sould not use it. And remember to use <code>current_user_can()</code> with a capability or role to complete the security.</div>



<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h2 class="toc-heading" id="ajax-action" tabindex="-1">AJAX Action <a href="#ajax-action" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">AJAX Action</span></a></h2>



<p>The other major part of the server side PHP code is the actual AJAX handler that receives the POSTed data, does something with it, then sends an appropriate response back to the browser. This takes on the form of a WordPress <a href="../../hooks/actions/index.html">action hook</a>. Which hook tag you use depends on whether the user is logged in or not and what value your jQuery script passed as the <em>action:</em> value.</p>


<div class='callout callout-info'><p><span class="screen-reader-text">Note:</span>  <strong>$_GET , $_POST and $_COOKIE vs $_REQUEST</strong></p>
<p>You&#8217;ve probably used one or more of the PHP super globals such as <code>$_GET</code> or <code>$_POST</code> to retrieve values from forms or cookies (using <code>$_COOKIE</code>). Maybe you prefer <code>$_REQUEST</code> instead, or at least have seen it used. It&#8217;s kind of cool &#8211; regardless of the request method, <code>POST</code> or <code>GET</code>, it will have the form values. Works great for pages that use both methods. On top of that, it has cookie values as well. One stop shopping! Therein lies its tragic flaw. In the case of a name conflict, the cookie value will override any form values. Thus it is ridiculously easy for a bad actor to craft a counterfeit cookie on their browser, which will overwrite any form value you might be expecting from the request. <code>$_REQUEST</code> is an easy route for hackers to inject arbitrary data into your form values. To be extra safe, stick to the specific variables and avoid the one size fits all.</p>
</div>



<p>Since our AJAX exchange is for the plugin&#8217;s settings page, the user must be logged in. If you recall from the <a href="../jquery/index.html">jQuery section</a>, the <code>action:</code> value is <code>"my_tag_count"</code>. This means our action hook tag will be <code>wp_ajax_my_tag_count</code>. If our AJAX exchange were to be utilized by users who were not currently logged in, the action hook tag would be <code>wp_ajax_nopriv_my_tag_count</code> The basic code used to hook the action looks like this:</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: php; title: ; notranslate" title="">
add_action( 'wp_ajax_my_tag_count', 'my_ajax_handler' );

/**
 * Handles my AJAX request.
 */
function my_ajax_handler() {
	// Handle the ajax request here

	wp_die(); // All ajax handlers die when finished
}
</pre></div>


<p>The first thing your AJAX handler should do is verify the nonce sent by jQuery with <code><a href="../../../reference/functions/check_ajax_referer/index.html">check_ajax_referer()</a></code>, which should be the same value that was localized when the script was enqueued.</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: php; title: ; notranslate" title="">
check_ajax_referer( 'title_example' );
</pre></div>


<p>The provided parameter must be identical to the parameter provided <a href="#php-nonce">earlier</a> to <code>wp_create_nonce()</code>. The function simply dies if the nonce does not check out. If this were a true nonce, now that it was used, the value is no longer any good. You would then generate a new one and send it to the callback script so that it can be used for the next request. But since WordPress nonces are good for twenty-four hours, you needn&#8217;t do anything but check it.</p>



<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h3 class="toc-heading" id="data" tabindex="-1">Data <a href="#data" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Data</span></a></h3>



<p>With the nonce out of the way, our handler can deal with the data sent by the jQuery script contained in <code>$_POST['title']</code>. We can save the user&#8217;s selection in user meta by using <a href="../../../reference/functions/update_user_meta/index.html">update_user_meta()</a>.</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: php; title: ; notranslate" title="">
update_user_meta( get_current_user_id(), 'title_preference', sanitize_post_title( $_POST&#091;'title'] ) );
</pre></div>


<p>Then we build a query in order to get the post count for the selected title tag.</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: php; title: ; notranslate" title="">
$args      = array(
	'tag' =&gt; $_POST&#091;'title'],
);
$the_query = new WP_Query( $args );
</pre></div>


<p>Finally we can send the response back to the jQuery script. There&#8217;s several ways to transmit data. Let&#8217;s look at some of the options before we deal with the specifics of our example.</p>



<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h4 class="toc-heading" id="xml" tabindex="-1">XML <a href="#xml" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">XML</span></a></h4>



<p>PHP support for XML leaves something to be desired. Fortunately, WordPress provides the <code><a href="../../../reference/classes/wp_ajax_response/index.html">WP_Ajax_Response</a></code> class to make the task easier. The <a href="../../../reference/classes/wp_ajax_response/index.html">WP_Ajax_Response</a> class will generate an XML-formatted response, set the correct content type for the header, output the response xml, then die — ensuring a proper XML response.</p>



<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h4 class="toc-heading" id="json" tabindex="-1">JSON <a href="#json" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">JSON</span></a></h4>



<p>This format is lightweight and easy to use, and WordPress provides the <code><a href="../../../reference/functions/wp_send_json/index.html">wp_send_json</a></code> function to json-encode your response, print it, and die — effectively replacing <a href="../../../reference/classes/wp_ajax_response/index.html">WP_Ajax_Response</a>. WordPress also provides the <code><a href="../../../reference/functions/wp_send_json_success/index.html">wp_send_json_success</a></code> and <code><a href="../../../reference/functions/wp_send_json_error/index.html">wp_send_json_error</a></code> functions, which allow the appropriate done() or fail() callbacks to fire in JS.</p>



<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h4 class="toc-heading" id="other" tabindex="-1">Other <a href="#other" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Other</span></a></h4>



<p>You can transfer data any way you like, as long as the sender and receiver are coordinated. Text formats like comma delimited or tab delimited are one of many possibilities. For small amounts of data, sending the raw stream may be adequate. That is what we will do with our example &#8211; we will send the actual replacement HTML, nothing else.</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: php; title: ; notranslate" title="">
echo esc_html( $_POST&#091;'title'] ) . ' (' . $the_query-&gt;post_count . ') ';
</pre></div>


<p>In a real world application, you must account for the possibility that the action could fail for some reason&#8211;for instance, maybe the database server is down. The response should allow for this contingency, and the jQuery script receiving the response should act accordingly, perhaps telling the user to try again later.</p>



<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h3 class="toc-heading" id="die" tabindex="-1">Die <a href="#die" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Die</span></a></h3>



<p>When the handler has finished all of its tasks, it needs to die. If you are using the <a href="../../../reference/classes/wp_ajax_response/index.html">WP_Ajax_Response</a> or wp_send_json* functions, this is automatically handled for you. If not, simply use the WordPress <code><a href="../../../reference/functions/wp_die/index.html">wp_die()</a> </code>function.</p>



<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h3 class="toc-heading" id="ajax-handler-summary" tabindex="-1">AJAX Handler Summary <a href="#ajax-handler-summary" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">AJAX Handler Summary</span></a></h3>



<p>The complete AJAX handler for our example looks like this:</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: php; title: ; notranslate" title="">
/**
 * AJAX handler using JSON
 */
function my_ajax_handler__json() {
	check_ajax_referer( 'title_example' );
	update_user_meta( get_current_user_id(), 'title_preference', sanitize_post_title( $_POST&#091;'title'] ) );
	$args      = array(
		'tag' =&gt; $_POST&#091;'title'],
	);
	$the_query = new WP_Query( $args );
	wp_send_json( esc_html( $_POST&#091;'title'] ) . ' (' . $the_query-&gt;post_count . ') ' );
}
</pre></div>

<div class="wp-block-syntaxhighlighter-code "><section class="source-content"><div class="source-code-container"><pre class="brush: php; title: ; notranslate" title="">
/**
 * AJAX handler not using JSON.
 */
function my_ajax_handler() {
	check_ajax_referer( 'title_example' );
	update_user_meta( get_current_user_id(), 'title_preference', sanitize_post_title( $_POST&#091;'title'] ) );
	$args      = array(
		'tag' =&gt; $_POST&#091;'title'],
	);
	$the_query = new WP_Query( $args );
	echo esc_html( $_POST&#091;'title'] ) . ' (' . $the_query-&gt;post_count . ') ';
	wp_die(); // All ajax handlers should die when finished
}
</pre></div><p class="source-code-links"><span><a href="#" class="show-complete-source">Expand full source code</a><a href="#" class="less-complete-source">Collapse full source code</a></span></p></section></div>

<div class="bottom-of-entry">&nbsp;</div>

			
		<nav class="handbook-navigation" role="navigation">
			<h1 class="screen-reader-text">Handbook navigation</h1>
			<div class="nav-links">

			<a href="../ajax/index.html" rel="previous"><span class="meta-nav">&larr;</span> AJAX</a><a href="../heartbeat-api/index.html" rel="next">Heartbeat API <span class="meta-nav">&rarr;</span></a>
			</div>
			<!-- .nav-links -->
		</nav><!-- .navigation -->
	
		
		</main><!-- #main -->

	</div><!-- #content -->

</div><!-- #page -->


<div id="wporg-footer">
	<div class="wrapper">
		<ul>
			<li><a href="http://wordpress.org/about/" title="An introduction to the WordPress project">About</a></li>
			<li><a href="http://wordpress.org/news/" title="News and Updates">Blog</a></li>
			<li><a href="http://wordpress.org/hosting/" title="Recommended web hosting providers">Hosting</a></li>
			<li><a href="https://wordpressfoundation.org/donate/" title="Donate to the WordPress Foundation">Donate</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.org/support/" title="Forums, documentation, and other resources">Support</a></li>
			<li><a href="../../../index.html" title="Resources for WordPress developers">Developers</a></li>
			<li><a href="http://make.wordpress.org/" title="Give back to WordPress through code, support, translation and more">Get Involved</a></li>
			<li><a href="http://learn.wordpress.org/" title="Workshops and training materials">Learn</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.org/showcase/" title="Some of the best WordPress sites on the Web">Showcase</a></li>
			<li><a href="http://wordpress.org/plugins/" title="Add extra functionality to WordPress">Plugins</a></li>
			<li><a href="http://wordpress.org/themes/" title="Make your WordPress pretty">Themes</a></li>
		</ul>

		<ul>
			<li><a href="http://central.wordcamp.org/" title="Find a WordPress event near you">WordCamp</a></li>
			<li><a href="http://wordpress.tv/" title="Videos, tutorials, and WordCamp sessions">WordPress.TV</a></li>
			<li><a href="http://buddypress.org/" title="A set of plugins to transform your WordPress into a social network">BuddyPress</a></li>
			<li><a href="http://bbpress.org/" title="Fast, slick forums built on WordPress">bbPress</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.com/?ref=wporg-footer" title="Hassle-free WordPress hosting">WordPress.com</a></li>
			<li><a href="http://ma.tt/" title="Co-founder of WordPress, an example of what WordPress can do">Matt</a></li>
			<li><a href="http://wordpress.org/about/privacy/" title="WordPress.org Privacy Policy">Privacy</a></li>
			<li><a href="https://publiccode.eu/" target="_blank">Public Code</a></li>
		</ul>

		<ul class="social-media-links">
			<li><span class="dashicons dashicons-twitter"></span><a href="https://twitter.com/WordPress" title="Follow @WordPress on Twitter">@WordPress</a></li>
			<li><span class="dashicons dashicons-facebook"></span><a href="https://www.facebook.com/WordPress/" title="Like WordPress on Facebook">WordPress</a></li>
		</ul>
	</div>

		<p class="cip cip-image">Code is Poetry.</p>
</div>

<script src="../../../../s.w.org/style/js/navigation.min.js?20190128"></script>

<script type='text/javascript' src='../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPlain.js?ver=3.0.9b' id='syntaxhighlighter-brush-plain-js'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.head.appendChild( corecss );
		var themecssurl = "../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.head.appendChild( themecss );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}
</script>
<script type='text/javascript' src='../../../wp-includes/js/hoverintent-js.min.js?ver=2.2.1' id='hoverintent-js-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/admin-bar.min.js?ver=5.9-alpha-51701' id='admin-bar-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/navigation.js?ver=20181209' id='wporg-developer-navigation-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/skip-link-focus-fix.js?ver=20130115' id='wporg-developer-skip-link-focus-fix-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/search.js?ver=20150430' id='wporg-developer-search-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/menu.js?ver=20180201' id='wporg-developer-menu-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/awesomplete.min.js?ver=20160322' id='awesomplete-js'></script>
<script type='text/javascript' id='autocomplete-js-extra'>
/* <![CDATA[ */
var autocomplete = {"ajaxurl":"https:\/\/developer.wordpress.org\/wp-admin\/admin-ajax.php","nonce":"8a60f70c4b"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/autocomplete.js?ver=20160524' id='autocomplete-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/function-reference.js?ver=20180724' id='wporg-developer-function-reference-js'></script>
<script type='text/javascript' id='quicktags-js-extra'>
/* <![CDATA[ */
var quicktagsL10n = {"closeAllOpenTags":"Close all open tags","closeTags":"close tags","enterURL":"Enter the URL","enterImageURL":"Enter the URL of the image","enterImageDescription":"Enter a description of the image","textdirection":"text direction","toggleTextdirection":"Toggle Editor Text Direction","dfw":"Distraction-free writing mode","strong":"Bold","strongClose":"Close bold tag","em":"Italic","emClose":"Close italic tag","link":"Insert link","blockquote":"Blockquote","blockquoteClose":"Close blockquote tag","del":"Deleted text (strikethrough)","delClose":"Close deleted text tag","ins":"Inserted text","insClose":"Close inserted text tag","image":"Insert image","ul":"Bulleted list","ulClose":"Close bulleted list tag","ol":"Numbered list","olClose":"Close numbered list tag","li":"List item","liClose":"Close list item tag","code":"Code","codeClose":"Close code tag","more":"Insert Read More tag"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-includes/js/quicktags.min.js?ver=5.9-alpha-51701' id='quicktags-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/user-notes.js?ver=20200110' id='wporg-developer-user-notes-js'></script>
<script type='text/javascript' id='wporg-developer-user-notes-feedback-js-extra'>
/* <![CDATA[ */
var wporg_note_feedback = {"show":"Show Feedback","hide":"Hide Feedback"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/user-notes-feedback.js?ver=20181023' id='wporg-developer-user-notes-feedback-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/tabs.js?ver=20160824' id='wporg-developer-tabs-js'></script>
<script type='text/javascript' id='wporg-developer-preview-js-extra'>
/* <![CDATA[ */
var wporg_note_preview = {"ajaxurl":"https:\/\/developer.wordpress.org\/wp-admin\/admin-ajax.php","nonce":"504933b60e","preview":"preview note","preview_empty":"Nothing to preview","is_admin":""};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/user-notes-preview.js?ver=20200111' id='wporg-developer-preview-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/wp-embed.min.js?ver=5.9-alpha-51701' id='wp-embed-js'></script>
</body>

<!-- Mirrored from developer.wordpress.org/plugins/javascript/enqueuing/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Aug 2021 16:22:48 GMT -->
</html>
