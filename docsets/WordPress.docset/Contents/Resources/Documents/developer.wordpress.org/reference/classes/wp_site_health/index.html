<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

<!-- Mirrored from developer.wordpress.org/reference/classes/wp_site_health/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Aug 2021 17:09:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<!--
<meta property="fb:page_id" content="6427302910" />
-->
<meta name="google-site-verification" content="7VWES_-rcHBcmaQis9mSYamPfNwE03f4vyTj4pfuAw0" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>WP_Site_Health</title>
<meta name="referrer" content="always">

		<link href='../../../../fonts.googleapis.com/css.css?family=Open+Sans:300italic,400italic,600italic,400,300,600&amp;subset=latin,cyrillic-ext,greek-ext,greek,vietnamese,latin-ext,cyrillic' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="../../../../s.w.org/style/wp4.css?95" />

<link rel="shortcut icon" href="../../../../s.w.org/favicon.ico?2" type="image/x-icon" />
<link rel="pingback" href="../../../xmlrpc.php" /><meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='../../../../fonts.googleapis.com/index.html' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link rel='dns-prefetch' href='http://www.googletagmanager.com/' />
<link rel='dns-prefetch' href='http://fonts.gstatic.com/' />
<link rel="alternate" type="application/rss+xml" title="WordPress Developer Resources &raquo; Feed" href="../../../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="WordPress Developer Resources &raquo; Comments Feed" href="../../../comments/feed/index.html" />
<meta property="og:title" content="WP_Site_Health | Class | WordPress Developer Resources" />
<meta property="og:site_name" content="WordPress Developer Resources" />
<meta property="og:type" content="website" />
<meta property="og:url" content="../../../index.html" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@WordPress" />
<meta name="description" content="Class for looking up a site&#8217;s health based on a user&#8217;s WordPress environment." />
<meta property="og:description" content="Class for looking up a site&#8217;s health based on a user&#8217;s WordPress environment." />
<link rel="alternate" type="application/rss+xml" title="WordPress Developer Resources &raquo; WP_Site_Health Comments Feed" href="https://developer.wordpress.org/reference/classes/wp_site_health/feed/" />
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../../../../www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P24PF4B');</script>
			<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/developer.wordpress.org\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.9-alpha-51701"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([10084,65039,8205,55357,56613],[10084,65039,8203,55357,56613])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='dashicons-css'  href='../../../wp-includes/css/dashicons.min.css?ver=5.9-alpha-51701' type='text/css' media='all' />
<link rel='stylesheet' id='admin-bar-css'  href='../../../wp-includes/css/admin-bar.min.css?ver=5.9-alpha-51701' type='text/css' media='all' />
<link rel='stylesheet' id='wp-block-library-css'  href='../../../wp-includes/css/dist/block-library/style.min.css?ver=5.9-alpha-51701' type='text/css' media='all' />
<link rel='stylesheet' id='wporg-handbook-css-css'  href='../../../wp-content/plugins/handbook/stylesheets/callout-boxes.css?ver=20200121' type='text/css' media='all' />
<link rel='stylesheet' id='open-sans-css'  href='../../../../fonts.googleapis.com/css-2.css?family=Open+Sans%3A300italic%2C400italic%2C600italic%2C300%2C400%2C600&amp;subset=latin%2Clatin-ext&amp;display=fallback&amp;ver=5.9-alpha-51701' type='text/css' media='all' />
<link rel='stylesheet' id='wporg-developer-style-css'  href='../../../wp-content/themes/pub/wporg-developer/style.css?ver=3' type='text/css' media='all' />
<link rel='stylesheet' id='wp-dev-sass-compiled-css'  href='../../../wp-content/themes/pub/wporg-developer/stylesheets/main.css?ver=20200713' type='text/css' media='all' />
<link rel='stylesheet' id='awesomplete-css-css'  href='../../../wp-content/themes/pub/wporg-developer/stylesheets/awesomplete.css?ver=20160114' type='text/css' media='all' />
<link rel='stylesheet' id='autocomplete-css-css'  href='../../../wp-content/themes/pub/wporg-developer/stylesheets/autocomplete.css?ver=20171220' type='text/css' media='all' />
<link rel='stylesheet' id='syntaxhighlighter-core-css'  href='../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b' type='text/css' media='all' />
<link rel='stylesheet' id='syntaxhighlighter-theme-default-css'  href='../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b' type='text/css' media='all' />
<script type='text/javascript' src='../../../wp-includes/js/jquery/jquery.min.js?ver=3.6.0' id='jquery-core-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2' id='jquery-migrate-js'></script>
<script type='text/javascript' src='../../../wp-content/plugins/handbook/scripts/handbook.js?ver=20150930' id='wporg-handbook-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/chapters.js?ver=20190603' id='wporg-developer-chapters-js'></script>
<script type='text/javascript' src='../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b' id='syntaxhighlighter-core-js'></script>
<script type='text/javascript' src='../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPhp.js?ver=3.0.9b' id='syntaxhighlighter-brush-php-js'></script>
<link rel="https://api.w.org/" href="https://developer.wordpress.org/wp-json/" /><link rel="alternate" type="application/json" href="https://developer.wordpress.org/wp-json/wp/v2/wp-parser-class/122857" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../xmlrpc-2.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.9-alpha-51701" />
<link rel='shortlink' href='https://developer.wordpress.org/?p=122857' />
<link rel="alternate" type="application/json+oembed" href="https://developer.wordpress.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fdeveloper.wordpress.org%2Freference%2Fclasses%2Fwp_site_health%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://developer.wordpress.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fdeveloper.wordpress.org%2Freference%2Fclasses%2Fwp_site_health%2F&amp;format=xml" />
<link rel="canonical" href="index.html">
<!-- Stream WordPress user activity plugin v3.6.2 -->
	<style>
		@media screen and (max-width: 782px) {
			#wpadminbar li#wp-admin-bar-log-in,
			#wpadminbar li#wp-admin-bar-register {
				display: block;
			}

			#wpadminbar li#wp-admin-bar-log-in a,
			#wpadminbar li#wp-admin-bar-register a {
				padding: 0 8px;
			}
		}
	</style>
		<style>
			a.github-edit {
				margin-left: .5em;
				font-size: .5em;
				vertical-align: top;
				display: inline-block;
				border: 1px solid #eeeeee;
				border-radius: 2px;
				background: #eeeeee;
				padding: .5em .6em .4em;
				color: black;
				margin-top: 0.1em;
			}
			a.github-edit > * {
				opacity: 0.6;
			}
			a.github-edit:hover > * {
				opacity: 1;
				color: black;
			}
			a.github-edit img {
				height: .8em;
			}
		</style>
		
	<script type="text/javascript">
		jQuery( '<style>.hide-if-js { display: none; }</style>' ).appendTo( 'head' );
		jQuery( function($) {
			$( 'body' ).addClass('js');
		} );
	</script>
<style type="text/css" media="print">#wpadminbar { display:none; }</style>
	<style type="text/css" media="screen">
	</style>
	<script>document.cookie='devicePixelRatio='+((window.devicePixelRatio === undefined) ? 1 : window.devicePixelRatio)+'; path=/';</script>

</head>


<body id="wordpress-org" class="wp-parser-class-template-default single single-wp-parser-class postid-122857 admin-bar no-customize-support">
		<div id="wpadminbar" class="nojq nojs">
						<div class="quicklinks" id="wp-toolbar" role="navigation" aria-label="Toolbar">
				<ul id='wp-admin-bar-root-default' class="ab-top-menu"><li id='wp-admin-bar-wp-logo' class="menupop"><a class='ab-item' aria-haspopup="true" href='https://wordpress.org/about/'><span class="ab-icon" aria-hidden="true"></span><span class="screen-reader-text">About WordPress</span></a><div class="ab-sub-wrapper"><ul id='wp-admin-bar-wp-logo-default' class="ab-submenu"><li id='wp-admin-bar-about'><a class='ab-item' href='https://wordpress.org/about/'>About WordPress</a></li></ul><ul id='wp-admin-bar-wp-logo-external' class="ab-sub-secondary ab-submenu"><li id='wp-admin-bar-wporg'><a class='ab-item' href='https://wordpress.org/'>WordPress.org</a></li><li id='wp-admin-bar-documentation'><a class='ab-item' href='https://wordpress.org/support/'>Documentation</a></li><li id='wp-admin-bar-support-forums'><a class='ab-item' href='https://wordpress.org/support/forums/'>Support</a></li><li id='wp-admin-bar-feedback'><a class='ab-item' href='https://wordpress.org/support/forum/requests-and-feedback'>Feedback</a></li></ul></div></li></ul><ul id='wp-admin-bar-top-secondary' class="ab-top-secondary ab-top-menu"><li id='wp-admin-bar-search' class="admin-bar-search"><div class="ab-item ab-empty-item" tabindex="-1"><form action="https://developer.wordpress.org/" method="get" id="adminbarsearch"><input class="adminbar-input" name="s" id="adminbar-search" type="text" value="" maxlength="150" /><label for="adminbar-search" class="screen-reader-text">Search</label><input type="submit" class="adminbar-button" value="Search" /></form></div></li><li id='wp-admin-bar-log-in'><a class='ab-item' href='https://login.wordpress.org/?locale=en_US'>Log In</a></li><li id='wp-admin-bar-register'><a class='ab-item' href='https://login.wordpress.org/register?locale=en_US'>Register</a></li></ul>			</div>
					</div>

		<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P24PF4B" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<div id="wporg-header">
	<div class="wrapper">
	<h1><a href="http://wordpress.org/">WordPress.org</a></h1>				<div id="head-search">
		<form action="http://wordpress.org/search/do-search.php" method="get">
			<label for="global-search" class="screen-reader-text">Search WordPress.org for:</label>
			<input id="global-search" class="text" name="search" type="text" value="" maxlength="150" placeholder="Search WordPress.org" />
			<button type="submit" class="button"><span class="screen-reader-text">Submit</span></button>
		</form>
		</div>
				<div style="clear:both"></div>
		<button id="mobile-menu-button" aria-expanded="false"><span class="screen-reader-text">Toggle Menu</span></button>
		
<nav aria-label="Main Menu">
<ul id="wporg-header-menu">
<li class="menu-item"><a href='http://wordpress.org/showcase/' data-title='See some of the sites built on WordPress.'>Showcase</a></li>
<li class="menu-item"><a href='http://learn.wordpress.org/' data-title='Resources to help you learn more about WordPress and teach it to others.'>Learn</a></li>
<li class="menu-item"><a href='http://wordpress.org/themes/' data-title='Find just the right look for your website.'>Themes</a></li>
<li class="menu-item"><a href='http://wordpress.org/plugins/' data-title='Plugins can extend WordPress to do almost anything you can imagine.'>Plugins</a></li>
<li class="menu-item"><a href='http://wordpress.org/mobile/' data-title='Take your website on the go!'>Mobile</a></li>
<li class="menu-item"><a href='http://wordpress.org/support/' data-title='Forums, documentation, help.'>Support</a><ul class="nav-submenu"><li><a href='http://wordpress.org/support/' title='Documentation, tutorials, best practices.'>Documentation</a></li><li><a href='http://wordpress.org/support/forums/' title='Support and discussion forums.'>Forums</a></li></ul><div class="uparrow"></div></li>
<li class="menu-item"><a href='http://make.wordpress.org/' data-title='Contribute your knowledge.'>Get Involved</a><ul class="nav-submenu"><li><a href='http://wordpress.org/five-for-the-future/' title='How five percent is powering the next generation of the web'>Five for the Future</a></li></ul><div class="uparrow"></div></li>
<li class="menu-item"><a href='http://wordpress.org/about/' data-title='About the WordPress Organization, and where we&#039;re going.'>About</a></li>
<li class="menu-item"><a href='http://wordpress.org/news/' data-title='Come here for the latest scoop.'>Blog</a></li>
<li class="menu-item"><a href='http://wordpress.org/hosting/' data-title='Find a home for your blog.'>Hosting</a></li>
<li id="download" class="button download-button menu-item"><a href='http://wordpress.org/download/' data-title='Get it. Got it? Good.'>Get WordPress</a></li>
</ul>
</nav>
		<div style="clear:both"></div>
	</div>
</div>



<header id="masthead" class="site-header" role="banner">
		<div class="site-branding">
		<h1 class="site-title">
			<a href="../../index.html" rel="home">Code Reference</a>
		</h1>

		
		<nav id="site-navigation" class="main-navigation" role="navigation">
			<button class="menu-toggle dashicons dashicons-arrow-down-alt2" aria-controls="primary-menu" aria-expanded="false" aria-label="Primary Menu"></button>
					</nav>
	</div>
</header><!-- #masthead -->

<div id="page" class="hfeed site devhub-wrap">
	<a href="#main" class="screen-reader-text">Skip to content</a>

				<div id="inner-search">
			<div class="search-section section clear hide-if-js">


	
	<form role="search" method="get" class="searchform searchform-filtered" action="https://developer.wordpress.org/">
		<label for="search-field" class="screen-reader-text">Search for:</label>
		<input type="text" id="search-field" class="search-field" placeholder="Search &hellip;" value="" name="s">
		<button class="button button-primary button-search"><i class="dashicons dashicons-search"></i><span class="screen-reader-text">Search plugins</span></button>
	
		<div class="search-post-type">
			<span>Filter by type:</span>
									<label><input type="checkbox" name="post_type[]" value="wp-parser-function"
						 /> Functions</label>
									<label><input type="checkbox" name="post_type[]" value="wp-parser-hook"
						 /> Hooks</label>
									<label><input type="checkbox" name="post_type[]" value="wp-parser-class"
						 /> Classes</label>
									<label><input type="checkbox" name="post_type[]" value="wp-parser-method"
						 /> Methods</label>
					</div>

	
	</form>

</div><!-- /search-guide -->
			<div id="inner-search-icon-container">
				<div id="inner-search-icon">
					<div class="dashicons dashicons-search"><span class="screen-reader-text">Search</span></div>
				</div>
			</div>
		</div>

		<div id="content" class="site-content">

	<div id="content-area" class="wp-parser-class-template-default single single-wp-parser-class postid-122857 admin-bar no-customize-support code-reference">

		
		<div class="breadcrumb-trail breadcrumbs" itemprop="breadcrumb">
			<span class="trail-browse">Browse:</span> 
			<span class="trail-begin"><a href="../../../index.html" title="WordPress Developer Resources" rel="home">Home</a></span> <span class="sep">&#47;</span> 
			<span class="trail-inner"><a href="../../index.html" title="Reference">Reference</a></span> <span class="sep">&#47;</span> 
			<span class="trail-inner"><a href="../index.html">Classes</a></span> <span class="sep">&#47;</span> <span class="trail-end">WP_Site_Health</span>
		</div>
		<main id="main" class="site-main" role="main">

		
			
<article id="post-122857" class="post-122857 wp-parser-class type-wp-parser-class status-publish hentry wp-parser-source-file-wp-admin_includes_class-wp-site-health-php wp-parser-package-site_health wp-parser-package-wordpress wp-parser-since-5-2-0">

	
	
	<h1>WP_Site_Health</h1>

	<section class="summary">
		<p>Class for looking up a site&#8217;s health based on a user&#8217;s WordPress environment.</p>
	</section>


	
	<div class="content-toc"><style> .toc-jump { text-align: right; font-size: 12px; } .page .toc-heading { margin-top: -50px; padding-top: 50px !important; }</style><div class="table-of-contents"><h2>Contents</h2><ul class="items"><li><a href="#source">Source</a></li>
<li><a href="#methods">Methods</a></li>
<li><a href="#changelog">Changelog</a></li>
<li><a href="#user-contributed-notes">User Contributed Notes</a></ul>
</div>
	<hr />
	<section class="source-content">
		<h2 class="toc-heading" id="source" tabindex="-1">Source <a href="#source" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Source</span></a></h2>
		<p>
			File: <a href="../../files/wp-admin/includes/class-wp-site-health.php/index.html">wp-admin/includes/class-wp-site-health.php</a>		</p>

					<div class="source-code-container">
				<pre class="brush: php; toolbar: false; first-line: 10">class WP_Site_Health {
	private static $instance = null;

	private $mysql_min_version_check;
	private $mysql_rec_version_check;

	public $is_mariadb                           = false;
	private $mysql_server_version                = '';
	private $health_check_mysql_required_version = '5.5';
	private $health_check_mysql_rec_version      = '';

	public $php_memory_limit;

	public $schedules;
	public $crons;
	public $last_missed_cron     = null;
	public $last_late_cron       = null;
	private $timeout_missed_cron = null;
	private $timeout_late_cron   = null;

	/**
	 * WP_Site_Health constructor.
	 *
	 * @since 5.2.0
	 */
	public function __construct() {
		$this-&gt;maybe_create_scheduled_event();

		// Save memory limit before it's affected by wp_raise_memory_limit( 'admin' ).
		$this-&gt;php_memory_limit = ini_get( 'memory_limit' );

		$this-&gt;timeout_late_cron   = 0;
		$this-&gt;timeout_missed_cron = - 5 * MINUTE_IN_SECONDS;

		if ( defined( 'DISABLE_WP_CRON' ) &amp;&amp; DISABLE_WP_CRON ) {
			$this-&gt;timeout_late_cron   = - 15 * MINUTE_IN_SECONDS;
			$this-&gt;timeout_missed_cron = - 1 * HOUR_IN_SECONDS;
		}

		add_filter( 'admin_body_class', array( $this, 'admin_body_class' ) );

		add_action( 'admin_enqueue_scripts', array( $this, 'enqueue_scripts' ) );
		add_action( 'wp_site_health_scheduled_check', array( $this, 'wp_cron_scheduled_check' ) );

		add_action( 'site_health_tab_content', array( $this, 'show_site_health_tab' ) );
	}

	/**
	 * Output the content of a tab in the Site Health screen.
	 *
	 * @since 5.8.0
	 *
	 * @param string $tab Slug of the current tab being displayed.
	 */
	public function show_site_health_tab( $tab ) {
		if ( 'debug' === $tab ) {
			require_once ABSPATH . '/wp-admin/site-health-info.php';
		}
	}

	/**
	 * Return an instance of the WP_Site_Health class, or create one if none exist yet.
	 *
	 * @since 5.4.0
	 *
	 * @return WP_Site_Health|null
	 */
	public static function get_instance() {
		if ( null === self::$instance ) {
			self::$instance = new WP_Site_Health();
		}

		return self::$instance;
	}

	/**
	 * Enqueues the site health scripts.
	 *
	 * @since 5.2.0
	 */
	public function enqueue_scripts() {
		$screen = get_current_screen();
		if ( 'site-health' !== $screen-&gt;id &amp;&amp; 'dashboard' !== $screen-&gt;id ) {
			return;
		}

		$health_check_js_variables = array(
			'screen'      =&gt; $screen-&gt;id,
			'nonce'       =&gt; array(
				'site_status'        =&gt; wp_create_nonce( 'health-check-site-status' ),
				'site_status_result' =&gt; wp_create_nonce( 'health-check-site-status-result' ),
			),
			'site_status' =&gt; array(
				'direct' =&gt; array(),
				'async'  =&gt; array(),
				'issues' =&gt; array(
					'good'        =&gt; 0,
					'recommended' =&gt; 0,
					'critical'    =&gt; 0,
				),
			),
		);

		$issue_counts = get_transient( 'health-check-site-status-result' );

		if ( false !== $issue_counts ) {
			$issue_counts = json_decode( $issue_counts );

			$health_check_js_variables['site_status']['issues'] = $issue_counts;
		}

		if ( 'site-health' === $screen-&gt;id &amp;&amp; ( ! isset( $_GET['tab'] ) || empty( $_GET['tab'] ) ) ) {
			$tests = WP_Site_Health::get_tests();

			// Don't run https test on development environments.
			if ( $this-&gt;is_development_environment() ) {
				unset( $tests['async']['https_status'] );
			}

			foreach ( $tests['direct'] as $test ) {
				if ( is_string( $test['test'] ) ) {
					$test_function = sprintf(
						'get_test_%s',
						$test['test']
					);

					if ( method_exists( $this, $test_function ) &amp;&amp; is_callable( array( $this, $test_function ) ) ) {
						$health_check_js_variables['site_status']['direct'][] = $this-&gt;perform_test( array( $this, $test_function ) );
						continue;
					}
				}

				if ( is_callable( $test['test'] ) ) {
					$health_check_js_variables['site_status']['direct'][] = $this-&gt;perform_test( $test['test'] );
				}
			}

			foreach ( $tests['async'] as $test ) {
				if ( is_string( $test['test'] ) ) {
					$health_check_js_variables['site_status']['async'][] = array(
						'test'      =&gt; $test['test'],
						'has_rest'  =&gt; ( isset( $test['has_rest'] ) ? $test['has_rest'] : false ),
						'completed' =&gt; false,
						'headers'   =&gt; isset( $test['headers'] ) ? $test['headers'] : array(),
					);
				}
			}
		}

		wp_localize_script( 'site-health', 'SiteHealth', $health_check_js_variables );
	}

	/**
	 * Run a Site Health test directly.
	 *
	 * @since 5.4.0
	 *
	 * @param callable $callback
	 * @return mixed|void
	 */
	private function perform_test( $callback ) {
		/**
		 * Filters the output of a finished Site Health test.
		 *
		 * @since 5.3.0
		 *
		 * @param array $test_result {
		 *     An associative array of test result data.
		 *
		 *     @type string $label       A label describing the test, and is used as a header in the output.
		 *     @type string $status      The status of the test, which can be a value of `good`, `recommended` or `critical`.
		 *     @type array  $badge {
		 *         Tests are put into categories which have an associated badge shown, these can be modified and assigned here.
		 *
		 *         @type string $label The test label, for example `Performance`.
		 *         @type string $color Default `blue`. A string representing a color to use for the label.
		 *     }
		 *     @type string $description A more descriptive explanation of what the test looks for, and why it is important for the end user.
		 *     @type string $actions     An action to direct the user to where they can resolve the issue, if one exists.
		 *     @type string $test        The name of the test being ran, used as a reference point.
		 * }
		 */
		return apply_filters( 'site_status_test_result', call_user_func( $callback ) );
	}

	/**
	 * Run the SQL version checks.
	 *
	 * These values are used in later tests, but the part of preparing them is more easily managed
	 * early in the class for ease of access and discovery.
	 *
	 * @since 5.2.0
	 *
	 * @global wpdb $wpdb WordPress database abstraction object.
	 */
	private function prepare_sql_data() {
		global $wpdb;

		if ( $wpdb-&gt;use_mysqli ) {
			// phpcs:ignore WordPress.DB.RestrictedFunctions.mysql_mysqli_get_server_info
			$mysql_server_type = mysqli_get_server_info( $wpdb-&gt;dbh );
		} else {
			// phpcs:ignore WordPress.DB.RestrictedFunctions.mysql_mysql_get_server_info,PHPCompatibility.Extensions.RemovedExtensions.mysql_DeprecatedRemoved
			$mysql_server_type = mysql_get_server_info( $wpdb-&gt;dbh );
		}

		$this-&gt;mysql_server_version = $wpdb-&gt;get_var( 'SELECT VERSION()' );

		$this-&gt;health_check_mysql_rec_version = '5.6';

		if ( stristr( $mysql_server_type, 'mariadb' ) ) {
			$this-&gt;is_mariadb                     = true;
			$this-&gt;health_check_mysql_rec_version = '10.0';
		}

		$this-&gt;mysql_min_version_check = version_compare( '5.5', $this-&gt;mysql_server_version, '&lt;=' );
		$this-&gt;mysql_rec_version_check = version_compare( $this-&gt;health_check_mysql_rec_version, $this-&gt;mysql_server_version, '&lt;=' );
	}

	/**
	 * Test if `wp_version_check` is blocked.
	 *
	 * It's possible to block updates with the `wp_version_check` filter, but this can't be checked
	 * during an Ajax call, as the filter is never introduced then.
	 *
	 * This filter overrides a standard page request if it's made by an admin through the Ajax call
	 * with the right query argument to check for this.
	 *
	 * @since 5.2.0
	 */
	public function check_wp_version_check_exists() {
		if ( ! is_admin() || ! is_user_logged_in() || ! current_user_can( 'update_core' ) || ! isset( $_GET['health-check-test-wp_version_check'] ) ) {
			return;
		}

		echo ( has_filter( 'wp_version_check', 'wp_version_check' ) ? 'yes' : 'no' );

		die();
	}

	/**
	 * Tests for WordPress version and outputs it.
	 *
	 * Gives various results depending on what kind of updates are available, if any, to encourage
	 * the user to install security updates as a priority.
	 *
	 * @since 5.2.0
	 *
	 * @return array The test result.
	 */
	public function get_test_wordpress_version() {
		$result = array(
			'label'       =&gt; '',
			'status'      =&gt; '',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Performance' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; '',
			'actions'     =&gt; '',
			'test'        =&gt; 'wordpress_version',
		);

		$core_current_version = get_bloginfo( 'version' );
		$core_updates         = get_core_updates();

		if ( ! is_array( $core_updates ) ) {
			$result['status'] = 'recommended';

			$result['label'] = sprintf(
				/* translators: %s: Your current version of WordPress. */
				__( 'WordPress version %s' ),
				$core_current_version
			);

			$result['description'] = sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'We were unable to check if any new versions of WordPress are available.' )
			);

			$result['actions'] = sprintf(
				'&lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;',
				esc_url( admin_url( 'update-core.php?force-check=1' ) ),
				__( 'Check for updates manually' )
			);
		} else {
			foreach ( $core_updates as $core =&gt; $update ) {
				if ( 'upgrade' === $update-&gt;response ) {
					$current_version = explode( '.', $core_current_version );
					$new_version     = explode( '.', $update-&gt;version );

					$current_major = $current_version[0] . '.' . $current_version[1];
					$new_major     = $new_version[0] . '.' . $new_version[1];

					$result['label'] = sprintf(
						/* translators: %s: The latest version of WordPress available. */
						__( 'WordPress update available (%s)' ),
						$update-&gt;version
					);

					$result['actions'] = sprintf(
						'&lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;',
						esc_url( admin_url( 'update-core.php' ) ),
						__( 'Install the latest version of WordPress' )
					);

					if ( $current_major !== $new_major ) {
						// This is a major version mismatch.
						$result['status']      = 'recommended';
						$result['description'] = sprintf(
							'&lt;p&gt;%s&lt;/p&gt;',
							__( 'A new version of WordPress is available.' )
						);
					} else {
						// This is a minor version, sometimes considered more critical.
						$result['status']         = 'critical';
						$result['badge']['label'] = __( 'Security' );
						$result['description']    = sprintf(
							'&lt;p&gt;%s&lt;/p&gt;',
							__( 'A new minor update is available for your site. Because minor updates often address security, it&amp;#8217;s important to install them.' )
						);
					}
				} else {
					$result['status'] = 'good';
					$result['label']  = sprintf(
						/* translators: %s: The current version of WordPress installed on this site. */
						__( 'Your version of WordPress (%s) is up to date' ),
						$core_current_version
					);

					$result['description'] = sprintf(
						'&lt;p&gt;%s&lt;/p&gt;',
						__( 'You are currently running the latest version of WordPress available, keep it up!' )
					);
				}
			}
		}

		return $result;
	}

	/**
	 * Test if plugins are outdated, or unnecessary.
	 *
	 * The tests checks if your plugins are up to date, and encourages you to remove any
	 * that are not in use.
	 *
	 * @since 5.2.0
	 *
	 * @return array The test result.
	 */
	public function get_test_plugin_version() {
		$result = array(
			'label'       =&gt; __( 'Your plugins are all up to date' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Security' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'Plugins extend your site&amp;#8217;s functionality with things like contact forms, ecommerce and much more. That means they have deep access to your site, so it&amp;#8217;s vital to keep them up to date.' )
			),
			'actions'     =&gt; sprintf(
				'&lt;p&gt;&lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;&lt;/p&gt;',
				esc_url( admin_url( 'plugins.php' ) ),
				__( 'Manage your plugins' )
			),
			'test'        =&gt; 'plugin_version',
		);

		$plugins        = get_plugins();
		$plugin_updates = get_plugin_updates();

		$plugins_have_updates = false;
		$plugins_active       = 0;
		$plugins_total        = 0;
		$plugins_need_update  = 0;

		// Loop over the available plugins and check their versions and active state.
		foreach ( $plugins as $plugin_path =&gt; $plugin ) {
			$plugins_total++;

			if ( is_plugin_active( $plugin_path ) ) {
				$plugins_active++;
			}

			$plugin_version = $plugin['Version'];

			if ( array_key_exists( $plugin_path, $plugin_updates ) ) {
				$plugins_need_update++;
				$plugins_have_updates = true;
			}
		}

		// Add a notice if there are outdated plugins.
		if ( $plugins_need_update &gt; 0 ) {
			$result['status'] = 'critical';

			$result['label'] = __( 'You have plugins waiting to be updated' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: %d: The number of outdated plugins. */
					_n(
						'Your site has %d plugin waiting to be updated.',
						'Your site has %d plugins waiting to be updated.',
						$plugins_need_update
					),
					$plugins_need_update
				)
			);

			$result['actions'] .= sprintf(
				'&lt;p&gt;&lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;&lt;/p&gt;',
				esc_url( network_admin_url( 'plugins.php?plugin_status=upgrade' ) ),
				__( 'Update your plugins' )
			);
		} else {
			if ( 1 === $plugins_active ) {
				$result['description'] .= sprintf(
					'&lt;p&gt;%s&lt;/p&gt;',
					__( 'Your site has 1 active plugin, and it is up to date.' )
				);
			} else {
				$result['description'] .= sprintf(
					'&lt;p&gt;%s&lt;/p&gt;',
					sprintf(
						/* translators: %d: The number of active plugins. */
						_n(
							'Your site has %d active plugin, and it is up to date.',
							'Your site has %d active plugins, and they are all up to date.',
							$plugins_active
						),
						$plugins_active
					)
				);
			}
		}

		// Check if there are inactive plugins.
		if ( $plugins_total &gt; $plugins_active &amp;&amp; ! is_multisite() ) {
			$unused_plugins = $plugins_total - $plugins_active;

			$result['status'] = 'recommended';

			$result['label'] = __( 'You should remove inactive plugins' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s %s&lt;/p&gt;',
				sprintf(
					/* translators: %d: The number of inactive plugins. */
					_n(
						'Your site has %d inactive plugin.',
						'Your site has %d inactive plugins.',
						$unused_plugins
					),
					$unused_plugins
				),
				__( 'Inactive plugins are tempting targets for attackers. If you&amp;#8217;re not going to use a plugin, we recommend you remove it.' )
			);

			$result['actions'] .= sprintf(
				'&lt;p&gt;&lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;&lt;/p&gt;',
				esc_url( admin_url( 'plugins.php?plugin_status=inactive' ) ),
				__( 'Manage inactive plugins' )
			);
		}

		return $result;
	}

	/**
	 * Test if themes are outdated, or unnecessary.
	 *
	 * Сhecks if your site has a default theme (to fall back on if there is a need),
	 * if your themes are up to date and, finally, encourages you to remove any themes
	 * that are not needed.
	 *
	 * @since 5.2.0
	 *
	 * @return array The test results.
	 */
	public function get_test_theme_version() {
		$result = array(
			'label'       =&gt; __( 'Your themes are all up to date' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Security' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'Themes add your site&amp;#8217;s look and feel. It&amp;#8217;s important to keep them up to date, to stay consistent with your brand and keep your site secure.' )
			),
			'actions'     =&gt; sprintf(
				'&lt;p&gt;&lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;&lt;/p&gt;',
				esc_url( admin_url( 'themes.php' ) ),
				__( 'Manage your themes' )
			),
			'test'        =&gt; 'theme_version',
		);

		$theme_updates = get_theme_updates();

		$themes_total        = 0;
		$themes_need_updates = 0;
		$themes_inactive     = 0;

		// This value is changed during processing to determine how many themes are considered a reasonable amount.
		$allowed_theme_count = 1;

		$has_default_theme   = false;
		$has_unused_themes   = false;
		$show_unused_themes  = true;
		$using_default_theme = false;

		// Populate a list of all themes available in the install.
		$all_themes   = wp_get_themes();
		$active_theme = wp_get_theme();

		// If WP_DEFAULT_THEME doesn't exist, fall back to the latest core default theme.
		$default_theme = wp_get_theme( WP_DEFAULT_THEME );
		if ( ! $default_theme-&gt;exists() ) {
			$default_theme = WP_Theme::get_core_default_theme();
		}

		if ( $default_theme ) {
			$has_default_theme = true;

			if (
				$active_theme-&gt;get_stylesheet() === $default_theme-&gt;get_stylesheet()
			||
				is_child_theme() &amp;&amp; $active_theme-&gt;get_template() === $default_theme-&gt;get_template()
			) {
				$using_default_theme = true;
			}
		}

		foreach ( $all_themes as $theme_slug =&gt; $theme ) {
			$themes_total++;

			if ( array_key_exists( $theme_slug, $theme_updates ) ) {
				$themes_need_updates++;
			}
		}

		// If this is a child theme, increase the allowed theme count by one, to account for the parent.
		if ( is_child_theme() ) {
			$allowed_theme_count++;
		}

		// If there's a default theme installed and not in use, we count that as allowed as well.
		if ( $has_default_theme &amp;&amp; ! $using_default_theme ) {
			$allowed_theme_count++;
		}

		if ( $themes_total &gt; $allowed_theme_count ) {
			$has_unused_themes = true;
			$themes_inactive   = ( $themes_total - $allowed_theme_count );
		}

		// Check if any themes need to be updated.
		if ( $themes_need_updates &gt; 0 ) {
			$result['status'] = 'critical';

			$result['label'] = __( 'You have themes waiting to be updated' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: %d: The number of outdated themes. */
					_n(
						'Your site has %d theme waiting to be updated.',
						'Your site has %d themes waiting to be updated.',
						$themes_need_updates
					),
					$themes_need_updates
				)
			);
		} else {
			// Give positive feedback about the site being good about keeping things up to date.
			if ( 1 === $themes_total ) {
				$result['description'] .= sprintf(
					'&lt;p&gt;%s&lt;/p&gt;',
					__( 'Your site has 1 installed theme, and it is up to date.' )
				);
			} else {
				$result['description'] .= sprintf(
					'&lt;p&gt;%s&lt;/p&gt;',
					sprintf(
						/* translators: %d: The number of themes. */
						_n(
							'Your site has %d installed theme, and it is up to date.',
							'Your site has %d installed themes, and they are all up to date.',
							$themes_total
						),
						$themes_total
					)
				);
			}
		}

		if ( $has_unused_themes &amp;&amp; $show_unused_themes &amp;&amp; ! is_multisite() ) {

			// This is a child theme, so we want to be a bit more explicit in our messages.
			if ( $active_theme-&gt;parent() ) {
				// Recommend removing inactive themes, except a default theme, your current one, and the parent theme.
				$result['status'] = 'recommended';

				$result['label'] = __( 'You should remove inactive themes' );

				if ( $using_default_theme ) {
					$result['description'] .= sprintf(
						'&lt;p&gt;%s %s&lt;/p&gt;',
						sprintf(
							/* translators: %d: The number of inactive themes. */
							_n(
								'Your site has %d inactive theme.',
								'Your site has %d inactive themes.',
								$themes_inactive
							),
							$themes_inactive
						),
						sprintf(
							/* translators: 1: The currently active theme. 2: The active theme's parent theme. */
							__( 'To enhance your site&amp;#8217;s security, we recommend you remove any themes you&amp;#8217;re not using. You should keep your current theme, %1$s, and %2$s, its parent theme.' ),
							$active_theme-&gt;name,
							$active_theme-&gt;parent()-&gt;name
						)
					);
				} else {
					$result['description'] .= sprintf(
						'&lt;p&gt;%s %s&lt;/p&gt;',
						sprintf(
							/* translators: %d: The number of inactive themes. */
							_n(
								'Your site has %d inactive theme.',
								'Your site has %d inactive themes.',
								$themes_inactive
							),
							$themes_inactive
						),
						sprintf(
							/* translators: 1: The default theme for WordPress. 2: The currently active theme. 3: The active theme's parent theme. */
							__( 'To enhance your site&amp;#8217;s security, we recommend you remove any themes you&amp;#8217;re not using. You should keep %1$s, the default WordPress theme, %2$s, your current theme, and %3$s, its parent theme.' ),
							$default_theme ? $default_theme-&gt;name : WP_DEFAULT_THEME,
							$active_theme-&gt;name,
							$active_theme-&gt;parent()-&gt;name
						)
					);
				}
			} else {
				// Recommend removing all inactive themes.
				$result['status'] = 'recommended';

				$result['label'] = __( 'You should remove inactive themes' );

				if ( $using_default_theme ) {
					$result['description'] .= sprintf(
						'&lt;p&gt;%s %s&lt;/p&gt;',
						sprintf(
							/* translators: 1: The amount of inactive themes. 2: The currently active theme. */
							_n(
								'Your site has %1$d inactive theme, other than %2$s, your active theme.',
								'Your site has %1$d inactive themes, other than %2$s, your active theme.',
								$themes_inactive
							),
							$themes_inactive,
							$active_theme-&gt;name
						),
						__( 'We recommend removing any unused themes to enhance your site&amp;#8217;s security.' )
					);
				} else {
					$result['description'] .= sprintf(
						'&lt;p&gt;%s %s&lt;/p&gt;',
						sprintf(
							/* translators: 1: The amount of inactive themes. 2: The default theme for WordPress. 3: The currently active theme. */
							_n(
								'Your site has %1$d inactive theme, other than %2$s, the default WordPress theme, and %3$s, your active theme.',
								'Your site has %1$d inactive themes, other than %2$s, the default WordPress theme, and %3$s, your active theme.',
								$themes_inactive
							),
							$themes_inactive,
							$default_theme ? $default_theme-&gt;name : WP_DEFAULT_THEME,
							$active_theme-&gt;name
						),
						__( 'We recommend removing any unused themes to enhance your site&amp;#8217;s security.' )
					);
				}
			}
		}

		// If no default Twenty* theme exists.
		if ( ! $has_default_theme ) {
			$result['status'] = 'recommended';

			$result['label'] = __( 'Have a default theme available' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'Your site does not have any default theme. Default themes are used by WordPress automatically if anything is wrong with your chosen theme.' )
			);
		}

		return $result;
	}

	/**
	 * Test if the supplied PHP version is supported.
	 *
	 * @since 5.2.0
	 *
	 * @return array The test results.
	 */
	public function get_test_php_version() {
		$response = wp_check_php_version();

		$result = array(
			'label'       =&gt; sprintf(
				/* translators: %s: The current PHP version. */
				__( 'Your site is running the current version of PHP (%s)' ),
				PHP_VERSION
			),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Performance' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: %s: The minimum recommended PHP version. */
					__( 'PHP is the programming language used to build and maintain WordPress. Newer versions of PHP are created with increased performance in mind, so you may see a positive effect on your site&amp;#8217;s performance. The minimum recommended version of PHP is %s.' ),
					$response ? $response['recommended_version'] : ''
				)
			),
			'actions'     =&gt; sprintf(
				'&lt;p&gt;&lt;a href=&quot;%s&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;%s &lt;span class=&quot;screen-reader-text&quot;&gt;%s&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;dashicons dashicons-external&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;',
				esc_url( wp_get_update_php_url() ),
				__( 'Learn more about updating PHP' ),
				/* translators: Accessibility text. */
				__( '(opens in a new tab)' )
			),
			'test'        =&gt; 'php_version',
		);

		// PHP is up to date.
		if ( ! $response || version_compare( PHP_VERSION, $response['recommended_version'], '&gt;=' ) ) {
			return $result;
		}

		// The PHP version is older than the recommended version, but still receiving active support.
		if ( $response['is_supported'] ) {
			$result['label'] = sprintf(
				/* translators: %s: The server PHP version. */
				__( 'Your site is running an older version of PHP (%s)' ),
				PHP_VERSION
			);
			$result['status'] = 'recommended';

			return $result;
		}

		// The PHP version is only receiving security fixes.
		if ( $response['is_secure'] ) {
			$result['label'] = sprintf(
				/* translators: %s: The server PHP version. */
				__( 'Your site is running an older version of PHP (%s), which should be updated' ),
				PHP_VERSION
			);
			$result['status'] = 'recommended';

			return $result;
		}

		// Anything no longer secure must be updated.
		$result['label'] = sprintf(
			/* translators: %s: The server PHP version. */
			__( 'Your site is running an outdated version of PHP (%s), which requires an update' ),
			PHP_VERSION
		);
		$result['status']         = 'critical';
		$result['badge']['label'] = __( 'Security' );

		return $result;
	}

	/**
	 * Check if the passed extension or function are available.
	 *
	 * Make the check for available PHP modules into a simple boolean operator for a cleaner test runner.
	 *
	 * @since 5.2.0
	 * @since 5.3.0 The `$constant` and `$class` parameters were added.
	 *
	 * @param string $extension Optional. The extension name to test. Default null.
	 * @param string $function  Optional. The function name to test. Default null.
	 * @param string $constant  Optional. The constant name to test for. Default null.
	 * @param string $class     Optional. The class name to test for. Default null.
	 * @return bool Whether or not the extension and function are available.
	 */
	private function test_php_extension_availability( $extension = null, $function = null, $constant = null, $class = null ) {
		// If no extension or function is passed, claim to fail testing, as we have nothing to test against.
		if ( ! $extension &amp;&amp; ! $function &amp;&amp; ! $constant &amp;&amp; ! $class ) {
			return false;
		}

		if ( $extension &amp;&amp; ! extension_loaded( $extension ) ) {
			return false;
		}
		if ( $function &amp;&amp; ! function_exists( $function ) ) {
			return false;
		}
		if ( $constant &amp;&amp; ! defined( $constant ) ) {
			return false;
		}
		if ( $class &amp;&amp; ! class_exists( $class ) ) {
			return false;
		}

		return true;
	}

	/**
	 * Test if required PHP modules are installed on the host.
	 *
	 * This test builds on the recommendations made by the WordPress Hosting Team
	 * as seen at https://make.wordpress.org/hosting/handbook/handbook/server-environment/#php-extensions
	 *
	 * @since 5.2.0
	 *
	 * @return array
	 */
	public function get_test_php_extensions() {
		$result = array(
			'label'       =&gt; __( 'Required and recommended modules are installed' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Performance' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;&lt;p&gt;%s&lt;/p&gt;',
				__( 'PHP modules perform most of the tasks on the server that make your site run. Any changes to these must be made by your server administrator.' ),
				sprintf(
					/* translators: 1: Link to the hosting group page about recommended PHP modules. 2: Additional link attributes. 3: Accessibility text. */
					__( 'The WordPress Hosting Team maintains a list of those modules, both recommended and required, in &lt;a href=&quot;%1$s&quot; %2$s&gt;the team handbook%3$s&lt;/a&gt;.' ),
					/* translators: Localized team handbook, if one exists. */
					esc_url( __( 'https://make.wordpress.org/hosting/handbook/handbook/server-environment/#php-extensions' ) ),
					'target=&quot;_blank&quot; rel=&quot;noopener&quot;',
					sprintf(
						' &lt;span class=&quot;screen-reader-text&quot;&gt;%s&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;dashicons dashicons-external&quot;&gt;&lt;/span&gt;',
						/* translators: Accessibility text. */
						__( '(opens in a new tab)' )
					)
				)
			),
			'actions'     =&gt; '',
			'test'        =&gt; 'php_extensions',
		);

		$modules = array(
			'curl'      =&gt; array(
				'function' =&gt; 'curl_version',
				'required' =&gt; false,
			),
			'dom'       =&gt; array(
				'class'    =&gt; 'DOMNode',
				'required' =&gt; false,
			),
			'exif'      =&gt; array(
				'function' =&gt; 'exif_read_data',
				'required' =&gt; false,
			),
			'fileinfo'  =&gt; array(
				'function' =&gt; 'finfo_file',
				'required' =&gt; false,
			),
			'hash'      =&gt; array(
				'function' =&gt; 'hash',
				'required' =&gt; false,
			),
			'json'      =&gt; array(
				'function' =&gt; 'json_last_error',
				'required' =&gt; true,
			),
			'mbstring'  =&gt; array(
				'function' =&gt; 'mb_check_encoding',
				'required' =&gt; false,
			),
			'mysqli'    =&gt; array(
				'function' =&gt; 'mysqli_connect',
				'required' =&gt; false,
			),
			'libsodium' =&gt; array(
				'constant'            =&gt; 'SODIUM_LIBRARY_VERSION',
				'required'            =&gt; false,
				'php_bundled_version' =&gt; '7.2.0',
			),
			'openssl'   =&gt; array(
				'function' =&gt; 'openssl_encrypt',
				'required' =&gt; false,
			),
			'pcre'      =&gt; array(
				'function' =&gt; 'preg_match',
				'required' =&gt; false,
			),
			'imagick'   =&gt; array(
				'extension' =&gt; 'imagick',
				'required'  =&gt; false,
			),
			'mod_xml'   =&gt; array(
				'extension' =&gt; 'libxml',
				'required'  =&gt; false,
			),
			'zip'       =&gt; array(
				'class'    =&gt; 'ZipArchive',
				'required' =&gt; false,
			),
			'filter'    =&gt; array(
				'function' =&gt; 'filter_list',
				'required' =&gt; false,
			),
			'gd'        =&gt; array(
				'extension'    =&gt; 'gd',
				'required'     =&gt; false,
				'fallback_for' =&gt; 'imagick',
			),
			'iconv'     =&gt; array(
				'function' =&gt; 'iconv',
				'required' =&gt; false,
			),
			'mcrypt'    =&gt; array(
				'extension'    =&gt; 'mcrypt',
				'required'     =&gt; false,
				'fallback_for' =&gt; 'libsodium',
			),
			'simplexml' =&gt; array(
				'extension'    =&gt; 'simplexml',
				'required'     =&gt; false,
				'fallback_for' =&gt; 'mod_xml',
			),
			'xmlreader' =&gt; array(
				'extension'    =&gt; 'xmlreader',
				'required'     =&gt; false,
				'fallback_for' =&gt; 'mod_xml',
			),
			'zlib'      =&gt; array(
				'extension'    =&gt; 'zlib',
				'required'     =&gt; false,
				'fallback_for' =&gt; 'zip',
			),
		);

		/**
		 * An array representing all the modules we wish to test for.
		 *
		 * @since 5.2.0
		 * @since 5.3.0 The `$constant` and `$class` parameters were added.
		 *
		 * @param array $modules {
		 *     An associative array of modules to test for.
		 *
		 *     @type array ...$0 {
		 *         An associative array of module properties used during testing.
		 *         One of either `$function` or `$extension` must be provided, or they will fail by default.
		 *
		 *         @type string $function     Optional. A function name to test for the existence of.
		 *         @type string $extension    Optional. An extension to check if is loaded in PHP.
		 *         @type string $constant     Optional. A constant name to check for to verify an extension exists.
		 *         @type string $class        Optional. A class name to check for to verify an extension exists.
		 *         @type bool   $required     Is this a required feature or not.
		 *         @type string $fallback_for Optional. The module this module replaces as a fallback.
		 *     }
		 * }
		 */
		$modules = apply_filters( 'site_status_test_php_modules', $modules );

		$failures = array();

		foreach ( $modules as $library =&gt; $module ) {
			$extension  = ( isset( $module['extension'] ) ? $module['extension'] : null );
			$function   = ( isset( $module['function'] ) ? $module['function'] : null );
			$constant   = ( isset( $module['constant'] ) ? $module['constant'] : null );
			$class_name = ( isset( $module['class'] ) ? $module['class'] : null );

			// If this module is a fallback for another function, check if that other function passed.
			if ( isset( $module['fallback_for'] ) ) {
				/*
				 * If that other function has a failure, mark this module as required for usual operations.
				 * If that other function hasn't failed, skip this test as it's only a fallback.
				 */
				if ( isset( $failures[ $module['fallback_for'] ] ) ) {
					$module['required'] = true;
				} else {
					continue;
				}
			}

			if ( ! $this-&gt;test_php_extension_availability( $extension, $function, $constant, $class_name ) &amp;&amp; ( ! isset( $module['php_bundled_version'] ) || version_compare( PHP_VERSION, $module['php_bundled_version'], '&lt;' ) ) ) {
				if ( $module['required'] ) {
					$result['status'] = 'critical';

					$class         = 'error';
					$screen_reader = __( 'Error' );
					$message       = sprintf(
						/* translators: %s: The module name. */
						__( 'The required module, %s, is not installed, or has been disabled.' ),
						$library
					);
				} else {
					$class         = 'warning';
					$screen_reader = __( 'Warning' );
					$message       = sprintf(
						/* translators: %s: The module name. */
						__( 'The optional module, %s, is not installed, or has been disabled.' ),
						$library
					);
				}

				if ( ! $module['required'] &amp;&amp; 'good' === $result['status'] ) {
					$result['status'] = 'recommended';
				}

				$failures[ $library ] = &quot;&lt;span class='dashicons $class'&gt;&lt;span class='screen-reader-text'&gt;$screen_reader&lt;/span&gt;&lt;/span&gt; $message&quot;;
			}
		}

		if ( ! empty( $failures ) ) {
			$output = '&lt;ul&gt;';

			foreach ( $failures as $failure ) {
				$output .= sprintf(
					'&lt;li&gt;%s&lt;/li&gt;',
					$failure
				);
			}

			$output .= '&lt;/ul&gt;';
		}

		if ( 'good' !== $result['status'] ) {
			if ( 'recommended' === $result['status'] ) {
				$result['label'] = __( 'One or more recommended modules are missing' );
			}
			if ( 'critical' === $result['status'] ) {
				$result['label'] = __( 'One or more required modules are missing' );
			}

			$result['description'] .= $output;
		}

		return $result;
	}

	/**
	 * Test if the PHP default timezone is set to UTC.
	 *
	 * @since 5.3.1
	 *
	 * @return array The test results.
	 */
	public function get_test_php_default_timezone() {
		$result = array(
			'label'       =&gt; __( 'PHP default timezone is valid' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Performance' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'PHP default timezone was configured by WordPress on loading. This is necessary for correct calculations of dates and times.' )
			),
			'actions'     =&gt; '',
			'test'        =&gt; 'php_default_timezone',
		);

		if ( 'UTC' !== date_default_timezone_get() ) {
			$result['status'] = 'critical';

			$result['label'] = __( 'PHP default timezone is invalid' );

			$result['description'] = sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: %s: date_default_timezone_set() */
					__( 'PHP default timezone was changed after WordPress loading by a %s function call. This interferes with correct calculations of dates and times.' ),
					'&lt;code&gt;date_default_timezone_set()&lt;/code&gt;'
				)
			);
		}

		return $result;
	}

	/**
	 * Test if there's an active PHP session that can affect loopback requests.
	 *
	 * @since 5.5.0
	 *
	 * @return array The test results.
	 */
	public function get_test_php_sessions() {
		$result = array(
			'label'       =&gt; __( 'No PHP sessions detected' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Performance' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: 1: session_start(), 2: session_write_close() */
					__( 'PHP sessions created by a %1$s function call may interfere with REST API and loopback requests. An active session should be closed by %2$s before making any HTTP requests.' ),
					'&lt;code&gt;session_start()&lt;/code&gt;',
					'&lt;code&gt;session_write_close()&lt;/code&gt;'
				)
			),
			'test'        =&gt; 'php_sessions',
		);

		if ( function_exists( 'session_status' ) &amp;&amp; PHP_SESSION_ACTIVE === session_status() ) {
			$result['status'] = 'critical';

			$result['label'] = __( 'An active PHP session was detected' );

			$result['description'] = sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: 1: session_start(), 2: session_write_close() */
					__( 'A PHP session was created by a %1$s function call. This interferes with REST API and loopback requests. The session should be closed by %2$s before making any HTTP requests.' ),
					'&lt;code&gt;session_start()&lt;/code&gt;',
					'&lt;code&gt;session_write_close()&lt;/code&gt;'
				)
			);
		}

		return $result;
	}

	/**
	 * Test if the SQL server is up to date.
	 *
	 * @since 5.2.0
	 *
	 * @return array The test results.
	 */
	public function get_test_sql_server() {
		if ( ! $this-&gt;mysql_server_version ) {
			$this-&gt;prepare_sql_data();
		}

		$result = array(
			'label'       =&gt; __( 'SQL server is up to date' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Performance' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'The SQL server is a required piece of software for the database WordPress uses to store all your site&amp;#8217;s content and settings.' )
			),
			'actions'     =&gt; sprintf(
				'&lt;p&gt;&lt;a href=&quot;%s&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;%s &lt;span class=&quot;screen-reader-text&quot;&gt;%s&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;dashicons dashicons-external&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;',
				/* translators: Localized version of WordPress requirements if one exists. */
				esc_url( __( 'https://wordpress.org/about/requirements/' ) ),
				__( 'Learn more about what WordPress requires to run.' ),
				/* translators: Accessibility text. */
				__( '(opens in a new tab)' )
			),
			'test'        =&gt; 'sql_server',
		);

		$db_dropin = file_exists( WP_CONTENT_DIR . '/db.php' );

		if ( ! $this-&gt;mysql_rec_version_check ) {
			$result['status'] = 'recommended';

			$result['label'] = __( 'Outdated SQL server' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: 1: The database engine in use (MySQL or MariaDB). 2: Database server recommended version number. */
					__( 'For optimal performance and security reasons, we recommend running %1$s version %2$s or higher. Contact your web hosting company to correct this.' ),
					( $this-&gt;is_mariadb ? 'MariaDB' : 'MySQL' ),
					$this-&gt;health_check_mysql_rec_version
				)
			);
		}

		if ( ! $this-&gt;mysql_min_version_check ) {
			$result['status'] = 'critical';

			$result['label']          = __( 'Severely outdated SQL server' );
			$result['badge']['label'] = __( 'Security' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: 1: The database engine in use (MySQL or MariaDB). 2: Database server minimum version number. */
					__( 'WordPress requires %1$s version %2$s or higher. Contact your web hosting company to correct this.' ),
					( $this-&gt;is_mariadb ? 'MariaDB' : 'MySQL' ),
					$this-&gt;health_check_mysql_required_version
				)
			);
		}

		if ( $db_dropin ) {
			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				wp_kses(
					sprintf(
						/* translators: 1: The name of the drop-in. 2: The name of the database engine. */
						__( 'You are using a %1$s drop-in which might mean that a %2$s database is not being used.' ),
						'&lt;code&gt;wp-content/db.php&lt;/code&gt;',
						( $this-&gt;is_mariadb ? 'MariaDB' : 'MySQL' )
					),
					array(
						'code' =&gt; true,
					)
				)
			);
		}

		return $result;
	}

	/**
	 * Test if the database server is capable of using utf8mb4.
	 *
	 * @since 5.2.0
	 *
	 * @return array The test results.
	 */
	public function get_test_utf8mb4_support() {
		global $wpdb;

		if ( ! $this-&gt;mysql_server_version ) {
			$this-&gt;prepare_sql_data();
		}

		$result = array(
			'label'       =&gt; __( 'UTF8MB4 is supported' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Performance' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'UTF8MB4 is the character set WordPress prefers for database storage because it safely supports the widest set of characters and encodings, including Emoji, enabling better support for non-English languages.' )
			),
			'actions'     =&gt; '',
			'test'        =&gt; 'utf8mb4_support',
		);

		if ( ! $this-&gt;is_mariadb ) {
			if ( version_compare( $this-&gt;mysql_server_version, '5.5.3', '&lt;' ) ) {
				$result['status'] = 'recommended';

				$result['label'] = __( 'utf8mb4 requires a MySQL update' );

				$result['description'] .= sprintf(
					'&lt;p&gt;%s&lt;/p&gt;',
					sprintf(
						/* translators: %s: Version number. */
						__( 'WordPress&amp;#8217; utf8mb4 support requires MySQL version %s or greater. Please contact your server administrator.' ),
						'5.5.3'
					)
				);
			} else {
				$result['description'] .= sprintf(
					'&lt;p&gt;%s&lt;/p&gt;',
					__( 'Your MySQL version supports utf8mb4.' )
				);
			}
		} else { // MariaDB introduced utf8mb4 support in 5.5.0.
			if ( version_compare( $this-&gt;mysql_server_version, '5.5.0', '&lt;' ) ) {
				$result['status'] = 'recommended';

				$result['label'] = __( 'utf8mb4 requires a MariaDB update' );

				$result['description'] .= sprintf(
					'&lt;p&gt;%s&lt;/p&gt;',
					sprintf(
						/* translators: %s: Version number. */
						__( 'WordPress&amp;#8217; utf8mb4 support requires MariaDB version %s or greater. Please contact your server administrator.' ),
						'5.5.0'
					)
				);
			} else {
				$result['description'] .= sprintf(
					'&lt;p&gt;%s&lt;/p&gt;',
					__( 'Your MariaDB version supports utf8mb4.' )
				);
			}
		}

		if ( $wpdb-&gt;use_mysqli ) {
			// phpcs:ignore WordPress.DB.RestrictedFunctions.mysql_mysqli_get_client_info
			$mysql_client_version = mysqli_get_client_info();
		} else {
			// phpcs:ignore WordPress.DB.RestrictedFunctions.mysql_mysql_get_client_info,PHPCompatibility.Extensions.RemovedExtensions.mysql_DeprecatedRemoved
			$mysql_client_version = mysql_get_client_info();
		}

		/*
		 * libmysql has supported utf8mb4 since 5.5.3, same as the MySQL server.
		 * mysqlnd has supported utf8mb4 since 5.0.9.
		 */
		if ( false !== strpos( $mysql_client_version, 'mysqlnd' ) ) {
			$mysql_client_version = preg_replace( '/^\D+([\d.]+).*/', '$1', $mysql_client_version );
			if ( version_compare( $mysql_client_version, '5.0.9', '&lt;' ) ) {
				$result['status'] = 'recommended';

				$result['label'] = __( 'utf8mb4 requires a newer client library' );

				$result['description'] .= sprintf(
					'&lt;p&gt;%s&lt;/p&gt;',
					sprintf(
						/* translators: 1: Name of the library, 2: Number of version. */
						__( 'WordPress&amp;#8217; utf8mb4 support requires MySQL client library (%1$s) version %2$s or newer. Please contact your server administrator.' ),
						'mysqlnd',
						'5.0.9'
					)
				);
			}
		} else {
			if ( version_compare( $mysql_client_version, '5.5.3', '&lt;' ) ) {
				$result['status'] = 'recommended';

				$result['label'] = __( 'utf8mb4 requires a newer client library' );

				$result['description'] .= sprintf(
					'&lt;p&gt;%s&lt;/p&gt;',
					sprintf(
						/* translators: 1: Name of the library, 2: Number of version. */
						__( 'WordPress&amp;#8217; utf8mb4 support requires MySQL client library (%1$s) version %2$s or newer. Please contact your server administrator.' ),
						'libmysql',
						'5.5.3'
					)
				);
			}
		}

		return $result;
	}

	/**
	 * Test if the site can communicate with WordPress.org.
	 *
	 * @since 5.2.0
	 *
	 * @return array The test results.
	 */
	public function get_test_dotorg_communication() {
		$result = array(
			'label'       =&gt; __( 'Can communicate with WordPress.org' ),
			'status'      =&gt; '',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Security' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'Communicating with the WordPress servers is used to check for new versions, and to both install and update WordPress core, themes or plugins.' )
			),
			'actions'     =&gt; '',
			'test'        =&gt; 'dotorg_communication',
		);

		$wp_dotorg = wp_remote_get(
			'https://api.wordpress.org',
			array(
				'timeout' =&gt; 10,
			)
		);
		if ( ! is_wp_error( $wp_dotorg ) ) {
			$result['status'] = 'good';
		} else {
			$result['status'] = 'critical';

			$result['label'] = __( 'Could not reach WordPress.org' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					'&lt;span class=&quot;error&quot;&gt;&lt;span class=&quot;screen-reader-text&quot;&gt;%s&lt;/span&gt;&lt;/span&gt; %s',
					__( 'Error' ),
					sprintf(
						/* translators: 1: The IP address WordPress.org resolves to. 2: The error returned by the lookup. */
						__( 'Your site is unable to reach WordPress.org at %1$s, and returned the error: %2$s' ),
						gethostbyname( 'api.wordpress.org' ),
						$wp_dotorg-&gt;get_error_message()
					)
				)
			);

			$result['actions'] = sprintf(
				'&lt;p&gt;&lt;a href=&quot;%s&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;%s &lt;span class=&quot;screen-reader-text&quot;&gt;%s&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;dashicons dashicons-external&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;',
				/* translators: Localized Support reference. */
				esc_url( __( 'https://wordpress.org/support' ) ),
				__( 'Get help resolving this issue.' ),
				/* translators: Accessibility text. */
				__( '(opens in a new tab)' )
			);
		}

		return $result;
	}

	/**
	 * Test if debug information is enabled.
	 *
	 * When WP_DEBUG is enabled, errors and information may be disclosed to site visitors,
	 * or logged to a publicly accessible file.
	 *
	 * Debugging is also frequently left enabled after looking for errors on a site,
	 * as site owners do not understand the implications of this.
	 *
	 * @since 5.2.0
	 *
	 * @return array The test results.
	 */
	public function get_test_is_in_debug_mode() {
		$result = array(
			'label'       =&gt; __( 'Your site is not set to output debug information' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Security' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'Debug mode is often enabled to gather more details about an error or site failure, but may contain sensitive information which should not be available on a publicly available website.' )
			),
			'actions'     =&gt; sprintf(
				'&lt;p&gt;&lt;a href=&quot;%s&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;%s &lt;span class=&quot;screen-reader-text&quot;&gt;%s&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;dashicons dashicons-external&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;',
				/* translators: Documentation explaining debugging in WordPress. */
				esc_url( __( 'https://wordpress.org/support/article/debugging-in-wordpress/' ) ),
				__( 'Learn more about debugging in WordPress.' ),
				/* translators: Accessibility text. */
				__( '(opens in a new tab)' )
			),
			'test'        =&gt; 'is_in_debug_mode',
		);

		if ( defined( 'WP_DEBUG' ) &amp;&amp; WP_DEBUG ) {
			if ( defined( 'WP_DEBUG_LOG' ) &amp;&amp; WP_DEBUG_LOG ) {
				$result['label'] = __( 'Your site is set to log errors to a potentially public file.' );

				$result['status'] = ( 0 === strpos( ini_get( 'error_log' ), ABSPATH ) ) ? 'critical' : 'recommended';

				$result['description'] .= sprintf(
					'&lt;p&gt;%s&lt;/p&gt;',
					sprintf(
						/* translators: %s: WP_DEBUG_LOG */
						__( 'The value, %s, has been added to this website&amp;#8217;s configuration file. This means any errors on the site will be written to a file which is potentially available to all users.' ),
						'&lt;code&gt;WP_DEBUG_LOG&lt;/code&gt;'
					)
				);
			}

			if ( defined( 'WP_DEBUG_DISPLAY' ) &amp;&amp; WP_DEBUG_DISPLAY ) {
				$result['label'] = __( 'Your site is set to display errors to site visitors' );

				$result['status'] = 'critical';

				// On development environments, set the status to recommended.
				if ( $this-&gt;is_development_environment() ) {
					$result['status'] = 'recommended';
				}

				$result['description'] .= sprintf(
					'&lt;p&gt;%s&lt;/p&gt;',
					sprintf(
						/* translators: 1: WP_DEBUG_DISPLAY, 2: WP_DEBUG */
						__( 'The value, %1$s, has either been enabled by %2$s or added to your configuration file. This will make errors display on the front end of your site.' ),
						'&lt;code&gt;WP_DEBUG_DISPLAY&lt;/code&gt;',
						'&lt;code&gt;WP_DEBUG&lt;/code&gt;'
					)
				);
			}
		}

		return $result;
	}

	/**
	 * Test if your site is serving content over HTTPS.
	 *
	 * Many sites have varying degrees of HTTPS support, the most common of which is sites that have it
	 * enabled, but only if you visit the right site address.
	 *
	 * @since 5.2.0
	 * @since 5.7.0 Updated to rely on {@see wp_is_using_https()} and {@see wp_is_https_supported()}.
	 *
	 * @return array The test results.
	 */
	public function get_test_https_status() {
		// Enforce fresh HTTPS detection results. This is normally invoked by using cron,
		// but for Site Health it should always rely on the latest results.
		wp_update_https_detection_errors();

		$default_update_url = wp_get_default_update_https_url();

		$result = array(
			'label'       =&gt; __( 'Your website is using an active HTTPS connection' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Security' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'An HTTPS connection is a more secure way of browsing the web. Many services now have HTTPS as a requirement. HTTPS allows you to take advantage of new features that can increase site speed, improve search rankings, and gain the trust of your visitors by helping to protect their online privacy.' )
			),
			'actions'     =&gt; sprintf(
				'&lt;p&gt;&lt;a href=&quot;%s&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;%s&lt;span class=&quot;screen-reader-text&quot;&gt; %s&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;dashicons dashicons-external&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;',
				esc_url( $default_update_url ),
				__( 'Learn more about why you should use HTTPS' ),
				/* translators: Accessibility text. */
				__( '(opens in a new tab)' )
			),
			'test'        =&gt; 'https_status',
		);

		if ( ! wp_is_using_https() ) {
			// If the website is not using HTTPS, provide more information
			// about whether it is supported and how it can be enabled.
			$result['status'] = 'recommended';
			$result['label']  = __( 'Your website does not use HTTPS' );

			if ( wp_is_site_url_using_https() ) {
				if ( is_ssl() ) {
					$result['description'] = sprintf(
						'&lt;p&gt;%s&lt;/p&gt;',
						sprintf(
							/* translators: %s: URL to Settings &gt; General &gt; Site Address. */
							__( 'You are accessing this website using HTTPS, but your &lt;a href=&quot;%s&quot;&gt;Site Address&lt;/a&gt; is not set up to use HTTPS by default.' ),
							esc_url( admin_url( 'options-general.php' ) . '#home' )
						)
					);
				} else {
					$result['description'] = sprintf(
						'&lt;p&gt;%s&lt;/p&gt;',
						sprintf(
							/* translators: %s: URL to Settings &gt; General &gt; Site Address. */
							__( 'Your &lt;a href=&quot;%s&quot;&gt;Site Address&lt;/a&gt; is not set up to use HTTPS.' ),
							esc_url( admin_url( 'options-general.php' ) . '#home' )
						)
					);
				}
			} else {
				if ( is_ssl() ) {
					$result['description'] = sprintf(
						'&lt;p&gt;%s&lt;/p&gt;',
						sprintf(
							/* translators: 1: URL to Settings &gt; General &gt; WordPress Address, 2: URL to Settings &gt; General &gt; Site Address. */
							__( 'You are accessing this website using HTTPS, but your &lt;a href=&quot;%1$s&quot;&gt;WordPress Address&lt;/a&gt; and &lt;a href=&quot;%2$s&quot;&gt;Site Address&lt;/a&gt; are not set up to use HTTPS by default.' ),
							esc_url( admin_url( 'options-general.php' ) . '#siteurl' ),
							esc_url( admin_url( 'options-general.php' ) . '#home' )
						)
					);
				} else {
					$result['description'] = sprintf(
						'&lt;p&gt;%s&lt;/p&gt;',
						sprintf(
							/* translators: 1: URL to Settings &gt; General &gt; WordPress Address, 2: URL to Settings &gt; General &gt; Site Address. */
							__( 'Your &lt;a href=&quot;%1$s&quot;&gt;WordPress Address&lt;/a&gt; and &lt;a href=&quot;%2$s&quot;&gt;Site Address&lt;/a&gt; are not set up to use HTTPS.' ),
							esc_url( admin_url( 'options-general.php' ) . '#siteurl' ),
							esc_url( admin_url( 'options-general.php' ) . '#home' )
						)
					);
				}
			}

			if ( wp_is_https_supported() ) {
				$result['description'] .= sprintf(
					'&lt;p&gt;%s&lt;/p&gt;',
					__( 'HTTPS is already supported for your website.' )
				);

				if ( defined( 'WP_HOME' ) || defined( 'WP_SITEURL' ) ) {
					$result['description'] .= sprintf(
						'&lt;p&gt;%s&lt;/p&gt;',
						sprintf(
							/* translators: 1: wp-config.php, 2: WP_HOME, 3: WP_SITEURL */
							__( 'However, your WordPress Address is currently controlled by a PHP constant and therefore cannot be updated. You need to edit your %1$s and remove or update the definitions of %2$s and %3$s.' ),
							'&lt;code&gt;wp-config.php&lt;/code&gt;',
							'&lt;code&gt;WP_HOME&lt;/code&gt;',
							'&lt;code&gt;WP_SITEURL&lt;/code&gt;'
						)
					);
				} elseif ( current_user_can( 'update_https' ) ) {
					$default_direct_update_url = add_query_arg( 'action', 'update_https', wp_nonce_url( admin_url( 'site-health.php' ), 'wp_update_https' ) );
					$direct_update_url         = wp_get_direct_update_https_url();

					if ( ! empty( $direct_update_url ) ) {
						$result['actions'] = sprintf(
							'&lt;p class=&quot;button-container&quot;&gt;&lt;a class=&quot;button button-primary&quot; href=&quot;%1$s&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;%2$s&lt;span class=&quot;screen-reader-text&quot;&gt; %3$s&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;dashicons dashicons-external&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;',
							esc_url( $direct_update_url ),
							__( 'Update your site to use HTTPS' ),
							/* translators: Accessibility text. */
							__( '(opens in a new tab)' )
						);
					} else {
						$result['actions'] = sprintf(
							'&lt;p class=&quot;button-container&quot;&gt;&lt;a class=&quot;button button-primary&quot; href=&quot;%1$s&quot;&gt;%2$s&lt;/a&gt;&lt;/p&gt;',
							esc_url( $default_direct_update_url ),
							__( 'Update your site to use HTTPS' )
						);
					}
				}
			} else {
				// If host-specific &quot;Update HTTPS&quot; URL is provided, include a link.
				$update_url = wp_get_update_https_url();
				if ( $update_url !== $default_update_url ) {
					$result['description'] .= sprintf(
						'&lt;p&gt;&lt;a href=&quot;%s&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;%s&lt;span class=&quot;screen-reader-text&quot;&gt; %s&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;dashicons dashicons-external&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;',
						esc_url( $update_url ),
						__( 'Talk to your web host about supporting HTTPS for your website.' ),
						/* translators: Accessibility text. */
						__( '(opens in a new tab)' )
					);
				} else {
					$result['description'] .= sprintf(
						'&lt;p&gt;%s&lt;/p&gt;',
						__( 'Talk to your web host about supporting HTTPS for your website.' )
					);
				}
			}
		}

		return $result;
	}

	/**
	 * Check if the HTTP API can handle SSL/TLS requests.
	 *
	 * @since 5.2.0
	 *
	 * @return array The test results.
	 */
	public function get_test_ssl_support() {
		$result = array(
			'label'       =&gt; '',
			'status'      =&gt; '',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Security' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'Securely communicating between servers are needed for transactions such as fetching files, conducting sales on store sites, and much more.' )
			),
			'actions'     =&gt; '',
			'test'        =&gt; 'ssl_support',
		);

		$supports_https = wp_http_supports( array( 'ssl' ) );

		if ( $supports_https ) {
			$result['status'] = 'good';

			$result['label'] = __( 'Your site can communicate securely with other services' );
		} else {
			$result['status'] = 'critical';

			$result['label'] = __( 'Your site is unable to communicate securely with other services' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'Talk to your web host about OpenSSL support for PHP.' )
			);
		}

		return $result;
	}

	/**
	 * Test if scheduled events run as intended.
	 *
	 * If scheduled events are not running, this may indicate something with WP_Cron is not working
	 * as intended, or that there are orphaned events hanging around from older code.
	 *
	 * @since 5.2.0
	 *
	 * @return array The test results.
	 */
	public function get_test_scheduled_events() {
		$result = array(
			'label'       =&gt; __( 'Scheduled events are running' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Performance' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'Scheduled events are what periodically looks for updates to plugins, themes and WordPress itself. It is also what makes sure scheduled posts are published on time. It may also be used by various plugins to make sure that planned actions are executed.' )
			),
			'actions'     =&gt; '',
			'test'        =&gt; 'scheduled_events',
		);

		$this-&gt;wp_schedule_test_init();

		if ( is_wp_error( $this-&gt;has_missed_cron() ) ) {
			$result['status'] = 'critical';

			$result['label'] = __( 'It was not possible to check your scheduled events' );

			$result['description'] = sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: %s: The error message returned while from the cron scheduler. */
					__( 'While trying to test your site&amp;#8217;s scheduled events, the following error was returned: %s' ),
					$this-&gt;has_missed_cron()-&gt;get_error_message()
				)
			);
		} elseif ( $this-&gt;has_missed_cron() ) {
			$result['status'] = 'recommended';

			$result['label'] = __( 'A scheduled event has failed' );

			$result['description'] = sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: %s: The name of the failed cron event. */
					__( 'The scheduled event, %s, failed to run. Your site still works, but this may indicate that scheduling posts or automated updates may not work as intended.' ),
					$this-&gt;last_missed_cron
				)
			);
		} elseif ( $this-&gt;has_late_cron() ) {
			$result['status'] = 'recommended';

			$result['label'] = __( 'A scheduled event is late' );

			$result['description'] = sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: %s: The name of the late cron event. */
					__( 'The scheduled event, %s, is late to run. Your site still works, but this may indicate that scheduling posts or automated updates may not work as intended.' ),
					$this-&gt;last_late_cron
				)
			);
		}

		return $result;
	}

	/**
	 * Test if WordPress can run automated background updates.
	 *
	 * Background updates in WordPress are primarily used for minor releases and security updates.
	 * It's important to either have these working, or be aware that they are intentionally disabled
	 * for whatever reason.
	 *
	 * @since 5.2.0
	 *
	 * @return array The test results.
	 */
	public function get_test_background_updates() {
		$result = array(
			'label'       =&gt; __( 'Background updates are working' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Security' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'Background updates ensure that WordPress can auto-update if a security update is released for the version you are currently using.' )
			),
			'actions'     =&gt; '',
			'test'        =&gt; 'background_updates',
		);

		if ( ! class_exists( 'WP_Site_Health_Auto_Updates' ) ) {
			require_once ABSPATH . 'wp-admin/includes/class-wp-site-health-auto-updates.php';
		}

		// Run the auto-update tests in a separate class,
		// as there are many considerations to be made.
		$automatic_updates = new WP_Site_Health_Auto_Updates();
		$tests             = $automatic_updates-&gt;run_tests();

		$output = '&lt;ul&gt;';

		foreach ( $tests as $test ) {
			$severity_string = __( 'Passed' );

			if ( 'fail' === $test-&gt;severity ) {
				$result['label'] = __( 'Background updates are not working as expected' );

				$result['status'] = 'critical';

				$severity_string = __( 'Error' );
			}

			if ( 'warning' === $test-&gt;severity &amp;&amp; 'good' === $result['status'] ) {
				$result['label'] = __( 'Background updates may not be working properly' );

				$result['status'] = 'recommended';

				$severity_string = __( 'Warning' );
			}

			$output .= sprintf(
				'&lt;li&gt;&lt;span class=&quot;dashicons %s&quot;&gt;&lt;span class=&quot;screen-reader-text&quot;&gt;%s&lt;/span&gt;&lt;/span&gt; %s&lt;/li&gt;',
				esc_attr( $test-&gt;severity ),
				$severity_string,
				$test-&gt;description
			);
		}

		$output .= '&lt;/ul&gt;';

		if ( 'good' !== $result['status'] ) {
			$result['description'] .= $output;
		}

		return $result;
	}

	/**
	 * Test if plugin and theme auto-updates appear to be configured correctly.
	 *
	 * @since 5.5.0
	 *
	 * @return array The test results.
	 */
	public function get_test_plugin_theme_auto_updates() {
		$result = array(
			'label'       =&gt; __( 'Plugin and theme auto-updates appear to be configured correctly' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Security' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'Plugin and theme auto-updates ensure that the latest versions are always installed.' )
			),
			'actions'     =&gt; '',
			'test'        =&gt; 'plugin_theme_auto_updates',
		);

		$check_plugin_theme_updates = $this-&gt;detect_plugin_theme_auto_update_issues();

		$result['status'] = $check_plugin_theme_updates-&gt;status;

		if ( 'good' !== $result['status'] ) {
			$result['label'] = __( 'Your site may have problems auto-updating plugins and themes' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				$check_plugin_theme_updates-&gt;message
			);
		}

		return $result;
	}

	/**
	 * Test if loopbacks work as expected.
	 *
	 * A loopback is when WordPress queries itself, for example to start a new WP_Cron instance,
	 * or when editing a plugin or theme. This has shown itself to be a recurring issue,
	 * as code can very easily break this interaction.
	 *
	 * @since 5.2.0
	 *
	 * @return array The test results.
	 */
	public function get_test_loopback_requests() {
		$result = array(
			'label'       =&gt; __( 'Your site can perform loopback requests' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Performance' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'Loopback requests are used to run scheduled events, and are also used by the built-in editors for themes and plugins to verify code stability.' )
			),
			'actions'     =&gt; '',
			'test'        =&gt; 'loopback_requests',
		);

		$check_loopback = $this-&gt;can_perform_loopback();

		$result['status'] = $check_loopback-&gt;status;

		if ( 'good' !== $result['status'] ) {
			$result['label'] = __( 'Your site could not complete a loopback request' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				$check_loopback-&gt;message
			);
		}

		return $result;
	}

	/**
	 * Test if HTTP requests are blocked.
	 *
	 * It's possible to block all outgoing communication (with the possibility of allowing certain
	 * hosts) via the HTTP API. This may create problems for users as many features are running as
	 * services these days.
	 *
	 * @since 5.2.0
	 *
	 * @return array The test results.
	 */
	public function get_test_http_requests() {
		$result = array(
			'label'       =&gt; __( 'HTTP requests seem to be working as expected' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Performance' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'It is possible for site maintainers to block all, or some, communication to other sites and services. If set up incorrectly, this may prevent plugins and themes from working as intended.' )
			),
			'actions'     =&gt; '',
			'test'        =&gt; 'http_requests',
		);

		$blocked = false;
		$hosts   = array();

		if ( defined( 'WP_HTTP_BLOCK_EXTERNAL' ) &amp;&amp; WP_HTTP_BLOCK_EXTERNAL ) {
			$blocked = true;
		}

		if ( defined( 'WP_ACCESSIBLE_HOSTS' ) ) {
			$hosts = explode( ',', WP_ACCESSIBLE_HOSTS );
		}

		if ( $blocked &amp;&amp; 0 === count( $hosts ) ) {
			$result['status'] = 'critical';

			$result['label'] = __( 'HTTP requests are blocked' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: %s: Name of the constant used. */
					__( 'HTTP requests have been blocked by the %s constant, with no allowed hosts.' ),
					'&lt;code&gt;WP_HTTP_BLOCK_EXTERNAL&lt;/code&gt;'
				)
			);
		}

		if ( $blocked &amp;&amp; 0 &lt; count( $hosts ) ) {
			$result['status'] = 'recommended';

			$result['label'] = __( 'HTTP requests are partially blocked' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: 1: Name of the constant used. 2: List of allowed hostnames. */
					__( 'HTTP requests have been blocked by the %1$s constant, with some allowed hosts: %2$s.' ),
					'&lt;code&gt;WP_HTTP_BLOCK_EXTERNAL&lt;/code&gt;',
					implode( ',', $hosts )
				)
			);
		}

		return $result;
	}

	/**
	 * Test if the REST API is accessible.
	 *
	 * Various security measures may block the REST API from working, or it may have been disabled in general.
	 * This is required for the new block editor to work, so we explicitly test for this.
	 *
	 * @since 5.2.0
	 *
	 * @return array The test results.
	 */
	public function get_test_rest_availability() {
		$result = array(
			'label'       =&gt; __( 'The REST API is available' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Performance' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'The REST API is one way WordPress, and other applications, communicate with the server. One example is the block editor screen, which relies on this to display, and save, your posts and pages.' )
			),
			'actions'     =&gt; '',
			'test'        =&gt; 'rest_availability',
		);

		$cookies = wp_unslash( $_COOKIE );
		$timeout = 10;
		$headers = array(
			'Cache-Control' =&gt; 'no-cache',
			'X-WP-Nonce'    =&gt; wp_create_nonce( 'wp_rest' ),
		);
		/** This filter is documented in wp-includes/class-wp-http-streams.php */
		$sslverify = apply_filters( 'https_local_ssl_verify', false );

		// Include Basic auth in loopback requests.
		if ( isset( $_SERVER['PHP_AUTH_USER'] ) &amp;&amp; isset( $_SERVER['PHP_AUTH_PW'] ) ) {
			$headers['Authorization'] = 'Basic ' . base64_encode( wp_unslash( $_SERVER['PHP_AUTH_USER'] ) . ':' . wp_unslash( $_SERVER['PHP_AUTH_PW'] ) );
		}

		$url = rest_url( 'wp/v2/types/post' );

		// The context for this is editing with the new block editor.
		$url = add_query_arg(
			array(
				'context' =&gt; 'edit',
			),
			$url
		);

		$r = wp_remote_get( $url, compact( 'cookies', 'headers', 'timeout', 'sslverify' ) );

		if ( is_wp_error( $r ) ) {
			$result['status'] = 'critical';

			$result['label'] = __( 'The REST API encountered an error' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					'%s&lt;br&gt;%s',
					__( 'The REST API request failed due to an error.' ),
					sprintf(
						/* translators: 1: The WordPress error message. 2: The WordPress error code. */
						__( 'Error: %1$s (%2$s)' ),
						$r-&gt;get_error_message(),
						$r-&gt;get_error_code()
					)
				)
			);
		} elseif ( 200 !== wp_remote_retrieve_response_code( $r ) ) {
			$result['status'] = 'recommended';

			$result['label'] = __( 'The REST API encountered an unexpected result' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: 1: The HTTP error code. 2: The HTTP error message. */
					__( 'The REST API call gave the following unexpected result: (%1$d) %2$s.' ),
					wp_remote_retrieve_response_code( $r ),
					esc_html( wp_remote_retrieve_body( $r ) )
				)
			);
		} else {
			$json = json_decode( wp_remote_retrieve_body( $r ), true );

			if ( false !== $json &amp;&amp; ! isset( $json['capabilities'] ) ) {
				$result['status'] = 'recommended';

				$result['label'] = __( 'The REST API did not behave correctly' );

				$result['description'] .= sprintf(
					'&lt;p&gt;%s&lt;/p&gt;',
					sprintf(
						/* translators: %s: The name of the query parameter being tested. */
						__( 'The REST API did not process the %s query parameter correctly.' ),
						'&lt;code&gt;context&lt;/code&gt;'
					)
				);
			}
		}

		return $result;
	}

	/**
	 * Test if 'file_uploads' directive in PHP.ini is turned off.
	 *
	 * @since 5.5.0
	 *
	 * @return array The test results.
	 */
	public function get_test_file_uploads() {
		$result = array(
			'label'       =&gt; __( 'Files can be uploaded.' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Performance' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: 1: file_uploads, 2: php.ini */
					__( 'The %1$s directive in %2$s determines if uploading files is allowed on your site.' ),
					'&lt;code&gt;file_uploads&lt;/code&gt;',
					'&lt;code&gt;php.ini&lt;/code&gt;'
				)
			),
			'actions'     =&gt; '',
			'test'        =&gt; 'file_uploads',
		);

		if ( ! function_exists( 'ini_get' ) ) {
			$result['status']       = 'critical';
			$result['description'] .= sprintf(
				/* translators: %s: ini_get() */
				__( 'The %s function has been disabled, some media settings are unavailable because of this.' ),
				'&lt;code&gt;ini_get()&lt;/code&gt;'
			);
			return $result;
		}

		if ( empty( ini_get( 'file_uploads' ) ) ) {
			$result['status']       = 'critical';
			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: 1: file_uploads, 2: 0 */
					__( '%1$s is set to %2$s. You won\'t be able to upload files on your site.' ),
					'&lt;code&gt;file_uploads&lt;/code&gt;',
					'&lt;code&gt;0&lt;/code&gt;'
				)
			);
			return $result;
		}

		$post_max_size       = ini_get( 'post_max_size' );
		$upload_max_filesize = ini_get( 'upload_max_filesize' );

		if ( wp_convert_hr_to_bytes( $post_max_size ) &lt; wp_convert_hr_to_bytes( $upload_max_filesize ) ) {
			$result['label'] = sprintf(
				/* translators: 1: post_max_size, 2: upload_max_filesize */
				__( 'The &quot;%1$s&quot; value is smaller than &quot;%2$s&quot;.' ),
				'post_max_size',
				'upload_max_filesize'
			);
			$result['status'] = 'recommended';

			if ( 0 === wp_convert_hr_to_bytes( $post_max_size ) ) {
				$result['description'] = sprintf(
					'&lt;p&gt;%s&lt;/p&gt;',
					sprintf(
						/* translators: 1: post_max_size, 2: upload_max_filesize */
						__( 'The setting for %1$s is currently configured as 0, this could cause some problems when trying to upload files through plugin or theme features that rely on various upload methods. It is recommended to configure this setting to a fixed value, ideally matching the value of %2$s, as some upload methods read the value 0 as either unlimited, or disabled.' ),
						'&lt;code&gt;post_max_size&lt;/code&gt;',
						'&lt;code&gt;upload_max_filesize&lt;/code&gt;'
					)
				);
			} else {
				$result['description'] = sprintf(
					'&lt;p&gt;%s&lt;/p&gt;',
					sprintf(
						/* translators: 1: post_max_size, 2: upload_max_filesize */
						__( 'The setting for %1$s is smaller than %2$s, this could cause some problems when trying to upload files.' ),
						'&lt;code&gt;post_max_size&lt;/code&gt;',
						'&lt;code&gt;upload_max_filesize&lt;/code&gt;'
					)
				);
			}

			return $result;
		}

		return $result;
	}

	/**
	 * Tests if the Authorization header has the expected values.
	 *
	 * @since 5.6.0
	 *
	 * @return array
	 */
	public function get_test_authorization_header() {
		$result = array(
			'label'       =&gt; __( 'The Authorization header is working as expected.' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Security' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'The Authorization header comes from the third-party applications you approve. Without it, those apps cannot connect to your site.' )
			),
			'actions'     =&gt; '',
			'test'        =&gt; 'authorization_header',
		);

		if ( ! isset( $_SERVER['PHP_AUTH_USER'], $_SERVER['PHP_AUTH_PW'] ) ) {
			$result['label'] = __( 'The authorization header is missing.' );
		} elseif ( 'user' !== $_SERVER['PHP_AUTH_USER'] || 'pwd' !== $_SERVER['PHP_AUTH_PW'] ) {
			$result['label'] = __( 'The authorization header is invalid.' );
		} else {
			return $result;
		}

		$result['status'] = 'recommended';

		if ( ! function_exists( 'got_mod_rewrite' ) ) {
			require_once ABSPATH . 'wp-admin/includes/misc.php';
		}

		if ( got_mod_rewrite() ) {
			$result['actions'] .= sprintf(
				'&lt;p&gt;&lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;&lt;/p&gt;',
				esc_url( admin_url( 'options-permalink.php' ) ),
				__( 'Flush permalinks' )
			);
		} else {
			$result['actions'] .= sprintf(
				'&lt;p&gt;&lt;a href=&quot;%s&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;%s &lt;span class=&quot;screen-reader-text&quot;&gt;%s&lt;/span&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;dashicons dashicons-external&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;',
				__( 'https://developer.wordpress.org/rest-api/frequently-asked-questions/#why-is-authentication-not-working' ),
				__( 'Learn how to configure the Authorization header.' ),
				/* translators: Accessibility text. */
				__( '(opens in a new tab)' )
			);
		}

		return $result;
	}

	/**
	 * Return a set of tests that belong to the site status page.
	 *
	 * Each site status test is defined here, they may be `direct` tests, that run on page load, or `async` tests
	 * which will run later down the line via JavaScript calls to improve page performance and hopefully also user
	 * experiences.
	 *
	 * @since 5.2.0
	 * @since 5.6.0 Added support for `has_rest` and `permissions`.
	 *
	 * @return array The list of tests to run.
	 */
	public static function get_tests() {
		$tests = array(
			'direct' =&gt; array(
				'wordpress_version'         =&gt; array(
					'label' =&gt; __( 'WordPress Version' ),
					'test'  =&gt; 'wordpress_version',
				),
				'plugin_version'            =&gt; array(
					'label' =&gt; __( 'Plugin Versions' ),
					'test'  =&gt; 'plugin_version',
				),
				'theme_version'             =&gt; array(
					'label' =&gt; __( 'Theme Versions' ),
					'test'  =&gt; 'theme_version',
				),
				'php_version'               =&gt; array(
					'label' =&gt; __( 'PHP Version' ),
					'test'  =&gt; 'php_version',
				),
				'php_extensions'            =&gt; array(
					'label' =&gt; __( 'PHP Extensions' ),
					'test'  =&gt; 'php_extensions',
				),
				'php_default_timezone'      =&gt; array(
					'label' =&gt; __( 'PHP Default Timezone' ),
					'test'  =&gt; 'php_default_timezone',
				),
				'php_sessions'              =&gt; array(
					'label' =&gt; __( 'PHP Sessions' ),
					'test'  =&gt; 'php_sessions',
				),
				'sql_server'                =&gt; array(
					'label' =&gt; __( 'Database Server version' ),
					'test'  =&gt; 'sql_server',
				),
				'utf8mb4_support'           =&gt; array(
					'label' =&gt; __( 'MySQL utf8mb4 support' ),
					'test'  =&gt; 'utf8mb4_support',
				),
				'ssl_support'               =&gt; array(
					'label' =&gt; __( 'Secure communication' ),
					'test'  =&gt; 'ssl_support',
				),
				'scheduled_events'          =&gt; array(
					'label' =&gt; __( 'Scheduled events' ),
					'test'  =&gt; 'scheduled_events',
				),
				'http_requests'             =&gt; array(
					'label' =&gt; __( 'HTTP Requests' ),
					'test'  =&gt; 'http_requests',
				),
				'rest_availability'         =&gt; array(
					'label'     =&gt; __( 'REST API availability' ),
					'test'      =&gt; 'rest_availability',
					'skip_cron' =&gt; true,
				),
				'debug_enabled'             =&gt; array(
					'label' =&gt; __( 'Debugging enabled' ),
					'test'  =&gt; 'is_in_debug_mode',
				),
				'file_uploads'              =&gt; array(
					'label' =&gt; __( 'File uploads' ),
					'test'  =&gt; 'file_uploads',
				),
				'plugin_theme_auto_updates' =&gt; array(
					'label' =&gt; __( 'Plugin and theme auto-updates' ),
					'test'  =&gt; 'plugin_theme_auto_updates',
				),
			),
			'async'  =&gt; array(
				'dotorg_communication' =&gt; array(
					'label'             =&gt; __( 'Communication with WordPress.org' ),
					'test'              =&gt; rest_url( 'wp-site-health/v1/tests/dotorg-communication' ),
					'has_rest'          =&gt; true,
					'async_direct_test' =&gt; array( WP_Site_Health::get_instance(), 'get_test_dotorg_communication' ),
				),
				'background_updates'   =&gt; array(
					'label'             =&gt; __( 'Background updates' ),
					'test'              =&gt; rest_url( 'wp-site-health/v1/tests/background-updates' ),
					'has_rest'          =&gt; true,
					'async_direct_test' =&gt; array( WP_Site_Health::get_instance(), 'get_test_background_updates' ),
				),
				'loopback_requests'    =&gt; array(
					'label'             =&gt; __( 'Loopback request' ),
					'test'              =&gt; rest_url( 'wp-site-health/v1/tests/loopback-requests' ),
					'has_rest'          =&gt; true,
					'async_direct_test' =&gt; array( WP_Site_Health::get_instance(), 'get_test_loopback_requests' ),
				),
				'https_status'         =&gt; array(
					'label'             =&gt; __( 'HTTPS status' ),
					'test'              =&gt; rest_url( 'wp-site-health/v1/tests/https-status' ),
					'has_rest'          =&gt; true,
					'async_direct_test' =&gt; array( WP_Site_Health::get_instance(), 'get_test_https_status' ),
				),
			),
		);

		// Conditionally include Authorization header test if the site isn't protected by Basic Auth.
		if ( ! wp_is_site_protected_by_basic_auth() ) {
			$tests['async']['authorization_header'] = array(
				'label'     =&gt; __( 'Authorization header' ),
				'test'      =&gt; rest_url( 'wp-site-health/v1/tests/authorization-header' ),
				'has_rest'  =&gt; true,
				'headers'   =&gt; array( 'Authorization' =&gt; 'Basic ' . base64_encode( 'user:pwd' ) ),
				'skip_cron' =&gt; true,
			);
		}

		/**
		 * Add or modify which site status tests are run on a site.
		 *
		 * The site health is determined by a set of tests based on best practices from
		 * both the WordPress Hosting Team, but also web standards in general.
		 *
		 * Some sites may not have the same requirements, for example the automatic update
		 * checks may be handled by a host, and are therefore disabled in core.
		 * Or maybe you want to introduce a new test, is caching enabled/disabled/stale for example.
		 *
		 * Tests may be added either as direct, or asynchronous ones. Any test that may require some time
		 * to complete should run asynchronously, to avoid extended loading periods within wp-admin.
		 *
		 * @since 5.2.0
		 * @since 5.6.0 Added the `async_direct_test` array key.
		 *              Added the `skip_cron` array key.
		 *
		 * @param array $test_type {
		 *     An associative array, where the `$test_type` is either `direct` or
		 *     `async`, to declare if the test should run via Ajax calls after page load.
		 *
		 *     @type array $identifier {
		 *         `$identifier` should be a unique identifier for the test that should run.
		 *         Plugins and themes are encouraged to prefix test identifiers with their slug
		 *         to avoid any collisions between tests.
		 *
		 *         @type string   $label             A friendly label for your test to identify it by.
		 *         @type mixed    $test              A callable to perform a direct test, or a string AJAX action
		 *                                           to be called to perform an async test.
		 *         @type boolean  $has_rest          Optional. Denote if `$test` has a REST API endpoint.
		 *         @type boolean  $skip_cron         Whether to skip this test when running as cron.
		 *         @type callable $async_direct_test A manner of directly calling the test marked as asynchronous,
		 *                                           as the scheduled event can not authenticate, and endpoints
		 *                                           may require authentication.
		 *     }
		 * }
		 */
		$tests = apply_filters( 'site_status_tests', $tests );

		// Ensure that the filtered tests contain the required array keys.
		$tests = array_merge(
			array(
				'direct' =&gt; array(),
				'async'  =&gt; array(),
			),
			$tests
		);

		return $tests;
	}

	/**
	 * Add a class to the body HTML tag.
	 *
	 * Filters the body class string for admin pages and adds our own class for easier styling.
	 *
	 * @since 5.2.0
	 *
	 * @param string $body_class The body class string.
	 * @return string The modified body class string.
	 */
	public function admin_body_class( $body_class ) {
		$screen = get_current_screen();
		if ( 'site-health' !== $screen-&gt;id ) {
			return $body_class;
		}

		$body_class .= ' site-health';

		return $body_class;
	}

	/**
	 * Initiate the WP_Cron schedule test cases.
	 *
	 * @since 5.2.0
	 */
	private function wp_schedule_test_init() {
		$this-&gt;schedules = wp_get_schedules();
		$this-&gt;get_cron_tasks();
	}

	/**
	 * Populate our list of cron events and store them to a class-wide variable.
	 *
	 * @since 5.2.0
	 */
	private function get_cron_tasks() {
		$cron_tasks = _get_cron_array();

		if ( empty( $cron_tasks ) ) {
			$this-&gt;crons = new WP_Error( 'no_tasks', __( 'No scheduled events exist on this site.' ) );
			return;
		}

		$this-&gt;crons = array();

		foreach ( $cron_tasks as $time =&gt; $cron ) {
			foreach ( $cron as $hook =&gt; $dings ) {
				foreach ( $dings as $sig =&gt; $data ) {

					$this-&gt;crons[ &quot;$hook-$sig-$time&quot; ] = (object) array(
						'hook'     =&gt; $hook,
						'time'     =&gt; $time,
						'sig'      =&gt; $sig,
						'args'     =&gt; $data['args'],
						'schedule' =&gt; $data['schedule'],
						'interval' =&gt; isset( $data['interval'] ) ? $data['interval'] : null,
					);

				}
			}
		}
	}

	/**
	 * Check if any scheduled tasks have been missed.
	 *
	 * Returns a boolean value of `true` if a scheduled task has been missed and ends processing.
	 *
	 * If the list of crons is an instance of WP_Error, returns the instance instead of a boolean value.
	 *
	 * @since 5.2.0
	 *
	 * @return bool|WP_Error True if a cron was missed, false if not. WP_Error if the cron is set to that.
	 */
	public function has_missed_cron() {
		if ( is_wp_error( $this-&gt;crons ) ) {
			return $this-&gt;crons;
		}

		foreach ( $this-&gt;crons as $id =&gt; $cron ) {
			if ( ( $cron-&gt;time - time() ) &lt; $this-&gt;timeout_missed_cron ) {
				$this-&gt;last_missed_cron = $cron-&gt;hook;
				return true;
			}
		}

		return false;
	}

	/**
	 * Check if any scheduled tasks are late.
	 *
	 * Returns a boolean value of `true` if a scheduled task is late and ends processing.
	 *
	 * If the list of crons is an instance of WP_Error, returns the instance instead of a boolean value.
	 *
	 * @since 5.3.0
	 *
	 * @return bool|WP_Error True if a cron is late, false if not. WP_Error if the cron is set to that.
	 */
	public function has_late_cron() {
		if ( is_wp_error( $this-&gt;crons ) ) {
			return $this-&gt;crons;
		}

		foreach ( $this-&gt;crons as $id =&gt; $cron ) {
			$cron_offset = $cron-&gt;time - time();
			if (
				$cron_offset &gt;= $this-&gt;timeout_missed_cron &amp;&amp;
				$cron_offset &lt; $this-&gt;timeout_late_cron
			) {
				$this-&gt;last_late_cron = $cron-&gt;hook;
				return true;
			}
		}

		return false;
	}

	/**
	 * Check for potential issues with plugin and theme auto-updates.
	 *
	 * Though there is no way to 100% determine if plugin and theme auto-updates are configured
	 * correctly, a few educated guesses could be made to flag any conditions that would
	 * potentially cause unexpected behaviors.
	 *
	 * @since 5.5.0
	 *
	 * @return object The test results.
	 */
	function detect_plugin_theme_auto_update_issues() {
		$mock_plugin = (object) array(
			'id'            =&gt; 'w.org/plugins/a-fake-plugin',
			'slug'          =&gt; 'a-fake-plugin',
			'plugin'        =&gt; 'a-fake-plugin/a-fake-plugin.php',
			'new_version'   =&gt; '9.9',
			'url'           =&gt; 'https://wordpress.org/plugins/a-fake-plugin/',
			'package'       =&gt; 'https://downloads.wordpress.org/plugin/a-fake-plugin.9.9.zip',
			'icons'         =&gt; array(
				'2x' =&gt; 'https://ps.w.org/a-fake-plugin/assets/icon-256x256.png',
				'1x' =&gt; 'https://ps.w.org/a-fake-plugin/assets/icon-128x128.png',
			),
			'banners'       =&gt; array(
				'2x' =&gt; 'https://ps.w.org/a-fake-plugin/assets/banner-1544x500.png',
				'1x' =&gt; 'https://ps.w.org/a-fake-plugin/assets/banner-772x250.png',
			),
			'banners_rtl'   =&gt; array(),
			'tested'        =&gt; '5.5.0',
			'requires_php'  =&gt; '5.6.20',
			'compatibility' =&gt; new stdClass(),
		);

		$mock_theme = (object) array(
			'theme'        =&gt; 'a-fake-theme',
			'new_version'  =&gt; '9.9',
			'url'          =&gt; 'https://wordpress.org/themes/a-fake-theme/',
			'package'      =&gt; 'https://downloads.wordpress.org/theme/a-fake-theme.9.9.zip',
			'requires'     =&gt; '5.0.0',
			'requires_php' =&gt; '5.6.20',
		);

		$test_plugins_enabled = wp_is_auto_update_forced_for_item( 'plugin', true, $mock_plugin );
		$test_themes_enabled  = wp_is_auto_update_forced_for_item( 'theme', true, $mock_theme );

		$ui_enabled_for_plugins = wp_is_auto_update_enabled_for_type( 'plugin' );
		$ui_enabled_for_themes  = wp_is_auto_update_enabled_for_type( 'theme' );
		$plugin_filter_present  = has_filter( 'auto_update_plugin' );
		$theme_filter_present   = has_filter( 'auto_update_theme' );

		if ( ( ! $test_plugins_enabled &amp;&amp; $ui_enabled_for_plugins )
			|| ( ! $test_themes_enabled &amp;&amp; $ui_enabled_for_themes )
		) {
			return (object) array(
				'status'  =&gt; 'critical',
				'message' =&gt; __( 'Auto-updates for plugins and/or themes appear to be disabled, but settings are still set to be displayed. This could cause auto-updates to not work as expected.' ),
			);
		}

		if ( ( ! $test_plugins_enabled &amp;&amp; $plugin_filter_present )
			&amp;&amp; ( ! $test_themes_enabled &amp;&amp; $theme_filter_present )
		) {
			return (object) array(
				'status'  =&gt; 'recommended',
				'message' =&gt; __( 'Auto-updates for plugins and themes appear to be disabled. This will prevent your site from receiving new versions automatically when available.' ),
			);
		} elseif ( ! $test_plugins_enabled &amp;&amp; $plugin_filter_present ) {
			return (object) array(
				'status'  =&gt; 'recommended',
				'message' =&gt; __( 'Auto-updates for plugins appear to be disabled. This will prevent your site from receiving new versions automatically when available.' ),
			);
		} elseif ( ! $test_themes_enabled &amp;&amp; $theme_filter_present ) {
			return (object) array(
				'status'  =&gt; 'recommended',
				'message' =&gt; __( 'Auto-updates for themes appear to be disabled. This will prevent your site from receiving new versions automatically when available.' ),
			);
		}

		return (object) array(
			'status'  =&gt; 'good',
			'message' =&gt; __( 'There appear to be no issues with plugin and theme auto-updates.' ),
		);
	}

	/**
	 * Run a loopback test on our site.
	 *
	 * Loopbacks are what WordPress uses to communicate with itself to start up WP_Cron, scheduled posts,
	 * make sure plugin or theme edits don't cause site failures and similar.
	 *
	 * @since 5.2.0
	 *
	 * @return object The test results.
	 */
	function can_perform_loopback() {
		$body    = array( 'site-health' =&gt; 'loopback-test' );
		$cookies = wp_unslash( $_COOKIE );
		$timeout = 10;
		$headers = array(
			'Cache-Control' =&gt; 'no-cache',
		);
		/** This filter is documented in wp-includes/class-wp-http-streams.php */
		$sslverify = apply_filters( 'https_local_ssl_verify', false );

		// Include Basic auth in loopback requests.
		if ( isset( $_SERVER['PHP_AUTH_USER'] ) &amp;&amp; isset( $_SERVER['PHP_AUTH_PW'] ) ) {
			$headers['Authorization'] = 'Basic ' . base64_encode( wp_unslash( $_SERVER['PHP_AUTH_USER'] ) . ':' . wp_unslash( $_SERVER['PHP_AUTH_PW'] ) );
		}

		$url = site_url( 'wp-cron.php' );

		/*
		 * A post request is used for the wp-cron.php loopback test to cause the file
		 * to finish early without triggering cron jobs. This has two benefits:
		 * - cron jobs are not triggered a second time on the site health page,
		 * - the loopback request finishes sooner providing a quicker result.
		 *
		 * Using a POST request causes the loopback to differ slightly to the standard
		 * GET request WordPress uses for wp-cron.php loopback requests but is close
		 * enough. See https://core.trac.wordpress.org/ticket/52547
		 */
		$r = wp_remote_post( $url, compact( 'body', 'cookies', 'headers', 'timeout', 'sslverify' ) );

		if ( is_wp_error( $r ) ) {
			return (object) array(
				'status'  =&gt; 'critical',
				'message' =&gt; sprintf(
					'%s&lt;br&gt;%s',
					__( 'The loopback request to your site failed, this means features relying on them are not currently working as expected.' ),
					sprintf(
						/* translators: 1: The WordPress error message. 2: The WordPress error code. */
						__( 'Error: %1$s (%2$s)' ),
						$r-&gt;get_error_message(),
						$r-&gt;get_error_code()
					)
				),
			);
		}

		if ( 200 !== wp_remote_retrieve_response_code( $r ) ) {
			return (object) array(
				'status'  =&gt; 'recommended',
				'message' =&gt; sprintf(
					/* translators: %d: The HTTP response code returned. */
					__( 'The loopback request returned an unexpected http status code, %d, it was not possible to determine if this will prevent features from working as expected.' ),
					wp_remote_retrieve_response_code( $r )
				),
			);
		}

		return (object) array(
			'status'  =&gt; 'good',
			'message' =&gt; __( 'The loopback request to your site completed successfully.' ),
		);
	}

	/**
	 * Create a weekly cron event, if one does not already exist.
	 *
	 * @since 5.4.0
	 */
	public function maybe_create_scheduled_event() {
		if ( ! wp_next_scheduled( 'wp_site_health_scheduled_check' ) &amp;&amp; ! wp_installing() ) {
			wp_schedule_event( time() + DAY_IN_SECONDS, 'weekly', 'wp_site_health_scheduled_check' );
		}
	}

	/**
	 * Run our scheduled event to check and update the latest site health status for the website.
	 *
	 * @since 5.4.0
	 */
	public function wp_cron_scheduled_check() {
		// Bootstrap wp-admin, as WP_Cron doesn't do this for us.
		require_once trailingslashit( ABSPATH ) . 'wp-admin/includes/admin.php';

		$tests = WP_Site_Health::get_tests();

		$results = array();

		$site_status = array(
			'good'        =&gt; 0,
			'recommended' =&gt; 0,
			'critical'    =&gt; 0,
		);

		// Don't run https test on development environments.
		if ( $this-&gt;is_development_environment() ) {
			unset( $tests['async']['https_status'] );
		}

		foreach ( $tests['direct'] as $test ) {
			if ( ! empty( $test['skip_cron'] ) ) {
				continue;
			}

			if ( is_string( $test['test'] ) ) {
				$test_function = sprintf(
					'get_test_%s',
					$test['test']
				);

				if ( method_exists( $this, $test_function ) &amp;&amp; is_callable( array( $this, $test_function ) ) ) {
					$results[] = $this-&gt;perform_test( array( $this, $test_function ) );
					continue;
				}
			}

			if ( is_callable( $test['test'] ) ) {
				$results[] = $this-&gt;perform_test( $test['test'] );
			}
		}

		foreach ( $tests['async'] as $test ) {
			if ( ! empty( $test['skip_cron'] ) ) {
				continue;
			}

			// Local endpoints may require authentication, so asynchronous tests can pass a direct test runner as well.
			if ( ! empty( $test['async_direct_test'] ) &amp;&amp; is_callable( $test['async_direct_test'] ) ) {
				// This test is callable, do so and continue to the next asynchronous check.
				$results[] = $this-&gt;perform_test( $test['async_direct_test'] );
				continue;
			}

			if ( is_string( $test['test'] ) ) {
				// Check if this test has a REST API endpoint.
				if ( isset( $test['has_rest'] ) &amp;&amp; $test['has_rest'] ) {
					$result_fetch = wp_remote_get(
						$test['test'],
						array(
							'body' =&gt; array(
								'_wpnonce' =&gt; wp_create_nonce( 'wp_rest' ),
							),
						)
					);
				} else {
					$result_fetch = wp_remote_post(
						admin_url( 'admin-ajax.php' ),
						array(
							'body' =&gt; array(
								'action'   =&gt; $test['test'],
								'_wpnonce' =&gt; wp_create_nonce( 'health-check-site-status' ),
							),
						)
					);
				}

				if ( ! is_wp_error( $result_fetch ) &amp;&amp; 200 === wp_remote_retrieve_response_code( $result_fetch ) ) {
					$result = json_decode( wp_remote_retrieve_body( $result_fetch ), true );
				} else {
					$result = false;
				}

				if ( is_array( $result ) ) {
					$results[] = $result;
				} else {
					$results[] = array(
						'status' =&gt; 'recommended',
						'label'  =&gt; __( 'A test is unavailable' ),
					);
				}
			}
		}

		foreach ( $results as $result ) {
			if ( 'critical' === $result['status'] ) {
				$site_status['critical']++;
			} elseif ( 'recommended' === $result['status'] ) {
				$site_status['recommended']++;
			} else {
				$site_status['good']++;
			}
		}

		set_transient( 'health-check-site-status-result', wp_json_encode( $site_status ) );
	}

	/**
	 * Checks if the current environment type is set to 'development' or 'local'.
	 *
	 * @since 5.6.0
	 *
	 * @return bool True if it is a development environment, false if not.
	 */
	public function is_development_environment() {
		return in_array( wp_get_environment_type(), array( 'development', 'local' ), true );
	}

}
</pre>
			</div>
			<p class="source-code-links">
				<span>
					<a href="#" class="show-complete-source">Expand full source code</a>
					<a href="#" class="less-complete-source">Collapse full source code</a>
				</span>
				<span><a href="https://core.trac.wordpress.org/browser/tags/5.8/src/wp-admin/includes/class-wp-site-health.php#L10">View on Trac</a></span>
			</p>
			</section>
		<hr />
		<section class="class-methods">
			<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h2 class="toc-heading" id="methods" tabindex="-1">Methods <a href="#methods" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Methods</span></a></h2>
			<ul>
									<li><a href="__construct/index.html">
							__construct</a>
						&mdash; WP_Site_Health constructor.											</li>
									<li><a href="admin_body_class/index.html">
							admin_body_class</a>
						&mdash; Add a class to the body HTML tag.											</li>
									<li><a href="can_perform_loopback/index.html">
							can_perform_loopback</a>
						&mdash; Run a loopback test on our site.											</li>
									<li><a href="check_wp_version_check_exists/index.html">
							check_wp_version_check_exists</a>
						&mdash; Test if `wp_version_check` is blocked.											</li>
									<li><a href="detect_plugin_theme_auto_update_issues/index.html">
							detect_plugin_theme_auto_update_issues</a>
						&mdash; Check for potential issues with plugin and theme auto-updates.											</li>
									<li><a href="enqueue_scripts/index.html">
							enqueue_scripts</a>
						&mdash; Enqueues the site health scripts.											</li>
									<li><a href="get_cron_tasks/index.html">
							get_cron_tasks</a>
						&mdash; Populate our list of cron events and store them to a class-wide variable.											</li>
									<li><a href="get_instance/index.html">
							get_instance</a>
						&mdash; Return an instance of the WP_Site_Health class, or create one if none exist yet.											</li>
									<li><a href="get_test_authorization_header/index.html">
							get_test_authorization_header</a>
						&mdash; Tests if the Authorization header has the expected values.											</li>
									<li><a href="get_test_background_updates/index.html">
							get_test_background_updates</a>
						&mdash; Test if WordPress can run automated background updates.											</li>
									<li><a href="get_test_dotorg_communication/index.html">
							get_test_dotorg_communication</a>
						&mdash; Test if the site can communicate with WordPress.org.											</li>
									<li><a href="get_test_file_uploads/index.html">
							get_test_file_uploads</a>
						&mdash; Test if 'file_uploads' directive in PHP.ini is turned off.											</li>
									<li><a href="get_test_http_requests/index.html">
							get_test_http_requests</a>
						&mdash; Test if HTTP requests are blocked.											</li>
									<li><a href="get_test_https_status/index.html">
							get_test_https_status</a>
						&mdash; Test if your site is serving content over HTTPS.											</li>
									<li><a href="get_test_is_in_debug_mode/index.html">
							get_test_is_in_debug_mode</a>
						&mdash; Test if debug information is enabled.											</li>
									<li><a href="get_test_loopback_requests/index.html">
							get_test_loopback_requests</a>
						&mdash; Test if loopbacks work as expected.											</li>
									<li><a href="get_test_php_default_timezone/index.html">
							get_test_php_default_timezone</a>
						&mdash; Test if the PHP default timezone is set to UTC.											</li>
									<li><a href="get_test_php_extensions/index.html">
							get_test_php_extensions</a>
						&mdash; Test if required PHP modules are installed on the host.											</li>
									<li><a href="get_test_php_sessions/index.html">
							get_test_php_sessions</a>
						&mdash; Test if there's an active PHP session that can affect loopback requests.											</li>
									<li><a href="get_test_php_version/index.html">
							get_test_php_version</a>
						&mdash; Test if the supplied PHP version is supported.											</li>
									<li><a href="get_test_plugin_theme_auto_updates/index.html">
							get_test_plugin_theme_auto_updates</a>
						&mdash; Test if plugin and theme auto-updates appear to be configured correctly.											</li>
									<li><a href="get_test_plugin_version/index.html">
							get_test_plugin_version</a>
						&mdash; Test if plugins are outdated, or unnecessary.											</li>
									<li><a href="get_test_rest_availability/index.html">
							get_test_rest_availability</a>
						&mdash; Test if the REST API is accessible.											</li>
									<li><a href="get_test_scheduled_events/index.html">
							get_test_scheduled_events</a>
						&mdash; Test if scheduled events run as intended.											</li>
									<li><a href="get_test_sql_server/index.html">
							get_test_sql_server</a>
						&mdash; Test if the SQL server is up to date.											</li>
									<li><a href="get_test_ssl_support/index.html">
							get_test_ssl_support</a>
						&mdash; Check if the HTTP API can handle SSL/TLS requests.											</li>
									<li><a href="get_test_theme_version/index.html">
							get_test_theme_version</a>
						&mdash; Test if themes are outdated, or unnecessary.											</li>
									<li><a href="get_test_utf8mb4_support/index.html">
							get_test_utf8mb4_support</a>
						&mdash; Test if the database server is capable of using utf8mb4.											</li>
									<li><a href="get_test_wordpress_version/index.html">
							get_test_wordpress_version</a>
						&mdash; Tests for WordPress version and outputs it.											</li>
									<li><a href="get_tests/index.html">
							get_tests</a>
						&mdash; Return a set of tests that belong to the site status page.											</li>
									<li><a href="has_late_cron/index.html">
							has_late_cron</a>
						&mdash; Check if any scheduled tasks are late.											</li>
									<li><a href="has_missed_cron/index.html">
							has_missed_cron</a>
						&mdash; Check if any scheduled tasks have been missed.											</li>
									<li><a href="is_development_environment/index.html">
							is_development_environment</a>
						&mdash; Checks if the current environment type is set to 'development' or 'local'.											</li>
									<li><a href="maybe_create_scheduled_event/index.html">
							maybe_create_scheduled_event</a>
						&mdash; Create a weekly cron event, if one does not already exist.											</li>
									<li><a href="perform_test/index.html">
							perform_test</a>
						&mdash; Run a Site Health test directly.											</li>
									<li><a href="prepare_sql_data/index.html">
							prepare_sql_data</a>
						&mdash; Run the SQL version checks.											</li>
									<li><a href="show_site_health_tab/index.html">
							show_site_health_tab</a>
						&mdash; Output the content of a tab in the Site Health screen.											</li>
									<li><a href="test_php_extension_availability/index.html">
							test_php_extension_availability</a>
						&mdash; Check if the passed extension or function are available.											</li>
									<li><a href="wp_cron_scheduled_check/index.html">
							wp_cron_scheduled_check</a>
						&mdash; Run our scheduled event to check and update the latest site health status for the website.											</li>
									<li><a href="wp_schedule_test_init/index.html">
							wp_schedule_test_init</a>
						&mdash; Initiate the WP_Cron schedule test cases.											</li>
							</ul>
		</section>
		<hr />
	<section class="changelog">
		<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h2 class="toc-heading" id="changelog" tabindex="-1">Changelog <a href="#changelog" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Changelog</span></a></h2>

		<table>
			<caption class="screen-reader-text">Changelog</caption>
			<thead>
				<tr>
					<th class="changelog-version">Version</th>
					<th class="changelog-desc">Description</th>
				</tr>
			</thead>

			<tbody>
									
					<tr>
						<td><a href="../../since/5.2.0/index.html" alt="WordPress 5.2.0">5.2.0</a></td>
						<td>Introduced.</td>
					</tr>
							</tbody>
		</table>
	</section>

	<hr />
	<section class="user-notes">
		<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h2 class="toc-heading" id="user-contributed-notes" tabindex="-1">User Contributed Notes <a href="#user-contributed-notes" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">User Contributed Notes</span></a></h2>
		
<div id="comments" class="comments-area">

	
	
			<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small></small></h3><p>You must <a href="https://login.wordpress.org/?redirect_to=https%3A%2F%2Fdeveloper.wordpress.org%2Freference%2Fclasses%2Fwp_site_health%2F%23respond">log in</a> before being able to contribute a note or feedback.</p>	</div><!-- #respond -->
		
	
</div><!-- #comments -->
	</section>
</div>

</article>

			
		
		</main><!-- #main -->
	</div><!-- #primary -->
	</div><!-- #content -->

</div><!-- #page -->


<div id="wporg-footer">
	<div class="wrapper">
		<ul>
			<li><a href="http://wordpress.org/about/" title="An introduction to the WordPress project">About</a></li>
			<li><a href="http://wordpress.org/news/" title="News and Updates">Blog</a></li>
			<li><a href="http://wordpress.org/hosting/" title="Recommended web hosting providers">Hosting</a></li>
			<li><a href="https://wordpressfoundation.org/donate/" title="Donate to the WordPress Foundation">Donate</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.org/support/" title="Forums, documentation, and other resources">Support</a></li>
			<li><a href="../../../index.html" title="Resources for WordPress developers">Developers</a></li>
			<li><a href="http://make.wordpress.org/" title="Give back to WordPress through code, support, translation and more">Get Involved</a></li>
			<li><a href="http://learn.wordpress.org/" title="Workshops and training materials">Learn</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.org/showcase/" title="Some of the best WordPress sites on the Web">Showcase</a></li>
			<li><a href="http://wordpress.org/plugins/" title="Add extra functionality to WordPress">Plugins</a></li>
			<li><a href="http://wordpress.org/themes/" title="Make your WordPress pretty">Themes</a></li>
		</ul>

		<ul>
			<li><a href="http://central.wordcamp.org/" title="Find a WordPress event near you">WordCamp</a></li>
			<li><a href="http://wordpress.tv/" title="Videos, tutorials, and WordCamp sessions">WordPress.TV</a></li>
			<li><a href="http://buddypress.org/" title="A set of plugins to transform your WordPress into a social network">BuddyPress</a></li>
			<li><a href="http://bbpress.org/" title="Fast, slick forums built on WordPress">bbPress</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.com/?ref=wporg-footer" title="Hassle-free WordPress hosting">WordPress.com</a></li>
			<li><a href="http://ma.tt/" title="Co-founder of WordPress, an example of what WordPress can do">Matt</a></li>
			<li><a href="http://wordpress.org/about/privacy/" title="WordPress.org Privacy Policy">Privacy</a></li>
			<li><a href="https://publiccode.eu/" target="_blank">Public Code</a></li>
		</ul>

		<ul class="social-media-links">
			<li><span class="dashicons dashicons-twitter"></span><a href="https://twitter.com/WordPress" title="Follow @WordPress on Twitter">@WordPress</a></li>
			<li><span class="dashicons dashicons-facebook"></span><a href="https://www.facebook.com/WordPress/" title="Like WordPress on Facebook">WordPress</a></li>
		</ul>
	</div>

		<p class="cip cip-image">Code is Poetry.</p>
</div>

<script src="../../../../s.w.org/style/js/navigation.min.js?20190128"></script>

<link rel='stylesheet' id='buttons-css'  href='../../../wp-includes/css/buttons.min.css?ver=5.9-alpha-51701' type='text/css' media='all' />
<script type='text/javascript' src='../../../wp-includes/js/hoverintent-js.min.js?ver=2.2.1' id='hoverintent-js-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/admin-bar.min.js?ver=5.9-alpha-51701' id='admin-bar-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/navigation.js?ver=20181209' id='wporg-developer-navigation-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/skip-link-focus-fix.js?ver=20130115' id='wporg-developer-skip-link-focus-fix-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/search.js?ver=20150430' id='wporg-developer-search-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/menu.js?ver=20180201' id='wporg-developer-menu-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/awesomplete.min.js?ver=20160322' id='awesomplete-js'></script>
<script type='text/javascript' id='autocomplete-js-extra'>
/* <![CDATA[ */
var autocomplete = {"ajaxurl":"https:\/\/developer.wordpress.org\/wp-admin\/admin-ajax.php","nonce":"8a60f70c4b"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/autocomplete.js?ver=20160524' id='autocomplete-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/function-reference.js?ver=20180724' id='wporg-developer-function-reference-js'></script>
<script type='text/javascript' id='quicktags-js-extra'>
/* <![CDATA[ */
var quicktagsL10n = {"closeAllOpenTags":"Close all open tags","closeTags":"close tags","enterURL":"Enter the URL","enterImageURL":"Enter the URL of the image","enterImageDescription":"Enter a description of the image","textdirection":"text direction","toggleTextdirection":"Toggle Editor Text Direction","dfw":"Distraction-free writing mode","strong":"Bold","strongClose":"Close bold tag","em":"Italic","emClose":"Close italic tag","link":"Insert link","blockquote":"Blockquote","blockquoteClose":"Close blockquote tag","del":"Deleted text (strikethrough)","delClose":"Close deleted text tag","ins":"Inserted text","insClose":"Close inserted text tag","image":"Insert image","ul":"Bulleted list","ulClose":"Close bulleted list tag","ol":"Numbered list","olClose":"Close numbered list tag","li":"List item","liClose":"Close list item tag","code":"Code","codeClose":"Close code tag","more":"Insert Read More tag"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-includes/js/quicktags.min.js?ver=5.9-alpha-51701' id='quicktags-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/user-notes.js?ver=20200110' id='wporg-developer-user-notes-js'></script>
<script type='text/javascript' id='wporg-developer-user-notes-feedback-js-extra'>
/* <![CDATA[ */
var wporg_note_feedback = {"show":"Show Feedback","hide":"Hide Feedback"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/user-notes-feedback.js?ver=20181023' id='wporg-developer-user-notes-feedback-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/tabs.js?ver=20160824' id='wporg-developer-tabs-js'></script>
<script type='text/javascript' id='wporg-developer-preview-js-extra'>
/* <![CDATA[ */
var wporg_note_preview = {"ajaxurl":"https:\/\/developer.wordpress.org\/wp-admin\/admin-ajax.php","nonce":"504933b60e","preview":"preview note","preview_empty":"Nothing to preview","is_admin":""};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/user-notes-preview.js?ver=20200111' id='wporg-developer-preview-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/wp-embed.min.js?ver=5.9-alpha-51701' id='wp-embed-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/dist/vendor/regenerator-runtime.min.js?ver=0.13.7' id='regenerator-runtime-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/dist/vendor/wp-polyfill.min.js?ver=3.15.0' id='wp-polyfill-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/dist/dom-ready.min.js?ver=71883072590656bf22c74c7b887df3dd' id='wp-dom-ready-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/dist/hooks.min.js?ver=a7edae857aab69d69fa10d5aef23a5de' id='wp-hooks-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/dist/i18n.min.js?ver=5f1269854226b4dd90450db411a12b79' id='wp-i18n-js'></script>
<script type='text/javascript' id='wp-i18n-js-after'>
wp.i18n.setLocaleData( { 'text direction\u0004ltr': [ 'ltr' ] } );
</script>
<script type='text/javascript' id='wp-a11y-js-translations'>
( function( domain, translations ) {
	var localeData = translations.locale_data[ domain ] || translations.locale_data.messages;
	localeData[""].domain = domain;
	wp.i18n.setLocaleData( localeData, domain );
} )( "default", { "locale_data": { "messages": { "": {} } } } );
</script>
<script type='text/javascript' src='../../../wp-includes/js/dist/a11y.min.js?ver=0ac8327cc1c40dcfdf29716affd7ac63' id='wp-a11y-js'></script>
<script type='text/javascript' id='wplink-js-extra'>
/* <![CDATA[ */
var wpLinkL10n = {"title":"Insert\/edit link","update":"Update","save":"Add Link","noTitle":"(no title)","noMatchesFound":"No results found.","linkSelected":"Link selected.","linkInserted":"Link inserted.","minInputLength":"3"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-includes/js/wplink.min.js?ver=5.9-alpha-51701' id='wplink-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/jquery/ui/core.min.js?ver=1.12.1' id='jquery-ui-core-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/jquery/ui/menu.min.js?ver=1.12.1' id='jquery-ui-menu-js'></script>
<script type='text/javascript' id='jquery-ui-autocomplete-js-extra'>
/* <![CDATA[ */
var uiAutocompleteL10n = {"noResults":"No results found.","oneResult":"1 result found. Use up and down arrow keys to navigate.","manyResults":"%d results found. Use up and down arrow keys to navigate.","itemSelected":"Item selected."};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-includes/js/jquery/ui/autocomplete.min.js?ver=1.12.1' id='jquery-ui-autocomplete-js'></script>

		<script type="text/javascript">
		tinyMCEPreInit = {
			baseURL: "https://developer.wordpress.org/wp-includes/js/tinymce",
			suffix: ".min",
						mceInit: {},
			qtInit: {'comment':{id:"comment",buttons:"strong,em,ul,ol,li,link"}},
			ref: {plugins:"",theme:"modern",language:""},
			load_ext: function(url,lang){var sl=tinymce.ScriptLoader;sl.markDone(url+'/langs/'+lang+'.js');sl.markDone(url+'/langs/'+lang+'_dlg.js');}
		};
		</script>
				<script type="text/javascript">
		var ajaxurl = "../../../wp-admin/admin-ajax.html";
		( function() {
			var initialized = [];
			var initialize  = function() {
				var init, id, inPostbox, $wrap;
				var readyState = document.readyState;

				if ( readyState !== 'complete' && readyState !== 'interactive' ) {
					return;
				}

				for ( id in tinyMCEPreInit.mceInit ) {
					if ( initialized.indexOf( id ) > -1 ) {
						continue;
					}

					init      = tinyMCEPreInit.mceInit[id];
					$wrap     = tinymce.$( '#wp-' + id + '-wrap' );
					inPostbox = $wrap.parents( '.postbox' ).length > 0;

					if (
						! init.wp_skip_init &&
						( $wrap.hasClass( 'tmce-active' ) || ! tinyMCEPreInit.qtInit.hasOwnProperty( id ) ) &&
						( readyState === 'complete' || ( ! inPostbox && readyState === 'interactive' ) )
					) {
						tinymce.init( init );
						initialized.push( id );

						if ( ! window.wpActiveEditor ) {
							window.wpActiveEditor = id;
						}
					}
				}
			}

			if ( typeof tinymce !== 'undefined' ) {
				if ( tinymce.Env.ie && tinymce.Env.ie < 11 ) {
					tinymce.$( '.wp-editor-wrap ' ).removeClass( 'tmce-active' ).addClass( 'html-active' );
				} else {
					if ( document.readyState === 'complete' ) {
						initialize();
					} else {
						document.addEventListener( 'readystatechange', initialize );
					}
				}
			}

			if ( typeof quicktags !== 'undefined' ) {
				for ( id in tinyMCEPreInit.qtInit ) {
					quicktags( tinyMCEPreInit.qtInit[id] );

					if ( ! window.wpActiveEditor ) {
						window.wpActiveEditor = id;
					}
				}
			}
		}());
		</script>
				<div id="wp-link-backdrop" style="display: none"></div>
		<div id="wp-link-wrap" class="wp-core-ui" style="display: none" role="dialog" aria-labelledby="link-modal-title">
		<form id="wp-link" tabindex="-1">
		<input type="hidden" id="_ajax_linking_nonce" name="_ajax_linking_nonce" value="86f5a0a85d" />		<h1 id="link-modal-title">Insert/edit link</h1>
		<button type="button" id="wp-link-close"><span class="screen-reader-text">Close</span></button>
		<div id="link-selector">
			<div id="link-options">
				<p class="howto" id="wplink-enter-url">Enter the destination URL</p>
				<div>
					<label><span>URL</span>
					<input id="wp-link-url" type="text" aria-describedby="wplink-enter-url" /></label>
				</div>
				<div class="wp-link-text-field">
					<label><span>Link Text</span>
					<input id="wp-link-text" type="text" /></label>
				</div>
				<div class="link-target">
					<label><span></span>
					<input type="checkbox" id="wp-link-target" /> Open link in a new tab</label>
				</div>
			</div>
			<p class="howto" id="wplink-link-existing-content">Or link to existing content</p>
			<div id="search-panel">
				<div class="link-search-wrapper">
					<label>
						<span class="search-label">Search</span>
						<input type="search" id="wp-link-search" class="link-search-field" autocomplete="off" aria-describedby="wplink-link-existing-content" />
						<span class="spinner"></span>
					</label>
				</div>
				<div id="search-results" class="query-results" tabindex="0">
					<ul></ul>
					<div class="river-waiting">
						<span class="spinner"></span>
					</div>
				</div>
				<div id="most-recent-results" class="query-results" tabindex="0">
					<div class="query-notice" id="query-notice-message">
						<em class="query-notice-default">No search term specified. Showing recent items.</em>
						<em class="query-notice-hint screen-reader-text">Search or use up and down arrow keys to select an item.</em>
					</div>
					<ul></ul>
					<div class="river-waiting">
						<span class="spinner"></span>
					</div>
				</div>
			</div>
		</div>
		<div class="submitbox">
			<div id="wp-link-cancel">
				<button type="button" class="button">Cancel</button>
			</div>
			<div id="wp-link-update">
				<input type="submit" value="Add Link" class="button button-primary" id="wp-link-submit" name="wp-link-submit">
			</div>
		</div>
		</form>
		</div>
		</body>

<!-- Mirrored from developer.wordpress.org/reference/classes/wp_site_health/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Aug 2021 17:09:24 GMT -->
</html>
