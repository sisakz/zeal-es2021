<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

<!-- Mirrored from developer.wordpress.org/reference/classes/wp_customize_nav_menus/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Aug 2021 17:21:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<!--
<meta property="fb:page_id" content="6427302910" />
-->
<meta name="google-site-verification" content="7VWES_-rcHBcmaQis9mSYamPfNwE03f4vyTj4pfuAw0" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>WP_Customize_Nav_Menus</title>
<meta name="referrer" content="always">

		<link href='../../../../fonts.googleapis.com/css.css?family=Open+Sans:300italic,400italic,600italic,400,300,600&amp;subset=latin,cyrillic-ext,greek-ext,greek,vietnamese,latin-ext,cyrillic' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="../../../../s.w.org/style/wp4.css?95" />

<link rel="shortcut icon" href="../../../../s.w.org/favicon.ico?2" type="image/x-icon" />
<link rel="pingback" href="../../../xmlrpc.php" /><meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='../../../../fonts.googleapis.com/index.html' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link rel='dns-prefetch' href='http://www.googletagmanager.com/' />
<link rel='dns-prefetch' href='http://fonts.gstatic.com/' />
<link rel="alternate" type="application/rss+xml" title="WordPress Developer Resources &raquo; Feed" href="../../../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="WordPress Developer Resources &raquo; Comments Feed" href="../../../comments/feed/index.html" />
<meta property="og:title" content="WP_Customize_Nav_Menus | Class | WordPress Developer Resources" />
<meta property="og:site_name" content="WordPress Developer Resources" />
<meta property="og:type" content="website" />
<meta property="og:url" content="../../../index.html" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@WordPress" />
<meta name="description" content="Customize Nav Menus class." />
<meta property="og:description" content="Customize Nav Menus class." />
<link rel="alternate" type="application/rss+xml" title="WordPress Developer Resources &raquo; WP_Customize_Nav_Menus Comments Feed" href="https://developer.wordpress.org/reference/classes/wp_customize_nav_menus/feed/" />
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../../../../www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P24PF4B');</script>
			<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/developer.wordpress.org\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.9-alpha-51701"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([10084,65039,8205,55357,56613],[10084,65039,8203,55357,56613])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='dashicons-css'  href='../../../wp-includes/css/dashicons.min.css?ver=5.9-alpha-51701' type='text/css' media='all' />
<link rel='stylesheet' id='admin-bar-css'  href='../../../wp-includes/css/admin-bar.min.css?ver=5.9-alpha-51701' type='text/css' media='all' />
<link rel='stylesheet' id='wp-block-library-css'  href='../../../wp-includes/css/dist/block-library/style.min.css?ver=5.9-alpha-51701' type='text/css' media='all' />
<link rel='stylesheet' id='wporg-handbook-css-css'  href='../../../wp-content/plugins/handbook/stylesheets/callout-boxes.css?ver=20200121' type='text/css' media='all' />
<link rel='stylesheet' id='open-sans-css'  href='../../../../fonts.googleapis.com/css-2.css?family=Open+Sans%3A300italic%2C400italic%2C600italic%2C300%2C400%2C600&amp;subset=latin%2Clatin-ext&amp;display=fallback&amp;ver=5.9-alpha-51701' type='text/css' media='all' />
<link rel='stylesheet' id='wporg-developer-style-css'  href='../../../wp-content/themes/pub/wporg-developer/style.css?ver=3' type='text/css' media='all' />
<link rel='stylesheet' id='wp-dev-sass-compiled-css'  href='../../../wp-content/themes/pub/wporg-developer/stylesheets/main.css?ver=20200713' type='text/css' media='all' />
<link rel='stylesheet' id='awesomplete-css-css'  href='../../../wp-content/themes/pub/wporg-developer/stylesheets/awesomplete.css?ver=20160114' type='text/css' media='all' />
<link rel='stylesheet' id='autocomplete-css-css'  href='../../../wp-content/themes/pub/wporg-developer/stylesheets/autocomplete.css?ver=20171220' type='text/css' media='all' />
<link rel='stylesheet' id='syntaxhighlighter-core-css'  href='../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b' type='text/css' media='all' />
<link rel='stylesheet' id='syntaxhighlighter-theme-default-css'  href='../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b' type='text/css' media='all' />
<script type='text/javascript' src='../../../wp-includes/js/jquery/jquery.min.js?ver=3.6.0' id='jquery-core-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2' id='jquery-migrate-js'></script>
<script type='text/javascript' src='../../../wp-content/plugins/handbook/scripts/handbook.js?ver=20150930' id='wporg-handbook-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/chapters.js?ver=20190603' id='wporg-developer-chapters-js'></script>
<script type='text/javascript' src='../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b' id='syntaxhighlighter-core-js'></script>
<script type='text/javascript' src='../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPhp.js?ver=3.0.9b' id='syntaxhighlighter-brush-php-js'></script>
<link rel="https://api.w.org/" href="https://developer.wordpress.org/wp-json/" /><link rel="alternate" type="application/json" href="https://developer.wordpress.org/wp-json/wp/v2/wp-parser-class/18451" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../xmlrpc-2.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.9-alpha-51701" />
<link rel='shortlink' href='https://developer.wordpress.org/?p=18451' />
<link rel="alternate" type="application/json+oembed" href="https://developer.wordpress.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fdeveloper.wordpress.org%2Freference%2Fclasses%2Fwp_customize_nav_menus%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://developer.wordpress.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fdeveloper.wordpress.org%2Freference%2Fclasses%2Fwp_customize_nav_menus%2F&amp;format=xml" />
<link rel="canonical" href="index.html">
<!-- Stream WordPress user activity plugin v3.6.2 -->
	<style>
		@media screen and (max-width: 782px) {
			#wpadminbar li#wp-admin-bar-log-in,
			#wpadminbar li#wp-admin-bar-register {
				display: block;
			}

			#wpadminbar li#wp-admin-bar-log-in a,
			#wpadminbar li#wp-admin-bar-register a {
				padding: 0 8px;
			}
		}
	</style>
		<style>
			a.github-edit {
				margin-left: .5em;
				font-size: .5em;
				vertical-align: top;
				display: inline-block;
				border: 1px solid #eeeeee;
				border-radius: 2px;
				background: #eeeeee;
				padding: .5em .6em .4em;
				color: black;
				margin-top: 0.1em;
			}
			a.github-edit > * {
				opacity: 0.6;
			}
			a.github-edit:hover > * {
				opacity: 1;
				color: black;
			}
			a.github-edit img {
				height: .8em;
			}
		</style>
		
	<script type="text/javascript">
		jQuery( '<style>.hide-if-js { display: none; }</style>' ).appendTo( 'head' );
		jQuery( function($) {
			$( 'body' ).addClass('js');
		} );
	</script>
<style type="text/css" media="print">#wpadminbar { display:none; }</style>
	<style type="text/css" media="screen">
	</style>
	<script>document.cookie='devicePixelRatio='+((window.devicePixelRatio === undefined) ? 1 : window.devicePixelRatio)+'; path=/';</script>

</head>


<body id="wordpress-org" class="wp-parser-class-template-default single single-wp-parser-class postid-18451 admin-bar no-customize-support">
		<div id="wpadminbar" class="nojq nojs">
						<div class="quicklinks" id="wp-toolbar" role="navigation" aria-label="Toolbar">
				<ul id='wp-admin-bar-root-default' class="ab-top-menu"><li id='wp-admin-bar-wp-logo' class="menupop"><a class='ab-item' aria-haspopup="true" href='https://wordpress.org/about/'><span class="ab-icon" aria-hidden="true"></span><span class="screen-reader-text">About WordPress</span></a><div class="ab-sub-wrapper"><ul id='wp-admin-bar-wp-logo-default' class="ab-submenu"><li id='wp-admin-bar-about'><a class='ab-item' href='https://wordpress.org/about/'>About WordPress</a></li></ul><ul id='wp-admin-bar-wp-logo-external' class="ab-sub-secondary ab-submenu"><li id='wp-admin-bar-wporg'><a class='ab-item' href='https://wordpress.org/'>WordPress.org</a></li><li id='wp-admin-bar-documentation'><a class='ab-item' href='https://wordpress.org/support/'>Documentation</a></li><li id='wp-admin-bar-support-forums'><a class='ab-item' href='https://wordpress.org/support/forums/'>Support</a></li><li id='wp-admin-bar-feedback'><a class='ab-item' href='https://wordpress.org/support/forum/requests-and-feedback'>Feedback</a></li></ul></div></li></ul><ul id='wp-admin-bar-top-secondary' class="ab-top-secondary ab-top-menu"><li id='wp-admin-bar-search' class="admin-bar-search"><div class="ab-item ab-empty-item" tabindex="-1"><form action="https://developer.wordpress.org/" method="get" id="adminbarsearch"><input class="adminbar-input" name="s" id="adminbar-search" type="text" value="" maxlength="150" /><label for="adminbar-search" class="screen-reader-text">Search</label><input type="submit" class="adminbar-button" value="Search" /></form></div></li><li id='wp-admin-bar-log-in'><a class='ab-item' href='https://login.wordpress.org/?locale=en_US'>Log In</a></li><li id='wp-admin-bar-register'><a class='ab-item' href='https://login.wordpress.org/register?locale=en_US'>Register</a></li></ul>			</div>
					</div>

		<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P24PF4B" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<div id="wporg-header">
	<div class="wrapper">
	<h1><a href="http://wordpress.org/">WordPress.org</a></h1>				<div id="head-search">
		<form action="http://wordpress.org/search/do-search.php" method="get">
			<label for="global-search" class="screen-reader-text">Search WordPress.org for:</label>
			<input id="global-search" class="text" name="search" type="text" value="" maxlength="150" placeholder="Search WordPress.org" />
			<button type="submit" class="button"><span class="screen-reader-text">Submit</span></button>
		</form>
		</div>
				<div style="clear:both"></div>
		<button id="mobile-menu-button" aria-expanded="false"><span class="screen-reader-text">Toggle Menu</span></button>
		
<nav aria-label="Main Menu">
<ul id="wporg-header-menu">
<li class="menu-item"><a href='http://wordpress.org/showcase/' data-title='See some of the sites built on WordPress.'>Showcase</a></li>
<li class="menu-item"><a href='http://learn.wordpress.org/' data-title='Resources to help you learn more about WordPress and teach it to others.'>Learn</a></li>
<li class="menu-item"><a href='http://wordpress.org/themes/' data-title='Find just the right look for your website.'>Themes</a></li>
<li class="menu-item"><a href='http://wordpress.org/plugins/' data-title='Plugins can extend WordPress to do almost anything you can imagine.'>Plugins</a></li>
<li class="menu-item"><a href='http://wordpress.org/mobile/' data-title='Take your website on the go!'>Mobile</a></li>
<li class="menu-item"><a href='http://wordpress.org/support/' data-title='Forums, documentation, help.'>Support</a><ul class="nav-submenu"><li><a href='http://wordpress.org/support/' title='Documentation, tutorials, best practices.'>Documentation</a></li><li><a href='http://wordpress.org/support/forums/' title='Support and discussion forums.'>Forums</a></li></ul><div class="uparrow"></div></li>
<li class="menu-item"><a href='http://make.wordpress.org/' data-title='Contribute your knowledge.'>Get Involved</a><ul class="nav-submenu"><li><a href='http://wordpress.org/five-for-the-future/' title='How five percent is powering the next generation of the web'>Five for the Future</a></li></ul><div class="uparrow"></div></li>
<li class="menu-item"><a href='http://wordpress.org/about/' data-title='About the WordPress Organization, and where we&#039;re going.'>About</a></li>
<li class="menu-item"><a href='http://wordpress.org/news/' data-title='Come here for the latest scoop.'>Blog</a></li>
<li class="menu-item"><a href='http://wordpress.org/hosting/' data-title='Find a home for your blog.'>Hosting</a></li>
<li id="download" class="button download-button menu-item"><a href='http://wordpress.org/download/' data-title='Get it. Got it? Good.'>Get WordPress</a></li>
</ul>
</nav>
		<div style="clear:both"></div>
	</div>
</div>



<header id="masthead" class="site-header" role="banner">
		<div class="site-branding">
		<h1 class="site-title">
			<a href="../../index.html" rel="home">Code Reference</a>
		</h1>

		
		<nav id="site-navigation" class="main-navigation" role="navigation">
			<button class="menu-toggle dashicons dashicons-arrow-down-alt2" aria-controls="primary-menu" aria-expanded="false" aria-label="Primary Menu"></button>
					</nav>
	</div>
</header><!-- #masthead -->

<div id="page" class="hfeed site devhub-wrap">
	<a href="#main" class="screen-reader-text">Skip to content</a>

				<div id="inner-search">
			<div class="search-section section clear hide-if-js">


	
	<form role="search" method="get" class="searchform searchform-filtered" action="https://developer.wordpress.org/">
		<label for="search-field" class="screen-reader-text">Search for:</label>
		<input type="text" id="search-field" class="search-field" placeholder="Search &hellip;" value="" name="s">
		<button class="button button-primary button-search"><i class="dashicons dashicons-search"></i><span class="screen-reader-text">Search plugins</span></button>
	
		<div class="search-post-type">
			<span>Filter by type:</span>
									<label><input type="checkbox" name="post_type[]" value="wp-parser-function"
						 /> Functions</label>
									<label><input type="checkbox" name="post_type[]" value="wp-parser-hook"
						 /> Hooks</label>
									<label><input type="checkbox" name="post_type[]" value="wp-parser-class"
						 /> Classes</label>
									<label><input type="checkbox" name="post_type[]" value="wp-parser-method"
						 /> Methods</label>
					</div>

	
	</form>

</div><!-- /search-guide -->
			<div id="inner-search-icon-container">
				<div id="inner-search-icon">
					<div class="dashicons dashicons-search"><span class="screen-reader-text">Search</span></div>
				</div>
			</div>
		</div>

		<div id="content" class="site-content">

	<div id="content-area" class="wp-parser-class-template-default single single-wp-parser-class postid-18451 admin-bar no-customize-support code-reference">

		
		<div class="breadcrumb-trail breadcrumbs" itemprop="breadcrumb">
			<span class="trail-browse">Browse:</span> 
			<span class="trail-begin"><a href="../../../index.html" title="WordPress Developer Resources" rel="home">Home</a></span> <span class="sep">&#47;</span> 
			<span class="trail-inner"><a href="../../index.html" title="Reference">Reference</a></span> <span class="sep">&#47;</span> 
			<span class="trail-inner"><a href="../index.html">Classes</a></span> <span class="sep">&#47;</span> <span class="trail-end">WP_Customize_Nav_Menus</span>
		</div>
		<main id="main" class="site-main" role="main">

		
			
<article id="post-18451" class="post-18451 wp-parser-class type-wp-parser-class status-publish hentry wp-parser-source-file-wp-includes_class-wp-customize-nav-menus-php wp-parser-package-customize wp-parser-package-wordpress wp-parser-since-4-3-0">

	
	
	<h1>WP_Customize_Nav_Menus</h1>

	<section class="summary">
		<p>Customize Nav Menus class.</p>
	</section>


	
	<div class="content-toc"><style> .toc-jump { text-align: right; font-size: 12px; } .page .toc-heading { margin-top: -50px; padding-top: 50px !important; }</style><div class="table-of-contents"><h2>Contents</h2><ul class="items"><li><a href="#description">Description</a>
<ul>
<li><a href="#see-also">See also</a>
</ul></li>
<li><a href="#source">Source</a></li>
<li><a href="#methods">Methods</a></li>
<li><a href="#changelog">Changelog</a></li>
<li><a href="#user-contributed-notes">User Contributed Notes</a></ul>
</div>

<hr />
<section class="description">
	<h2 class="toc-heading" id="description" tabindex="-1">Description <a href="#description" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Description</span></a></h2>
	<p>Implements menu management in the Customizer.</p>

		<h3 class="toc-heading" id="see-also" tabindex="-1">See also <a href="#see-also" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">See also</span></a></h3>

	<ul>
	<li><a href="../wp_customize_manager/index.html">WP_Customize_Manager</a></li>
	</ul>
	</section>

	<hr />
	<section class="source-content">
		<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h2 class="toc-heading" id="source" tabindex="-1">Source <a href="#source" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Source</span></a></h2>
		<p>
			File: <a href="../../files/wp-includes/class-wp-customize-nav-menus.php/index.html">wp-includes/class-wp-customize-nav-menus.php</a>		</p>

					<div class="source-code-container">
				<pre class="brush: php; toolbar: false; first-line: 19">final class WP_Customize_Nav_Menus {

	/**
	 * WP_Customize_Manager instance.
	 *
	 * @since 4.3.0
	 * @var WP_Customize_Manager
	 */
	public $manager;

	/**
	 * Original nav menu locations before the theme was switched.
	 *
	 * @since 4.9.0
	 * @var array
	 */
	protected $original_nav_menu_locations;

	/**
	 * Constructor.
	 *
	 * @since 4.3.0
	 *
	 * @param WP_Customize_Manager $manager Customizer bootstrap instance.
	 */
	public function __construct( $manager ) {
		$this-&gt;manager                     = $manager;
		$this-&gt;original_nav_menu_locations = get_nav_menu_locations();

		// See https://github.com/xwp/wp-customize-snapshots/blob/962586659688a5b1fd9ae93618b7ce2d4e7a421c/php/class-customize-snapshot-manager.php#L469-L499
		add_action( 'customize_register', array( $this, 'customize_register' ), 11 );
		add_filter( 'customize_dynamic_setting_args', array( $this, 'filter_dynamic_setting_args' ), 10, 2 );
		add_filter( 'customize_dynamic_setting_class', array( $this, 'filter_dynamic_setting_class' ), 10, 3 );
		add_action( 'customize_save_nav_menus_created_posts', array( $this, 'save_nav_menus_created_posts' ) );

		// Skip remaining hooks when the user can't manage nav menus anyway.
		if ( ! current_user_can( 'edit_theme_options' ) ) {
			return;
		}

		add_filter( 'customize_refresh_nonces', array( $this, 'filter_nonces' ) );
		add_action( 'wp_ajax_load-available-menu-items-customizer', array( $this, 'ajax_load_available_items' ) );
		add_action( 'wp_ajax_search-available-menu-items-customizer', array( $this, 'ajax_search_available_items' ) );
		add_action( 'wp_ajax_customize-nav-menus-insert-auto-draft', array( $this, 'ajax_insert_auto_draft_post' ) );
		add_action( 'customize_controls_enqueue_scripts', array( $this, 'enqueue_scripts' ) );
		add_action( 'customize_controls_print_footer_scripts', array( $this, 'print_templates' ) );
		add_action( 'customize_controls_print_footer_scripts', array( $this, 'available_items_template' ) );
		add_action( 'customize_preview_init', array( $this, 'customize_preview_init' ) );
		add_action( 'customize_preview_init', array( $this, 'make_auto_draft_status_previewable' ) );

		// Selective Refresh partials.
		add_filter( 'customize_dynamic_partial_args', array( $this, 'customize_dynamic_partial_args' ), 10, 2 );
	}

	/**
	 * Adds a nonce for customizing menus.
	 *
	 * @since 4.5.0
	 *
	 * @param string[] $nonces Array of nonces.
	 * @return string[] Modified array of nonces.
	 */
	public function filter_nonces( $nonces ) {
		$nonces['customize-menus'] = wp_create_nonce( 'customize-menus' );
		return $nonces;
	}

	/**
	 * Ajax handler for loading available menu items.
	 *
	 * @since 4.3.0
	 */
	public function ajax_load_available_items() {
		check_ajax_referer( 'customize-menus', 'customize-menus-nonce' );

		if ( ! current_user_can( 'edit_theme_options' ) ) {
			wp_die( -1 );
		}

		$all_items  = array();
		$item_types = array();
		if ( isset( $_POST['item_types'] ) &amp;&amp; is_array( $_POST['item_types'] ) ) {
			$item_types = wp_unslash( $_POST['item_types'] );
		} elseif ( isset( $_POST['type'] ) &amp;&amp; isset( $_POST['object'] ) ) { // Back compat.
			$item_types[] = array(
				'type'   =&gt; wp_unslash( $_POST['type'] ),
				'object' =&gt; wp_unslash( $_POST['object'] ),
				'page'   =&gt; empty( $_POST['page'] ) ? 0 : absint( $_POST['page'] ),
			);
		} else {
			wp_send_json_error( 'nav_menus_missing_type_or_object_parameter' );
		}

		foreach ( $item_types as $item_type ) {
			if ( empty( $item_type['type'] ) || empty( $item_type['object'] ) ) {
				wp_send_json_error( 'nav_menus_missing_type_or_object_parameter' );
			}
			$type   = sanitize_key( $item_type['type'] );
			$object = sanitize_key( $item_type['object'] );
			$page   = empty( $item_type['page'] ) ? 0 : absint( $item_type['page'] );
			$items  = $this-&gt;load_available_items_query( $type, $object, $page );
			if ( is_wp_error( $items ) ) {
				wp_send_json_error( $items-&gt;get_error_code() );
			}
			$all_items[ $item_type['type'] . ':' . $item_type['object'] ] = $items;
		}

		wp_send_json_success( array( 'items' =&gt; $all_items ) );
	}

	/**
	 * Performs the post_type and taxonomy queries for loading available menu items.
	 *
	 * @since 4.3.0
	 *
	 * @param string $type   Optional. Accepts any custom object type and has built-in support for
	 *                         'post_type' and 'taxonomy'. Default is 'post_type'.
	 * @param string $object Optional. Accepts any registered taxonomy or post type name. Default is 'page'.
	 * @param int    $page   Optional. The page number used to generate the query offset. Default is '0'.
	 * @return array|WP_Error An array of menu items on success, a WP_Error object on failure.
	 */
	public function load_available_items_query( $type = 'post_type', $object = 'page', $page = 0 ) {
		$items = array();

		if ( 'post_type' === $type ) {
			$post_type = get_post_type_object( $object );
			if ( ! $post_type ) {
				return new WP_Error( 'nav_menus_invalid_post_type' );
			}

			/*
			 * If we're dealing with pages, let's prioritize the Front Page,
			 * Posts Page and Privacy Policy Page at the top of the list.
			 */
			$important_pages   = array();
			$suppress_page_ids = array();
			if ( 0 === $page &amp;&amp; 'page' === $object ) {
				// Insert Front Page or custom &quot;Home&quot; link.
				$front_page = 'page' === get_option( 'show_on_front' ) ? (int) get_option( 'page_on_front' ) : 0;
				if ( ! empty( $front_page ) ) {
					$front_page_obj      = get_post( $front_page );
					$important_pages[]   = $front_page_obj;
					$suppress_page_ids[] = $front_page_obj-&gt;ID;
				} else {
					// Add &quot;Home&quot; link. Treat as a page, but switch to custom on add.
					$items[] = array(
						'id'         =&gt; 'home',
						'title'      =&gt; _x( 'Home', 'nav menu home label' ),
						'type'       =&gt; 'custom',
						'type_label' =&gt; __( 'Custom Link' ),
						'object'     =&gt; '',
						'url'        =&gt; home_url(),
					);
				}

				// Insert Posts Page.
				$posts_page = 'page' === get_option( 'show_on_front' ) ? (int) get_option( 'page_for_posts' ) : 0;
				if ( ! empty( $posts_page ) ) {
					$posts_page_obj      = get_post( $posts_page );
					$important_pages[]   = $posts_page_obj;
					$suppress_page_ids[] = $posts_page_obj-&gt;ID;
				}

				// Insert Privacy Policy Page.
				$privacy_policy_page_id = (int) get_option( 'wp_page_for_privacy_policy' );
				if ( ! empty( $privacy_policy_page_id ) ) {
					$privacy_policy_page = get_post( $privacy_policy_page_id );
					if ( $privacy_policy_page instanceof WP_Post &amp;&amp; 'publish' === $privacy_policy_page-&gt;post_status ) {
						$important_pages[]   = $privacy_policy_page;
						$suppress_page_ids[] = $privacy_policy_page-&gt;ID;
					}
				}
			} elseif ( 'post' !== $object &amp;&amp; 0 === $page &amp;&amp; $post_type-&gt;has_archive ) {
				// Add a post type archive link.
				$items[] = array(
					'id'         =&gt; $object . '-archive',
					'title'      =&gt; $post_type-&gt;labels-&gt;archives,
					'type'       =&gt; 'post_type_archive',
					'type_label' =&gt; __( 'Post Type Archive' ),
					'object'     =&gt; $object,
					'url'        =&gt; get_post_type_archive_link( $object ),
				);
			}

			// Prepend posts with nav_menus_created_posts on first page.
			$posts = array();
			if ( 0 === $page &amp;&amp; $this-&gt;manager-&gt;get_setting( 'nav_menus_created_posts' ) ) {
				foreach ( $this-&gt;manager-&gt;get_setting( 'nav_menus_created_posts' )-&gt;value() as $post_id ) {
					$auto_draft_post = get_post( $post_id );
					if ( $post_type-&gt;name === $auto_draft_post-&gt;post_type ) {
						$posts[] = $auto_draft_post;
					}
				}
			}

			$args = array(
				'numberposts' =&gt; 10,
				'offset'      =&gt; 10 * $page,
				'orderby'     =&gt; 'date',
				'order'       =&gt; 'DESC',
				'post_type'   =&gt; $object,
			);

			// Add suppression array to arguments for get_posts.
			if ( ! empty( $suppress_page_ids ) ) {
				$args['post__not_in'] = $suppress_page_ids;
			}

			$posts = array_merge(
				$posts,
				$important_pages,
				get_posts( $args )
			);

			foreach ( $posts as $post ) {
				$post_title = $post-&gt;post_title;
				if ( '' === $post_title ) {
					/* translators: %d: ID of a post. */
					$post_title = sprintf( __( '#%d (no title)' ), $post-&gt;ID );
				}

				$post_type_label = get_post_type_object( $post-&gt;post_type )-&gt;labels-&gt;singular_name;
				$post_states     = get_post_states( $post );
				if ( ! empty( $post_states ) ) {
					$post_type_label = implode( ',', $post_states );
				}

				$items[] = array(
					'id'         =&gt; &quot;post-{$post-&gt;ID}&quot;,
					'title'      =&gt; html_entity_decode( $post_title, ENT_QUOTES, get_bloginfo( 'charset' ) ),
					'type'       =&gt; 'post_type',
					'type_label' =&gt; $post_type_label,
					'object'     =&gt; $post-&gt;post_type,
					'object_id'  =&gt; (int) $post-&gt;ID,
					'url'        =&gt; get_permalink( (int) $post-&gt;ID ),
				);
			}
		} elseif ( 'taxonomy' === $type ) {
			$terms = get_terms(
				array(
					'taxonomy'     =&gt; $object,
					'child_of'     =&gt; 0,
					'exclude'      =&gt; '',
					'hide_empty'   =&gt; false,
					'hierarchical' =&gt; 1,
					'include'      =&gt; '',
					'number'       =&gt; 10,
					'offset'       =&gt; 10 * $page,
					'order'        =&gt; 'DESC',
					'orderby'      =&gt; 'count',
					'pad_counts'   =&gt; false,
				)
			);

			if ( is_wp_error( $terms ) ) {
				return $terms;
			}

			foreach ( $terms as $term ) {
				$items[] = array(
					'id'         =&gt; &quot;term-{$term-&gt;term_id}&quot;,
					'title'      =&gt; html_entity_decode( $term-&gt;name, ENT_QUOTES, get_bloginfo( 'charset' ) ),
					'type'       =&gt; 'taxonomy',
					'type_label' =&gt; get_taxonomy( $term-&gt;taxonomy )-&gt;labels-&gt;singular_name,
					'object'     =&gt; $term-&gt;taxonomy,
					'object_id'  =&gt; (int) $term-&gt;term_id,
					'url'        =&gt; get_term_link( (int) $term-&gt;term_id, $term-&gt;taxonomy ),
				);
			}
		}

		/**
		 * Filters the available menu items.
		 *
		 * @since 4.3.0
		 *
		 * @param array  $items  The array of menu items.
		 * @param string $type   The object type.
		 * @param string $object The object name.
		 * @param int    $page   The current page number.
		 */
		$items = apply_filters( 'customize_nav_menu_available_items', $items, $type, $object, $page );

		return $items;
	}

	/**
	 * Ajax handler for searching available menu items.
	 *
	 * @since 4.3.0
	 */
	public function ajax_search_available_items() {
		check_ajax_referer( 'customize-menus', 'customize-menus-nonce' );

		if ( ! current_user_can( 'edit_theme_options' ) ) {
			wp_die( -1 );
		}

		if ( empty( $_POST['search'] ) ) {
			wp_send_json_error( 'nav_menus_missing_search_parameter' );
		}

		$p = isset( $_POST['page'] ) ? absint( $_POST['page'] ) : 0;
		if ( $p &lt; 1 ) {
			$p = 1;
		}

		$s     = sanitize_text_field( wp_unslash( $_POST['search'] ) );
		$items = $this-&gt;search_available_items_query(
			array(
				'pagenum' =&gt; $p,
				's'       =&gt; $s,
			)
		);

		if ( empty( $items ) ) {
			wp_send_json_error( array( 'message' =&gt; __( 'No results found.' ) ) );
		} else {
			wp_send_json_success( array( 'items' =&gt; $items ) );
		}
	}

	/**
	 * Performs post queries for available-item searching.
	 *
	 * Based on WP_Editor::wp_link_query().
	 *
	 * @since 4.3.0
	 *
	 * @param array $args Optional. Accepts 'pagenum' and 's' (search) arguments.
	 * @return array Menu items.
	 */
	public function search_available_items_query( $args = array() ) {
		$items = array();

		$post_type_objects = get_post_types( array( 'show_in_nav_menus' =&gt; true ), 'objects' );
		$query             = array(
			'post_type'              =&gt; array_keys( $post_type_objects ),
			'suppress_filters'       =&gt; true,
			'update_post_term_cache' =&gt; false,
			'update_post_meta_cache' =&gt; false,
			'post_status'            =&gt; 'publish',
			'posts_per_page'         =&gt; 20,
		);

		$args['pagenum'] = isset( $args['pagenum'] ) ? absint( $args['pagenum'] ) : 1;
		$query['offset'] = $args['pagenum'] &gt; 1 ? $query['posts_per_page'] * ( $args['pagenum'] - 1 ) : 0;

		if ( isset( $args['s'] ) ) {
			$query['s'] = $args['s'];
		}

		$posts = array();

		// Prepend list of posts with nav_menus_created_posts search results on first page.
		$nav_menus_created_posts_setting = $this-&gt;manager-&gt;get_setting( 'nav_menus_created_posts' );
		if ( 1 === $args['pagenum'] &amp;&amp; $nav_menus_created_posts_setting &amp;&amp; count( $nav_menus_created_posts_setting-&gt;value() ) &gt; 0 ) {
			$stub_post_query = new WP_Query(
				array_merge(
					$query,
					array(
						'post_status'    =&gt; 'auto-draft',
						'post__in'       =&gt; $nav_menus_created_posts_setting-&gt;value(),
						'posts_per_page' =&gt; -1,
					)
				)
			);
			$posts           = array_merge( $posts, $stub_post_query-&gt;posts );
		}

		// Query posts.
		$get_posts = new WP_Query( $query );
		$posts     = array_merge( $posts, $get_posts-&gt;posts );

		// Create items for posts.
		foreach ( $posts as $post ) {
			$post_title = $post-&gt;post_title;
			if ( '' === $post_title ) {
				/* translators: %d: ID of a post. */
				$post_title = sprintf( __( '#%d (no title)' ), $post-&gt;ID );
			}

			$post_type_label = $post_type_objects[ $post-&gt;post_type ]-&gt;labels-&gt;singular_name;
			$post_states     = get_post_states( $post );
			if ( ! empty( $post_states ) ) {
				$post_type_label = implode( ',', $post_states );
			}

			$items[] = array(
				'id'         =&gt; 'post-' . $post-&gt;ID,
				'title'      =&gt; html_entity_decode( $post_title, ENT_QUOTES, get_bloginfo( 'charset' ) ),
				'type'       =&gt; 'post_type',
				'type_label' =&gt; $post_type_label,
				'object'     =&gt; $post-&gt;post_type,
				'object_id'  =&gt; (int) $post-&gt;ID,
				'url'        =&gt; get_permalink( (int) $post-&gt;ID ),
			);
		}

		// Query taxonomy terms.
		$taxonomies = get_taxonomies( array( 'show_in_nav_menus' =&gt; true ), 'names' );
		$terms      = get_terms(
			array(
				'taxonomies' =&gt; $taxonomies,
				'name__like' =&gt; $args['s'],
				'number'     =&gt; 20,
				'hide_empty' =&gt; false,
				'offset'     =&gt; 20 * ( $args['pagenum'] - 1 ),
			)
		);

		// Check if any taxonomies were found.
		if ( ! empty( $terms ) ) {
			foreach ( $terms as $term ) {
				$items[] = array(
					'id'         =&gt; 'term-' . $term-&gt;term_id,
					'title'      =&gt; html_entity_decode( $term-&gt;name, ENT_QUOTES, get_bloginfo( 'charset' ) ),
					'type'       =&gt; 'taxonomy',
					'type_label' =&gt; get_taxonomy( $term-&gt;taxonomy )-&gt;labels-&gt;singular_name,
					'object'     =&gt; $term-&gt;taxonomy,
					'object_id'  =&gt; (int) $term-&gt;term_id,
					'url'        =&gt; get_term_link( (int) $term-&gt;term_id, $term-&gt;taxonomy ),
				);
			}
		}

		// Add &quot;Home&quot; link if search term matches. Treat as a page, but switch to custom on add.
		if ( isset( $args['s'] ) ) {
			// Only insert custom &quot;Home&quot; link if there's no Front Page
			$front_page = 'page' === get_option( 'show_on_front' ) ? (int) get_option( 'page_on_front' ) : 0;
			if ( empty( $front_page ) ) {
				$title   = _x( 'Home', 'nav menu home label' );
				$matches = function_exists( 'mb_stripos' ) ? false !== mb_stripos( $title, $args['s'] ) : false !== stripos( $title, $args['s'] );
				if ( $matches ) {
					$items[] = array(
						'id'         =&gt; 'home',
						'title'      =&gt; $title,
						'type'       =&gt; 'custom',
						'type_label' =&gt; __( 'Custom Link' ),
						'object'     =&gt; '',
						'url'        =&gt; home_url(),
					);
				}
			}
		}

		/**
		 * Filters the available menu items during a search request.
		 *
		 * @since 4.5.0
		 *
		 * @param array $items The array of menu items.
		 * @param array $args  Includes 'pagenum' and 's' (search) arguments.
		 */
		$items = apply_filters( 'customize_nav_menu_searched_items', $items, $args );

		return $items;
	}

	/**
	 * Enqueue scripts and styles for Customizer pane.
	 *
	 * @since 4.3.0
	 */
	public function enqueue_scripts() {
		wp_enqueue_style( 'customize-nav-menus' );
		wp_enqueue_script( 'customize-nav-menus' );

		$temp_nav_menu_setting      = new WP_Customize_Nav_Menu_Setting( $this-&gt;manager, 'nav_menu[-1]' );
		$temp_nav_menu_item_setting = new WP_Customize_Nav_Menu_Item_Setting( $this-&gt;manager, 'nav_menu_item[-1]' );

		$num_locations = count( get_registered_nav_menus() );

		if ( 1 === $num_locations ) {
			$locations_description = __( 'Your theme can display menus in one location.' );
		} else {
			/* translators: %s: Number of menu locations. */
			$locations_description = sprintf( _n( 'Your theme can display menus in %s location.', 'Your theme can display menus in %s locations.', $num_locations ), number_format_i18n( $num_locations ) );
		}

		// Pass data to JS.
		$settings = array(
			'allMenus'                 =&gt; wp_get_nav_menus(),
			'itemTypes'                =&gt; $this-&gt;available_item_types(),
			'l10n'                     =&gt; array(
				'untitled'               =&gt; _x( '(no label)', 'missing menu item navigation label' ),
				'unnamed'                =&gt; _x( '(unnamed)', 'Missing menu name.' ),
				'custom_label'           =&gt; __( 'Custom Link' ),
				'page_label'             =&gt; get_post_type_object( 'page' )-&gt;labels-&gt;singular_name,
				/* translators: %s: Menu location. */
				'menuLocation'           =&gt; _x( '(Currently set to: %s)', 'menu' ),
				'locationsTitle'         =&gt; 1 === $num_locations ? __( 'Menu Location' ) : __( 'Menu Locations' ),
				'locationsDescription'   =&gt; $locations_description,
				'menuNameLabel'          =&gt; __( 'Menu Name' ),
				'newMenuNameDescription' =&gt; __( 'If your theme has multiple menus, giving them clear names will help you manage them.' ),
				'itemAdded'              =&gt; __( 'Menu item added' ),
				'itemDeleted'            =&gt; __( 'Menu item deleted' ),
				'menuAdded'              =&gt; __( 'Menu created' ),
				'menuDeleted'            =&gt; __( 'Menu deleted' ),
				'movedUp'                =&gt; __( 'Menu item moved up' ),
				'movedDown'              =&gt; __( 'Menu item moved down' ),
				'movedLeft'              =&gt; __( 'Menu item moved out of submenu' ),
				'movedRight'             =&gt; __( 'Menu item is now a sub-item' ),
				/* translators: &amp;#9656; is the unicode right-pointing triangle. %s: Section title in the Customizer. */
				'customizingMenus'       =&gt; sprintf( __( 'Customizing &amp;#9656; %s' ), esc_html( $this-&gt;manager-&gt;get_panel( 'nav_menus' )-&gt;title ) ),
				/* translators: %s: Title of an invalid menu item. */
				'invalidTitleTpl'        =&gt; __( '%s (Invalid)' ),
				/* translators: %s: Title of a menu item in draft status. */
				'pendingTitleTpl'        =&gt; __( '%s (Pending)' ),
				/* translators: %d: Number of menu items found. */
				'itemsFound'             =&gt; __( 'Number of items found: %d' ),
				/* translators: %d: Number of additional menu items found. */
				'itemsFoundMore'         =&gt; __( 'Additional items found: %d' ),
				'itemsLoadingMore'       =&gt; __( 'Loading more results... please wait.' ),
				'reorderModeOn'          =&gt; __( 'Reorder mode enabled' ),
				'reorderModeOff'         =&gt; __( 'Reorder mode closed' ),
				'reorderLabelOn'         =&gt; esc_attr__( 'Reorder menu items' ),
				'reorderLabelOff'        =&gt; esc_attr__( 'Close reorder mode' ),
			),
			'settingTransport'         =&gt; 'postMessage',
			'phpIntMax'                =&gt; PHP_INT_MAX,
			'defaultSettingValues'     =&gt; array(
				'nav_menu'      =&gt; $temp_nav_menu_setting-&gt;default,
				'nav_menu_item' =&gt; $temp_nav_menu_item_setting-&gt;default,
			),
			'locationSlugMappedToName' =&gt; get_registered_nav_menus(),
		);

		$data = sprintf( 'var _wpCustomizeNavMenusSettings = %s;', wp_json_encode( $settings ) );
		wp_scripts()-&gt;add_data( 'customize-nav-menus', 'data', $data );

		// This is copied from nav-menus.php, and it has an unfortunate object name of `menus`.
		$nav_menus_l10n = array(
			'oneThemeLocationNoMenus' =&gt; null,
			'moveUp'                  =&gt; __( 'Move up one' ),
			'moveDown'                =&gt; __( 'Move down one' ),
			'moveToTop'               =&gt; __( 'Move to the top' ),
			/* translators: %s: Previous item name. */
			'moveUnder'               =&gt; __( 'Move under %s' ),
			/* translators: %s: Previous item name. */
			'moveOutFrom'             =&gt; __( 'Move out from under %s' ),
			/* translators: %s: Previous item name. */
			'under'                   =&gt; __( 'Under %s' ),
			/* translators: %s: Previous item name. */
			'outFrom'                 =&gt; __( 'Out from under %s' ),
			/* translators: 1: Item name, 2: Item position, 3: Total number of items. */
			'menuFocus'               =&gt; __( '%1$s. Menu item %2$d of %3$d.' ),
			/* translators: 1: Item name, 2: Item position, 3: Parent item name. */
			'subMenuFocus'            =&gt; __( '%1$s. Sub item number %2$d under %3$s.' ),
		);
		wp_localize_script( 'nav-menu', 'menus', $nav_menus_l10n );
	}

	/**
	 * Filters a dynamic setting's constructor args.
	 *
	 * For a dynamic setting to be registered, this filter must be employed
	 * to override the default false value with an array of args to pass to
	 * the WP_Customize_Setting constructor.
	 *
	 * @since 4.3.0
	 *
	 * @param false|array $setting_args The arguments to the WP_Customize_Setting constructor.
	 * @param string      $setting_id   ID for dynamic setting, usually coming from `$_POST['customized']`.
	 * @return array|false
	 */
	public function filter_dynamic_setting_args( $setting_args, $setting_id ) {
		if ( preg_match( WP_Customize_Nav_Menu_Setting::ID_PATTERN, $setting_id ) ) {
			$setting_args = array(
				'type'      =&gt; WP_Customize_Nav_Menu_Setting::TYPE,
				'transport' =&gt; 'postMessage',
			);
		} elseif ( preg_match( WP_Customize_Nav_Menu_Item_Setting::ID_PATTERN, $setting_id ) ) {
			$setting_args = array(
				'type'      =&gt; WP_Customize_Nav_Menu_Item_Setting::TYPE,
				'transport' =&gt; 'postMessage',
			);
		}
		return $setting_args;
	}

	/**
	 * Allow non-statically created settings to be constructed with custom WP_Customize_Setting subclass.
	 *
	 * @since 4.3.0
	 *
	 * @param string $setting_class WP_Customize_Setting or a subclass.
	 * @param string $setting_id    ID for dynamic setting, usually coming from `$_POST['customized']`.
	 * @param array  $setting_args  WP_Customize_Setting or a subclass.
	 * @return string
	 */
	public function filter_dynamic_setting_class( $setting_class, $setting_id, $setting_args ) {
		unset( $setting_id );

		if ( ! empty( $setting_args['type'] ) &amp;&amp; WP_Customize_Nav_Menu_Setting::TYPE === $setting_args['type'] ) {
			$setting_class = 'WP_Customize_Nav_Menu_Setting';
		} elseif ( ! empty( $setting_args['type'] ) &amp;&amp; WP_Customize_Nav_Menu_Item_Setting::TYPE === $setting_args['type'] ) {
			$setting_class = 'WP_Customize_Nav_Menu_Item_Setting';
		}
		return $setting_class;
	}

	/**
	 * Add the customizer settings and controls.
	 *
	 * @since 4.3.0
	 */
	public function customize_register() {
		$changeset = $this-&gt;manager-&gt;unsanitized_post_values();

		// Preview settings for nav menus early so that the sections and controls will be added properly.
		$nav_menus_setting_ids = array();
		foreach ( array_keys( $changeset ) as $setting_id ) {
			if ( preg_match( '/^(nav_menu_locations|nav_menu|nav_menu_item)\[/', $setting_id ) ) {
				$nav_menus_setting_ids[] = $setting_id;
			}
		}
		$settings = $this-&gt;manager-&gt;add_dynamic_settings( $nav_menus_setting_ids );
		if ( $this-&gt;manager-&gt;settings_previewed() ) {
			foreach ( $settings as $setting ) {
				$setting-&gt;preview();
			}
		}

		// Require JS-rendered control types.
		$this-&gt;manager-&gt;register_panel_type( 'WP_Customize_Nav_Menus_Panel' );
		$this-&gt;manager-&gt;register_control_type( 'WP_Customize_Nav_Menu_Control' );
		$this-&gt;manager-&gt;register_control_type( 'WP_Customize_Nav_Menu_Name_Control' );
		$this-&gt;manager-&gt;register_control_type( 'WP_Customize_Nav_Menu_Locations_Control' );
		$this-&gt;manager-&gt;register_control_type( 'WP_Customize_Nav_Menu_Auto_Add_Control' );
		$this-&gt;manager-&gt;register_control_type( 'WP_Customize_Nav_Menu_Item_Control' );

		// Create a panel for Menus.
		$description = '&lt;p&gt;' . __( 'This panel is used for managing navigation menus for content you have already published on your site. You can create menus and add items for existing content such as pages, posts, categories, tags, formats, or custom links.' ) . '&lt;/p&gt;';
		if ( current_theme_supports( 'widgets' ) ) {
			$description .= '&lt;p&gt;' . sprintf(
				/* translators: %s: URL to the Widgets panel of the Customizer. */
				__( 'Menus can be displayed in locations defined by your theme or in &lt;a href=&quot;%s&quot;&gt;widget areas&lt;/a&gt; by adding a &amp;#8220;Navigation Menu&amp;#8221; widget.' ),
				&quot;javascript:wp.customize.panel( 'widgets' ).focus();&quot;
			) . '&lt;/p&gt;';
		} else {
			$description .= '&lt;p&gt;' . __( 'Menus can be displayed in locations defined by your theme.' ) . '&lt;/p&gt;';
		}

		/*
		 * Once multiple theme supports are allowed in WP_Customize_Panel,
		 * this panel can be restricted to themes that support menus or widgets.
		 */
		$this-&gt;manager-&gt;add_panel(
			new WP_Customize_Nav_Menus_Panel(
				$this-&gt;manager,
				'nav_menus',
				array(
					'title'       =&gt; __( 'Menus' ),
					'description' =&gt; $description,
					'priority'    =&gt; 100,
				)
			)
		);
		$menus = wp_get_nav_menus();

		// Menu locations.
		$locations     = get_registered_nav_menus();
		$num_locations = count( $locations );

		if ( 1 === $num_locations ) {
			$description = '&lt;p&gt;' . __( 'Your theme can display menus in one location. Select which menu you would like to use.' ) . '&lt;/p&gt;';
		} else {
			/* translators: %s: Number of menu locations. */
			$description = '&lt;p&gt;' . sprintf( _n( 'Your theme can display menus in %s location. Select which menu you would like to use.', 'Your theme can display menus in %s locations. Select which menu appears in each location.', $num_locations ), number_format_i18n( $num_locations ) ) . '&lt;/p&gt;';
		}

		if ( current_theme_supports( 'widgets' ) ) {
			/* translators: URL to the Widgets panel of the Customizer. */
			$description .= '&lt;p&gt;' . sprintf( __( 'If your theme has widget areas, you can also add menus there. Visit the &lt;a href=&quot;%s&quot;&gt;Widgets panel&lt;/a&gt; and add a &amp;#8220;Navigation Menu widget&amp;#8221; to display a menu in a sidebar or footer.' ), &quot;javascript:wp.customize.panel( 'widgets' ).focus();&quot; ) . '&lt;/p&gt;';
		}

		$this-&gt;manager-&gt;add_section(
			'menu_locations',
			array(
				'title'       =&gt; 1 === $num_locations ? _x( 'View Location', 'menu locations' ) : _x( 'View All Locations', 'menu locations' ),
				'panel'       =&gt; 'nav_menus',
				'priority'    =&gt; 30,
				'description' =&gt; $description,
			)
		);

		$choices = array( '0' =&gt; __( '&amp;mdash; Select &amp;mdash;' ) );
		foreach ( $menus as $menu ) {
			$choices[ $menu-&gt;term_id ] = wp_html_excerpt( $menu-&gt;name, 40, '&amp;hellip;' );
		}

		// Attempt to re-map the nav menu location assignments when previewing a theme switch.
		$mapped_nav_menu_locations = array();
		if ( ! $this-&gt;manager-&gt;is_theme_active() ) {
			$theme_mods = get_option( 'theme_mods_' . $this-&gt;manager-&gt;get_stylesheet(), array() );

			// If there is no data from a previous activation, start fresh.
			if ( empty( $theme_mods['nav_menu_locations'] ) ) {
				$theme_mods['nav_menu_locations'] = array();
			}

			$mapped_nav_menu_locations = wp_map_nav_menu_locations( $theme_mods['nav_menu_locations'], $this-&gt;original_nav_menu_locations );
		}

		foreach ( $locations as $location =&gt; $description ) {
			$setting_id = &quot;nav_menu_locations[{$location}]&quot;;

			$setting = $this-&gt;manager-&gt;get_setting( $setting_id );
			if ( $setting ) {
				$setting-&gt;transport = 'postMessage';
				remove_filter( &quot;customize_sanitize_{$setting_id}&quot;, 'absint' );
				add_filter( &quot;customize_sanitize_{$setting_id}&quot;, array( $this, 'intval_base10' ) );
			} else {
				$this-&gt;manager-&gt;add_setting(
					$setting_id,
					array(
						'sanitize_callback' =&gt; array( $this, 'intval_base10' ),
						'theme_supports'    =&gt; 'menus',
						'type'              =&gt; 'theme_mod',
						'transport'         =&gt; 'postMessage',
						'default'           =&gt; 0,
					)
				);
			}

			// Override the assigned nav menu location if mapped during previewed theme switch.
			if ( empty( $changeset[ $setting_id ] ) &amp;&amp; isset( $mapped_nav_menu_locations[ $location ] ) ) {
				$this-&gt;manager-&gt;set_post_value( $setting_id, $mapped_nav_menu_locations[ $location ] );
			}

			$this-&gt;manager-&gt;add_control(
				new WP_Customize_Nav_Menu_Location_Control(
					$this-&gt;manager,
					$setting_id,
					array(
						'label'       =&gt; $description,
						'location_id' =&gt; $location,
						'section'     =&gt; 'menu_locations',
						'choices'     =&gt; $choices,
					)
				)
			);
		}

		// Used to denote post states for special pages.
		if ( ! function_exists( 'get_post_states' ) ) {
			require_once ABSPATH . 'wp-admin/includes/template.php';
		}

		// Register each menu as a Customizer section, and add each menu item to each menu.
		foreach ( $menus as $menu ) {
			$menu_id = $menu-&gt;term_id;

			// Create a section for each menu.
			$section_id = 'nav_menu[' . $menu_id . ']';
			$this-&gt;manager-&gt;add_section(
				new WP_Customize_Nav_Menu_Section(
					$this-&gt;manager,
					$section_id,
					array(
						'title'    =&gt; html_entity_decode( $menu-&gt;name, ENT_QUOTES, get_bloginfo( 'charset' ) ),
						'priority' =&gt; 10,
						'panel'    =&gt; 'nav_menus',
					)
				)
			);

			$nav_menu_setting_id = 'nav_menu[' . $menu_id . ']';
			$this-&gt;manager-&gt;add_setting(
				new WP_Customize_Nav_Menu_Setting(
					$this-&gt;manager,
					$nav_menu_setting_id,
					array(
						'transport' =&gt; 'postMessage',
					)
				)
			);

			// Add the menu contents.
			$menu_items = (array) wp_get_nav_menu_items( $menu_id );

			foreach ( array_values( $menu_items ) as $i =&gt; $item ) {

				// Create a setting for each menu item (which doesn't actually manage data, currently).
				$menu_item_setting_id = 'nav_menu_item[' . $item-&gt;ID . ']';

				$value = (array) $item;
				if ( empty( $value['post_title'] ) ) {
					$value['title'] = '';
				}

				$value['nav_menu_term_id'] = $menu_id;
				$this-&gt;manager-&gt;add_setting(
					new WP_Customize_Nav_Menu_Item_Setting(
						$this-&gt;manager,
						$menu_item_setting_id,
						array(
							'value'     =&gt; $value,
							'transport' =&gt; 'postMessage',
						)
					)
				);

				// Create a control for each menu item.
				$this-&gt;manager-&gt;add_control(
					new WP_Customize_Nav_Menu_Item_Control(
						$this-&gt;manager,
						$menu_item_setting_id,
						array(
							'label'    =&gt; $item-&gt;title,
							'section'  =&gt; $section_id,
							'priority' =&gt; 10 + $i,
						)
					)
				);
			}

			// Note: other controls inside of this section get added dynamically in JS via the MenuSection.ready() function.
		}

		// Add the add-new-menu section and controls.
		$this-&gt;manager-&gt;add_section(
			'add_menu',
			array(
				'type'     =&gt; 'new_menu',
				'title'    =&gt; __( 'New Menu' ),
				'panel'    =&gt; 'nav_menus',
				'priority' =&gt; 20,
			)
		);

		$this-&gt;manager-&gt;add_setting(
			new WP_Customize_Filter_Setting(
				$this-&gt;manager,
				'nav_menus_created_posts',
				array(
					'transport'         =&gt; 'postMessage',
					'type'              =&gt; 'option', // To prevent theme prefix in changeset.
					'default'           =&gt; array(),
					'sanitize_callback' =&gt; array( $this, 'sanitize_nav_menus_created_posts' ),
				)
			)
		);
	}

	/**
	 * Get the base10 intval.
	 *
	 * This is used as a setting's sanitize_callback; we can't use just plain
	 * intval because the second argument is not what intval() expects.
	 *
	 * @since 4.3.0
	 *
	 * @param mixed $value Number to convert.
	 * @return int Integer.
	 */
	public function intval_base10( $value ) {
		return intval( $value, 10 );
	}

	/**
	 * Return an array of all the available item types.
	 *
	 * @since 4.3.0
	 * @since 4.7.0  Each array item now includes a `$type_label` in addition to `$title`, `$type`, and `$object`.
	 *
	 * @return array The available menu item types.
	 */
	public function available_item_types() {
		$item_types = array();

		$post_types = get_post_types( array( 'show_in_nav_menus' =&gt; true ), 'objects' );
		if ( $post_types ) {
			foreach ( $post_types as $slug =&gt; $post_type ) {
				$item_types[] = array(
					'title'      =&gt; $post_type-&gt;labels-&gt;name,
					'type_label' =&gt; $post_type-&gt;labels-&gt;singular_name,
					'type'       =&gt; 'post_type',
					'object'     =&gt; $post_type-&gt;name,
				);
			}
		}

		$taxonomies = get_taxonomies( array( 'show_in_nav_menus' =&gt; true ), 'objects' );
		if ( $taxonomies ) {
			foreach ( $taxonomies as $slug =&gt; $taxonomy ) {
				if ( 'post_format' === $taxonomy &amp;&amp; ! current_theme_supports( 'post-formats' ) ) {
					continue;
				}
				$item_types[] = array(
					'title'      =&gt; $taxonomy-&gt;labels-&gt;name,
					'type_label' =&gt; $taxonomy-&gt;labels-&gt;singular_name,
					'type'       =&gt; 'taxonomy',
					'object'     =&gt; $taxonomy-&gt;name,
				);
			}
		}

		/**
		 * Filters the available menu item types.
		 *
		 * @since 4.3.0
		 * @since 4.7.0  Each array item now includes a `$type_label` in addition to `$title`, `$type`, and `$object`.
		 *
		 * @param array $item_types Navigation menu item types.
		 */
		$item_types = apply_filters( 'customize_nav_menu_available_item_types', $item_types );

		return $item_types;
	}

	/**
	 * Add a new `auto-draft` post.
	 *
	 * @since 4.7.0
	 *
	 * @param array $postarr {
	 *     Post array. Note that post_status is overridden to be `auto-draft`.
	 *
	 * @var string $post_title   Post title. Required.
	 * @var string $post_type    Post type. Required.
	 * @var string $post_name    Post name.
	 * @var string $post_content Post content.
	 * }
	 * @return WP_Post|WP_Error Inserted auto-draft post object or error.
	 */
	public function insert_auto_draft_post( $postarr ) {
		if ( ! isset( $postarr['post_type'] ) ) {
			return new WP_Error( 'unknown_post_type', __( 'Invalid post type.' ) );
		}
		if ( empty( $postarr['post_title'] ) ) {
			return new WP_Error( 'empty_title', __( 'Empty title.' ) );
		}
		if ( ! empty( $postarr['post_status'] ) ) {
			return new WP_Error( 'status_forbidden', __( 'Status is forbidden.' ) );
		}

		/*
		 * If the changeset is a draft, this will change to draft the next time the changeset
		 * is updated; otherwise, auto-draft will persist in autosave revisions, until save.
		 */
		$postarr['post_status'] = 'auto-draft';

		// Auto-drafts are allowed to have empty post_names, so it has to be explicitly set.
		if ( empty( $postarr['post_name'] ) ) {
			$postarr['post_name'] = sanitize_title( $postarr['post_title'] );
		}
		if ( ! isset( $postarr['meta_input'] ) ) {
			$postarr['meta_input'] = array();
		}
		$postarr['meta_input']['_customize_draft_post_name'] = $postarr['post_name'];
		$postarr['meta_input']['_customize_changeset_uuid']  = $this-&gt;manager-&gt;changeset_uuid();
		unset( $postarr['post_name'] );

		add_filter( 'wp_insert_post_empty_content', '__return_false', 1000 );
		$r = wp_insert_post( wp_slash( $postarr ), true );
		remove_filter( 'wp_insert_post_empty_content', '__return_false', 1000 );

		if ( is_wp_error( $r ) ) {
			return $r;
		} else {
			return get_post( $r );
		}
	}

	/**
	 * Ajax handler for adding a new auto-draft post.
	 *
	 * @since 4.7.0
	 */
	public function ajax_insert_auto_draft_post() {
		if ( ! check_ajax_referer( 'customize-menus', 'customize-menus-nonce', false ) ) {
			wp_send_json_error( 'bad_nonce', 400 );
		}

		if ( ! current_user_can( 'customize' ) ) {
			wp_send_json_error( 'customize_not_allowed', 403 );
		}

		if ( empty( $_POST['params'] ) || ! is_array( $_POST['params'] ) ) {
			wp_send_json_error( 'missing_params', 400 );
		}

		$params         = wp_unslash( $_POST['params'] );
		$illegal_params = array_diff( array_keys( $params ), array( 'post_type', 'post_title' ) );
		if ( ! empty( $illegal_params ) ) {
			wp_send_json_error( 'illegal_params', 400 );
		}

		$params = array_merge(
			array(
				'post_type'  =&gt; '',
				'post_title' =&gt; '',
			),
			$params
		);

		if ( empty( $params['post_type'] ) || ! post_type_exists( $params['post_type'] ) ) {
			status_header( 400 );
			wp_send_json_error( 'missing_post_type_param' );
		}

		$post_type_object = get_post_type_object( $params['post_type'] );
		if ( ! current_user_can( $post_type_object-&gt;cap-&gt;create_posts ) || ! current_user_can( $post_type_object-&gt;cap-&gt;publish_posts ) ) {
			status_header( 403 );
			wp_send_json_error( 'insufficient_post_permissions' );
		}

		$params['post_title'] = trim( $params['post_title'] );
		if ( '' === $params['post_title'] ) {
			status_header( 400 );
			wp_send_json_error( 'missing_post_title' );
		}

		$r = $this-&gt;insert_auto_draft_post( $params );
		if ( is_wp_error( $r ) ) {
			$error = $r;
			if ( ! empty( $post_type_object-&gt;labels-&gt;singular_name ) ) {
				$singular_name = $post_type_object-&gt;labels-&gt;singular_name;
			} else {
				$singular_name = __( 'Post' );
			}

			$data = array(
				/* translators: 1: Post type name, 2: Error message. */
				'message' =&gt; sprintf( __( '%1$s could not be created: %2$s' ), $singular_name, $error-&gt;get_error_message() ),
			);
			wp_send_json_error( $data );
		} else {
			$post = $r;
			$data = array(
				'post_id' =&gt; $post-&gt;ID,
				'url'     =&gt; get_permalink( $post-&gt;ID ),
			);
			wp_send_json_success( $data );
		}
	}

	/**
	 * Print the JavaScript templates used to render Menu Customizer components.
	 *
	 * Templates are imported into the JS use wp.template.
	 *
	 * @since 4.3.0
	 */
	public function print_templates() {
		?&gt;
		&lt;script type=&quot;text/html&quot; id=&quot;tmpl-available-menu-item&quot;&gt;
			&lt;li id=&quot;menu-item-tpl-{{ data.id }}&quot; class=&quot;menu-item-tpl&quot; data-menu-item-id=&quot;{{ data.id }}&quot;&gt;
				&lt;div class=&quot;menu-item-bar&quot;&gt;
					&lt;div class=&quot;menu-item-handle&quot;&gt;
						&lt;span class=&quot;item-type&quot; aria-hidden=&quot;true&quot;&gt;{{ data.type_label }}&lt;/span&gt;
						&lt;span class=&quot;item-title&quot; aria-hidden=&quot;true&quot;&gt;
							&lt;span class=&quot;menu-item-title&lt;# if ( ! data.title ) { #&gt; no-title&lt;# } #&gt;&quot;&gt;{{ data.title || wp.customize.Menus.data.l10n.untitled }}&lt;/span&gt;
						&lt;/span&gt;
						&lt;button type=&quot;button&quot; class=&quot;button-link item-add&quot;&gt;
							&lt;span class=&quot;screen-reader-text&quot;&gt;
							&lt;?php
								/* translators: 1: Title of a menu item, 2: Type of a menu item. */
								printf( __( 'Add to menu: %1$s (%2$s)' ), '{{ data.title || wp.customize.Menus.data.l10n.untitled }}', '{{ data.type_label }}' );
							?&gt;
							&lt;/span&gt;
						&lt;/button&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/li&gt;
		&lt;/script&gt;

		&lt;script type=&quot;text/html&quot; id=&quot;tmpl-menu-item-reorder-nav&quot;&gt;
			&lt;div class=&quot;menu-item-reorder-nav&quot;&gt;
				&lt;?php
				printf(
					'&lt;button type=&quot;button&quot; class=&quot;menus-move-up&quot;&gt;%1$s&lt;/button&gt;&lt;button type=&quot;button&quot; class=&quot;menus-move-down&quot;&gt;%2$s&lt;/button&gt;&lt;button type=&quot;button&quot; class=&quot;menus-move-left&quot;&gt;%3$s&lt;/button&gt;&lt;button type=&quot;button&quot; class=&quot;menus-move-right&quot;&gt;%4$s&lt;/button&gt;',
					__( 'Move up' ),
					__( 'Move down' ),
					__( 'Move one level up' ),
					__( 'Move one level down' )
				);
				?&gt;
			&lt;/div&gt;
		&lt;/script&gt;

		&lt;script type=&quot;text/html&quot; id=&quot;tmpl-nav-menu-delete-button&quot;&gt;
			&lt;div class=&quot;menu-delete-item&quot;&gt;
				&lt;button type=&quot;button&quot; class=&quot;button-link button-link-delete&quot;&gt;
					&lt;?php _e( 'Delete Menu' ); ?&gt;
				&lt;/button&gt;
			&lt;/div&gt;
		&lt;/script&gt;

		&lt;script type=&quot;text/html&quot; id=&quot;tmpl-nav-menu-submit-new-button&quot;&gt;
			&lt;p id=&quot;customize-new-menu-submit-description&quot;&gt;&lt;?php _e( 'Click &amp;#8220;Next&amp;#8221; to start adding links to your new menu.' ); ?&gt;&lt;/p&gt;
			&lt;button id=&quot;customize-new-menu-submit&quot; type=&quot;button&quot; class=&quot;button&quot; aria-describedby=&quot;customize-new-menu-submit-description&quot;&gt;&lt;?php _e( 'Next' ); ?&gt;&lt;/button&gt;
		&lt;/script&gt;

		&lt;script type=&quot;text/html&quot; id=&quot;tmpl-nav-menu-locations-header&quot;&gt;
			&lt;span class=&quot;customize-control-title customize-section-title-menu_locations-heading&quot;&gt;{{ data.l10n.locationsTitle }}&lt;/span&gt;
			&lt;p class=&quot;customize-control-description customize-section-title-menu_locations-description&quot;&gt;{{ data.l10n.locationsDescription }}&lt;/p&gt;
		&lt;/script&gt;

		&lt;script type=&quot;text/html&quot; id=&quot;tmpl-nav-menu-create-menu-section-title&quot;&gt;
			&lt;p class=&quot;add-new-menu-notice&quot;&gt;
				&lt;?php _e( 'It doesn&amp;#8217;t look like your site has any menus yet. Want to build one? Click the button to start.' ); ?&gt;
			&lt;/p&gt;
			&lt;p class=&quot;add-new-menu-notice&quot;&gt;
				&lt;?php _e( 'You&amp;#8217;ll create a menu, assign it a location, and add menu items like links to pages and categories. If your theme has multiple menu areas, you might need to create more than one.' ); ?&gt;
			&lt;/p&gt;
			&lt;h3&gt;
				&lt;button type=&quot;button&quot; class=&quot;button customize-add-menu-button&quot;&gt;
					&lt;?php _e( 'Create New Menu' ); ?&gt;
				&lt;/button&gt;
			&lt;/h3&gt;
		&lt;/script&gt;
		&lt;?php
	}

	/**
	 * Print the HTML template used to render the add-menu-item frame.
	 *
	 * @since 4.3.0
	 */
	public function available_items_template() {
		?&gt;
		&lt;div id=&quot;available-menu-items&quot; class=&quot;accordion-container&quot;&gt;
			&lt;div class=&quot;customize-section-title&quot;&gt;
				&lt;button type=&quot;button&quot; class=&quot;customize-section-back&quot; tabindex=&quot;-1&quot;&gt;
					&lt;span class=&quot;screen-reader-text&quot;&gt;&lt;?php _e( 'Back' ); ?&gt;&lt;/span&gt;
				&lt;/button&gt;
				&lt;h3&gt;
					&lt;span class=&quot;customize-action&quot;&gt;
						&lt;?php
							/* translators: &amp;#9656; is the unicode right-pointing triangle. %s: Section title in the Customizer. */
							printf( __( 'Customizing &amp;#9656; %s' ), esc_html( $this-&gt;manager-&gt;get_panel( 'nav_menus' )-&gt;title ) );
						?&gt;
					&lt;/span&gt;
					&lt;?php _e( 'Add Menu Items' ); ?&gt;
				&lt;/h3&gt;
			&lt;/div&gt;
			&lt;div id=&quot;available-menu-items-search&quot; class=&quot;accordion-section cannot-expand&quot;&gt;
				&lt;div class=&quot;accordion-section-title&quot;&gt;
					&lt;label class=&quot;screen-reader-text&quot; for=&quot;menu-items-search&quot;&gt;&lt;?php _e( 'Search Menu Items' ); ?&gt;&lt;/label&gt;
					&lt;input type=&quot;text&quot; id=&quot;menu-items-search&quot; placeholder=&quot;&lt;?php esc_attr_e( 'Search menu items&amp;hellip;' ); ?&gt;&quot; aria-describedby=&quot;menu-items-search-desc&quot; /&gt;
					&lt;p class=&quot;screen-reader-text&quot; id=&quot;menu-items-search-desc&quot;&gt;&lt;?php _e( 'The search results will be updated as you type.' ); ?&gt;&lt;/p&gt;
					&lt;span class=&quot;spinner&quot;&gt;&lt;/span&gt;
				&lt;/div&gt;
				&lt;div class=&quot;search-icon&quot; aria-hidden=&quot;true&quot;&gt;&lt;/div&gt;
				&lt;button type=&quot;button&quot; class=&quot;clear-results&quot;&gt;&lt;span class=&quot;screen-reader-text&quot;&gt;&lt;?php _e( 'Clear Results' ); ?&gt;&lt;/span&gt;&lt;/button&gt;
				&lt;ul class=&quot;accordion-section-content available-menu-items-list&quot; data-type=&quot;search&quot;&gt;&lt;/ul&gt;
			&lt;/div&gt;
			&lt;?php

			// Ensure the page post type comes first in the list.
			$item_types     = $this-&gt;available_item_types();
			$page_item_type = null;
			foreach ( $item_types as $i =&gt; $item_type ) {
				if ( isset( $item_type['object'] ) &amp;&amp; 'page' === $item_type['object'] ) {
					$page_item_type = $item_type;
					unset( $item_types[ $i ] );
				}
			}

			$this-&gt;print_custom_links_available_menu_item();
			if ( $page_item_type ) {
				$this-&gt;print_post_type_container( $page_item_type );
			}
			// Containers for per-post-type item browsing; items are added with JS.
			foreach ( $item_types as $item_type ) {
				$this-&gt;print_post_type_container( $item_type );
			}
			?&gt;
		&lt;/div&gt;&lt;!-- #available-menu-items --&gt;
		&lt;?php
	}

	/**
	 * Print the markup for new menu items.
	 *
	 * To be used in the template #available-menu-items.
	 *
	 * @since 4.7.0
	 *
	 * @param array $available_item_type Menu item data to output, including title, type, and label.
	 * @return void
	 */
	protected function print_post_type_container( $available_item_type ) {
		$id = sprintf( 'available-menu-items-%s-%s', $available_item_type['type'], $available_item_type['object'] );
		?&gt;
		&lt;div id=&quot;&lt;?php echo esc_attr( $id ); ?&gt;&quot; class=&quot;accordion-section&quot;&gt;
			&lt;h4 class=&quot;accordion-section-title&quot; role=&quot;presentation&quot;&gt;
				&lt;?php echo esc_html( $available_item_type['title'] ); ?&gt;
				&lt;span class=&quot;spinner&quot;&gt;&lt;/span&gt;
				&lt;span class=&quot;no-items&quot;&gt;&lt;?php _e( 'No items' ); ?&gt;&lt;/span&gt;
				&lt;button type=&quot;button&quot; class=&quot;button-link&quot; aria-expanded=&quot;false&quot;&gt;
					&lt;span class=&quot;screen-reader-text&quot;&gt;
					&lt;?php
						/* translators: %s: Title of a section with menu items. */
						printf( __( 'Toggle section: %s' ), esc_html( $available_item_type['title'] ) );
					?&gt;
						&lt;/span&gt;
					&lt;span class=&quot;toggle-indicator&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;
				&lt;/button&gt;
			&lt;/h4&gt;
			&lt;div class=&quot;accordion-section-content&quot;&gt;
				&lt;?php if ( 'post_type' === $available_item_type['type'] ) : ?&gt;
					&lt;?php $post_type_obj = get_post_type_object( $available_item_type['object'] ); ?&gt;
					&lt;?php if ( current_user_can( $post_type_obj-&gt;cap-&gt;create_posts ) &amp;&amp; current_user_can( $post_type_obj-&gt;cap-&gt;publish_posts ) ) : ?&gt;
						&lt;div class=&quot;new-content-item&quot;&gt;
							&lt;label for=&quot;&lt;?php echo esc_attr( 'create-item-input-' . $available_item_type['object'] ); ?&gt;&quot; class=&quot;screen-reader-text&quot;&gt;&lt;?php echo esc_html( $post_type_obj-&gt;labels-&gt;add_new_item ); ?&gt;&lt;/label&gt;
							&lt;input type=&quot;text&quot; id=&quot;&lt;?php echo esc_attr( 'create-item-input-' . $available_item_type['object'] ); ?&gt;&quot; class=&quot;create-item-input&quot; placeholder=&quot;&lt;?php echo esc_attr( $post_type_obj-&gt;labels-&gt;add_new_item ); ?&gt;&quot;&gt;
							&lt;button type=&quot;button&quot; class=&quot;button add-content&quot;&gt;&lt;?php _e( 'Add' ); ?&gt;&lt;/button&gt;
						&lt;/div&gt;
					&lt;?php endif; ?&gt;
				&lt;?php endif; ?&gt;
				&lt;ul class=&quot;available-menu-items-list&quot; data-type=&quot;&lt;?php echo esc_attr( $available_item_type['type'] ); ?&gt;&quot; data-object=&quot;&lt;?php echo esc_attr( $available_item_type['object'] ); ?&gt;&quot; data-type_label=&quot;&lt;?php echo esc_attr( isset( $available_item_type['type_label'] ) ? $available_item_type['type_label'] : $available_item_type['type'] ); ?&gt;&quot;&gt;&lt;/ul&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;?php
	}

	/**
	 * Print the markup for available menu item custom links.
	 *
	 * @since 4.7.0
	 *
	 * @return void
	 */
	protected function print_custom_links_available_menu_item() {
		?&gt;
		&lt;div id=&quot;new-custom-menu-item&quot; class=&quot;accordion-section&quot;&gt;
			&lt;h4 class=&quot;accordion-section-title&quot; role=&quot;presentation&quot;&gt;
				&lt;?php _e( 'Custom Links' ); ?&gt;
				&lt;button type=&quot;button&quot; class=&quot;button-link&quot; aria-expanded=&quot;false&quot;&gt;
					&lt;span class=&quot;screen-reader-text&quot;&gt;&lt;?php _e( 'Toggle section: Custom Links' ); ?&gt;&lt;/span&gt;
					&lt;span class=&quot;toggle-indicator&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;
				&lt;/button&gt;
			&lt;/h4&gt;
			&lt;div class=&quot;accordion-section-content customlinkdiv&quot;&gt;
				&lt;input type=&quot;hidden&quot; value=&quot;custom&quot; id=&quot;custom-menu-item-type&quot; name=&quot;menu-item[-1][menu-item-type]&quot; /&gt;
				&lt;p id=&quot;menu-item-url-wrap&quot; class=&quot;wp-clearfix&quot;&gt;
					&lt;label class=&quot;howto&quot; for=&quot;custom-menu-item-url&quot;&gt;&lt;?php _e( 'URL' ); ?&gt;&lt;/label&gt;
					&lt;input id=&quot;custom-menu-item-url&quot; name=&quot;menu-item[-1][menu-item-url]&quot; type=&quot;text&quot; class=&quot;code menu-item-textbox&quot; placeholder=&quot;https://&quot;&gt;
				&lt;/p&gt;
				&lt;p id=&quot;menu-item-name-wrap&quot; class=&quot;wp-clearfix&quot;&gt;
					&lt;label class=&quot;howto&quot; for=&quot;custom-menu-item-name&quot;&gt;&lt;?php _e( 'Link Text' ); ?&gt;&lt;/label&gt;
					&lt;input id=&quot;custom-menu-item-name&quot; name=&quot;menu-item[-1][menu-item-title]&quot; type=&quot;text&quot; class=&quot;regular-text menu-item-textbox&quot;&gt;
				&lt;/p&gt;
				&lt;p class=&quot;button-controls&quot;&gt;
					&lt;span class=&quot;add-to-menu&quot;&gt;
						&lt;input type=&quot;submit&quot; class=&quot;button submit-add-to-menu right&quot; value=&quot;&lt;?php esc_attr_e( 'Add to Menu' ); ?&gt;&quot; name=&quot;add-custom-menu-item&quot; id=&quot;custom-menu-item-submit&quot;&gt;
						&lt;span class=&quot;spinner&quot;&gt;&lt;/span&gt;
					&lt;/span&gt;
				&lt;/p&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;?php
	}

	//
	// Start functionality specific to partial-refresh of menu changes in Customizer preview.
	//

	/**
	 * Nav menu args used for each instance, keyed by the args HMAC.
	 *
	 * @since 4.3.0
	 * @var array
	 */
	public $preview_nav_menu_instance_args = array();

	/**
	 * Filters arguments for dynamic nav_menu selective refresh partials.
	 *
	 * @since 4.5.0
	 *
	 * @param array|false $partial_args Partial args.
	 * @param string      $partial_id   Partial ID.
	 * @return array Partial args.
	 */
	public function customize_dynamic_partial_args( $partial_args, $partial_id ) {

		if ( preg_match( '/^nav_menu_instance\[[0-9a-f]{32}\]$/', $partial_id ) ) {
			if ( false === $partial_args ) {
				$partial_args = array();
			}
			$partial_args = array_merge(
				$partial_args,
				array(
					'type'                =&gt; 'nav_menu_instance',
					'render_callback'     =&gt; array( $this, 'render_nav_menu_partial' ),
					'container_inclusive' =&gt; true,
					'settings'            =&gt; array(), // Empty because the nav menu instance may relate to a menu or a location.
					'capability'          =&gt; 'edit_theme_options',
				)
			);
		}

		return $partial_args;
	}

	/**
	 * Add hooks for the Customizer preview.
	 *
	 * @since 4.3.0
	 */
	public function customize_preview_init() {
		add_action( 'wp_enqueue_scripts', array( $this, 'customize_preview_enqueue_deps' ) );
		add_filter( 'wp_nav_menu_args', array( $this, 'filter_wp_nav_menu_args' ), 1000 );
		add_filter( 'wp_nav_menu', array( $this, 'filter_wp_nav_menu' ), 10, 2 );
		add_filter( 'wp_footer', array( $this, 'export_preview_data' ), 1 );
		add_filter( 'customize_render_partials_response', array( $this, 'export_partial_rendered_nav_menu_instances' ) );
	}

	/**
	 * Make the auto-draft status protected so that it can be queried.
	 *
	 * @since 4.7.0
	 *
	 * @global array $wp_post_statuses List of post statuses.
	 */
	public function make_auto_draft_status_previewable() {
		global $wp_post_statuses;
		$wp_post_statuses['auto-draft']-&gt;protected = true;
	}

	/**
	 * Sanitize post IDs for posts created for nav menu items to be published.
	 *
	 * @since 4.7.0
	 *
	 * @param array $value Post IDs.
	 * @return array Post IDs.
	 */
	public function sanitize_nav_menus_created_posts( $value ) {
		$post_ids = array();
		foreach ( wp_parse_id_list( $value ) as $post_id ) {
			if ( empty( $post_id ) ) {
				continue;
			}
			$post = get_post( $post_id );
			if ( 'auto-draft' !== $post-&gt;post_status &amp;&amp; 'draft' !== $post-&gt;post_status ) {
				continue;
			}
			$post_type_obj = get_post_type_object( $post-&gt;post_type );
			if ( ! $post_type_obj ) {
				continue;
			}
			if ( ! current_user_can( $post_type_obj-&gt;cap-&gt;publish_posts ) || ! current_user_can( 'edit_post', $post_id ) ) {
				continue;
			}
			$post_ids[] = $post-&gt;ID;
		}
		return $post_ids;
	}

	/**
	 * Publish the auto-draft posts that were created for nav menu items.
	 *
	 * The post IDs will have been sanitized by already by
	 * `WP_Customize_Nav_Menu_Items::sanitize_nav_menus_created_posts()` to
	 * remove any post IDs for which the user cannot publish or for which the
	 * post is not an auto-draft.
	 *
	 * @since 4.7.0
	 *
	 * @param WP_Customize_Setting $setting Customizer setting object.
	 */
	public function save_nav_menus_created_posts( $setting ) {
		$post_ids = $setting-&gt;post_value();
		if ( ! empty( $post_ids ) ) {
			foreach ( $post_ids as $post_id ) {

				// Prevent overriding the status that a user may have prematurely updated the post to.
				$current_status = get_post_status( $post_id );
				if ( 'auto-draft' !== $current_status &amp;&amp; 'draft' !== $current_status ) {
					continue;
				}

				$target_status = 'attachment' === get_post_type( $post_id ) ? 'inherit' : 'publish';
				$args          = array(
					'ID'          =&gt; $post_id,
					'post_status' =&gt; $target_status,
				);
				$post_name     = get_post_meta( $post_id, '_customize_draft_post_name', true );
				if ( $post_name ) {
					$args['post_name'] = $post_name;
				}

				// Note that wp_publish_post() cannot be used because unique slugs need to be assigned.
				wp_update_post( wp_slash( $args ) );

				delete_post_meta( $post_id, '_customize_draft_post_name' );
			}
		}
	}

	/**
	 * Keep track of the arguments that are being passed to wp_nav_menu().
	 *
	 * @since 4.3.0
	 *
	 * @see wp_nav_menu()
	 * @see WP_Customize_Widgets::filter_dynamic_sidebar_params()
	 *
	 * @param array $args An array containing wp_nav_menu() arguments.
	 * @return array Arguments.
	 */
	public function filter_wp_nav_menu_args( $args ) {
		/*
		 * The following conditions determine whether or not this instance of
		 * wp_nav_menu() can use selective refreshed. A wp_nav_menu() can be
		 * selective refreshed if...
		 */
		$can_partial_refresh = (
			// ...if wp_nav_menu() is directly echoing out the menu (and thus isn't manipulating the string after generated),
			! empty( $args['echo'] )
			&amp;&amp;
			// ...and if the fallback_cb can be serialized to JSON, since it will be included in the placement context data,
			( empty( $args['fallback_cb'] ) || is_string( $args['fallback_cb'] ) )
			&amp;&amp;
			// ...and if the walker can also be serialized to JSON, since it will be included in the placement context data as well,
			( empty( $args['walker'] ) || is_string( $args['walker'] ) )
			// ...and if it has a theme location assigned or an assigned menu to display,
			&amp;&amp; (
				! empty( $args['theme_location'] )
				||
				( ! empty( $args['menu'] ) &amp;&amp; ( is_numeric( $args['menu'] ) || is_object( $args['menu'] ) ) )
			)
			&amp;&amp;
			// ...and if the nav menu would be rendered with a wrapper container element (upon which to attach data-* attributes).
			(
				! empty( $args['container'] )
				||
				( isset( $args['items_wrap'] ) &amp;&amp; '&lt;' === substr( $args['items_wrap'], 0, 1 ) )
			)
		);
		$args['can_partial_refresh'] = $can_partial_refresh;

		$exported_args = $args;

		// Empty out args which may not be JSON-serializable.
		if ( ! $can_partial_refresh ) {
			$exported_args['fallback_cb'] = '';
			$exported_args['walker']      = '';
		}

		/*
		 * Replace object menu arg with a term_id menu arg, as this exports better
		 * to JS and is easier to compare hashes.
		 */
		if ( ! empty( $exported_args['menu'] ) &amp;&amp; is_object( $exported_args['menu'] ) ) {
			$exported_args['menu'] = $exported_args['menu']-&gt;term_id;
		}

		ksort( $exported_args );
		$exported_args['args_hmac'] = $this-&gt;hash_nav_menu_args( $exported_args );

		$args['customize_preview_nav_menus_args']                            = $exported_args;
		$this-&gt;preview_nav_menu_instance_args[ $exported_args['args_hmac'] ] = $exported_args;
		return $args;
	}

	/**
	 * Prepares wp_nav_menu() calls for partial refresh.
	 *
	 * Injects attributes into container element.
	 *
	 * @since 4.3.0
	 *
	 * @see wp_nav_menu()
	 *
	 * @param string $nav_menu_content The HTML content for the navigation menu.
	 * @param object $args             An object containing wp_nav_menu() arguments.
	 * @return string Nav menu HTML with selective refresh attributes added if partial can be refreshed.
	 */
	public function filter_wp_nav_menu( $nav_menu_content, $args ) {
		if ( isset( $args-&gt;customize_preview_nav_menus_args['can_partial_refresh'] ) &amp;&amp; $args-&gt;customize_preview_nav_menus_args['can_partial_refresh'] ) {
			$attributes       = sprintf( ' data-customize-partial-id=&quot;%s&quot;', esc_attr( 'nav_menu_instance[' . $args-&gt;customize_preview_nav_menus_args['args_hmac'] . ']' ) );
			$attributes      .= ' data-customize-partial-type=&quot;nav_menu_instance&quot;';
			$attributes      .= sprintf( ' data-customize-partial-placement-context=&quot;%s&quot;', esc_attr( wp_json_encode( $args-&gt;customize_preview_nav_menus_args ) ) );
			$nav_menu_content = preg_replace( '#^(&lt;\w+)#', '$1 ' . str_replace( '\\', '\\\\', $attributes ), $nav_menu_content, 1 );
		}
		return $nav_menu_content;
	}

	/**
	 * Hashes (hmac) the nav menu arguments to ensure they are not tampered with when
	 * submitted in the Ajax request.
	 *
	 * Note that the array is expected to be pre-sorted.
	 *
	 * @since 4.3.0
	 *
	 * @param array $args The arguments to hash.
	 * @return string Hashed nav menu arguments.
	 */
	public function hash_nav_menu_args( $args ) {
		return wp_hash( serialize( $args ) );
	}

	/**
	 * Enqueue scripts for the Customizer preview.
	 *
	 * @since 4.3.0
	 */
	public function customize_preview_enqueue_deps() {
		wp_enqueue_script( 'customize-preview-nav-menus' ); // Note that we have overridden this.
	}

	/**
	 * Exports data from PHP to JS.
	 *
	 * @since 4.3.0
	 */
	public function export_preview_data() {

		// Why not wp_localize_script? Because we're not localizing, and it forces values into strings.
		$exports = array(
			'navMenuInstanceArgs' =&gt; $this-&gt;preview_nav_menu_instance_args,
		);
		printf( '&lt;script&gt;var _wpCustomizePreviewNavMenusExports = %s;&lt;/script&gt;', wp_json_encode( $exports ) );
	}

	/**
	 * Export any wp_nav_menu() calls during the rendering of any partials.
	 *
	 * @since 4.5.0
	 *
	 * @param array $response Response.
	 * @return array Response.
	 */
	public function export_partial_rendered_nav_menu_instances( $response ) {
		$response['nav_menu_instance_args'] = $this-&gt;preview_nav_menu_instance_args;
		return $response;
	}

	/**
	 * Render a specific menu via wp_nav_menu() using the supplied arguments.
	 *
	 * @since 4.3.0
	 *
	 * @see wp_nav_menu()
	 *
	 * @param WP_Customize_Partial $partial       Partial.
	 * @param array                $nav_menu_args Nav menu args supplied as container context.
	 * @return string|false
	 */
	public function render_nav_menu_partial( $partial, $nav_menu_args ) {
		unset( $partial );

		if ( ! isset( $nav_menu_args['args_hmac'] ) ) {
			// Error: missing_args_hmac.
			return false;
		}

		$nav_menu_args_hmac = $nav_menu_args['args_hmac'];
		unset( $nav_menu_args['args_hmac'] );

		ksort( $nav_menu_args );
		if ( ! hash_equals( $this-&gt;hash_nav_menu_args( $nav_menu_args ), $nav_menu_args_hmac ) ) {
			// Error: args_hmac_mismatch.
			return false;
		}

		ob_start();
		wp_nav_menu( $nav_menu_args );
		$content = ob_get_clean();

		return $content;
	}
}
</pre>
			</div>
			<p class="source-code-links">
				<span>
					<a href="#" class="show-complete-source">Expand full source code</a>
					<a href="#" class="less-complete-source">Collapse full source code</a>
				</span>
				<span><a href="https://core.trac.wordpress.org/browser/tags/5.8/src/wp-includes/class-wp-customize-nav-menus.php#L19">View on Trac</a></span>
			</p>
			</section>
		<hr />
		<section class="class-methods">
			<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h2 class="toc-heading" id="methods" tabindex="-1">Methods <a href="#methods" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Methods</span></a></h2>
			<ul>
									<li><a href="__construct/index.html">
							__construct</a>
						&mdash; Constructor.											</li>
									<li><a href="ajax_insert_auto_draft_post/index.html">
							ajax_insert_auto_draft_post</a>
						&mdash; Ajax handler for adding a new auto-draft post.											</li>
									<li><a href="ajax_load_available_items/index.html">
							ajax_load_available_items</a>
						&mdash; Ajax handler for loading available menu items.											</li>
									<li><a href="ajax_search_available_items/index.html">
							ajax_search_available_items</a>
						&mdash; Ajax handler for searching available menu items.											</li>
									<li><a href="available_item_types/index.html">
							available_item_types</a>
						&mdash; Return an array of all the available item types.											</li>
									<li><a href="available_items_template/index.html">
							available_items_template</a>
						&mdash; Print the HTML template used to render the add-menu-item frame.											</li>
									<li><a href="customize_dynamic_partial_args/index.html">
							customize_dynamic_partial_args</a>
						&mdash; Filters arguments for dynamic nav_menu selective refresh partials.											</li>
									<li><a href="customize_preview_enqueue_deps/index.html">
							customize_preview_enqueue_deps</a>
						&mdash; Enqueue scripts for the Customizer preview.											</li>
									<li><a href="customize_preview_init/index.html">
							customize_preview_init</a>
						&mdash; Add hooks for the Customizer preview.											</li>
									<li><a href="customize_register/index.html">
							customize_register</a>
						&mdash; Add the customizer settings and controls.											</li>
									<li><a href="enqueue_scripts/index.html">
							enqueue_scripts</a>
						&mdash; Enqueue scripts and styles for Customizer pane.											</li>
									<li><a href="export_partial_rendered_nav_menu_instances/index.html">
							export_partial_rendered_nav_menu_instances</a>
						&mdash; Export any wp_nav_menu() calls during the rendering of any partials.											</li>
									<li><a href="export_preview_data/index.html">
							export_preview_data</a>
						&mdash; Exports data from PHP to JS.											</li>
									<li><a href="filter_dynamic_setting_args/index.html">
							filter_dynamic_setting_args</a>
						&mdash; Filters a dynamic setting's constructor args.											</li>
									<li><a href="filter_dynamic_setting_class/index.html">
							filter_dynamic_setting_class</a>
						&mdash; Allow non-statically created settings to be constructed with custom WP_Customize_Setting subclass.											</li>
									<li><a href="filter_nonces/index.html">
							filter_nonces</a>
						&mdash; Adds a nonce for customizing menus.											</li>
									<li><a href="filter_wp_nav_menu/index.html">
							filter_wp_nav_menu</a>
						&mdash; Prepares wp_nav_menu() calls for partial refresh.											</li>
									<li><a href="filter_wp_nav_menu_args/index-2.html">
							filter_wp_nav_menu_args</a>
						&mdash; Keep track of the arguments that are being passed to wp_nav_menu().											</li>
									<li><a href="hash_nav_menu_args/index.html">
							hash_nav_menu_args</a>
						&mdash; Hashes (hmac) the nav menu arguments to ensure they are not tampered with when submitted in the Ajax request.											</li>
									<li><a href="insert_auto_draft_post/index.html">
							insert_auto_draft_post</a>
						&mdash; Add a new `auto-draft` post.											</li>
									<li><a href="intval_base10/index.html">
							intval_base10</a>
						&mdash; Get the base10 intval.											</li>
									<li><a href="load_available_items_query/index.html">
							load_available_items_query</a>
						&mdash; Performs the post_type and taxonomy queries for loading available menu items.											</li>
									<li><a href="make_auto_draft_status_previewable/index.html">
							make_auto_draft_status_previewable</a>
						&mdash; Make the auto-draft status protected so that it can be queried.											</li>
									<li><a href="print_custom_links_available_menu_item/index.html">
							print_custom_links_available_menu_item</a>
						&mdash; Print the markup for available menu item custom links.											</li>
									<li><a href="print_post_type_container/index.html">
							print_post_type_container</a>
						&mdash; Print the markup for new menu items.											</li>
									<li><a href="print_templates/index.html">
							print_templates</a>
						&mdash; Print the JavaScript templates used to render Menu Customizer components.											</li>
									<li><a href="render_menu/index.html">
							render_menu</a>
						&mdash; Render a specific menu via wp_nav_menu() using the supplied arguments.											</li>
									<li><a href="render_nav_menu_partial/index.html">
							render_nav_menu_partial</a>
						&mdash; Render a specific menu via wp_nav_menu() using the supplied arguments.											</li>
									<li><a href="sanitize_nav_menus_created_posts/index.html">
							sanitize_nav_menus_created_posts</a>
						&mdash; Sanitize post IDs for posts created for nav menu items to be published.											</li>
									<li><a href="save_nav_menus_created_posts/index.html">
							save_nav_menus_created_posts</a>
						&mdash; Publish the auto-draft posts that were created for nav menu items.											</li>
									<li><a href="search_available_items_query/index.html">
							search_available_items_query</a>
						&mdash; Performs post queries for available-item searching.											</li>
							</ul>
		</section>
		<hr />
	<section class="changelog">
		<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h2 class="toc-heading" id="changelog" tabindex="-1">Changelog <a href="#changelog" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">Changelog</span></a></h2>

		<table>
			<caption class="screen-reader-text">Changelog</caption>
			<thead>
				<tr>
					<th class="changelog-version">Version</th>
					<th class="changelog-desc">Description</th>
				</tr>
			</thead>

			<tbody>
									
					<tr>
						<td><a href="../../since/4.3.0/index.html" alt="WordPress 4.3.0">4.3.0</a></td>
						<td>Introduced.</td>
					</tr>
							</tbody>
		</table>
	</section>

	<hr />
	<section class="user-notes">
		<p class="toc-jump"><a href="#top">Top &uarr;</a></p><h2 class="toc-heading" id="user-contributed-notes" tabindex="-1">User Contributed Notes <a href="#user-contributed-notes" class="anchor"><span aria-hidden="true">#</span><span class="screen-reader-text">User Contributed Notes</span></a></h2>
		
<div id="comments" class="comments-area">

	
	
			<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small></small></h3><p>You must <a href="https://login.wordpress.org/?redirect_to=https%3A%2F%2Fdeveloper.wordpress.org%2Freference%2Fclasses%2Fwp_customize_nav_menus%2F%23respond">log in</a> before being able to contribute a note or feedback.</p>	</div><!-- #respond -->
		
	
</div><!-- #comments -->
	</section>
</div>

</article>

			
		
		</main><!-- #main -->
	</div><!-- #primary -->
	</div><!-- #content -->

</div><!-- #page -->


<div id="wporg-footer">
	<div class="wrapper">
		<ul>
			<li><a href="http://wordpress.org/about/" title="An introduction to the WordPress project">About</a></li>
			<li><a href="http://wordpress.org/news/" title="News and Updates">Blog</a></li>
			<li><a href="http://wordpress.org/hosting/" title="Recommended web hosting providers">Hosting</a></li>
			<li><a href="https://wordpressfoundation.org/donate/" title="Donate to the WordPress Foundation">Donate</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.org/support/" title="Forums, documentation, and other resources">Support</a></li>
			<li><a href="../../../index.html" title="Resources for WordPress developers">Developers</a></li>
			<li><a href="http://make.wordpress.org/" title="Give back to WordPress through code, support, translation and more">Get Involved</a></li>
			<li><a href="http://learn.wordpress.org/" title="Workshops and training materials">Learn</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.org/showcase/" title="Some of the best WordPress sites on the Web">Showcase</a></li>
			<li><a href="http://wordpress.org/plugins/" title="Add extra functionality to WordPress">Plugins</a></li>
			<li><a href="http://wordpress.org/themes/" title="Make your WordPress pretty">Themes</a></li>
		</ul>

		<ul>
			<li><a href="http://central.wordcamp.org/" title="Find a WordPress event near you">WordCamp</a></li>
			<li><a href="http://wordpress.tv/" title="Videos, tutorials, and WordCamp sessions">WordPress.TV</a></li>
			<li><a href="http://buddypress.org/" title="A set of plugins to transform your WordPress into a social network">BuddyPress</a></li>
			<li><a href="http://bbpress.org/" title="Fast, slick forums built on WordPress">bbPress</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.com/?ref=wporg-footer" title="Hassle-free WordPress hosting">WordPress.com</a></li>
			<li><a href="http://ma.tt/" title="Co-founder of WordPress, an example of what WordPress can do">Matt</a></li>
			<li><a href="http://wordpress.org/about/privacy/" title="WordPress.org Privacy Policy">Privacy</a></li>
			<li><a href="https://publiccode.eu/" target="_blank">Public Code</a></li>
		</ul>

		<ul class="social-media-links">
			<li><span class="dashicons dashicons-twitter"></span><a href="https://twitter.com/WordPress" title="Follow @WordPress on Twitter">@WordPress</a></li>
			<li><span class="dashicons dashicons-facebook"></span><a href="https://www.facebook.com/WordPress/" title="Like WordPress on Facebook">WordPress</a></li>
		</ul>
	</div>

		<p class="cip cip-image">Code is Poetry.</p>
</div>

<script src="../../../../s.w.org/style/js/navigation.min.js?20190128"></script>

<link rel='stylesheet' id='buttons-css'  href='../../../wp-includes/css/buttons.min.css?ver=5.9-alpha-51701' type='text/css' media='all' />
<script type='text/javascript' src='../../../wp-includes/js/hoverintent-js.min.js?ver=2.2.1' id='hoverintent-js-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/admin-bar.min.js?ver=5.9-alpha-51701' id='admin-bar-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/navigation.js?ver=20181209' id='wporg-developer-navigation-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/skip-link-focus-fix.js?ver=20130115' id='wporg-developer-skip-link-focus-fix-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/search.js?ver=20150430' id='wporg-developer-search-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/menu.js?ver=20180201' id='wporg-developer-menu-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/awesomplete.min.js?ver=20160322' id='awesomplete-js'></script>
<script type='text/javascript' id='autocomplete-js-extra'>
/* <![CDATA[ */
var autocomplete = {"ajaxurl":"https:\/\/developer.wordpress.org\/wp-admin\/admin-ajax.php","nonce":"8a60f70c4b"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/autocomplete.js?ver=20160524' id='autocomplete-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/function-reference.js?ver=20180724' id='wporg-developer-function-reference-js'></script>
<script type='text/javascript' id='quicktags-js-extra'>
/* <![CDATA[ */
var quicktagsL10n = {"closeAllOpenTags":"Close all open tags","closeTags":"close tags","enterURL":"Enter the URL","enterImageURL":"Enter the URL of the image","enterImageDescription":"Enter a description of the image","textdirection":"text direction","toggleTextdirection":"Toggle Editor Text Direction","dfw":"Distraction-free writing mode","strong":"Bold","strongClose":"Close bold tag","em":"Italic","emClose":"Close italic tag","link":"Insert link","blockquote":"Blockquote","blockquoteClose":"Close blockquote tag","del":"Deleted text (strikethrough)","delClose":"Close deleted text tag","ins":"Inserted text","insClose":"Close inserted text tag","image":"Insert image","ul":"Bulleted list","ulClose":"Close bulleted list tag","ol":"Numbered list","olClose":"Close numbered list tag","li":"List item","liClose":"Close list item tag","code":"Code","codeClose":"Close code tag","more":"Insert Read More tag"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-includes/js/quicktags.min.js?ver=5.9-alpha-51701' id='quicktags-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/user-notes.js?ver=20200110' id='wporg-developer-user-notes-js'></script>
<script type='text/javascript' id='wporg-developer-user-notes-feedback-js-extra'>
/* <![CDATA[ */
var wporg_note_feedback = {"show":"Show Feedback","hide":"Hide Feedback"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/user-notes-feedback.js?ver=20181023' id='wporg-developer-user-notes-feedback-js'></script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/tabs.js?ver=20160824' id='wporg-developer-tabs-js'></script>
<script type='text/javascript' id='wporg-developer-preview-js-extra'>
/* <![CDATA[ */
var wporg_note_preview = {"ajaxurl":"https:\/\/developer.wordpress.org\/wp-admin\/admin-ajax.php","nonce":"504933b60e","preview":"preview note","preview_empty":"Nothing to preview","is_admin":""};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/themes/pub/wporg-developer/js/user-notes-preview.js?ver=20200111' id='wporg-developer-preview-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/wp-embed.min.js?ver=5.9-alpha-51701' id='wp-embed-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/dist/vendor/regenerator-runtime.min.js?ver=0.13.7' id='regenerator-runtime-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/dist/vendor/wp-polyfill.min.js?ver=3.15.0' id='wp-polyfill-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/dist/dom-ready.min.js?ver=71883072590656bf22c74c7b887df3dd' id='wp-dom-ready-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/dist/hooks.min.js?ver=a7edae857aab69d69fa10d5aef23a5de' id='wp-hooks-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/dist/i18n.min.js?ver=5f1269854226b4dd90450db411a12b79' id='wp-i18n-js'></script>
<script type='text/javascript' id='wp-i18n-js-after'>
wp.i18n.setLocaleData( { 'text direction\u0004ltr': [ 'ltr' ] } );
</script>
<script type='text/javascript' id='wp-a11y-js-translations'>
( function( domain, translations ) {
	var localeData = translations.locale_data[ domain ] || translations.locale_data.messages;
	localeData[""].domain = domain;
	wp.i18n.setLocaleData( localeData, domain );
} )( "default", { "locale_data": { "messages": { "": {} } } } );
</script>
<script type='text/javascript' src='../../../wp-includes/js/dist/a11y.min.js?ver=0ac8327cc1c40dcfdf29716affd7ac63' id='wp-a11y-js'></script>
<script type='text/javascript' id='wplink-js-extra'>
/* <![CDATA[ */
var wpLinkL10n = {"title":"Insert\/edit link","update":"Update","save":"Add Link","noTitle":"(no title)","noMatchesFound":"No results found.","linkSelected":"Link selected.","linkInserted":"Link inserted.","minInputLength":"3"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-includes/js/wplink.min.js?ver=5.9-alpha-51701' id='wplink-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/jquery/ui/core.min.js?ver=1.12.1' id='jquery-ui-core-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/jquery/ui/menu.min.js?ver=1.12.1' id='jquery-ui-menu-js'></script>
<script type='text/javascript' id='jquery-ui-autocomplete-js-extra'>
/* <![CDATA[ */
var uiAutocompleteL10n = {"noResults":"No results found.","oneResult":"1 result found. Use up and down arrow keys to navigate.","manyResults":"%d results found. Use up and down arrow keys to navigate.","itemSelected":"Item selected."};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-includes/js/jquery/ui/autocomplete.min.js?ver=1.12.1' id='jquery-ui-autocomplete-js'></script>

		<script type="text/javascript">
		tinyMCEPreInit = {
			baseURL: "https://developer.wordpress.org/wp-includes/js/tinymce",
			suffix: ".min",
						mceInit: {},
			qtInit: {'comment':{id:"comment",buttons:"strong,em,ul,ol,li,link"}},
			ref: {plugins:"",theme:"modern",language:""},
			load_ext: function(url,lang){var sl=tinymce.ScriptLoader;sl.markDone(url+'/langs/'+lang+'.js');sl.markDone(url+'/langs/'+lang+'_dlg.js');}
		};
		</script>
				<script type="text/javascript">
		var ajaxurl = "../../../wp-admin/admin-ajax.html";
		( function() {
			var initialized = [];
			var initialize  = function() {
				var init, id, inPostbox, $wrap;
				var readyState = document.readyState;

				if ( readyState !== 'complete' && readyState !== 'interactive' ) {
					return;
				}

				for ( id in tinyMCEPreInit.mceInit ) {
					if ( initialized.indexOf( id ) > -1 ) {
						continue;
					}

					init      = tinyMCEPreInit.mceInit[id];
					$wrap     = tinymce.$( '#wp-' + id + '-wrap' );
					inPostbox = $wrap.parents( '.postbox' ).length > 0;

					if (
						! init.wp_skip_init &&
						( $wrap.hasClass( 'tmce-active' ) || ! tinyMCEPreInit.qtInit.hasOwnProperty( id ) ) &&
						( readyState === 'complete' || ( ! inPostbox && readyState === 'interactive' ) )
					) {
						tinymce.init( init );
						initialized.push( id );

						if ( ! window.wpActiveEditor ) {
							window.wpActiveEditor = id;
						}
					}
				}
			}

			if ( typeof tinymce !== 'undefined' ) {
				if ( tinymce.Env.ie && tinymce.Env.ie < 11 ) {
					tinymce.$( '.wp-editor-wrap ' ).removeClass( 'tmce-active' ).addClass( 'html-active' );
				} else {
					if ( document.readyState === 'complete' ) {
						initialize();
					} else {
						document.addEventListener( 'readystatechange', initialize );
					}
				}
			}

			if ( typeof quicktags !== 'undefined' ) {
				for ( id in tinyMCEPreInit.qtInit ) {
					quicktags( tinyMCEPreInit.qtInit[id] );

					if ( ! window.wpActiveEditor ) {
						window.wpActiveEditor = id;
					}
				}
			}
		}());
		</script>
				<div id="wp-link-backdrop" style="display: none"></div>
		<div id="wp-link-wrap" class="wp-core-ui" style="display: none" role="dialog" aria-labelledby="link-modal-title">
		<form id="wp-link" tabindex="-1">
		<input type="hidden" id="_ajax_linking_nonce" name="_ajax_linking_nonce" value="86f5a0a85d" />		<h1 id="link-modal-title">Insert/edit link</h1>
		<button type="button" id="wp-link-close"><span class="screen-reader-text">Close</span></button>
		<div id="link-selector">
			<div id="link-options">
				<p class="howto" id="wplink-enter-url">Enter the destination URL</p>
				<div>
					<label><span>URL</span>
					<input id="wp-link-url" type="text" aria-describedby="wplink-enter-url" /></label>
				</div>
				<div class="wp-link-text-field">
					<label><span>Link Text</span>
					<input id="wp-link-text" type="text" /></label>
				</div>
				<div class="link-target">
					<label><span></span>
					<input type="checkbox" id="wp-link-target" /> Open link in a new tab</label>
				</div>
			</div>
			<p class="howto" id="wplink-link-existing-content">Or link to existing content</p>
			<div id="search-panel">
				<div class="link-search-wrapper">
					<label>
						<span class="search-label">Search</span>
						<input type="search" id="wp-link-search" class="link-search-field" autocomplete="off" aria-describedby="wplink-link-existing-content" />
						<span class="spinner"></span>
					</label>
				</div>
				<div id="search-results" class="query-results" tabindex="0">
					<ul></ul>
					<div class="river-waiting">
						<span class="spinner"></span>
					</div>
				</div>
				<div id="most-recent-results" class="query-results" tabindex="0">
					<div class="query-notice" id="query-notice-message">
						<em class="query-notice-default">No search term specified. Showing recent items.</em>
						<em class="query-notice-hint screen-reader-text">Search or use up and down arrow keys to select an item.</em>
					</div>
					<ul></ul>
					<div class="river-waiting">
						<span class="spinner"></span>
					</div>
				</div>
			</div>
		</div>
		<div class="submitbox">
			<div id="wp-link-cancel">
				<button type="button" class="button">Cancel</button>
			</div>
			<div id="wp-link-update">
				<input type="submit" value="Add Link" class="button button-primary" id="wp-link-submit" name="wp-link-submit">
			</div>
		</div>
		</form>
		</div>
		</body>

<!-- Mirrored from developer.wordpress.org/reference/classes/wp_customize_nav_menus/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Aug 2021 17:21:16 GMT -->
</html>
