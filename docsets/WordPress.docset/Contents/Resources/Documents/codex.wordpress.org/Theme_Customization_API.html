<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">


<!-- Mirrored from codex.wordpress.org/Theme_Customization_API by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Aug 2021 16:37:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P24PF4B');</script>
<!--
<meta property="fb:page_id" content="6427302910" />
-->
<link rel="dns-prefetch" href="http://s.w.org/" />
<link rel="dns-prefetch" href="../fonts.googleapis.com/index.html" />
<link rel="dns-prefetch" href="http://fonts.gstatic.com/" />
<link rel="dns-prefetch" href="http://www.googletagmanager.com/" />
<meta name="google-site-verification" content="7VWES_-rcHBcmaQis9mSYamPfNwE03f4vyTj4pfuAw0" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Theme Customization API</title>
<link rel="canonical" href="Theme_Customization_API.html" />

<link rel="stylesheet" href="../s.w.org/style/codex-wp4.css?3" />
<meta name="referrer" content="always">

			<link href="../s.w.org/wp-includes/css/dashicons.min.css?20181204" rel="stylesheet" type="text/css" />
		<link href='../fonts.googleapis.com/css.css?family=Open+Sans:300italic,400italic,600italic,400,300,600&amp;subset=latin,cyrillic-ext,greek-ext,greek,vietnamese,latin-ext,cyrillic' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="../s.w.org/style/wp4-2.css?92" />

<link rel="shortcut icon" href="../s.w.org/favicon.ico?2" type="image/x-icon" />
<script type="text/javascript" src="../s.w.org/wp-includes/js/jquery/jquery.js?v=1.11.1"></script>
<script>document.cookie='devicePixelRatio='+((window.devicePixelRatio === undefined) ? 1 : window.devicePixelRatio)+'; path=/';</script>
<!--[if IE]>
    <script type="text/javascript" src="/skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" />
<![endif]-->

<script type="text/javascript">wgBreakFrames=false;wgContentLanguage='en';</script>


</head>


<body id="wordpress-org" class="wporg-responsive wporg-codex">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P24PF4B" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="wporg-header">
	<div class="wrapper">
	<h1><a href="http://wordpress.org/">WordPress.org</a></h1>				<div id="head-search">
		<form action="http://wordpress.org/search/do-search.php" method="get">
			<label for="global-search" class="screen-reader-text">Search WordPress.org for:</label>
			<input id="global-search" class="text" name="search" type="text" value="" maxlength="150" placeholder="Search WordPress.org" />
			<button type="submit" class="button"><span class="screen-reader-text">Submit</span></button>
		</form>
		</div>
				<div style="clear:both"></div>
		<button id="mobile-menu-button" aria-expanded="false"><span class="screen-reader-text">Toggle Menu</span></button>
		
<nav aria-label="Main Menu">
<ul id="wporg-header-menu">
<li class="menu-item"><a href='http://wordpress.org/showcase/' data-title='See some of the sites built on WordPress.'>Showcase</a></li>
<li class="menu-item"><a href='http://learn.wordpress.org/' data-title='Resources to help you learn more about WordPress and teach it to others.'>Learn</a></li>
<li class="menu-item"><a href='http://wordpress.org/themes/' data-title='Find just the right look for your website.'>Themes</a></li>
<li class="menu-item"><a href='http://wordpress.org/plugins/' data-title='Plugins can extend WordPress to do almost anything you can imagine.'>Plugins</a></li>
<li class="menu-item"><a href='http://wordpress.org/mobile/' data-title='Take your website on the go!'>Mobile</a></li>
<li class="menu-item"><a href='http://wordpress.org/support/' data-title='Forums, documentation, help.' aria-current="true" class="current">Support</a><ul class="nav-submenu"><li><a href='http://wordpress.org/support/' title='Documentation, tutorials, best practices.'>Documentation</a></li><li><a href='http://wordpress.org/support/forums/' title='Support and discussion forums.'>Forums</a></li></ul><div class="uparrow"></div></li>
<li class="menu-item"><a href='http://make.wordpress.org/' data-title='Contribute your knowledge.'>Get Involved</a><ul class="nav-submenu"><li><a href='http://wordpress.org/five-for-the-future/' title='How five percent is powering the next generation of the web'>Five for the Future</a></li></ul><div class="uparrow"></div></li>
<li class="menu-item"><a href='http://wordpress.org/about/' data-title='About the WordPress Organization, and where we&#039;re going.'>About</a></li>
<li class="menu-item"><a href='http://wordpress.org/news/' data-title='Come here for the latest scoop.'>Blog</a></li>
<li class="menu-item"><a href='http://wordpress.org/hosting/' data-title='Find a home for your blog.'>Hosting</a></li>
<li id="download" class="button download-button menu-item"><a href='http://wordpress.org/download/' data-title='Get it. Got it? Good.'>Get WordPress</a></li>
</ul>
</nav>
		<div style="clear:both"></div>
	</div>
</div>



<div id="headline">
	<div class="wrapper">
		<h2><a href="index.html">Codex</a></h2>
		
		<div class="portlet" id="p-personal">
		  <p class="login">Codex tools:
		     <a href="https://codex.wordpress.org/index.php?title=Special:UserLogin&amp;returnto=Theme+Customization+API">Log in</a> 		  </p>
		</div>
	</div>
</div>

<div id="pagebody">
	<div class="wrapper">	
		<div class="col-10" id="bodyContent">
			<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><div style="clear:both; background-color:#e5f5fa; border-left:4px solid #00a0d2; padding:10px 12px 8px; margin:0.5em auto 1.5em auto;"><span class="dashicons dashicons-info" style="color:#00a0d2"></span> Interested in functions, hooks, classes, or methods? Check out the new <a rel="nofollow" class="external text" href="../developer.wordpress.org/reference/index.html">WordPress Code Reference</a>!</div>
</div></div>			<h2 class="pagetitle">Theme Customization API</h2>
									<!-- start content -->
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="Multilingual_Codex.html" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<strong class="selflink">English</strong> • 
<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/テーマカスタマイズ">API 日本語</a> 
<a href="API_%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b8_%d1%82%d0%b5%d0%bc.html" title="API настройки тем">Русский</a> • 

 <small>(<a href="Multilingual_Codex.html#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Developing_for_the_Customizer"><span class="tocnumber">2</span> <span class="toctext">Developing for the Customizer</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Part_1:_Defining_Settings.2C_Controls.2C_Etc."><span class="tocnumber">3</span> <span class="toctext">Part 1: Defining Settings, Controls, Etc.</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Adding_a_New_Setting"><span class="tocnumber">3.1</span> <span class="toctext">Adding a New Setting</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Adding_a_New_Section"><span class="tocnumber">3.2</span> <span class="toctext">Adding a New Section</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Adding_a_New_Control"><span class="tocnumber">3.3</span> <span class="toctext">Adding a New Control</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Part_2:_Generating_Live_CSS"><span class="tocnumber">4</span> <span class="toctext">Part 2: Generating Live CSS</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Part_3:_Configure_Live_Preview_.28Optional.29"><span class="tocnumber">5</span> <span class="toctext">Part 3: Configure Live Preview (Optional)</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Step_1:_Update_Your_Settings"><span class="tocnumber">5.1</span> <span class="toctext">Step 1: Update Your Settings</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Step_2:_Create_a_JavaScript_File"><span class="tocnumber">5.2</span> <span class="toctext">Step 2: Create a JavaScript File</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Step_3:_Enqueue_Your_JavaScript"><span class="tocnumber">5.3</span> <span class="toctext">Step 3: Enqueue Your JavaScript</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Sample_Theme_Customization_Class"><span class="tocnumber">6</span> <span class="toctext">Sample Theme Customization Class</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#External_Resources"><span class="tocnumber">7</span> <span class="toctext">External Resources</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#Related"><span class="tocnumber">8</span> <span class="toctext">Related</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>For more up-to-date, detailed information about the Customizer API, please see the new official documentation in the theme handbook: <a rel="nofollow" class="external free" href="../developer.wordpress.org/themes/customize-api/index.html">https://developer.wordpress.org/themes/customize-api/</a>.
</p><p>The Theme Customization API, added in <a href="https://wordpress.org/support/wordpress-version/version-3-4/" title="Version 3.4">WordPress 3.4</a>, allows developers to customize and add controls to the "Appearance" &#8594; "Customize" admin screen. The Theme Customization screen (i.e. "Theme Customizer") allows site admins to tweak a theme's settings, color scheme or widgets, and see a preview of those changes in real time. 
</p><p>This page documents the Theme Customization API (Application Programming Interface), and how to implement it in your own themes.
</p><p>This article assumes you have already read <a href="Theme_Development.html" title="Theme Development">Theme Development</a> and <a href="Writing_a_Plugin.html" title="Writing a Plugin">Writing a Plugin</a>, which give an overview (and many details) of how to develop custom themes and plugins for WordPress. This article also requires a functional understanding of object-oriented programming. A familiarity with the WordPress <a href="Settings_API.html" title="Settings API">Settings API</a> should be very helpful as well.
</p><p><b>Note:</b> This information applies to WordPress <a href="https://wordpress.org/support/wordpress-version/version-3-4/" title="Version 3.4">Version 3.4</a> and higher.
</p>
<h2><span class="mw-headline" id="Developing_for_the_Customizer">Developing for the Customizer</span></h2>
<p>Whether you are a theme or plugin developer, you can use this API to add more powerful, interactive customization options to your theme or plugin.
</p><p>To add your own options to the Customizer, you need to use a minimum of 2 hooks:
</p>
<dl><dt><tt><a href="../developer.wordpress.org/reference/hooks/customize_register/index.html" title="Plugin API/Action Reference/customize register">customize_register</a></tt></dt>
<dd> This hook allows you to define new Customizer panels, sections, settings, and controls.</dd>
<dt><tt><a href="Plugin_API/Action_Reference/wp_head.html" title="Plugin API/Action Reference/wp head">wp_head</a></tt></dt>
<dd> This hook allows you to output custom-generated CSS so that your changes show up correctly on the live website.</dd></dl>
<p><b>Note:</b> Optionally, the <tt><a href="../developer.wordpress.org/reference/hooks/customize_preview_init/index.html" title="Plugin API/Action Reference/customize preview init">customize_preview_init</a></tt> hook can <i>also</i> be used for enqueuing custom JavaScript on the Customizer screen. JavaScript can be used for making the Customizer more responsive and powerful, but this step is not required.
</p><p><b>Important:</b> Do not conditionally load your Customizer code with an <code>is_admin()</code> check. If you only add your <code>customize_register</code> if <code>is_admin()</code>, then any panels, sections, or controls will be unavailable when the Customizer preview loads. As of WordPress 4.1, there are contextual panels, sections, and controls so that they can be displayed only on certain URLs being previewed. If you only register your panels, sections, and controls if <code>is_admin()</code> then you'll be effectively saying that these are not contextual to any URL on your site. For more information, see <a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/ticket/30387">#30387</a> and <a rel="nofollow" class="external text" href="https://core.trac.wordpress.org/ticket/29758">#29758</a>.
</p>
<h2><span class="mw-headline" id="Part_1:_Defining_Settings.2C_Controls.2C_Etc.">Part 1: Defining Settings, Controls, Etc.</span></h2>
<p>Any new Theme Customizer <b>settings</b>, <b>sections</b>, or <b>controls</b> must be defined from within a <tt><a href="../developer.wordpress.org/reference/hooks/customize_register/index.html" title="Plugin API/Action Reference/customize register">customize_register</a></tt> action. This action automatically loads the <tt>$wp_customize</tt> object, which is an instance of the <tt><a href="../developer.wordpress.org/reference/classes/wp_customize_manager/index.html" title="Class Reference/WP Customize Manager">WP_Customize_Manager</a></tt> class.
</p><p>First, define the action like this:
</p>
<pre>
function mytheme_customize_register( $wp_customize ) {
   //All our sections, settings, and controls will be added here
}
add_action( 'customize_register', 'mytheme_customize_register' );
</pre>
<p>Note that the <tt>$wp_customize</tt> object is passed automatically to the function, and all customizations you make to the Theme Customization page are performed through methods of the <tt>$wp_customize</tt> object.
</p><p>Next, you need to define your settings, then your sections, then your controls (controls need a section and a setting to function).
</p>
<h3><span class="mw-headline" id="Adding_a_New_Setting">Adding a New Setting</span></h3>
<p>Settings automatically use WordPress's theme_mod features to get/set settings for your theme.
</p><p>To add a new setting to your Theme Customizer, you need to call the <a href="../developer.wordpress.org/reference/classes/wp_customize_manager/add_setting/index.html" title="Class Reference\WP Customize Manager\add setting" class="mw-redirect">$wp_customize-&gt;add_setting()</a> method. By defining your setting this way, you don't need to do any extra work to create, save, or fetch settings for your theme.
</p><p>Adding a theme setting (within the 'customize_register' action) might look like this:
</p>
<pre>
$wp_customize-&gt;add_setting( 'header_textcolor' , array(
    'default'   =&gt; '#000000',
    'transport' =&gt; 'refresh',
) );
</pre>
<p><b>Note:</b> The '<tt>transport</tt>' argument is optional, and defaults to '<tt>refresh</tt>'. If left to default, then the theme customizer's preview window will update by completely reloading itself when this setting is changed. If you would prefer to avoid refreshes and improve responsiveness, you can set this to '<tt>postMessage</tt>' instead, then handle any styling updates <i>manually</i> with a bit of JavaScript (see the <b>Configure Live Preview</b> section below).
</p>
<h3><span class="mw-headline" id="Adding_a_New_Section">Adding a New Section</span></h3>
<p>Sections are groups of options. When you define new controls, they must be added to a section. Although you <i>can</i> add controls to existing default sections, we will briefly cover adding a <i>new</i> section.
</p><p>To add a new section to your Theme Customizer, you need to call the <tt><a href="../developer.wordpress.org/reference/classes/wp_customize_manager/add_section/index.html" title="Class Reference/WP Customize Manager/add section">$wp_customize-&gt;add_section()</a></tt> method.
</p><p>Adding a theme section (within the 'customize_register' action) might look like this:
</p>
<pre>
$wp_customize-&gt;add_section( 'mytheme_new_section_name' , array(
    'title'      =&gt; __( 'Visible Section Name', 'mytheme' ),
    'priority'   =&gt; 30,
) );
</pre>
<p>WordPress does include a few built-in sections. If you want to use any of the existing, built-in ones, you don't need to declare them with add_section(). Instead, refer to them by name. The following sections are built-in:
</p>
<ul><li><tt><b>title_tagline</b></tt> - Site Title &amp; Tagline (and Site Icon in WP 4.3+)</li>
<li><tt><b>colors</b></tt> - Colors</li>
<li><tt><b>header_image</b></tt> - Header Image</li>
<li><tt><b>background_image</b></tt> - Background Image</li>
<li><tt><b>nav</b></tt> - Navigation</li>
<li><tt><b>static_front_page</b></tt> - Static Front Page</li></ul>
<h3><span class="mw-headline" id="Adding_a_New_Control">Adding a New Control</span></h3>
<p>A control is an HTML form element that renders on the Theme Customizer page and allows admins to change a setting, and preview those changes in real time. Controls are linked to a single <i>setting</i>, and a single <i>section</i>.
</p><p>To add a new control to your Theme Customizer, you need to call the <tt><a href="../developer.wordpress.org/reference/classes/wp_customize_manager/add_control/index.html" title="Class Reference\WP Customize Manager\add control" class="mw-redirect">$wp_customize-&gt;add_control()</a></tt> method.
</p><p>Adding a control to a theme section (within the 'customize_register' action) might look like this:
</p>
<pre>
$wp_customize-&gt;add_control( new WP_Customize_Color_Control( $wp_customize, 'link_color', array(
	'label'      =&gt; __( 'Header Color', 'mytheme' ),
	'section'    =&gt; 'your_section_id',
	'settings'   =&gt; 'your_setting_id',
) ) );
</pre>
<p>Controllers have quite a few options, some of which require passing it another class (such as the <a href="../developer.wordpress.org/reference/classes/wp_customize_color_control/index.html" title="Class Reference\WP Customize Color Control" class="mw-redirect">WP_Customize_Color_Control()</a> class shown in the above example). For more examples, see the documentation for <a href="../developer.wordpress.org/reference/classes/wp_customize_manager/add_control/index.html" title="Class Reference\WP Customize Manager\add control" class="mw-redirect">add_control()</a>
</p>
<h2><span class="mw-headline" id="Part_2:_Generating_Live_CSS">Part 2: Generating Live CSS</span></h2>
<p>Finally, you just need to make sure that you're fetching the settings and outputting any necessary CSS into your header. If you defined your settings within a '<tt>customize_register</tt>' action, as described above, then getting your setting values is as simple as outputting css with '<tt>wp_head</tt>' action and fetching the values with <a href="get_theme_mod.html" title="get theme mod" class="mw-redirect">get_theme_mod()</a>
</p><p>For example, let's say you have a setting called '<tt>header_color</tt>' and it looks like this:
</p>
<pre>
$wp_customize-&gt;add_setting( 'header_color' , array(
    'default'     =&gt; '#000000',
    'transport'   =&gt; 'refresh',
) );
</pre>
<p>Your code to output the css into the header might look something like this:
</p>
<pre>
function mytheme_customize_css()
{
   &#160;?&gt;
         &lt;style type="text/css"&gt;
             h1 { color: &lt;?php echo get_theme_mod('header_color', '#000000');&#160;?&gt;; }
         &lt;/style&gt;
    &lt;?php
}
add_action( 'wp_head', 'mytheme_customize_css');
</pre>
<p>When you look at the page source you would see the following in the header:
</p>
<pre>
&lt;style type="text/css"&gt;
     h1 {color:#000000;}
&lt;/style&gt;
</pre>
<p>You will notice that the default value of #000000 is given for the color. Once this value is changed via the customizer, the new value will be shown. For example, let's say you wanted to change the color to white. In the customizer, you insert the hex value for white, #ffffff, click Save and Publish.
</p><p>Now in the page source you will see:
</p>
<pre>
&lt;style type="text/css"&gt;
.h1 {color:#ffffff;}
&lt;/style&gt;
</pre>
<p>At this point, your live theme customization options should be fully functional (<i>unless</i> the settings you defined in Part 1 explicitly use <tt>'transport'=&gt;'postMessage'</tt>).
</p><p><b>Tip:</b> At the end of this tutorial is a <i>Sample Theme Customization</i> class. This class contains a useful function (which is NOT part of WordPress) called <tt><b>generate_css()</b></tt> that can help you quickly and easily generate valid CSS for this step.
</p>
<h2><span class="mw-headline" id="Part_3:_Configure_Live_Preview_.28Optional.29">Part 3: Configure Live Preview (Optional)</span></h2>
<p>This step is optional, but can dramatically improve user experience. This technique uses a little custom JavaScript in combination with your settings for a faster, more interactive Theme Customizer. If this is <i>not</i> used, then updates are rendered by reloading the entire preview window.
</p><p>In order to create this custom JavaScript handler, you need to do the following:
</p>
<dl><dt><b>1</b> - Make sure your settings are all configured for live preview ( <tt>'transport'=&gt;'postMessage'</tt> )</dt>
<dt><b>2</b> - Create a new JavaScript file (e.g. <tt>theme-customize.js</tt>) to handle the live changes</dt>
<dt><b>3</b> - Create a hook for '<tt><a href="../developer.wordpress.org/reference/hooks/customize_preview_init/index.html" title="Plugin API/Action Reference/customize preview init">customize_preview_init</a></tt>' that enqueues the js file</dt></dl>
<p>We'll go through all 3 steps in detail...
</p>
<h3><span class="mw-headline" id="Step_1:_Update_Your_Settings">Step 1: Update Your Settings</span></h3>
<p>First, make sure that any custom settings you've created have <tt>'transport'=&gt;'postMessage'</tt> set (see <b>"Adding a New Setting"</b> above). This will disable the automatic refresh behavior when you change that setting, allowing you to define any custom JavaScript handling you like.
</p><p>Please note that all of WordPress's Theme Customizer settings use <tt>'transport'=&gt;'refresh'</tt> by default, so if you want to make the default, built-in Theme Customizer options also take advantage of this, you can easily update their transport method(s) within your '<tt><b>customize_register</b></tt>' hook function like this:
</p>
<pre>

$wp_customize-&gt;get_setting( 'blogname' )-&gt;transport = 'postMessage';
$wp_customize-&gt;get_setting( 'blogdescription' )-&gt;transport = 'postMessage';
$wp_customize-&gt;get_setting( 'header_textcolor' )-&gt;transport = 'postMessage';
$wp_customize-&gt;get_setting( 'background_color' )-&gt;transport = 'postMessage';

</pre>
<h3><span class="mw-headline" id="Step_2:_Create_a_JavaScript_File">Step 2: Create a JavaScript File</span></h3>
<p>Next, you need to create a new JavaScript file for all your custom handling. Generally, you'd call this <tt>theme-customizer.js</tt> and place it in your theme's <tt>'<i>js/</i></tt> folder, but you can call it whatever you want or place it where you want.
</p><p>The contents of your <tt>theme-customizer.js</tt> file might look like this:
</p>
<pre>

/**
 * This file adds some LIVE to the Theme Customizer live preview. To leverage
 * this, set your custom settings to 'postMessage' and then add your handling
 * here. Your javascript should grab settings from customizer controls, and 
 * then make any necessary changes to the page using jQuery.
 */
( function( $ ) {

	// Update the site title in real time...
	wp.customize( 'blogname', function( value ) {
		value.bind( function( newval ) {
			$( '#site-title a' ).html( newval );
		} );
	} );
	
	//Update the site description in real time...
	wp.customize( 'blogdescription', function( value ) {
		value.bind( function( newval ) {
			$( '.site-description' ).html( newval );
		} );
	} );

	//Update site title color in real time...
	wp.customize( 'header_textcolor', function( value ) {
		value.bind( function( newval ) {
			$('#site-title a').css('color', newval );
		} );
	} );

	//Update site background color...
	wp.customize( 'background_color', function( value ) {
		value.bind( function( newval ) {
			$('body').css('background-color', newval );
		} );
	} );
	
	//Update site link color in real time...
	wp.customize( 'link_textcolor', function( value ) {
		value.bind( function( newval ) {
			$('a').css('color', newval );
		} );
	} );
	
} )( jQuery );

</pre>
<p>As you can see from the example above,  a single basic handler looks like this:
</p>
<pre>

wp.customize( 'YOUR_SETTING_ID', function( value ) {
	value.bind( function( newval ) {
		//Do stuff (newval variable contains your "new" setting data)
	} );
} );

</pre>
<h3><span class="mw-headline" id="Step_3:_Enqueue_Your_JavaScript">Step 3: Enqueue Your JavaScript</span></h3>
<p>Finally, you simply need to ensure your JavaScript is enqueued. 
</p><p>To ensure that the file is loaded <i>only</i> on the Theme Customizer admin screen (and not your live website), you should use the <a href="../developer.wordpress.org/reference/hooks/customize_preview_init/index.html" title="Plugin API/Action Reference/customize preview init">customize_preview_init</a> hook.
</p><p>For example...
</p>
<pre>

/**
 * Used by hook: 'customize_preview_init'
 * 
 * @see add_action('customize_preview_init',$func)
 */
function mytheme_customizer_live_preview()
{
	wp_enqueue_script( 
		  'mytheme-themecustomizer',			//Give the script an ID
		  get_template_directory_uri().'/assets/js/theme-customizer.js',//Point to file
		  array( 'jquery','customize-preview' ),	//Define dependencies
		  '',						//Define a version (optional) 
		  true						//Put script in footer?
	);
}
add_action( 'customize_preview_init', 'mytheme_customizer_live_preview' );

</pre>
<h2><span class="mw-headline" id="Sample_Theme_Customization_Class">Sample Theme Customization Class</span></h2>
<p>This sample shows one potential implementation of a basic Theme Customization class that can be easily incorporated into any existing theme. This example class even makes use of the postMessage transport method for live JavaScript-based Theme Customizer previews. 
</p><p>Please note that this class should be used in conjunction with the sample <tt>theme-customize.js</tt> file exampled earlier in this tutorial.
</p>
<pre>
&lt;?php
/**
 * Contains methods for customizing the theme customization screen.
 * 
 * @link http://codex.wordpress.org/Theme_Customization_API
 * @since MyTheme 1.0
 */
class MyTheme_Customize {
   /**
    * This hooks into 'customize_register' (available as of WP 3.4) and allows
    * you to add new sections and controls to the Theme Customize screen.
    * 
    * Note: To enable instant preview, we have to actually write a bit of custom
    * javascript. See live_preview() for more.
    *  
    * @see add_action('customize_register',$func)
    * @param \WP_Customize_Manager $wp_customize
    * @link http://ottopress.com/2012/how-to-leverage-the-theme-customizer-in-your-own-themes/
    * @since MyTheme 1.0
    */
   public static function register ( $wp_customize ) {
      //1. Define a new section (if desired) to the Theme Customizer
      $wp_customize-&gt;add_section( 'mytheme_options', 
         array(
            'title'       =&gt; __( 'MyTheme Options', 'mytheme' ), //Visible title of section
            'priority'    =&gt; 35, //Determines what order this appears in
            'capability'  =&gt; 'edit_theme_options', //Capability needed to tweak
            'description' =&gt; __('Allows you to customize some example settings for MyTheme.', 'mytheme'), //Descriptive tooltip
         ) 
      );
      
      //2. Register new settings to the WP database...
      $wp_customize-&gt;add_setting( 'link_textcolor', //No need to use a SERIALIZED name, as `theme_mod` settings already live under one db record
         array(
            'default'    =&gt; '#2BA6CB', //Default setting/value to save
            'type'       =&gt; 'theme_mod', //Is this an 'option' or a 'theme_mod'?
            'capability' =&gt; 'edit_theme_options', //Optional. Special permissions for accessing this setting.
            'transport'  =&gt; 'postMessage', //What triggers a refresh of the setting? 'refresh' or 'postMessage' (instant)?
         ) 
      );      
            
      //3. Finally, we define the control itself (which links a setting to a section and renders the HTML controls)...
      $wp_customize-&gt;add_control( new WP_Customize_Color_Control( //Instantiate the color control class
         $wp_customize, //Pass the $wp_customize object (required)
         'mytheme_link_textcolor', //Set a unique ID for the control
         array(
            'label'      =&gt; __( 'Link Color', 'mytheme' ), //Admin-visible name of the control
            'settings'   =&gt; 'link_textcolor', //Which setting to load and manipulate (serialized is okay)
            'priority'   =&gt; 10, //Determines the order this control appears in for the specified section
            'section'    =&gt; 'colors', //ID of the section this control should render in (can be one of yours, or a WordPress default section)
         ) 
      ) );
      
      //4. We can also change built-in settings by modifying properties. For instance, let's make some stuff use live preview JS...
      $wp_customize-&gt;get_setting( 'blogname' )-&gt;transport = 'postMessage';
      $wp_customize-&gt;get_setting( 'blogdescription' )-&gt;transport = 'postMessage';
      $wp_customize-&gt;get_setting( 'header_textcolor' )-&gt;transport = 'postMessage';
      $wp_customize-&gt;get_setting( 'background_color' )-&gt;transport = 'postMessage';
   }

   /**
    * This will output the custom WordPress settings to the live theme's WP head.
    * 
    * Used by hook: 'wp_head'
    * 
    * @see add_action('wp_head',$func)
    * @since MyTheme 1.0
    */
   public static function header_output() {
     &#160;?&gt;
      &lt;!--Customizer CSS--&gt; 
      &lt;style type="text/css"&gt;
           &lt;?php self::generate_css('#site-title a', 'color', 'header_textcolor', '#');&#160;?&gt; 
           &lt;?php self::generate_css('body', 'background-color', 'background_color', '#');&#160;?&gt; 
           &lt;?php self::generate_css('a', 'color', 'link_textcolor');&#160;?&gt;
      &lt;/style&gt; 
      &lt;!--/Customizer CSS--&gt;
      &lt;?php
   }
   
   /**
    * This outputs the javascript needed to automate the live settings preview.
    * Also keep in mind that this function isn't necessary unless your settings 
    * are using 'transport'=&gt;'postMessage' instead of the default 'transport'
    * =&gt; 'refresh'
    * 
    * Used by hook: 'customize_preview_init'
    * 
    * @see add_action('customize_preview_init',$func)
    * @since MyTheme 1.0
    */
   public static function live_preview() {
      wp_enqueue_script( 
           'mytheme-themecustomizer', // Give the script a unique ID
           get_template_directory_uri() . '/assets/js/theme-customizer.js', // Define the path to the JS file
           array(  'jquery', 'customize-preview' ), // Define dependencies
           '', // Define a version (optional) 
           true // Specify whether to put in footer (leave this true)
      );
   }

    /**
     * This will generate a line of CSS for use in header output. If the setting
     * ($mod_name) has no defined value, the CSS will not be output.
     * 
     * @uses get_theme_mod()
     * @param string $selector CSS selector
     * @param string $style The name of the CSS *property* to modify
     * @param string $mod_name The name of the 'theme_mod' option to fetch
     * @param string $prefix Optional. Anything that needs to be output before the CSS property
     * @param string $postfix Optional. Anything that needs to be output after the CSS property
     * @param bool $echo Optional. Whether to print directly to the page (default: true).
     * @return string Returns a single line of CSS with selectors and a property.
     * @since MyTheme 1.0
     */
    public static function generate_css( $selector, $style, $mod_name, $prefix='', $postfix='', $echo=true ) {
      $return = '';
      $mod = get_theme_mod($mod_name);
      if (&#160;! empty( $mod ) ) {
         $return = sprintf('%s {&#160;%s:%s; }',
            $selector,
            $style,
            $prefix.$mod.$postfix
         );
         if ( $echo ) {
            echo $return;
         }
      }
      return $return;
    }
}

// Setup the Theme Customizer settings and controls...
add_action( 'customize_register' , array( 'MyTheme_Customize' , 'register' ) );

// Output custom CSS to live site
add_action( 'wp_head' , array( 'MyTheme_Customize' , 'header_output' ) );

// Enqueue live preview javascript in Theme Customizer admin screen
add_action( 'customize_preview_init' , array( 'MyTheme_Customize' , 'live_preview' ) );
</pre>
<h2><span class="mw-headline" id="External_Resources">External Resources</span></h2>
<ul><li> <a rel="nofollow" class="external text" href="http://ottopress.com/2012/how-to-leverage-the-theme-customizer-in-your-own-themes/">Otto's Theme Customization Tutorial</a></li>
<li> <a rel="nofollow" class="external text" href="http://ottopress.com/2015/whats-new-with-the-customizer/">Using panels and active callbacks in Customizer</a></li>
<li> <a rel="nofollow" class="external text" href="http://themeisle.com/blog/wordpress-customizer-how-to/">How to use the WordPress Customizer: A Complete Guide For 2016</a> </li>
<li> <a rel="nofollow" class="external text" href="http://wp.tutsplus.com/tutorials/theme-development/digging-into-the-theme-customizer-overview/">Digging Into the Theme Customizer: Overview</a></li>
<li> <a rel="nofollow" class="external text" href="https://github.com/bueltge/Documentation/blob/master/inc/theme-customize.php">Example Solution with documented source</a></li>
<li> <a rel="nofollow" class="external text" href="http://bueltge.de/wordpress-customizer">Slides about the Customizer</a></li>
<li> <a rel="nofollow" class="external text" href="https://github.com/bueltge/Wordpress-Theme-Customizer-Custom-Controls">A collection of custom controls you can use in your WordPress theme customizer page</a></li></ul>
<h2><span class="mw-headline" id="Related">Related</span></h2>
<ul><li> Info: <strong class="selflink">Theme Customization API</strong></li>
<li> Class: <a href="../developer.wordpress.org/reference/classes/wp_customize_manager/index.html" title="Class Reference/WP Customize Manager">WP_Customize_Manager() class</a></li>
<li> Method: <a href="../developer.wordpress.org/reference/classes/wp_customize_manager/add_setting/index.html" title="Class Reference/WP Customize Manager/add setting">WP_Customize_Manager-&gt;add_setting()</a></li>
<li> Method: <a href="../developer.wordpress.org/reference/classes/wp_customize_manager/add_section/index.html" title="Class Reference/WP Customize Manager/add section">WP_Customize_Manager-&gt;add_section()</a></li>
<li> Method: <a href="../developer.wordpress.org/reference/classes/wp_customize_manager/add_control/index.html" title="Class Reference/WP Customize Manager/add control">WP_Customize_Manager-&gt;add_control()</a></li>
<li> Method: <a href="../developer.wordpress.org/reference/classes/wp_customize_manager/get_setting/index.html" title="Class Reference/WP Customize Manager/get setting">WP_Customize_Manager-&gt;get_setting()</a></li>
<li> Hook: <a href="../developer.wordpress.org/reference/hooks/customize_register/index.html" title="Plugin API/Action Reference/customize register">customize_register</a></li>
<li> Hook: <a href="../developer.wordpress.org/reference/hooks/customize_preview_init/index.html" title="Plugin API/Action Reference/customize preview init">customize_preview_init</a></li>
<li> Hook: <a href="../developer.wordpress.org/reference/hooks/customize_controls_print_styles/index.html" title="Plugin API/Action Reference/customize controls print styles">customize_controls_print_styles</a></li>
<li> Hook: <a href="../developer.wordpress.org/reference/hooks/customize_controls_print_scripts/index.html" title="Plugin API/Action Reference/customize controls print scripts">customize_controls_print_scripts</a></li>
<li> Hook: <a href="https://codex.wordpress.org/index.php?title=Plugin_API/Action_Reference/customize_controls_init&amp;action=edit&amp;redlink=1" class="new" title="Plugin API/Action Reference/customize controls init (page does not exist)">customize_controls_init</a></li>
<li> Hook: <a href="../developer.wordpress.org/reference/hooks/customize_controls_enqueue_scripts/index.html" title="Plugin API/Action Reference/customize controls enqueue scripts">customize_controls_enqueue_scripts</a></li></ul>

<!-- 
NewPP limit report
Cached time: 20210122073239
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.024 seconds
Real time usage: 0.028 seconds
Preprocessor visited node count: 197/1000000
Preprocessor generated node count: 510/1000000
Post‐expand include size: 626/2097152 bytes
Template argument size: 248/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    5.326      1 - Template:Languages
100.00%    5.326      1 - -total
 23.53%    1.253      1 - Template:ja
 22.91%    1.220      1 - Template:ru
 22.17%    1.181      1 - Template:en
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://codex.wordpress.org/index.php?title=Theme_Customization_API&amp;oldid=169830">https://codex.wordpress.org/index.php?title=Theme_Customization_API&amp;oldid=169830</a>"</div>
				<div id="catlinks"><div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://codex.wordpress.org/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="Category_Advanced_Topics.html" title="Category:Advanced Topics">Advanced Topics</a></li><li><a href="Category_WordPress_Development.html" title="Category:WordPress Development">WordPress Development</a></li><li><a href="Category_API.html" title="Category:API">API</a></li></ul></div></div></div>			<!-- end content -->
		</div>
		<div class="col-2">
			
						
			<ul class="submenu">
				<li id="n-mainpage"><a href="Main_Page.html">Home Page</a></li>	
				<li><a href="WordPress_Lessons.html">WordPress Lessons</a></li>
				<li><a href="Getting_Started_with_WordPress.html">Getting Started</a></li>
				<li><a href="Working_with_WordPress.html">Working with WordPress</a></li>
				<li><a href="Blog_Design_and_Layout.html">Design and Layout</a></li>
				<li><a href="Advanced_Topics.html">Advanced Topics</a></li>
				<li><a href="Troubleshooting.html">Troubleshooting</a></li>
				<li><a href="Developer_Documentation.html">Developer Docs</a></li>
				<li><a href="About_WordPress.html">About WordPress</a></li>
			</ul>

			<h3>Codex Resources</h3>
			<ul class="submenu">
				<li id="n-portal"><a href="https://codex.wordpress.org/Codex:Community_Portal">Community portal</a></li>	      
				<li id="n-currentevents"><a href="Current_events.html">Current events</a></li>	      
				<li id="n-recentchanges"><a href="https://codex.wordpress.org/Special:RecentChanges">Recent changes</a></li>	      
				<li id="n-randompage"><a href="https://codex.wordpress.org/Special:Random">Random page</a></li>	      
				<li id="n-help"><a href="https://codex.wordpress.org/Help:Contents">Help</a></li>	
			</ul>
			
		</div>
	</div>
</div>


<div id="wporg-footer">
	<div class="wrapper">
		<ul>
			<li><a href="http://wordpress.org/about/" title="An introduction to the WordPress project">About</a></li>
			<li><a href="http://wordpress.org/news/" title="News and Updates">Blog</a></li>
			<li><a href="http://wordpress.org/hosting/" title="Recommended web hosting providers">Hosting</a></li>
			<li><a href="https://wordpressfoundation.org/donate/" title="Donate to the WordPress Foundation">Donate</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.org/support/" title="Forums, documentation, and other resources">Support</a></li>
			<li><a href="../developer.wordpress.org/index.html" title="Resources for WordPress developers">Developers</a></li>
			<li><a href="http://make.wordpress.org/" title="Give back to WordPress through code, support, translation and more">Get Involved</a></li>
			<li><a href="http://learn.wordpress.org/" title="Workshops and training materials">Learn</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.org/showcase/" title="Some of the best WordPress sites on the Web">Showcase</a></li>
			<li><a href="http://wordpress.org/plugins/" title="Add extra functionality to WordPress">Plugins</a></li>
			<li><a href="http://wordpress.org/themes/" title="Make your WordPress pretty">Themes</a></li>
		</ul>

		<ul>
			<li><a href="http://central.wordcamp.org/" title="Find a WordPress event near you">WordCamp</a></li>
			<li><a href="http://wordpress.tv/" title="Videos, tutorials, and WordCamp sessions">WordPress.TV</a></li>
			<li><a href="http://buddypress.org/" title="A set of plugins to transform your WordPress into a social network">BuddyPress</a></li>
			<li><a href="http://bbpress.org/" title="Fast, slick forums built on WordPress">bbPress</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.com/?ref=wporg-footer" title="Hassle-free WordPress hosting">WordPress.com</a></li>
			<li><a href="http://ma.tt/" title="Co-founder of WordPress, an example of what WordPress can do">Matt</a></li>
			<li><a href="http://wordpress.org/about/privacy/" title="WordPress.org Privacy Policy">Privacy</a></li>
			<li><a href="https://publiccode.eu/" target="_blank">Public Code</a></li>
		</ul>

		<ul>
			<li><span class="dashicons dashicons-twitter"></span><a href="https://twitter.com/WordPress" title="Follow @WordPress on Twitter">@WordPress</a></li>
			<li><span class="dashicons dashicons-facebook"></span><a href="https://www.facebook.com/WordPress/" title="Like WordPress on Facebook">WordPress</a></li>
		</ul>
	</div>

		<p class="cip cip-image">Code is Poetry.</p>
</div>

<script src="../s.w.org/style/js/navigation.min.js?20190128"></script>

</body>
<!-- Cached 20210122073239 -->

<!-- Mirrored from codex.wordpress.org/Theme_Customization_API by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Aug 2021 16:38:05 GMT -->
</html>
