<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">


<!-- Mirrored from codex.wordpress.org/Creating_Options_Pages by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Aug 2021 16:44:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P24PF4B');</script>
<!--
<meta property="fb:page_id" content="6427302910" />
-->
<link rel="dns-prefetch" href="http://s.w.org/" />
<link rel="dns-prefetch" href="../fonts.googleapis.com/index.html" />
<link rel="dns-prefetch" href="http://fonts.gstatic.com/" />
<link rel="dns-prefetch" href="http://www.googletagmanager.com/" />
<meta name="google-site-verification" content="7VWES_-rcHBcmaQis9mSYamPfNwE03f4vyTj4pfuAw0" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Creating Options Pages</title>
<link rel="canonical" href="Creating_Options_Pages.html" />

<link rel="stylesheet" href="../s.w.org/style/codex-wp4.css?3" />
<meta name="referrer" content="always">

			<link href="../s.w.org/wp-includes/css/dashicons.min.css?20181204" rel="stylesheet" type="text/css" />
		<link href='../fonts.googleapis.com/css.css?family=Open+Sans:300italic,400italic,600italic,400,300,600&amp;subset=latin,cyrillic-ext,greek-ext,greek,vietnamese,latin-ext,cyrillic' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="../s.w.org/style/wp4-2.css?92" />

<link rel="shortcut icon" href="../s.w.org/favicon.ico?2" type="image/x-icon" />
<script type="text/javascript" src="../s.w.org/wp-includes/js/jquery/jquery.js?v=1.11.1"></script>
<script>document.cookie='devicePixelRatio='+((window.devicePixelRatio === undefined) ? 1 : window.devicePixelRatio)+'; path=/';</script>
<!--[if IE]>
    <script type="text/javascript" src="/skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" />
<![endif]-->

<script type="text/javascript">wgBreakFrames=false;wgContentLanguage='en';</script>


</head>


<body id="wordpress-org" class="wporg-responsive wporg-codex">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P24PF4B" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="wporg-header">
	<div class="wrapper">
	<h1><a href="http://wordpress.org/">WordPress.org</a></h1>				<div id="head-search">
		<form action="http://wordpress.org/search/do-search.php" method="get">
			<label for="global-search" class="screen-reader-text">Search WordPress.org for:</label>
			<input id="global-search" class="text" name="search" type="text" value="" maxlength="150" placeholder="Search WordPress.org" />
			<button type="submit" class="button"><span class="screen-reader-text">Submit</span></button>
		</form>
		</div>
				<div style="clear:both"></div>
		<button id="mobile-menu-button" aria-expanded="false"><span class="screen-reader-text">Toggle Menu</span></button>
		
<nav aria-label="Main Menu">
<ul id="wporg-header-menu">
<li class="menu-item"><a href='http://wordpress.org/showcase/' data-title='See some of the sites built on WordPress.'>Showcase</a></li>
<li class="menu-item"><a href='http://learn.wordpress.org/' data-title='Resources to help you learn more about WordPress and teach it to others.'>Learn</a></li>
<li class="menu-item"><a href='http://wordpress.org/themes/' data-title='Find just the right look for your website.'>Themes</a></li>
<li class="menu-item"><a href='http://wordpress.org/plugins/' data-title='Plugins can extend WordPress to do almost anything you can imagine.'>Plugins</a></li>
<li class="menu-item"><a href='http://wordpress.org/mobile/' data-title='Take your website on the go!'>Mobile</a></li>
<li class="menu-item"><a href='http://wordpress.org/support/' data-title='Forums, documentation, help.' aria-current="true" class="current">Support</a><ul class="nav-submenu"><li><a href='http://wordpress.org/support/' title='Documentation, tutorials, best practices.'>Documentation</a></li><li><a href='http://wordpress.org/support/forums/' title='Support and discussion forums.'>Forums</a></li></ul><div class="uparrow"></div></li>
<li class="menu-item"><a href='http://make.wordpress.org/' data-title='Contribute your knowledge.'>Get Involved</a><ul class="nav-submenu"><li><a href='http://wordpress.org/five-for-the-future/' title='How five percent is powering the next generation of the web'>Five for the Future</a></li></ul><div class="uparrow"></div></li>
<li class="menu-item"><a href='http://wordpress.org/about/' data-title='About the WordPress Organization, and where we&#039;re going.'>About</a></li>
<li class="menu-item"><a href='http://wordpress.org/news/' data-title='Come here for the latest scoop.'>Blog</a></li>
<li class="menu-item"><a href='http://wordpress.org/hosting/' data-title='Find a home for your blog.'>Hosting</a></li>
<li id="download" class="button download-button menu-item"><a href='http://wordpress.org/download/' data-title='Get it. Got it? Good.'>Get WordPress</a></li>
</ul>
</nav>
		<div style="clear:both"></div>
	</div>
</div>



<div id="headline">
	<div class="wrapper">
		<h2><a href="index.html">Codex</a></h2>
		
		<div class="portlet" id="p-personal">
		  <p class="login">Codex tools:
		     <a href="https://codex.wordpress.org/index.php?title=Special:UserLogin&amp;returnto=Creating+Options+Pages">Log in</a> 		  </p>
		</div>
	</div>
</div>

<div id="pagebody">
	<div class="wrapper">	
		<div class="col-10" id="bodyContent">
			<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><div style="clear:both; background-color:#e5f5fa; border-left:4px solid #00a0d2; padding:10px 12px 8px; margin:0.5em auto 1.5em auto;"><span class="dashicons dashicons-info" style="color:#00a0d2"></span> Interested in functions, hooks, classes, or methods? Check out the new <a rel="nofollow" class="external text" href="../developer.wordpress.org/reference/index.html">WordPress Code Reference</a>!</div>
</div></div>			<h2 class="pagetitle">Creating Options Pages</h2>
									<!-- start content -->
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="Multilingual_Codex.html" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<strong class="selflink">English</strong> • 
<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/Creating">Options Pages 日本語</a> 
<a href="%d0%a1%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5_%d1%81%d1%82%d1%80%d0%b0%d0%bd%d0%b8%d1%86_%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b8.html" title="Создание страниц настройки">Русский</a> • 

<a href="https://codex.wordpress.org/zh-cn:添加后台设置页" title="zh-cn:添加后台设置页">中文(简体)</a> • 
<a href="https://codex.wordpress.org/index.php?title=zh-tw:%E6%B7%BB%E5%8A%A0%E5%BE%8C%E8%87%BA%E8%A8%AD%E7%BD%AE%E9%A0%81&amp;action=edit&amp;redlink=1" class="new" title="zh-tw:添加後臺設置頁 (page does not exist)">中文(繁體)</a> • 
 <small>(<a href="Multilingual_Codex.html#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<p><br />
<span style="color:red">This article is in transition to meet <a href="Settings_API.html" title="Settings API">Settings API</a>, which was introduced in <a href="https://wordpress.org/support/wordpress-version/version-2-7/" title="Version 2.7">Version 2.7</a>. For information prior to 2.7 see <a rel="nofollow" class="external text" href="http://codex.wordpress.org/index.php?title=Creating_Options_Pages&amp;oldid=97268">this revision.</a></span>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Where_to_Save_the_Code"><span class="tocnumber">2</span> <span class="toctext">Where to Save the Code</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Opening_the_Page"><span class="tocnumber">3</span> <span class="toctext">Opening the Page</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Form_Tag"><span class="tocnumber">4</span> <span class="toctext">Form Tag</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#settings_fields_Function"><span class="tocnumber">4.1</span> <span class="toctext">settings_fields Function</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#do_settings_fields_Function"><span class="tocnumber">4.2</span> <span class="toctext">do_settings_fields Function</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Closing_Tags"><span class="tocnumber">5</span> <span class="toctext">Closing Tags</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Register_Settings"><span class="tocnumber">5.1</span> <span class="toctext">Register Settings</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#See_It_All_Together"><span class="tocnumber">5.2</span> <span class="toctext">See It All Together</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#Example_.232"><span class="tocnumber">5.2.1</span> <span class="toctext">Example #2</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Pitfalls"><span class="tocnumber">5.2.2</span> <span class="toctext">Pitfalls</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#External_Resources"><span class="tocnumber">6</span> <span class="toctext">External Resources</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>Creating <b> custom options </b> panels in WordPress is relatively easy.
</p><p>First, to create the menu item and the new page, see <a href="Adding_Administration_Menus.html" title="Adding Administration Menus" class="mw-redirect">Adding Administration Menus</a>.
</p><p>So long as you stick to this structure, WordPress will handle all of the option creation, update, saving, and redirection for you. It will check permissions, and do all that other magic behind the scenes.
</p><p>Several new functions were added in WordPress 2.7. These new functions are optional in WordPress 2.7 but will be required in the future. They are required for WordPress MU 2.7. See <a href="Migrating_Plugins_and_Themes_to_2-6.html" title="Migrating Plugins and Themes to 2.7">Migrating Plugins and Themes to 2.7</a> and <a href="Settings_API.html" title="Settings API">Settings API</a> for more information.
</p><p>This article only covers the markup of the Settings page itself. For more information regarding how to add the Settings page, refer to <a href="Administration_Menus.html" title="Administration Menus">Administration Menus</a>
</p>
<h2><span class="mw-headline" id="Where_to_Save_the_Code">Where to Save the Code</span></h2>
<p>You can either put the code for your options page in your plugin php file (or, for Themes, in functions.php), or you can create a second file called options.php, for example, and include it using the php include function - <a rel="nofollow" class="external free" href="http://php.net/manual/en/function.include.php">http://php.net/manual/en/function.include.php</a>
</p>
<h2><span class="mw-headline" id="Opening_the_Page">Opening the Page</span></h2>
<p>If you'd like to match the look and feel of existing WordPress options pages, open with the following:
</p>
<pre>&lt;div class="wrap"&gt;
&lt;h1&gt;Your Plugin Page Title&lt;/h1&gt;
</pre>
<h2><span class="mw-headline" id="Form_Tag">Form Tag</span></h2>
<p>Once you have your page, you need to create an HTML form. Use this code:
</p>
<pre>&lt;form method="post" action="options.php"&gt; 
</pre>

<h3><span class="mw-headline" id="settings_fields_Function">settings_fields Function</span></h3>
<p>The setting fields will know which settings your options page will handle.
</p><p>After the opening form tag, add this function
</p>
<pre>settings_fields( 'myoption-group' );
</pre>
<p>where <tt>myoption-group</tt> is the same name used in the <a href="../developer.wordpress.org/reference/functions/register_setting/index.html" title="Function Reference/register setting">register_setting</a> function.
</p><p>This function <b>replaces</b> the <b>nonce magic</b>, <b>action field</b>, and <b>page_options field</b> required prior to Version 2.7.
</p>
<h3><span class="mw-headline" id="do_settings_fields_Function">do_settings_fields Function</span></h3>
<p>After the settings_fields() call, add this function
</p>
<pre>do_settings_sections( 'myoption-group' );
</pre>
<p>This function <b>replaces</b> the form-field markup in the form itself.
</p>
<h2><span class="mw-headline" id="Closing_Tags">Closing Tags</span></h2>
<p>Then obviously close the form tag after your other options, and if you like, include another "Update Options" button, this is the WordPress default.
</p>
<pre>&lt;?php submit_button();&#160;?&gt;
&lt;/form&gt;
&lt;/div&gt;
</pre>
<p>You can personalize the button created by <a href="Function_Reference/submit_button.html" title="Function Reference/submit button">submit_button</a> function.
</p><p>Note the use of the _e() function to handle translation of the text, see <a href="https://make.wordpress.org/polyglots/handbook/" title="Localizing WordPress" class="mw-redirect">Localizing WordPress</a> for more info.
</p>
<h3><span class="mw-headline" id="Register_Settings">Register Settings</span></h3>
<p>The <a href="../developer.wordpress.org/reference/functions/register_setting/index.html" title="Function Reference/register setting">register_setting</a> and <a href="Function_Reference/unregister_setting.html" title="Function Reference/unregister setting">unregister_setting</a> functions add and remove options from a whitelist of allowed options that the form is able to save. They can also name a sanitize callback function as a security measure to check each option's value.
</p><p>The register_setting function should be called in an <a href="Plugin_API/Action_Reference.html#Administrative_Actions" title="Plugin API/Action Reference">admin_init</a> action, which runs before every admin page and in particular, <tt>options.php</tt>, which receives this form.
</p><p>Your plugin probably has a section with an add_action that adds a new menu item to the administration menus. This line will be in the same section to add an action to admin_init.
</p>
<pre>
if ( is_admin() ){ // admin actions
  add_action( 'admin_menu', 'add_mymenu' );
  add_action( 'admin_init', 'register_mysettings' );
} else {
  // non-admin enqueues, actions, and filters
}
</pre>
<p>Then you create a new function that registers each option.
</p>
<pre>
function register_mysettings() { // whitelist options
  register_setting( 'myoption-group', 'new_option_name' );
  register_setting( 'myoption-group', 'some_other_option' );
  register_setting( 'myoption-group', 'option_etc' );
}
</pre>
<p>The name of <tt>myoption-group</tt> doesn't matter but it has to match the name used in the settings_fields function above.
</p>
<h3><span class="mw-headline" id="See_It_All_Together">See It All Together</span></h3>
<p>Please note: Some of the code in this example (particularly do_settings) is deprecated. <a rel="nofollow" class="external text" href="http://ottopress.com/2009/wordpress-settings-api-tutorial/">View Otto's tutorial here for better examples of workable code</a>.   In addition, there's another <a rel="nofollow" class="external text" href="http://planetozh.com/blog/2009/05/handling-plugins-options-in-wordpress-28-with-register_setting/">article</a> available by <a rel="nofollow" class="external text" href="http://planetozh.com/blog/about/">ozh</a>.
</p><p>To add icon to for your options page use the following code [this will work on version 3.4.2 and later] In following example, icon is stored in "images" folder in theme directory.
</p>
<pre>&lt;?php add_menu_page('My Cool Plugin Settings', 'Cool Settings', 'administrator', __FILE__, 'my_cool_plugin_settings_page', get_stylesheet_directory_uri('stylesheet_directory')."/images/media-button-other.gif");&#160;?&gt;</pre>
<p>The below example uses the new Settings API to create and save your plugin options
</p>
<pre>
&lt;?php
// create custom plugin settings menu
add_action('admin_menu', 'my_cool_plugin_create_menu');

function my_cool_plugin_create_menu() {

	//create new top-level menu
	add_menu_page('My Cool Plugin Settings', 'Cool Settings', 'administrator', __FILE__, 'my_cool_plugin_settings_page' , plugins_url('/images/icon.png', __FILE__) );

	//call register settings function
	add_action( 'admin_init', 'register_my_cool_plugin_settings' );
}


function register_my_cool_plugin_settings() {
	//register our settings
	register_setting( 'my-cool-plugin-settings-group', 'new_option_name' );
	register_setting( 'my-cool-plugin-settings-group', 'some_other_option' );
	register_setting( 'my-cool-plugin-settings-group', 'option_etc' );
}

function my_cool_plugin_settings_page() {
?&gt;
&lt;div class="wrap"&gt;
&lt;h1&gt;Your Plugin Name&lt;/h1&gt;

&lt;form method="post" action="options.php"&gt;
    &lt;?php settings_fields( 'my-cool-plugin-settings-group' );&#160;?&gt;
    &lt;?php do_settings_sections( 'my-cool-plugin-settings-group' );&#160;?&gt;
    &lt;table class="form-table"&gt;
        &lt;tr valign="top"&gt;
        &lt;th scope="row"&gt;New Option Name&lt;/th&gt;
        &lt;td&gt;&lt;input type="text" name="new_option_name" value="&lt;?php echo esc_attr( get_option('new_option_name') );&#160;?&gt;" /&gt;&lt;/td&gt;
        &lt;/tr&gt;
         
        &lt;tr valign="top"&gt;
        &lt;th scope="row"&gt;Some Other Option&lt;/th&gt;
        &lt;td&gt;&lt;input type="text" name="some_other_option" value="&lt;?php echo esc_attr( get_option('some_other_option') );&#160;?&gt;" /&gt;&lt;/td&gt;
        &lt;/tr&gt;
        
        &lt;tr valign="top"&gt;
        &lt;th scope="row"&gt;Options, Etc.&lt;/th&gt;
        &lt;td&gt;&lt;input type="text" name="option_etc" value="&lt;?php echo esc_attr( get_option('option_etc') );&#160;?&gt;" /&gt;&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
    
    &lt;?php submit_button();&#160;?&gt;

&lt;/form&gt;
&lt;/div&gt;
&lt;?php }&#160;?&gt;
</pre>
<h4><span class="mw-headline" id="Example_.232">Example #2</span></h4>
<p>This example works on WP 3.5.1.  Much simpler and simply works.  This is an updated version of <a rel="nofollow" class="external text" href="http://ottopress.com/2009/wordpress-settings-api-tutorial/">Otto's tutorial</a>.
</p>
<pre>
&lt;?php
class MySettingsPage
{
    /**
     * Holds the values to be used in the fields callbacks
     */
    private $options;

    /**
     * Start up
     */
    public function __construct()
    {
        add_action( 'admin_menu', array( $this, 'add_plugin_page' ) );
        add_action( 'admin_init', array( $this, 'page_init' ) );
    }

    /**
     * Add options page
     */
    public function add_plugin_page()
    {
        // This page will be under "Settings"
        add_options_page(
            'Settings Admin', 
            'My Settings', 
            'manage_options', 
            'my-setting-admin', 
            array( $this, 'create_admin_page' )
        );
    }

    /**
     * Options page callback
     */
    public function create_admin_page()
    {
        // Set class property
        $this-&gt;options = get_option( 'my_option_name' );
       &#160;?&gt;
        &lt;div class="wrap"&gt;
            &lt;h1&gt;My Settings&lt;/h1&gt;
            &lt;form method="post" action="options.php"&gt;
            &lt;?php
                // This prints out all hidden setting fields
                settings_fields( 'my_option_group' );
                do_settings_sections( 'my-setting-admin' );
                submit_button();
           &#160;?&gt;
            &lt;/form&gt;
        &lt;/div&gt;
        &lt;?php
    }

    /**
     * Register and add settings
     */
    public function page_init()
    {        
        register_setting(
            'my_option_group', // Option group
            'my_option_name', // Option name
            array( $this, 'sanitize' ) // Sanitize
        );

        add_settings_section(
            'setting_section_id', // ID
            'My Custom Settings', // Title
            array( $this, 'print_section_info' ), // Callback
            'my-setting-admin' // Page
        );  

        add_settings_field(
            'id_number', // ID
            'ID Number', // Title 
            array( $this, 'id_number_callback' ), // Callback
            'my-setting-admin', // Page
            'setting_section_id' // Section           
        );      

        add_settings_field(
            'title', 
            'Title', 
            array( $this, 'title_callback' ), 
            'my-setting-admin', 
            'setting_section_id'
        );      
    }

    /**
     * Sanitize each setting field as needed
     *
     * @param array $input Contains all settings fields as array keys
     */
    public function sanitize( $input )
    {
        $new_input = array();
        if( isset( $input['id_number'] ) )
            $new_input['id_number'] = absint( $input['id_number'] );

        if( isset( $input['title'] ) )
            $new_input['title'] = sanitize_text_field( $input['title'] );

        return $new_input;
    }

    /** 
     * Print the Section text
     */
    public function print_section_info()
    {
        print 'Enter your settings below:';
    }

    /** 
     * Get the settings option array and print one of its values
     */
    public function id_number_callback()
    {
        printf(
            '&lt;input type="text" id="id_number" name="my_option_name[id_number]" value="%s" /&gt;',
            isset( $this-&gt;options['id_number'] )&#160;? esc_attr( $this-&gt;options['id_number'])&#160;: ''
        );
    }

    /** 
     * Get the settings option array and print one of its values
     */
    public function title_callback()
    {
        printf(
            '&lt;input type="text" id="title" name="my_option_name[title]" value="%s" /&gt;',
            isset( $this-&gt;options['title'] )&#160;? esc_attr( $this-&gt;options['title'])&#160;: ''
        );
    }
}

if( is_admin() )
    $my_settings_page = new MySettingsPage();
</pre>
<p>This will create something like this:
</p><p><a href="File_creating-options-pages-ex-2b.png" class="image"><img alt="creating-options-pages-ex-2b.png" src="images/6/64/creating-options-pages-ex-2b.png" width="437" height="244" /></a>
</p><p><br />
Example 3 
</p><p>full example for options.php to get the values see after the code 
</p>
<pre>
&lt;?php

    $themename = "base-theme";
    $shortname = "mnt";
	
	/* functions to andale the options array  */
	
	function mnt_get_formatted_page_array() { 
		global $suffusion_pages_array;
		if (isset($suffusion_pages_array) &amp;&amp; $suffusion_pages_array&#160;!= null) {
			return $suffusion_pages_array;
		}
		$ret = array();
		$pages = get_pages('sort_column=menu_order');
		if ($pages&#160;!= null) {
			foreach ($pages as $page) {
				if (is_null($suffusion_pages_array)) {
					$ret[$page-&gt;ID] = array ("title" =&gt; $page-&gt;post_title, "depth" =&gt; count(get_ancestors($page-&gt;ID, 'page')));
				}
			}
		}
		if ($suffusion_pages_array == null) {
			$suffusion_pages_array = $ret;
			return $ret;
		}
		else {
			return $suffusion_pages_array;
		}
	 }
	
	function mnt_get_category_array() { 
		global $suffusion_category_array;
		if (isset($suffusion_category_array) &amp;&amp; $suffusion_category_array&#160;!= null) {
			return $suffusion_category_array;
		}
		$ret = array();
		$args = array(
	  'orderby' =&gt; 'name',
	  'parent' =&gt; 0
	  );
	$categories = get_categories( $args );
	if($categories&#160;!= null){
		foreach ($categories as $category) {
				if (is_null($suffusion_category_array)) {
					$ret[$category-&gt;cat_ID] = array ("name" =&gt; $category-&gt;name, "number" =&gt; $category-&gt;count);
				}
			}
		}
		
		if ($suffusion_category_array == null) {
			$suffusion_category_array = $ret;
			return $ret;
		}
		else {
			return $suffusion_category_array;
		}
	 }
	
	function create_opening_tag($value) { 
		$group_class = "";
		if (isset($value['grouping'])) {
			$group_class = "suf-grouping-rhs";
		}
		echo '&lt;div class="suf-section fix"&gt;'."\n";
		if ($group_class&#160;!= "") {
			echo "&lt;div class='$group_class fix'&gt;\n";
		}
		if (isset($value['name'])) {
			echo "&lt;h3&gt;" . $value['name'] . "&lt;/h3&gt;\n";
		}
		if (isset($value['desc']) &amp;&amp;&#160;!(isset($value['type']) &amp;&amp; $value['type'] == 'checkbox')) {
			echo $value['desc']."&lt;br /&gt;";
		}
		if (isset($value['note'])) {
			echo "&lt;span class=\"note\"&gt;".$value['note']."&lt;/span&gt;&lt;br /&gt;";
		}
	 }

	/**
	 * Creates the closing markup for each option.
	 *
	 * @param $value
	 * @return void
	 */
	function create_closing_tag($value) { 
		if (isset($value['grouping'])) {
			echo "&lt;/div&gt;\n";
		}
		//echo "&lt;/div&gt;&lt;!-- suf-section --&gt;\n";
		echo "&lt;/div&gt;\n";
	 }
		
	function create_suf_header_3($value) { echo '&lt;h3 class="suf-header-3"&gt;'.$value['name']."&lt;/h3&gt;\n"; }
		
	function create_section_for_text($value) { 
		create_opening_tag($value);
		$text = "";
		if (get_option($value['id']) === FALSE) {
			$text = $value['std'];
		}
		else {
			$text = get_option($value['id']);
		}
	 
		echo '&lt;input type="text" id="'.$value['id'].'" placeholder="enter your title" name="'.$value['id'].'" value="'.$text.'" /&gt;'."\n";
		create_closing_tag($value);
	 }
	
	function create_section_for_textarea($value) { 
		create_opening_tag($value);
		echo '&lt;textarea name="'.$value['id'].'" type="textarea" cols="" rows=""&gt;'."\n";
		if ( get_option( $value['id'] )&#160;!= "") {
			echo get_option( $value['id'] );
		}
		else {
			echo $value['std'];
		}
		echo '&lt;/textarea&gt;';
		create_closing_tag($value);
	 }
	
	function create_section_for_color_picker($value) { 
		create_opening_tag($value);
		$color_value = "";
		if (get_option($value['id']) === FALSE) {
			$color_value = $value['std'];
		}
		else {
			$color_value = get_option($value['id']);
		}
	 
		echo '&lt;div class="color-picker"&gt;'."\n";
		echo '&lt;input type="text" id="'.$value['id'].'" name="'.$value['id'].'" value="'.$color_value.'" class="color" /&gt;';
		echo ' &#171; Click to select color&lt;br/&gt;'."\n";
		echo "&lt;strong&gt;Default: &lt;font color='".$value['std']."'&gt; ".$value['std']."&lt;/font&gt;&lt;/strong&gt;";
		echo " (You can copy and paste this into the box above)\n";
		echo "&lt;/div&gt;\n";
		create_closing_tag($value);
	 }
	
	function create_section_for_radio($value) { 
		create_opening_tag($value);
		foreach ($value['options'] as $option_value =&gt; $option_text) {
			$checked = ' ';
			if (get_option($value['id']) == $option_value) {
				$checked = ' checked="checked" ';
			}
			else if (get_option($value['id']) === FALSE &amp;&amp; $value['std'] == $option_value){
				$checked = ' checked="checked" ';
			}
			else {
				$checked = ' ';
			}
			echo '&lt;div class="mnt-radio"&gt;&lt;input type="radio" name="'.$value['id'].'" value="'.
				$option_value.'" '.$checked."/&gt;".$option_text."&lt;/div&gt;\n";
		}
		create_closing_tag($value);
	 }

	function create_section_for_multi_select($value) { 
		create_opening_tag($value);
		echo '&lt;ul class="mnt-checklist" id="'.$value['id'].'" &gt;'."\n";
		foreach ($value['options'] as $option_value =&gt; $option_list) {
			$checked = " ";
			if (get_option($value['id']."_".$option_value)) {
				$checked = " checked='checked' ";
			}
			echo "&lt;li&gt;\n";
			echo '&lt;input type="checkbox" name="'.$value['id']."_".$option_value.'" value="true" '.$checked.' class="depth-'.($option_list['depth']+1).'" /&gt;'.$option_list['title']."\n";
			echo "&lt;/li&gt;\n";
		}
		echo "&lt;/ul&gt;\n";
		create_closing_tag($value);
	 }
	
	function create_section_for_category_select($page_section,$value) { 
		create_opening_tag($value);
		$all_categoris='';
			echo '&lt;div class="wrap" id="'.$value['id'].'" &gt;'."\n";
			echo '&lt;h1&gt;Theme Options&lt;/h1&gt; '."\n" .'
				&lt;p&gt;&lt;strong&gt;'.$page_section.':&lt;/strong&gt;&lt;/p&gt;';
				echo "&lt;select id='".$value['id']."' class='post_form' name='".$value['id']."' value='true'&gt;\n";
				echo "&lt;option id='all' value=''&gt;All&lt;/option&gt;";
			foreach ($value['options'] as $option_value =&gt; $option_list) {
				$checked = ' ';
				echo 'value_id=' . $value['id'] .' value_id=' . get_option($value['id']) . ' options_value=' . $option_value;
			if (get_option($value['id']) == $option_value) {
				$checked = ' checked="checked" ';
			}
			else if (get_option($value['id']) === FALSE &amp;&amp; $value['std'] == $option_value){
				$checked = ' checked="checked" ';
			}
			else {
				$checked = '';
			}
				echo '&lt;option value="'.$option_list['name'].'" class="level-0" '.$checked.' number="'.($option_list['number']).'" /&gt;'.$option_list['name']."&lt;/option&gt;\n";
				//$all_categoris .= $option_list['name'] . ',';
			}	
			echo "&lt;/select&gt;\n &lt;/div&gt;";
			//echo '&lt;script&gt;jQuery("#all").val("'.$all_categoris.'")&lt;/\script&gt;';
		create_closing_tag($value);
	 }

	$options = array( 
		array("name" =&gt; "Header Customization",
				"type" =&gt; "sub-section-3",
				"category" =&gt; "header-styles",
		),
		array("name" =&gt; "Header Image",
				"desc" =&gt; "Set the image to use for the header background. ",
				"id" =&gt; $shortname."_header_background_image",
				"type" =&gt; "text",
				"parent" =&gt; "header-styles",
				"std" =&gt; ""),
		array("name" =&gt; "Body Background Settings",
				"type" =&gt; "sub-section-3",
				"category" =&gt; "body-styles",
		),
		array("name" =&gt; "Body Background Color",
				"desc" =&gt; "Set the color of the background on which the page is. ",
				"id" =&gt; $shortname."_body_background_color",
				"type" =&gt; "color-picker",
				"parent" =&gt; "body-styles",
				"std" =&gt; "444444"),
		array("name" =&gt; "Sidebar Setup",
				"type" =&gt; "sub-section-3",
				"category" =&gt; "sidebar-setup",
		),
		array("name" =&gt; "Sidebar Position",
				"id" =&gt; $shortname."_sidebar_alignment",
				"type" =&gt; "radio",
				"desc" =&gt; "Which side would you like your sidebar?",
				"options" =&gt; array("left" =&gt; "Left", "right" =&gt; "Right"),
				"parent" =&gt; "sidebar-setup",
				"std" =&gt; "right"),
		array("name" =&gt; "Navigation Bar Setup",
				"type" =&gt; "sub-section-3",
				"category" =&gt; "nav-setup",
		),
		array("name" =&gt; "Pages to show in Navigation Bar",
				"desc" =&gt; "Select the pages you want to include. All pages are excluded by default",
				"id" =&gt; $shortname."_nav_pages",
				"type" =&gt; "multi-select",
				"options" =&gt; mnt_get_formatted_page_array($shortname."_nav_pages"),
				"parent" =&gt; "nav-setup",
				"std" =&gt; "none"
		),
		array("name" =&gt; "Analytics",
				"type" =&gt; "sub-section-3",
				"category" =&gt; "analytics-setup",
		),
		array("name" =&gt; "Custom Google Analytics Tracking Code",
				"desc" =&gt; "Enter your tracking code here for Google Analytics",
				"id" =&gt; $shortname."_custom_analytics_code",
				"type" =&gt; "textarea",
				"parent" =&gt; "analytics-setup",
				"std" =&gt; ""
		),
		array("name" =&gt; "category posts to show on the front page",
				"desc" =&gt; "Select the category you want to include. All pages are excluded by default",
				"id" =&gt; $shortname."_front_page_first_section",
				"type" =&gt; "select",
				"options" =&gt; mnt_get_category_array($shortname."_nav_pages"),
				"parent" =&gt; "nav-setup",
				"std" =&gt; mnt_get_category_array($shortname."_nav_pages")
		),
		array("name" =&gt; "category posts to show on the front page below",
				"desc" =&gt; "Select the category you want to include. All pages are excluded by default",
				"id" =&gt; $shortname."_front_page_second_section",
				"type" =&gt; "select-2",
				"options" =&gt; mnt_get_category_array($shortname."_nav_pages"),
				"parent" =&gt; "nav-setup",
				"std" =&gt; mnt_get_category_array($shortname."_nav_pages")
		),
	 );
	
	function create_form($options) { 
		echo "&lt;form id='options_form' method='post' name='form' &gt;\n";
		foreach ($options as $value) {
			switch ( $value['type'] ) {
				case "sub-section-3":
					create_suf_header_3($value);
					break;
	 
				case "text";
					create_section_for_text($value);
					break;
	 
				case "textarea":
					create_section_for_textarea($value);
					break;
	 
				case "multi-select":
					create_section_for_multi_select($value);
					break;
	 
				case "radio":
					create_section_for_radio($value);
					break;
	 
				case "color-picker":
					create_section_for_color_picker($value);
					break;
				case "select":
					create_section_for_category_select('first section',$value);
					break;
				case "select-2":
					create_section_for_category_select('second section',$value);
					break;
			}
		}
		
		?&gt; 
		&lt;input name="save" type="button" value="Save" class="button" onclick="submit_form(this, document.forms['form'])" /&gt;
		&lt;input name="reset_all" type="button" value="Reset to default values" class="button" onclick="submit_form(this, document.forms['form'])" /&gt;
		&lt;input type="hidden" name="formaction" value="default" /&gt;
	
     &lt;script&gt; function submit_form(element, form){ 
				 form['formaction'].value = element.name;
				 form.submit();
			 } &lt;/script&gt;
    
		&lt;/form&gt;
	&lt;?php } &#160;?&gt;
	
    		
	
	&lt;?php
   
add_action('admin_menu', 'mynewtheme_add_admin');   
function mynewtheme_add_admin() { 
    global $themename, $shortname, $options, $spawned_options;
 
    if ( $_GET['page'] == basename(__FILE__) ) {
        if ( 'save' == $_REQUEST['formaction'] ) {
            foreach ($options as $value) {
                if( isset( $_REQUEST[ $value['id'] ] ) ) {
                    update_option( $value['id'], $_REQUEST[ $value['id'] ]  );
                }
                else {
                    delete_option( $value['id'] );
                }
            }
 
            foreach ($spawned_options as $value) {
                if( isset( $_REQUEST[ $value['id'] ] ) ) {
                    update_option( $value['id'], $_REQUEST[ $value['id'] ]  );
                }
                else {
                    delete_option( $value['id'] );
                }
            }
			header("Location: themes.php?page=options.php&amp;saved=true");
            die;
        }
        else if('reset_all' == $_REQUEST['formaction']) {
            foreach ($options as $value) {
                delete_option( $value['id'] );
            }
 
            foreach ($spawned_options as $value) {
                delete_option( $value['id'] );
            }
 			header("Location: themes.php?page=options.php&amp;".$_REQUEST['formaction']."=true");
            die;
        }
  }

add_theme_page($themename." Theme Options", "".$themename." Theme Options", 
        'edit_themes', basename(__FILE__), 'mynewtheme_admin'); }

function mynewtheme_admin() { 
    global $themename, $shortname, $options, $spawned_options, $theme_name;
 
    if ($_REQUEST['saved']) {
        echo '&lt;div id="message" class="updated fade"&gt;&lt;p&gt;&lt;strong&gt;'.$themename.' settings saved for this page.&lt;/strong&gt;&lt;/p&gt;&lt;/div&gt;';
    }
    if ($_REQUEST['reset_all']) {
        echo '&lt;div id="message" class="updated fade"&gt;&lt;p&gt;&lt;strong&gt;'.$themename.' settings reset.&lt;/strong&gt;&lt;/p&gt;&lt;/div&gt;';
    }
   &#160;?&gt;
&lt;div class="wrap"&gt;
    &lt;h1&gt;Settings for &lt;?php echo $themename;&#160;?&gt;&lt;/h1&gt;
    &lt;div class="mnt-options"&gt;
&lt;?php
    create_form($options);
?&gt;
    &lt;/div&gt;&lt;!-- mnt-options --&gt;
&lt;/div&gt;&lt;!-- wrap --&gt;
&lt;?php } // end function mynewtheme_admin()
?&gt;

</pre>
<p>the code will create something like this:
</p><p><a href="File_Capture.PNG" class="image"><img alt="Capture.PNG" src="images/c/c7/Capture.PNG" width="455" height="738" /></a>
</p><p>to get the values from the options.php after submit put this code in the page you want to get the value in the head of the page 
</p>
<pre>
&lt;?php 
global $options;
foreach ($options as $value) {
    if (get_option($value['id']) === FALSE) {
        $$value['id'] = $value['std'];
    }
    else {
        $$value['id'] = get_option( $value['id'] );
    }
}?&gt;
</pre>
<p>to get the value 
</p>
<pre>
if (trim($mnt_front_page_first_section)&#160;!= "") 
     	$first_section_category=$mnt_front_page_first_section;
//$mnt_front_page_first_section = the element id from the $options array
/*
array("name" =&gt; "category posts to show on the front page",
				"desc" =&gt; "Select the category you want to include. All pages are excluded by default",
				"id" =&gt; $shortname."_front_page_first_section",//&lt;- id
				"type" =&gt; "select",
				"options" =&gt; mnt_get_category_array($shortname."_nav_pages"),
				"parent" =&gt; "nav-setup",
				"std" =&gt; mnt_get_category_array($shortname."_nav_pages")
		),
*/
</pre>
<h4><span class="mw-headline" id="Pitfalls">Pitfalls</span></h4>
<p>The <b>Settings</b> name, the second parameter in the <i>register_setting()</i> function, MUST match the name of the option being updated in the database!
<br />
For example, say you have <b>add_option( 'foo_bar', 'isfoo' )</b>, you MUST use <b>foo_bar</b> as the second parameter for the <b>register_setting()</b> function.  Otherwise WordPress does not know which setting it is suppose to update and it will fail to update.
</p><p>To show the menu in <b>Multisite</b> network screen, it would be a matter of doing:<br />
<tt>add_action( is_multisite()&#160;? 'network_admin_menu'&#160;: 'admin_menu', 'callback_function' );</tt><br />
But the form save action leads to a 404 page: <tt>/wp-admin/network/options.php</tt>.<br />
To solve it, use the solution in <a rel="nofollow" class="external text" href="http://wordpress.stackexchange.com/a/72503">this WordPress Answers post</a>, or alternatively the one in <a rel="nofollow" class="external text" href="http://code.hyperspatial.com/1250/save-plugin-options-multisite-3-1/">this blog post</a>.
</p>
<h2><span class="mw-headline" id="External_Resources">External Resources</span></h2>
<ul><li><a rel="nofollow" class="external text" href="https://github.com/bueltge/WordPress-Admin-Style">WordPress Admin Style</a> (19July16)</li>
<li><a rel="nofollow" class="external text" href="https://github.com/helen/wp-style-guide">WordPress Admin Pattern Library</a> (16July15)</li></ul>

<!-- 
NewPP limit report
Cached time: 20210122073543
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.020 seconds
Real time usage: 0.027 seconds
Preprocessor visited node count: 161/1000000
Preprocessor generated node count: 514/1000000
Post‐expand include size: 854/2097152 bytes
Template argument size: 416/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    6.633      1 - -total
100.00%    6.633      1 - Template:Languages
 17.52%    1.162      1 - Template:zh-cn
 16.09%    1.067      1 - Template:zh-tw
 15.97%    1.059      1 - Template:ja
 15.20%    1.008      1 - Template:en
 13.87%    0.920      1 - Template:ru
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://codex.wordpress.org/index.php?title=Creating_Options_Pages&amp;oldid=160809">https://codex.wordpress.org/index.php?title=Creating_Options_Pages&amp;oldid=160809</a>"</div>
				<div id="catlinks"><div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://codex.wordpress.org/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="Category_Plugins.html" title="Category:Plugins">Plugins</a></li><li><a href="Category_WordPress_Development.html" title="Category:WordPress Development">WordPress Development</a></li><li><a href="Category_Advanced_Topics.html" title="Category:Advanced Topics">Advanced Topics</a></li></ul></div></div></div>			<!-- end content -->
		</div>
		<div class="col-2">
			
						
			<ul class="submenu">
				<li id="n-mainpage"><a href="Main_Page.html">Home Page</a></li>	
				<li><a href="WordPress_Lessons.html">WordPress Lessons</a></li>
				<li><a href="Getting_Started_with_WordPress.html">Getting Started</a></li>
				<li><a href="Working_with_WordPress.html">Working with WordPress</a></li>
				<li><a href="Blog_Design_and_Layout.html">Design and Layout</a></li>
				<li><a href="Advanced_Topics.html">Advanced Topics</a></li>
				<li><a href="Troubleshooting.html">Troubleshooting</a></li>
				<li><a href="Developer_Documentation.html">Developer Docs</a></li>
				<li><a href="About_WordPress.html">About WordPress</a></li>
			</ul>

			<h3>Codex Resources</h3>
			<ul class="submenu">
				<li id="n-portal"><a href="https://codex.wordpress.org/Codex:Community_Portal">Community portal</a></li>	      
				<li id="n-currentevents"><a href="Current_events.html">Current events</a></li>	      
				<li id="n-recentchanges"><a href="https://codex.wordpress.org/Special:RecentChanges">Recent changes</a></li>	      
				<li id="n-randompage"><a href="https://codex.wordpress.org/Special:Random">Random page</a></li>	      
				<li id="n-help"><a href="https://codex.wordpress.org/Help:Contents">Help</a></li>	
			</ul>
			
		</div>
	</div>
</div>


<div id="wporg-footer">
	<div class="wrapper">
		<ul>
			<li><a href="http://wordpress.org/about/" title="An introduction to the WordPress project">About</a></li>
			<li><a href="http://wordpress.org/news/" title="News and Updates">Blog</a></li>
			<li><a href="http://wordpress.org/hosting/" title="Recommended web hosting providers">Hosting</a></li>
			<li><a href="https://wordpressfoundation.org/donate/" title="Donate to the WordPress Foundation">Donate</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.org/support/" title="Forums, documentation, and other resources">Support</a></li>
			<li><a href="../developer.wordpress.org/index.html" title="Resources for WordPress developers">Developers</a></li>
			<li><a href="http://make.wordpress.org/" title="Give back to WordPress through code, support, translation and more">Get Involved</a></li>
			<li><a href="http://learn.wordpress.org/" title="Workshops and training materials">Learn</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.org/showcase/" title="Some of the best WordPress sites on the Web">Showcase</a></li>
			<li><a href="http://wordpress.org/plugins/" title="Add extra functionality to WordPress">Plugins</a></li>
			<li><a href="http://wordpress.org/themes/" title="Make your WordPress pretty">Themes</a></li>
		</ul>

		<ul>
			<li><a href="http://central.wordcamp.org/" title="Find a WordPress event near you">WordCamp</a></li>
			<li><a href="http://wordpress.tv/" title="Videos, tutorials, and WordCamp sessions">WordPress.TV</a></li>
			<li><a href="http://buddypress.org/" title="A set of plugins to transform your WordPress into a social network">BuddyPress</a></li>
			<li><a href="http://bbpress.org/" title="Fast, slick forums built on WordPress">bbPress</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.com/?ref=wporg-footer" title="Hassle-free WordPress hosting">WordPress.com</a></li>
			<li><a href="http://ma.tt/" title="Co-founder of WordPress, an example of what WordPress can do">Matt</a></li>
			<li><a href="http://wordpress.org/about/privacy/" title="WordPress.org Privacy Policy">Privacy</a></li>
			<li><a href="https://publiccode.eu/" target="_blank">Public Code</a></li>
		</ul>

		<ul>
			<li><span class="dashicons dashicons-twitter"></span><a href="https://twitter.com/WordPress" title="Follow @WordPress on Twitter">@WordPress</a></li>
			<li><span class="dashicons dashicons-facebook"></span><a href="https://www.facebook.com/WordPress/" title="Like WordPress on Facebook">WordPress</a></li>
		</ul>
	</div>

		<p class="cip cip-image">Code is Poetry.</p>
</div>

<script src="../s.w.org/style/js/navigation.min.js?20190128"></script>

</body>
<!-- Cached 20210122073544 -->

<!-- Mirrored from codex.wordpress.org/Creating_Options_Pages by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Aug 2021 16:44:30 GMT -->
</html>
