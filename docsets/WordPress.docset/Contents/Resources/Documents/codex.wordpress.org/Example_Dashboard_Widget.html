<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">


<!-- Mirrored from codex.wordpress.org/Example_Dashboard_Widget by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Aug 2021 17:08:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P24PF4B');</script>
<!--
<meta property="fb:page_id" content="6427302910" />
-->
<link rel="dns-prefetch" href="http://s.w.org/" />
<link rel="dns-prefetch" href="../fonts.googleapis.com/index.html" />
<link rel="dns-prefetch" href="http://fonts.gstatic.com/" />
<link rel="dns-prefetch" href="http://www.googletagmanager.com/" />
<meta name="google-site-verification" content="7VWES_-rcHBcmaQis9mSYamPfNwE03f4vyTj4pfuAw0" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Example Dashboard Widget</title>
<link rel="canonical" href="Example_Dashboard_Widget.html" />

<link rel="stylesheet" href="../s.w.org/style/codex-wp4.css?3" />
<meta name="referrer" content="always">

			<link href="../s.w.org/wp-includes/css/dashicons.min.css?20181204" rel="stylesheet" type="text/css" />
		<link href='../fonts.googleapis.com/css.css?family=Open+Sans:300italic,400italic,600italic,400,300,600&amp;subset=latin,cyrillic-ext,greek-ext,greek,vietnamese,latin-ext,cyrillic' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="../s.w.org/style/wp4-2.css?92" />

<link rel="shortcut icon" href="../s.w.org/favicon.ico?2" type="image/x-icon" />
<script type="text/javascript" src="../s.w.org/wp-includes/js/jquery/jquery.js?v=1.11.1"></script>
<script>document.cookie='devicePixelRatio='+((window.devicePixelRatio === undefined) ? 1 : window.devicePixelRatio)+'; path=/';</script>
<!--[if IE]>
    <script type="text/javascript" src="/skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" />
<![endif]-->

<script type="text/javascript">wgBreakFrames=false;wgContentLanguage='en';</script>


</head>


<body id="wordpress-org" class="wporg-responsive wporg-codex">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P24PF4B" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="wporg-header">
	<div class="wrapper">
	<h1><a href="http://wordpress.org/">WordPress.org</a></h1>				<div id="head-search">
		<form action="http://wordpress.org/search/do-search.php" method="get">
			<label for="global-search" class="screen-reader-text">Search WordPress.org for:</label>
			<input id="global-search" class="text" name="search" type="text" value="" maxlength="150" placeholder="Search WordPress.org" />
			<button type="submit" class="button"><span class="screen-reader-text">Submit</span></button>
		</form>
		</div>
				<div style="clear:both"></div>
		<button id="mobile-menu-button" aria-expanded="false"><span class="screen-reader-text">Toggle Menu</span></button>
		
<nav aria-label="Main Menu">
<ul id="wporg-header-menu">
<li class="menu-item"><a href='http://wordpress.org/showcase/' data-title='See some of the sites built on WordPress.'>Showcase</a></li>
<li class="menu-item"><a href='http://learn.wordpress.org/' data-title='Resources to help you learn more about WordPress and teach it to others.'>Learn</a></li>
<li class="menu-item"><a href='http://wordpress.org/themes/' data-title='Find just the right look for your website.'>Themes</a></li>
<li class="menu-item"><a href='http://wordpress.org/plugins/' data-title='Plugins can extend WordPress to do almost anything you can imagine.'>Plugins</a></li>
<li class="menu-item"><a href='http://wordpress.org/mobile/' data-title='Take your website on the go!'>Mobile</a></li>
<li class="menu-item"><a href='http://wordpress.org/support/' data-title='Forums, documentation, help.' aria-current="true" class="current">Support</a><ul class="nav-submenu"><li><a href='http://wordpress.org/support/' title='Documentation, tutorials, best practices.'>Documentation</a></li><li><a href='http://wordpress.org/support/forums/' title='Support and discussion forums.'>Forums</a></li></ul><div class="uparrow"></div></li>
<li class="menu-item"><a href='http://make.wordpress.org/' data-title='Contribute your knowledge.'>Get Involved</a><ul class="nav-submenu"><li><a href='http://wordpress.org/five-for-the-future/' title='How five percent is powering the next generation of the web'>Five for the Future</a></li></ul><div class="uparrow"></div></li>
<li class="menu-item"><a href='http://wordpress.org/about/' data-title='About the WordPress Organization, and where we&#039;re going.'>About</a></li>
<li class="menu-item"><a href='http://wordpress.org/news/' data-title='Come here for the latest scoop.'>Blog</a></li>
<li class="menu-item"><a href='http://wordpress.org/hosting/' data-title='Find a home for your blog.'>Hosting</a></li>
<li id="download" class="button download-button menu-item"><a href='http://wordpress.org/download/' data-title='Get it. Got it? Good.'>Get WordPress</a></li>
</ul>
</nav>
		<div style="clear:both"></div>
	</div>
</div>



<div id="headline">
	<div class="wrapper">
		<h2><a href="index.html">Codex</a></h2>
		
		<div class="portlet" id="p-personal">
		  <p class="login">Codex tools:
		     <a href="https://codex.wordpress.org/index.php?title=Special:UserLogin&amp;returnto=Example+Dashboard+Widget">Log in</a> 		  </p>
		</div>
	</div>
</div>

<div id="pagebody">
	<div class="wrapper">	
		<div class="col-10" id="bodyContent">
			<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><div style="clear:both; background-color:#e5f5fa; border-left:4px solid #00a0d2; padding:10px 12px 8px; margin:0.5em auto 1.5em auto;"><span class="dashicons dashicons-info" style="color:#00a0d2"></span> Interested in functions, hooks, classes, or methods? Check out the new <a rel="nofollow" class="external text" href="../developer.wordpress.org/reference/index.html">WordPress Code Reference</a>!</div>
</div></div>			<h2 class="pagetitle">Example Dashboard Widget</h2>
									<!-- start content -->
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#The_Core_Class"><span class="tocnumber">1.1</span> <span class="toctext">The Core Class</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#The_Widget"><span class="tocnumber">2</span> <span class="toctext">The Widget</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Widget_Configuration"><span class="tocnumber">3</span> <span class="toctext">Widget Configuration</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Related"><span class="tocnumber">4</span> <span class="toctext">Related</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>Working with dashboard widgets can be daunting to those unfamiliar with some of WordPress's inner workings, like the <a href="Options_API.html" title="Options API">Options API</a>. This article demonstrates an full-featured dashboard widget plugin (including configuration options).
</p><p>This article assumes that you are proficient with PHP and already somewhat familiar with <a href="Plugin_API.html" title="Plugin API">how WordPress plugins work</a>. A familiarity with the <a href="Dashboard_Widgets_API.html" title="Dashboard Widgets API">Dashboard Widgets API</a> is helpful, but not required.
</p><p>This Dashboard Widget will include 3 files: one class, and two "template" files, all in one directory called <tt>example_dashboard_widget</tt>.
</p>
<h3><span class="mw-headline" id="The_Core_Class">The Core Class</span></h3>
<p>First, let's start by creating the core class in our <tt>example_dashboard_widget</tt> folder. Name the file *<tt>example_dashboard_widget.php</tt>* (remember that plugin's root php file should have the same name as the plugin directory).
</p><p>Place the following the newly created php file:
</p>
<pre>
&lt;?php
/*
Plugin Name: Example Dashboard Widget
Plugin URI: http://codex.wordpress.com/Example_Dashboard_Widget
Description: Demonstrates how to add a simple dashboard widget
Version: 1.0
Author: My Name
Author URI: http://example.com/
License: GPLv2 or later
*/
add_action('wp_dashboard_setup', array('My_Dashboard_Widget','init') );

class My_Dashboard_Widget {

    /**
     * The id of this widget.
     */
    const wid = 'my_widget_example';

    /**
     * Hook to wp_dashboard_setup to add the widget.
     */
    public static function init() {
        //Register widget settings...
        self::update_dashboard_widget_options(
            self::wid,                                  //The  widget id
            array(                                      //Associative array of options &amp; default values
                'example_number' =&gt; 42,
            ),
            true                                        //Add only (will not update existing options)
        );

        //Register the widget...
        wp_add_dashboard_widget(
            self::wid,                                  //A unique slug/ID
            __( 'Example Dashboard Widget', 'nouveau' ),//Visible name for the widget
            array('My_Dashboard_Widget','widget'),      //Callback for the main widget content
            array('My_Dashboard_Widget','config')       //Optional callback for widget configuration content
        );
    }

    /**
     * Load the widget code
     */
    public static function widget() {
        require_once( 'widget.php' );
    }

    /**
     * Load widget config code.
     *
     * This is what will display when an admin clicks
     */
    public static function config() {
        require_once( 'widget-config.php' );
    }

    /**
     * Gets the options for a widget of the specified name.
     *
     * @param string $widget_id Optional. If provided, will only get options for the specified widget.
     * @return array An associative array containing the widget's options and values. False if no opts.
     */
    public static function get_dashboard_widget_options( $widget_id='' )
    {
        //Fetch ALL dashboard widget options from the db...
        $opts = get_option( 'dashboard_widget_options' );

        //If no widget is specified, return everything
        if ( empty( $widget_id ) )
            return $opts;

        //If we request a widget and it exists, return it
        if ( isset( $opts[$widget_id] ) )
            return $opts[$widget_id];

        //Something went wrong...
        return false;
    }

    /**
     * Gets one specific option for the specified widget.
     * @param $widget_id
     * @param $option
     * @param null $default
     *
     * @return string
     */
    public static function get_dashboard_widget_option( $widget_id, $option, $default=NULL ) {

        $opts = self::get_dashboard_widget_options($widget_id);

        //If widget opts dont exist, return false
        if (&#160;! $opts )
            return false;

        //Otherwise fetch the option or use default
        if ( isset( $opts[$option] ) &amp;&amp;&#160;! empty($opts[$option]) )
            return $opts[$option];
        else
            return ( isset($default) )&#160;? $default&#160;: false;

    }

    /**
     * Saves an array of options for a single dashboard widget to the database.
     * Can also be used to define default values for a widget.
     *
     * @param string $widget_id The name of the widget being updated
     * @param array $args An associative array of options being saved.
     * @param bool $add_only If true, options will not be added if widget options already exist
     */
    public static function update_dashboard_widget_options( $widget_id , $args=array(), $add_only=false )
    {
        //Fetch ALL dashboard widget options from the db...
        $opts = get_option( 'dashboard_widget_options' );

        //Get just our widget's options, or set empty array
        $w_opts = ( isset( $opts[$widget_id] ) )&#160;? $opts[$widget_id]&#160;: array();

        if ( $add_only ) {
            //Flesh out any missing options (existing ones overwrite new ones)
            $opts[$widget_id] = array_merge($args,$w_opts);
        }
        else {
            //Merge new options with existing ones, and add it back to the widgets array
            $opts[$widget_id] = array_merge($w_opts,$args);
        }

        //Save the entire widgets array back to the db
        return update_option('dashboard_widget_options', $opts);
    }

}
</pre>
<h2><span class="mw-headline" id="The_Widget">The Widget</span></h2>
<p>Basic widgets (those with no configuration options) may only need one template. The following file is called *<tt>widget.php</tt>* and is automatically required by the above the core class.
</p><p>By requiring another file as a template (instead of simply placing the following in the class), we can keep all the HTML and presentation code separate, making our core class easier to read and our template easier to edit and maintain.
</p><p>We also have access to all our class methods via self::method_name();
</p>
<pre>
&lt;?php
/**
 * This file could be used to catch submitted form data. When using a non-configuration
 * view to save form data, remember to use some kind of identifying field in your form.
 */
?&gt;
&lt;p&gt;This is an example dashboard widget!&lt;/p&gt;
&lt;p&gt;This is the front-facing part of the widget, and can be found and edited from &lt;tt&gt;&lt;?php echo __FILE__&#160;?&gt;&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Widgets can be configured as well. Currently, this is set to &lt;b&gt;&lt;?php echo self::get_dashboard_widget_option(self::wid, 'example_number');&#160;?&gt;&lt;/b&gt;&#160;! To change the number, hover over the widget title and click on the "Configure" link.&lt;/p&gt;
</pre>
<p>Also note that we make use the <tt>self::wid</tt> constant (which we defined in our core class) instead of typing the name of the widget. This makes a number of things much simpler, especially when used in the configuration template (see below).
</p>
<h2><span class="mw-headline" id="Widget_Configuration">Widget Configuration</span></h2>
<p>Developers can also give admins "configuration" options for their Dashboard widgets. Our core class already added support and will attempt to load a separate configuration file for us. That file should be called *<tt>widget-config.php</tt>* and should contain the following...
</p>
<pre>
&lt;?php
/**
 * This file could be used to catch submitted form data. When using a non-configuration
 * view to save form data, remember to use some kind of identifying field in your form.
 */
if (!empty($_POST)) {  
    $number = ( isset( $_POST['number'] ) )&#160;? stripslashes( $_POST['number'] )&#160;: '';
    self::update_dashboard_widget_options(
            self::wid,                                  //The  widget id
            array(                                      //Associative array of options &amp; default values
                'example_number' =&gt; $number,
            )
    );
}

?&gt;
&lt;p&gt;This is an example dashboard widget!&lt;/p&gt;
&lt;p&gt;This is the configuration part of the widget, and can be found and edited from &lt;tt&gt;&lt;?php echo __FILE__&#160;?&gt;&lt;/tt&gt;&lt;/p&gt;
&lt;input type="text" name="number" value="&lt;?php echo self::get_dashboard_widget_option(self::wid, 'example_number');&#160;?&gt;" /&gt;&lt;br /&gt;
</pre>
<h2><span class="mw-headline" id="Related">Related</span></h2>
<ul><li> Article: <a href="Dashboard_Widgets_API.html" title="Dashboard Widgets API">Dashboard Widgets API</a></li>
<li> Lesson: <strong class="selflink">Example Dashboard Widget</strong></li></ul>

<!-- 
NewPP limit report
Cached time: 20210122101732
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.004 seconds
Real time usage: 0.007 seconds
Preprocessor visited node count: 45/1000000
Preprocessor generated node count: 84/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://codex.wordpress.org/index.php?title=Example_Dashboard_Widget&amp;oldid=163579">https://codex.wordpress.org/index.php?title=Example_Dashboard_Widget&amp;oldid=163579</a>"</div>
				<div id="catlinks"><div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://codex.wordpress.org/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="Category_Plugins.html" title="Category:Plugins">Plugins</a></li><li><a href="Category_Widgets.html" title="Category:Widgets">Widgets</a></li><li><a href="Category_Advanced_Topics.html" title="Category:Advanced Topics">Advanced Topics</a></li><li><a href="Category_WordPress_Development.html" title="Category:WordPress Development">WordPress Development</a></li><li><a href="Category_WordPress_Lessons.html" title="Category:WordPress Lessons">WordPress Lessons</a></li></ul></div></div></div>			<!-- end content -->
		</div>
		<div class="col-2">
			
						
			<ul class="submenu">
				<li id="n-mainpage"><a href="Main_Page.html">Home Page</a></li>	
				<li><a href="WordPress_Lessons.html">WordPress Lessons</a></li>
				<li><a href="Getting_Started_with_WordPress.html">Getting Started</a></li>
				<li><a href="Working_with_WordPress.html">Working with WordPress</a></li>
				<li><a href="Blog_Design_and_Layout.html">Design and Layout</a></li>
				<li><a href="Advanced_Topics.html">Advanced Topics</a></li>
				<li><a href="Troubleshooting.html">Troubleshooting</a></li>
				<li><a href="Developer_Documentation.html">Developer Docs</a></li>
				<li><a href="About_WordPress.html">About WordPress</a></li>
			</ul>

			<h3>Codex Resources</h3>
			<ul class="submenu">
				<li id="n-portal"><a href="https://codex.wordpress.org/Codex:Community_Portal">Community portal</a></li>	      
				<li id="n-currentevents"><a href="Current_events.html">Current events</a></li>	      
				<li id="n-recentchanges"><a href="https://codex.wordpress.org/Special:RecentChanges">Recent changes</a></li>	      
				<li id="n-randompage"><a href="https://codex.wordpress.org/Special:Random">Random page</a></li>	      
				<li id="n-help"><a href="https://codex.wordpress.org/Help:Contents">Help</a></li>	
			</ul>
			
		</div>
	</div>
</div>


<div id="wporg-footer">
	<div class="wrapper">
		<ul>
			<li><a href="http://wordpress.org/about/" title="An introduction to the WordPress project">About</a></li>
			<li><a href="http://wordpress.org/news/" title="News and Updates">Blog</a></li>
			<li><a href="http://wordpress.org/hosting/" title="Recommended web hosting providers">Hosting</a></li>
			<li><a href="https://wordpressfoundation.org/donate/" title="Donate to the WordPress Foundation">Donate</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.org/support/" title="Forums, documentation, and other resources">Support</a></li>
			<li><a href="../developer.wordpress.org/index.html" title="Resources for WordPress developers">Developers</a></li>
			<li><a href="http://make.wordpress.org/" title="Give back to WordPress through code, support, translation and more">Get Involved</a></li>
			<li><a href="http://learn.wordpress.org/" title="Workshops and training materials">Learn</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.org/showcase/" title="Some of the best WordPress sites on the Web">Showcase</a></li>
			<li><a href="http://wordpress.org/plugins/" title="Add extra functionality to WordPress">Plugins</a></li>
			<li><a href="http://wordpress.org/themes/" title="Make your WordPress pretty">Themes</a></li>
		</ul>

		<ul>
			<li><a href="http://central.wordcamp.org/" title="Find a WordPress event near you">WordCamp</a></li>
			<li><a href="http://wordpress.tv/" title="Videos, tutorials, and WordCamp sessions">WordPress.TV</a></li>
			<li><a href="http://buddypress.org/" title="A set of plugins to transform your WordPress into a social network">BuddyPress</a></li>
			<li><a href="http://bbpress.org/" title="Fast, slick forums built on WordPress">bbPress</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.com/?ref=wporg-footer" title="Hassle-free WordPress hosting">WordPress.com</a></li>
			<li><a href="http://ma.tt/" title="Co-founder of WordPress, an example of what WordPress can do">Matt</a></li>
			<li><a href="http://wordpress.org/about/privacy/" title="WordPress.org Privacy Policy">Privacy</a></li>
			<li><a href="https://publiccode.eu/" target="_blank">Public Code</a></li>
		</ul>

		<ul>
			<li><span class="dashicons dashicons-twitter"></span><a href="https://twitter.com/WordPress" title="Follow @WordPress on Twitter">@WordPress</a></li>
			<li><span class="dashicons dashicons-facebook"></span><a href="https://www.facebook.com/WordPress/" title="Like WordPress on Facebook">WordPress</a></li>
		</ul>
	</div>

		<p class="cip cip-image">Code is Poetry.</p>
</div>

<script src="../s.w.org/style/js/navigation.min.js?20190128"></script>

</body>
<!-- Cached 20210122101732 -->

<!-- Mirrored from codex.wordpress.org/Example_Dashboard_Widget by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Aug 2021 17:08:57 GMT -->
</html>
