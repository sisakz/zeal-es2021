<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">


<!-- Mirrored from codex.wordpress.org/Валидация_данных by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Aug 2021 17:07:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P24PF4B');</script>
<!--
<meta property="fb:page_id" content="6427302910" />
-->
<link rel="dns-prefetch" href="http://s.w.org/" />
<link rel="dns-prefetch" href="../fonts.googleapis.com/index.html" />
<link rel="dns-prefetch" href="http://fonts.gstatic.com/" />
<link rel="dns-prefetch" href="http://www.googletagmanager.com/" />
<meta name="google-site-verification" content="7VWES_-rcHBcmaQis9mSYamPfNwE03f4vyTj4pfuAw0" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Валидация данных</title>
<link rel="canonical" href="%d0%92%d0%b0%d0%bb%d0%b8%d0%b4%d0%b0%d1%86%d0%b8%d1%8f_%d0%b4%d0%b0%d0%bd%d0%bd%d1%8b%d1%85.html" />

<link rel="stylesheet" href="../s.w.org/style/codex-wp4.css?3" />
<meta name="referrer" content="always">

			<link href="../s.w.org/wp-includes/css/dashicons.min.css?20181204" rel="stylesheet" type="text/css" />
		<link href='../fonts.googleapis.com/css.css?family=Open+Sans:300italic,400italic,600italic,400,300,600&amp;subset=latin,cyrillic-ext,greek-ext,greek,vietnamese,latin-ext,cyrillic' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="../s.w.org/style/wp4-2.css?92" />

<link rel="shortcut icon" href="../s.w.org/favicon.ico?2" type="image/x-icon" />
<script type="text/javascript" src="../s.w.org/wp-includes/js/jquery/jquery.js?v=1.11.1"></script>
<script>document.cookie='devicePixelRatio='+((window.devicePixelRatio === undefined) ? 1 : window.devicePixelRatio)+'; path=/';</script>
<!--[if IE]>
    <script type="text/javascript" src="/skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" />
<![endif]-->

<script type="text/javascript">wgBreakFrames=false;wgContentLanguage='en';</script>


</head>


<body id="wordpress-org" class="wporg-responsive wporg-codex">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P24PF4B" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="wporg-header">
	<div class="wrapper">
	<h1><a href="http://wordpress.org/">WordPress.org</a></h1>				<div id="head-search">
		<form action="http://wordpress.org/search/do-search.php" method="get">
			<label for="global-search" class="screen-reader-text">Search WordPress.org for:</label>
			<input id="global-search" class="text" name="search" type="text" value="" maxlength="150" placeholder="Search WordPress.org" />
			<button type="submit" class="button"><span class="screen-reader-text">Submit</span></button>
		</form>
		</div>
				<div style="clear:both"></div>
		<button id="mobile-menu-button" aria-expanded="false"><span class="screen-reader-text">Toggle Menu</span></button>
		
<nav aria-label="Main Menu">
<ul id="wporg-header-menu">
<li class="menu-item"><a href='http://wordpress.org/showcase/' data-title='See some of the sites built on WordPress.'>Showcase</a></li>
<li class="menu-item"><a href='http://learn.wordpress.org/' data-title='Resources to help you learn more about WordPress and teach it to others.'>Learn</a></li>
<li class="menu-item"><a href='http://wordpress.org/themes/' data-title='Find just the right look for your website.'>Themes</a></li>
<li class="menu-item"><a href='http://wordpress.org/plugins/' data-title='Plugins can extend WordPress to do almost anything you can imagine.'>Plugins</a></li>
<li class="menu-item"><a href='http://wordpress.org/mobile/' data-title='Take your website on the go!'>Mobile</a></li>
<li class="menu-item"><a href='http://wordpress.org/support/' data-title='Forums, documentation, help.' aria-current="true" class="current">Support</a><ul class="nav-submenu"><li><a href='http://wordpress.org/support/' title='Documentation, tutorials, best practices.'>Documentation</a></li><li><a href='http://wordpress.org/support/forums/' title='Support and discussion forums.'>Forums</a></li></ul><div class="uparrow"></div></li>
<li class="menu-item"><a href='http://make.wordpress.org/' data-title='Contribute your knowledge.'>Get Involved</a><ul class="nav-submenu"><li><a href='http://wordpress.org/five-for-the-future/' title='How five percent is powering the next generation of the web'>Five for the Future</a></li></ul><div class="uparrow"></div></li>
<li class="menu-item"><a href='http://wordpress.org/about/' data-title='About the WordPress Organization, and where we&#039;re going.'>About</a></li>
<li class="menu-item"><a href='http://wordpress.org/news/' data-title='Come here for the latest scoop.'>Blog</a></li>
<li class="menu-item"><a href='http://wordpress.org/hosting/' data-title='Find a home for your blog.'>Hosting</a></li>
<li id="download" class="button download-button menu-item"><a href='http://wordpress.org/download/' data-title='Get it. Got it? Good.'>Get WordPress</a></li>
</ul>
</nav>
		<div style="clear:both"></div>
	</div>
</div>



<div id="headline">
	<div class="wrapper">
		<h2><a href="index.html">Codex</a></h2>
		
		<div class="portlet" id="p-personal">
		  <p class="login">Codex tools:
		     <a href="https://codex.wordpress.org/index.php?title=Special:UserLogin&amp;returnto=%D0%92%D0%B0%D0%BB%D0%B8%D0%B4%D0%B0%D1%86%D0%B8%D1%8F+%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85">Log in</a> 		  </p>
		</div>
	</div>
</div>

<div id="pagebody">
	<div class="wrapper">	
		<div class="col-10" id="bodyContent">
			<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><div style="clear:both; background-color:#e5f5fa; border-left:4px solid #00a0d2; padding:10px 12px 8px; margin:0.5em auto 1.5em auto;"><span class="dashicons dashicons-info" style="color:#00a0d2"></span> Interested in functions, hooks, classes, or methods? Check out the new <a rel="nofollow" class="external text" href="../developer.wordpress.org/reference/index.html">WordPress Code Reference</a>!</div>
</div></div>			<h2 class="pagetitle">Валидация данных</h2>
									<!-- start content -->
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div style="background-color:#FAEBD7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle; overflow:hidden;">Эта страница <a href="Category_Stubs.html" title="Category:Stubs">помечена</a> как незавершённая. Вы можете <a href="https://codex.wordpress.org/Codex:Contributing" title="Codex:Contributing">помочь</a> проекту, <b><a rel="nofollow" class="external text" href="https://codex.wordpress.org/index.php?title=%D0%92%D0%B0%D0%BB%D0%B8%D0%B4%D0%B0%D1%86%D0%B8%D1%8F_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85&amp;action=edit">дополнив её</a></b>.</div>
<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="Multilingual_Codex.html" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<a href="Data_Validation.html" title="Data Validation">English</a> • 
<a rel="nofollow" class="external text" href="https://wpdocs.osdn.jp/Data">Validation 日本語</a> 
<strong class="selflink">Русский</strong> • 

 <small>(<a href="Multilingual_Codex.html#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<p>Ненадежные данные поступают из многих источников (пользователи, сторонние сайты, ваша собственная база данных!, ...) и все они нуждаются в проверке как на ввод, так и на вывод.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Output_Sanitation"><span class="tocnumber">1</span> <span class="toctext">Output Sanitation</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#.D0.A6.D0.B5.D0.BB.D1.8B.D0.B5_.D1.87.D0.B8.D1.81.D0.BB.D0.B0"><span class="tocnumber">1.1</span> <span class="toctext">Целые числа</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#HTML.2FXML"><span class="tocnumber">1.2</span> <span class="toctext">HTML/XML</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#HTML.2FXML_Fragments"><span class="tocnumber">1.2.1</span> <span class="toctext">HTML/XML Fragments</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#.D0.A2.D0.B5.D0.BA.D1.81.D1.82.D0.BE.D0.B2.D1.8B.D0.B5_.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D1.8F"><span class="tocnumber">1.2.2</span> <span class="toctext">Текстовые значения</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#.D0.90.D1.82.D1.80.D0.B8.D0.B1.D1.83.D1.82.D1.8B_.D1.82.D1.8D.D0.B3.D0.B0"><span class="tocnumber">1.2.3</span> <span class="toctext">Атрибуты тэга</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#JavaScript"><span class="tocnumber">1.2.4</span> <span class="toctext">JavaScript</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-8"><a href="#URLs"><span class="tocnumber">1.3</span> <span class="toctext">URLs</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#.D0.91.D0.B0.D0.B7.D1.8B_.D0.94.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"><span class="tocnumber">1.4</span> <span class="toctext">Базы Данных</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Filesystem"><span class="tocnumber">1.5</span> <span class="toctext">Filesystem</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#HTTP_Headers"><span class="tocnumber">1.6</span> <span class="toctext">HTTP Headers</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Input_Validation"><span class="tocnumber">2</span> <span class="toctext">Input Validation</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#Slugs"><span class="tocnumber">2.1</span> <span class="toctext">Slugs</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#HTML"><span class="tocnumber">2.2</span> <span class="toctext">HTML</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Email"><span class="tocnumber">2.3</span> <span class="toctext">Email</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Arrays"><span class="tocnumber">2.4</span> <span class="toctext">Arrays</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Other"><span class="tocnumber">2.5</span> <span class="toctext">Other</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18"><a href="#Validation_Philosophies"><span class="tocnumber">3</span> <span class="toctext">Validation Philosophies</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="#Whitelist"><span class="tocnumber">3.1</span> <span class="toctext">Whitelist</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Blacklist"><span class="tocnumber">3.2</span> <span class="toctext">Blacklist</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Format_Detection"><span class="tocnumber">3.3</span> <span class="toctext">Format Detection</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Format_Correction"><span class="tocnumber">3.4</span> <span class="toctext">Format Correction</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-23"><a href="#Changelog"><span class="tocnumber">4</span> <span class="toctext">Changelog</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="#External_Resources"><span class="tocnumber">5</span> <span class="toctext">External Resources</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Output_Sanitation">Output Sanitation</span></h2>
<p>Метод валидации данных зависит от типа данных, а также от того, в каком контексте они используются. Далее мы рассмотрим несколько типичных задач, а также то, как необходимо валидировать данные.
</p><p>Совет: Рекомендуется делать валидацию как можно позже, идеально - непосредственно перед выводом, вместо того, чтобы сделать это в самом начале. Таким образом, вы будете уверены, что данные валидны, и не будет необходимости помнить, делалась уже валидация, или нет.
</p>
<h3><span class="mw-headline" id=".D0.A6.D0.B5.D0.BB.D1.8B.D0.B5_.D1.87.D0.B8.D1.81.D0.BB.D0.B0">Целые числа</span></h3>
<dl><dt> <tt>intval( $int )</tt> или <tt>(int) $int</tt></dt>
<dd>	Это должно быть целым числом, приводим переменную к такому типу.</dd>
<dt> <tt>absint( $int )</tt> </dt>
<dd>	Целое, не отрицательное число.</dd></dl>
<h3><span class="mw-headline" id="HTML.2FXML">HTML/XML</span></h3>
<p>Note that many types of XML documents (as opposed to HTML documents) understand only a few named character references: <code>apos, amp, gt, lt, quot</code>.  When outputting text to such an XML document, be sure to filter any text containing illegal named entities through WordPress's <code><a href="../developer.wordpress.org/reference/functions/ent2ncr/index.html" title="Function Reference/ent2ncr">ent2ncr</a>( $text )</code> function.
</p>
<h4><span class="mw-headline" id="HTML.2FXML_Fragments">HTML/XML Fragments</span></h4>
<dl><dt> <code><a href="Function_Reference/wp_kses.html" title="Function Reference/wp kses">wp_kses</a>( (string) $fragment, (array) $allowed_html, (array) $protocols = null )</code></dt>
<dd>	KSES Strips Evil Scripts.  All untrusted HTML (post text, comment text, etc.) should be run through <code>wp_kses()</code>.</dd>
<dd></dd>
<dd>	To avoid having to pass an array of allowed HTML tags, you can use <code><a href="Function_Reference/wp_kses_post.html" title="Function Reference/wp kses post">wp_kses_post</a>( (string) $fragment )</code> for tags that are allowed in posts/pages or <code><a href="Function_Reference/wp_kses_data.html" title="Function Reference/wp kses data">wp_kses_data</a>( (string) $fragment )</code> for the small list of tags allowed in comments.</dd>
<dt> <code><a href="../developer.wordpress.org/reference/functions/wp_rel_nofollow/index.html" title="Function Reference/wp rel nofollow">wp_rel_nofollow</a>( (string) $html )</code></dt>
<dd>	Adds a "rel='nofollow'" attribute to any &lt;a&gt; link.</dd>
<dd></dd>
<dt> <code><a href="Function_Reference/wp_kses_allowed_html.html" title="Function Reference/wp kses allowed html">wp_kses_allowed_html</a>( (string) $context )</code></dt>
<dd>	Provides an array of allowed HTML tags for a given context. Allowed values are post | strip | data | entities or the name of a field filter such&#160;:       as pre_user_description.</dd></dl>
<h4><span class="mw-headline" id=".D0.A2.D0.B5.D0.BA.D1.81.D1.82.D0.BE.D0.B2.D1.8B.D0.B5_.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D1.8F">Текстовые значения</span></h4>
<dl><dt> <code><a href="Function_Reference/esc_html.html" title="Function Reference/esc html">esc_html</a>( $text )</code> (начиная с 2.8)</dt>
<dd>	Кодирует символы <tt>&lt; &gt; &amp; " '</tt> (меньше, больше, амперсанд, двойная кавычка, одинарная кавычка). Очень похоже на <code>esc_attr</code>.</dd>
<dt> <code><a href="../developer.wordpress.org/reference/functions/esc_html__/index.html" title="Function Reference/esc html 2">esc_html__</a></code> (начиная с 2.8)</dt>
<dd>	Переводит и кодирует</dd>
<dt> <code><a href="../developer.wordpress.org/reference/functions/esc_html_e/index.html" title="Function Reference/esc html e">esc_html_e</a></code> (начиная с 2.8)</dt>
<dd>	Переводит, кодирует и выводит</dd>
<dt> <code><a href="Function_Reference/esc_textarea.html" title="Function Reference/esc textarea">esc_textarea</a></code> (начиная с 3.1)</dt>
<dd>	Кодирует текст для использования в элементе textarea.</dd>
<dt> <code><a href="../developer.wordpress.org/reference/functions/sanitize_text_field/index.html" title="Function Reference/sanitize text field">sanitize_text_field</a></code> (since 2.9.0)</dt>
<dd>	Валидация строки, введённой пользователем, или из базы данных.</dd></dl>
<h4><span class="mw-headline" id=".D0.90.D1.82.D1.80.D0.B8.D0.B1.D1.83.D1.82.D1.8B_.D1.82.D1.8D.D0.B3.D0.B0">Атрибуты тэга</span></h4>
<dl><dt> <code><a href="../developer.wordpress.org/reference/functions/esc_attr/index.html" title="Function Reference/esc attr">esc_attr</a>( $text )</code> (начиная с 2.8)</dt>
<dt> <code><a href="Function_Reference/esc_attr_2.html" title="Function Reference/esc attr 2">esc_attr__</a>()</code></dt>
<dd>	Переводит и кодирует</dd>
<dt> <code><a href="Function_Reference/esc_attr_e.html" title="Function Reference/esc attr e">esc_attr_e</a>()</code></dt>
<dd>	Переводит, кодирует и выводит</dd></dl>
<h4><span class="mw-headline" id="JavaScript">JavaScript</span></h4>
<dl><dt> <code><a href="../developer.wordpress.org/reference/functions/esc_js/index.html" title="Function Reference/esc js">esc_js</a>( $text )</code> (начиная с 2.8)</dt></dl>
<h3><span class="mw-headline" id="URLs">URLs</span></h3>
<dl><dt> <code><a href="Function_Reference/esc_url.html" title="Function Reference/esc url">esc_url</a>( $url, (array) $protocols = null )</code> (начиная с 2.8)</dt>
<dd>	Always use <code>esc_url</code> when sanitizing URLs (in text nodes, attribute nodes or anywhere else).  Rejects URLs that do not have one of the provided whitelisted protocols (defaulting to <tt>http</tt>, <tt>https</tt>, <tt>ftp</tt>, <tt>ftps</tt>, <tt>mailto</tt>, <tt>news</tt>, <tt>irc</tt>, <tt>gopher</tt>, <tt>nntp</tt>, <tt>feed</tt>, and <tt>telnet</tt>), eliminates invalid characters, and removes dangerous characters. Replaces <code>clean_url()</code> which was deprecated in 3.0.</dd>
<dd> This function encodes characters as HTML entities: use it when generating an (X)HTML or XML document. Encodes ampersands (<tt>&amp;</tt>) and single quotes (<tt>'</tt>) as numeric entity references (<tt>&amp;#038, &amp;#039</tt>).</dd>
<dt> <code><a href="../developer.wordpress.org/reference/functions/esc_url_raw/index.html" title="Function Reference/esc url raw">esc_url_raw</a>( $url, (array) $protocols = null )</code> (since 2.8)</dt>
<dd>	For inserting an URL in the database.  This function does not encode characters as HTML entities: use it when storing a URL or in other cases where you need the non-encoded URL.  This functionality can be replicated in the old <code>clean_url</code> function by setting <code>$context</code> to <code>db</code>.</dd>
<dt> <code><a href="https://codex.wordpress.org/index.php?title=Function_Reference/urlencode&amp;action=edit&amp;redlink=1" class="new" title="Function Reference/urlencode (page does not exist)">urlencode</a>( $scalar )</code></dt>
<dd>	Encodes for use in URL (as a query parameter, for example)</dd>
<dt> <code><a href="../developer.wordpress.org/reference/functions/urlencode_deep/index.html" title="Function Reference/urlencode deep">urlencode_deep</a>( $array )</code></dt>
<dd>	urlencodes all array elements.</dd></dl>
<h3><span class="mw-headline" id=".D0.91.D0.B0.D0.B7.D1.8B_.D0.94.D0.B0.D0.BD.D0.BD.D1.8B.D1.85">Базы Данных</span></h3>
<dl><dt> <code><a href="Class_Reference/wpdb.html#INSERT_rows" title="Class Reference/wpdb">$wpdb-&gt;insert</a>( $table, (array) $data )</code></dt>
<dd>	<code>$data</code> должна быть не экранирована (функция выполнит это за вас).  Keys как columns, Values как values.</dd></dl>
<dl><dt> <code><a href="Class_Reference/wpdb.html#UPDATE_rows" title="Class Reference/wpdb">$wpdb-&gt;update</a>( $table, (array) $data, (array) $where )</code></dt>
<dd>	<code>$data</code> должна быть не экранирована.  Keys как columns, Values как values.  <code>$where</code> должна быть не экранирована.  Multiple <code>WHERE</code> conditions are <code>AND</code>ed together.</dd></dl>
<pre>$wpdb-&gt;update(
  'my_table',
  array( 'status' =&gt; $untrusted_status, 'title' =&gt; $untrusted_title ),
  array( 'id' =&gt; 123 )
);
</pre>
<dl><dt> <code><a href="Class_Reference/wpdb.html#Protect_Queries_Against_SQL_Injection_Attacks" title="Class Reference/wpdb">$wpdb-&gt;prepare</a>( $format, (scalar) $value1, (scalar) $value2, ... )</code></dt>
<dd>	<code>$format</code> это <a rel="nofollow" class="external text" href="http://php.net/sprintf">sprintf()</a>-подобный формат строки.  Он понимает только <code>%s</code> и <code>%d</code> заполнители, ни один из которых не должен быть заключён в кавычки.</dd></dl>
<pre>$wpdb-&gt;get_var( $wpdb-&gt;prepare(
  "SELECT something FROM table WHERE foo =&#160;%s and status =&#160;%d",
  $name, // неэкранированная строка (функция проверит это для вас)
  $status // ненадёжный числитель (функция проверит это для вас)
) );
</pre>
<dl><dt> <code><a href="Function_Reference/esc_sql.html" title="Function Reference/esc sql">esc_sql</a>( $sql )</code></dt>
<dd>       Псевдоним для <code>$wpdb-&gt;escape()</code>.</dd></dl>
<dl><dt> <code>$wpdb-&gt;escape( $text )</code></dt>
<dd>	Экранирует одну строку или массив строк для использования в SQL запросах.  Прославленный <code>addslashes(). $wpdb-&gt;prepare</code> как правило, предпочтительнее, так как он исправляет несколько типичных ошибок форматирования.</dd></dl>
<dl><dt> <code>$wpdb-&gt;escape_by_ref( &amp;$text )</code></dt>
<dd>	Нет возвращаемого значения. Поскольку параметр передается по ссылке, текст непосредственно изменяется, поэтому нет необходимости назначать какое-либо возвращаемое значение.</dd></dl>
<dl><dt> <code><a href="../developer.wordpress.org/reference/functions/like_escape/index.html" title="Function Reference/like escape">like_escape</a>( $string )</code></dt>
<dd>	Подготавливает <code>$string</code> для использования в LIKE выражениях SQL запросов. Будет по прежнему нуждаться в SQL экранировании (с одной из перечисленных функций).</dd></dl>
<h3><span class="mw-headline" id="Filesystem">Filesystem</span></h3>
<dl><dt> <code><a href="../developer.wordpress.org/reference/functions/validate_file/index.html" title="Function Reference/validate file">validate_file</a>( (string) $filename, (array) $allowed_files = "" )</code></dt>
<dd>	Used to prevent directory traversal attacks, or to test a filename against a whitelist. Returns <tt>0</tt> if <code>$filename</code> represents a valid relative path. After validating, you <em>must</em> treat <code>$filename</code> as a relative path (i.e. you must prepend it with an absolute path), since something like <tt>/etc/hosts</tt> will validate with this function. Returns an integer greater than zero if the given path contains <tt>..</tt>, <tt>./</tt>, or <tt>:</tt>, or is not in the <code>$allowed_files</code> whitelist. Be careful making boolean interpretations of the result, since <tt>false</tt> (0) indicates the filename has passed validation, whereas <tt>true</tt> (&gt; 0) indicates failure.</dd></dl>
<h3><span class="mw-headline" id="HTTP_Headers">HTTP Headers</span></h3>
<p>Header splitting attacks are annoying since they are dependent on the HTTP client.  WordPress has little need to include user generated content in HTTP headers, but when it does, WordPress typically uses <a href="#Whitelist">whitelisting</a> for most of its HTTP headers.
</p><p>WordPress does use user generated content in HTTP Location headers, and provides sanitation for those.
</p>
<dl><dt> <code><a href="../developer.wordpress.org/reference/functions/wp_redirect/index.html" title="Function Reference/wp redirect">wp_redirect</a>($location, $status = 302)</code></dt>
<dd>	A safe way to redirect to any URL.  Ensures the resulting HTTP Location header is legitimate.</dd>
<dt> <code><a href="Function_Reference/wp_safe_redirect.html" title="Function Reference/wp safe redirect">wp_safe_redirect</a>($location, $status = 302)</code></dt>
<dd>	Even safer.  Only allows redirects to whitelisted domains.</dd></dl>
<h2><span class="mw-headline" id="Input_Validation">Input Validation</span></h2>
<p>Many of the functions above in <a href="#Output_Sanitation">#Output_Sanitation</a> are useful for input validation.  In addition, WordPress uses the following functions.
</p>
<h3><span class="mw-headline" id="Slugs">Slugs</span></h3>
<dl><dt> <code><a href="../developer.wordpress.org/reference/functions/sanitize_title/index.html" title="Function Reference/sanitize title">sanitize_title</a>( $title )</code></dt>
<dd> Used in post slugs, for example</dd>
<dt> <code><a href="../developer.wordpress.org/reference/functions/sanitize_user/index.html" title="Function Reference/sanitize user">sanitize_user</a>( $username, $strict = false )</code></dt>
<dd> Use <code>$strict</code> when creating a new user (though you should use the API for that).</dd></dl>
<h3><span class="mw-headline" id="HTML">HTML</span></h3>
<dl><dt> <code><a href="Function_Reference/balanceTags.html" title="Function Reference/balanceTags">balanceTags</a>( $html )</code> or <code><a href="../developer.wordpress.org/reference/functions/force_balance_tags/index.html" title="Function Reference/force balance tags">force_balance_tags</a>( $html )</code></dt>
<dd> Tries to make sure HTML tags are balanced so that valid XML is output.</dd>
<dt> <code><a href="../developer.wordpress.org/reference/functions/tag_escape/index.html" title="Function Reference/tag escape">tag_escape</a>( $html_tag_name )</code></dt>
<dd> Sanitizes an HTML tag name (does not escape anything, despite the name of the function).</dd>
<dt> <code><a href="../developer.wordpress.org/reference/functions/sanitize_html_class/index.html" title="Function Reference/sanitize html class">sanitize_html_class</a>( $class, $fallback )</code></dt>
<dd> Santizes a html classname to ensure it only contains valid characters. Strips the string down to A-Z,a-z,0-9,'-' if this results in an empty string then it will return the alternative value supplied.</dd></dl>
<h3><span class="mw-headline" id="Email">Email</span></h3>
<dl><dt> <code><a href="Function_Reference/is_email.html" title="Function Reference/is email">is_email</a>( $email_address )</code></dt>
<dd> returns boolean false if invalid, or $email_address if valid</dd></dl>
<h3><span class="mw-headline" id="Arrays">Arrays</span></h3>
<dl><dt> <code>array_map( 'absint', $array )</code></dt>
<dd> Ensures all elements are nonnegative integers.  Replace callback <tt>'absint'</tt> with whatever is appropriate for your data. <tt>array_map()</tt> is a core PHP function that runs array elements through an arbitrary callback function, in this example, <tt>absint()</tt>.</dd></dl>
<h3><span class="mw-headline" id="Other">Other</span></h3>
<p>Some other functions that may be useful to sanitise data input:
</p>
<ul><li> <a href="../developer.wordpress.org/reference/functions/sanitize_email/index.html" title="Function Reference/sanitize email">sanitize_email()</a></li>
<li> <a href="../developer.wordpress.org/reference/functions/sanitize_file_name/index.html" title="Function Reference/sanitize file name">sanitize_file_name()</a></li>
<li> <a href="../developer.wordpress.org/reference/functions/sanitize_html_class/index.html" title="Function Reference/sanitize html class">sanitize_html_class()</a></li>
<li> <a href="../developer.wordpress.org/reference/functions/sanitize_key/index.html" title="Function Reference/sanitize key">sanitize_key()</a></li>
<li> <a href="../developer.wordpress.org/reference/functions/sanitize_mime_type/index.html" title="Function Reference/sanitize mime type">sanitize_mime_type()</a></li>
<li> <a href="../developer.wordpress.org/reference/functions/sanitize_option/index.html" title="Function Reference/sanitize option">sanitize_option()</a></li>
<li> <a href="../developer.wordpress.org/reference/functions/sanitize_sql_orderby/index.html" title="Function Reference/sanitize sql orderby">sanitize_sql_orderby()</a></li>
<li> <a href="../developer.wordpress.org/reference/functions/sanitize_text_field/index.html" title="Function Reference/sanitize text field">sanitize_text_field()</a></li>
<li> <a href="../developer.wordpress.org/reference/functions/sanitize_title_for_query/index.html" title="Function Reference/sanitize title for query">sanitize_title_for_query()</a></li>
<li> <a href="../developer.wordpress.org/reference/functions/sanitize_title_with_dashes.html" title="Function Reference/sanitize title with dashes">sanitize_title_with_dashes()</a></li>
<li> <a href="../developer.wordpress.org/reference/functions/sanitize_user/index.html" title="Function Reference/sanitize user">sanitize_user()</a></li>
<li> <a href="../developer.wordpress.org/reference/functions/sanitize_meta/index.html" title="Function Reference/sanitize meta">sanitize_meta()</a></li>
<li> <a href="Function_Reference/sanitize_term.html" title="Function Reference/sanitize term">sanitize_term()</a></li>
<li> <a href="Function_Reference/sanitize_term_field.html" title="Function Reference/sanitize term field">sanitize_term_field()</a></li></ul>
<h2><span class="mw-headline" id="Validation_Philosophies">Validation Philosophies</span></h2>
<p>There are several different philosophies about how validation should be done.  Each is appropriate for different scenarios.
</p>
<h3><span class="mw-headline" id="Whitelist">Whitelist</span></h3>
<p>Accept data only from a finite list of known and trusted values.
</p>
<pre>$possible_values = array( 'a', 1, 'good' );
if (&#160;!in_array( $untrusted, $possible_values ) )
  die( "Don't do that!" );
</pre>
<pre>// Be careful here with fancy breaks and default actions.
switch ( $untrusted ) {
case 'a'&#160;:
  ...
  break;
...
default&#160;:
  die( "You hoser!" );
}
</pre>
<h3><span class="mw-headline" id="Blacklist">Blacklist</span></h3>
<p>Reject data from finite list of known untrusted values.  This is very rarely a good idea.
</p>
<h3><span class="mw-headline" id="Format_Detection">Format Detection</span></h3>
<p>Test to see if the data is of the correct format.  Only accept it if it is.
</p>
<pre>if (&#160;!ctype_alnum( $data ) )
  die( "Your data is teh suX0R" );
if ( preg_match( "/[^0-9.-]/", $data ) )
  die( "Float on somewhere else, jerky" );
</pre>
<h3><span class="mw-headline" id="Format_Correction">Format Correction</span></h3>
<p>Accept most any data, but remove or alter the dangerous pieces.
</p>
<pre>$trusted_integer = (int) $untrusted_integer;
$trusted_alpha = preg_replace( '/[^a-z]/i', "", $untrusted_alpha );
$trusted_slug = sanitize_title( $untrusted_slug );
</pre>
<h2><span class="mw-headline" id="Changelog">Changelog</span></h2>
<ul><li> <a href="https://wordpress.org/support/wordpress-version/version-3-1/" title="Version 3.1">3.1</a>: Introduced <code><a href="Function_Reference/esc_textarea.html" title="Function Reference/esc textarea">esc_textarea</a></code>. (<a rel="nofollow" class="external text" href="http://core.trac.wordpress.org/ticket/15454">#15454</a>)</li>
<li> <a href="https://wordpress.org/support/wordpress-version/version-3-0/" title="Version 3.0">3.0</a>: Deprecated <code><a href="#URLs">clean_url()</a></code> in favor of <code>esc_url()</code> and <code>esc_url_raw()</code>. (<a rel="nofollow" class="external text" href="http://core.trac.wordpress.org/ticket/12309">#12309</a>)</li>
<li> <a href="https://wordpress.org/support/wordpress-version/version-2-8/" title="Version 2.8">2.8</a>: Deprecated the following functions. (via <a rel="nofollow" class="external text" href="http://wpdevel.wordpress.com/tag/escaping/">WordPress Development Updates</a>)
<ul><li> <code>sanitize_url()</code> -&gt; <code>esc_url_raw()</code></li>
<li> <code>wp_specialchars()</code> -&gt; <code>esc_html()</code> (also: <code>esc_html__()</code> and <code>esc_html_e()</code>)</li>
<li> <code>attribute_escape()</code> -&gt; <code>esc_attr()</code> (also: <code>esc_attr__()</code> and <code>esc_attr_e()</code>)</li></ul></li></ul>
<h2><span class="mw-headline" id="External_Resources">External Resources</span></h2>
<ul><li> <a rel="nofollow" class="external text" href="http://wp.tutsplus.com/tutorials/creative-coding/data-sanitization-and-validation-with-wordpress/">Data Sanitization and Validation With WordPress</a> by Stephen Harris</li>
<li> <a rel="nofollow" class="external text" href="http://wordpress.tv/2011/01/29/mark-jaquith-theme-plugin-security/">Theme and Plugin Security</a> by Mark Jaquith</li>
<li> <a rel="nofollow" class="external text" href="http://groups.google.com/group/wp-hackers/browse_thread/thread/8f1466febb168935?pli=1">wp_specialchars() vs attribute_escape() ( now esc_attr() ) and quote entity-encoding</a>.</li></ul>

<!-- 
NewPP limit report
Cached time: 20210122142750
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.020 seconds
Real time usage: 0.025 seconds
Preprocessor visited node count: 153/1000000
Preprocessor generated node count: 416/1000000
Post‐expand include size: 1805/2097152 bytes
Template argument size: 569/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    7.258      1 - -total
 56.39%    4.093      1 - Template:Languages
 42.56%    3.089      1 - Template:ru:Stub
 17.41%    1.264      1 - Template:Message
 15.00%    1.089      1 - Template:ja
 12.84%    0.932      1 - Template:ru
 12.36%    0.897      1 - Template:en
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://codex.wordpress.org/index.php?title=%d0%92%d0%b0%d0%bb%d0%b8%d0%b4%d0%b0%d1%86%d0%b8%d1%8f_%d0%b4%d0%b0%d0%bd%d0%bd%d1%8b%d1%85&amp;oldid=139860">https://codex.wordpress.org/index.php?title=Валидация_данных&amp;oldid=139860</a>"</div>
				<div id="catlinks"><div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://codex.wordpress.org/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="Category_Stubs.html" title="Category:Stubs">Stubs</a></li><li><a href="Category_Security.html" title="Category:Security">Security</a></li><li><a href="Category_WordPress_Development.html" title="Category:WordPress Development">WordPress Development</a></li><li><a href="Category_Russian_Codex.html" title="Category:Russian Codex">Russian Codex</a></li></ul></div></div></div>			<!-- end content -->
		</div>
		<div class="col-2">
			
						
			<ul class="submenu">
				<li id="n-mainpage"><a href="Main_Page.html">Home Page</a></li>	
				<li><a href="WordPress_Lessons.html">WordPress Lessons</a></li>
				<li><a href="Getting_Started_with_WordPress.html">Getting Started</a></li>
				<li><a href="Working_with_WordPress.html">Working with WordPress</a></li>
				<li><a href="Blog_Design_and_Layout.html">Design and Layout</a></li>
				<li><a href="Advanced_Topics.html">Advanced Topics</a></li>
				<li><a href="Troubleshooting.html">Troubleshooting</a></li>
				<li><a href="Developer_Documentation.html">Developer Docs</a></li>
				<li><a href="About_WordPress.html">About WordPress</a></li>
			</ul>

			<h3>Codex Resources</h3>
			<ul class="submenu">
				<li id="n-portal"><a href="https://codex.wordpress.org/Codex:Community_Portal">Community portal</a></li>	      
				<li id="n-currentevents"><a href="Current_events.html">Current events</a></li>	      
				<li id="n-recentchanges"><a href="https://codex.wordpress.org/Special:RecentChanges">Recent changes</a></li>	      
				<li id="n-randompage"><a href="https://codex.wordpress.org/Special:Random">Random page</a></li>	      
				<li id="n-help"><a href="https://codex.wordpress.org/Help:Contents">Help</a></li>	
			</ul>
			
		</div>
	</div>
</div>


<div id="wporg-footer">
	<div class="wrapper">
		<ul>
			<li><a href="http://wordpress.org/about/" title="An introduction to the WordPress project">About</a></li>
			<li><a href="http://wordpress.org/news/" title="News and Updates">Blog</a></li>
			<li><a href="http://wordpress.org/hosting/" title="Recommended web hosting providers">Hosting</a></li>
			<li><a href="https://wordpressfoundation.org/donate/" title="Donate to the WordPress Foundation">Donate</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.org/support/" title="Forums, documentation, and other resources">Support</a></li>
			<li><a href="../developer.wordpress.org/index.html" title="Resources for WordPress developers">Developers</a></li>
			<li><a href="http://make.wordpress.org/" title="Give back to WordPress through code, support, translation and more">Get Involved</a></li>
			<li><a href="http://learn.wordpress.org/" title="Workshops and training materials">Learn</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.org/showcase/" title="Some of the best WordPress sites on the Web">Showcase</a></li>
			<li><a href="http://wordpress.org/plugins/" title="Add extra functionality to WordPress">Plugins</a></li>
			<li><a href="http://wordpress.org/themes/" title="Make your WordPress pretty">Themes</a></li>
		</ul>

		<ul>
			<li><a href="http://central.wordcamp.org/" title="Find a WordPress event near you">WordCamp</a></li>
			<li><a href="http://wordpress.tv/" title="Videos, tutorials, and WordCamp sessions">WordPress.TV</a></li>
			<li><a href="http://buddypress.org/" title="A set of plugins to transform your WordPress into a social network">BuddyPress</a></li>
			<li><a href="http://bbpress.org/" title="Fast, slick forums built on WordPress">bbPress</a></li>
		</ul>

		<ul>
			<li><a href="http://wordpress.com/?ref=wporg-footer" title="Hassle-free WordPress hosting">WordPress.com</a></li>
			<li><a href="http://ma.tt/" title="Co-founder of WordPress, an example of what WordPress can do">Matt</a></li>
			<li><a href="http://wordpress.org/about/privacy/" title="WordPress.org Privacy Policy">Privacy</a></li>
			<li><a href="https://publiccode.eu/" target="_blank">Public Code</a></li>
		</ul>

		<ul>
			<li><span class="dashicons dashicons-twitter"></span><a href="https://twitter.com/WordPress" title="Follow @WordPress on Twitter">@WordPress</a></li>
			<li><span class="dashicons dashicons-facebook"></span><a href="https://www.facebook.com/WordPress/" title="Like WordPress on Facebook">WordPress</a></li>
		</ul>
	</div>

		<p class="cip cip-image">Code is Poetry.</p>
</div>

<script src="../s.w.org/style/js/navigation.min.js?20190128"></script>

</body>
<!-- Cached 20210122142750 -->

<!-- Mirrored from codex.wordpress.org/Валидация_данных by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Aug 2021 17:07:53 GMT -->
</html>
