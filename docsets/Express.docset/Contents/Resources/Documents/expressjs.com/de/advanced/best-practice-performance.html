<!DOCTYPE html>

<html lang="de" prefix="og: http://ogp.me/ns#">

<!-- Mirrored from expressjs.com/de/advanced/best-practice-performance.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 10 Jul 2019 00:23:46 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<title>Leistungsspezifische Best Practices f√ºr Express-Anwendungen in Produktionsumgebungen</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="og:image" content="../../images/express-facebook-share.png">
<link rel="icon" type="image/png" href="../../images/favicon.png" />
<link rel="stylesheet" href="../../css/style.css">
<link rel="stylesheet" href="../../css/dropit.css">
<link rel="stylesheet" href="../../css/prism.css">
<link rel="stylesheet" href="../../css/font-awesome.min.css">
<link rel="stylesheet" href="../../../fonts.googleapis.com/css2a1d.css?family=Open+Sans:300,400,600,700&amp;amp;subset=latin,latin-ext">
<link rel="stylesheet" href="../../css/de.css">
<link rel="stylesheet" href="../../css/nodeinteractive.css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script data-cfasync="false" src="../../../ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script data-cfasync="false" src="../../js/ismobile.js"></script>
<script data-cfasync="false" src="../../js/app.js"></script>
<script data-cfasync="false" src="../../js/retina.js"></script>
<script data-cfasync="false" src="../../js/dropit.js"></script>
<script data-cfasync="false" src="../../js/prism.js"></script>
<link rel="stylesheet" href="../../../cdn.jsdelivr.net/npm/docsearch.js%402/dist/cdn/docsearch.min.css" />
</head>
<body class="non-en-doc">
<section class="page content">
<header>
<div id="mobile-menu">
<div id="nav-button" class="fa fa-bars fa-2x button"></div>
</div>
<section id="logo"><a href="../../index.html" class="express">Express</a>
</section>
<div id="navbar">
<input id="q" placeholder="üîé search">
<ul id="navmenu">
<li><a href="../index.html" id="home-menu">Home</a></li>
<li>
<ul id="getting-started-menu" class="menu">
<li><a href="../starter/installing.html">Einf√ºhrung</a>
<ul>
<li>
<a href="../starter/installing.html">
Installation
</a>
</li>
<li>
<a href="../starter/hello-world.html">
Hello World
</a>
</li>
<li>
<a href="../starter/generator.html">
Express Generator
</a>
</li>
<li>
<a href="../starter/basic-routing.html">
Basisrouting
</a>
</li>
<li>
<a href="../starter/static-files.html">
Statische Dateien
</a>
</li>
<li>
<a href="../starter/faq.html">
H√§ufig gestellte Fragen</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul id="guide-menu" class="menu">
<li><a href="../guide/routing.html">Leitfaden</a>
<ul>
<li><a href="../guide/routing.html">Routing</a>
</li>
<li><a href="../guide/writing-middleware.html">Middleware schreiben</a>
</li>
<li><a href="../guide/using-middleware.html">Middleware verwenden</a>
</li>
<li><a href="../guide/using-template-engines.html">Template-Engines verwenden</a>
</li>
<li><a href="../guide/error-handling.html">Fehlerbehandlung</a>
</li>
<li><a href="../guide/debugging.html">Debugging</a>
</li>
<li><a href="../guide/behind-proxies.html">Express hinter Proxys</a>
</li>
<li><a href="../guide/migrating-4.html">Wechsel zu Express 4</a>
</li>
<li><a href="../guide/migrating-5.html">Wechsel zu Express 5</a>
</li>
<li><a href="../guide/database-integration.html">Datenbankintegration</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul id="application-menu" class="menu">
<li><a href="../4x/api.html">API-Referenz</a>
<ul>
<li><a href="../4x/api.html">4.x</a>
</li>
<li><a href="../3x/api.html">3.x (veraltet)</a>
</li>
<li><a href="../../2x/index.html">2.x (veraltet)</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul id="advanced-topics-menu" class="menu">
<li><a href="developing-template-engines.html" class="active">Themen f√ºr Fortgeschrittene</a>
<ul>
<li><a href="developing-template-engines.html">Template-Engines</a>
</li>
<li><a href="pm.html">Process Manager verwenden</a>
</li>
<li><a href="security-updates.html">Sicherheitsupdates</a>
</li>
 <li><a href="best-practice-security.html">Sicherheitsspezifische Best Practices</a>
</li>
<li><a href="best-practice-performance.html">Leistungsspezifische Best Practices</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul id="resources-menu" class="menu">
<li><a href="../resources/glossary.html">Ressourcen</a>
<ul>
<li><a href="../resources/glossary.html">Glossar</a>
</li>
<li><a href="../resources/middleware.html">Middleware</a>
</li>
<li><a href="../resources/community.html">Community</a>
</li>
<li><a href="../resources/books-blogs.html">Handb√ºcher und Blogs</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</header>
<div id="overlay"></div>
<div id="i18n-notice-box" class="doc-box doc-warn">
<p><p>Diese √úbersetzung zur Verf√ºgung gestellt von <a href="http://strongloop.com/">StrongLoop / IBM</a>.</p>
Dieses Dokument kann im Vergleich zur englischen Dokumentation veraltet sein. Aktuelle Updates finden Sie in der <a href="../../index.html">englischen Dokumentation</a>.
</p>
<div id="close-i18n-notice-box" title="Close">‚úñ</div>
</div>
<div id="page-doc" markdown="1">
<h1 id="best-practices-in-produktionsumgebungen-leistung-und-zuverl√§ssigkeit">Best Practices in Produktionsumgebungen: Leistung und Zuverl√§ssigkeit</h1>
<h2 id="√ºberblick">√úberblick</h2>
<p>In diesem Beitrag werden Best Practices in Bezug auf Leistung und Zuverl√§ssigkeit f√ºr Express-Anwendungen behandelt, die in der Produktionsumgebung bereitgestellt werden.</p>
<p>Dieses Thema geh√∂rt sicherlich zur ‚ÄúDevOps‚Äù-Welt und deckt traditionelle Entwicklungs- und Betriebsprozesse ab. Entsprechend sind die Informationen hier in zwei Teile unterteilt:</p>
<ul>
<li><a href="#code">Empfehlungen f√ºr Ma√ünahmen an Ihrem Code</a> (Entwicklung).</li>
<li><a href="#env">Empfehlungen f√ºr Ma√ünahmen an Ihrer Umgebung/Ihrem Setup</a> (Betrieb).</li>
</ul>
<p><a name="code"></a></p>
<h2 id="empfehlungen-f√ºr-ma√ünahmen-an-ihrem-code">Empfehlungen f√ºr Ma√ünahmen an Ihrem Code</h2>
<p>Dies sind einige Beispiele f√ºr Ma√ünahmen, die Sie an Ihrem Code vornehmen k√∂nnen, um die Anwendungsleistung zu verbessern:</p>
<ul>
<li>GZIP-Komprimierung verwenden</li>
<li>Keine synchronen Funktionen verwenden</li>
<li>F√ºr statische Dateien Middleware verwenden</li>
<li>Auf ordnungsgem√§√üe Protokollierung achten</li>
<li>Ausnahmebedingungen ordnungsgem√§√ü handhaben</li>
</ul>
<h3 id="gzip-komprimierung-verwenden">GZIP-Komprimierung verwenden</h3>
<p>Mit der GZIP-Komprimierung l√§sst sich die Gr√∂√üe des Antworthauptteils deutlich verringern und somit die Geschwindigkeit der Webanwendung erh√∂hen. Verwenden Sie die Middleware <a href="https://www.npmjs.com/package/compression">compression</a> f√ºr die GZIP-Komprimierung in Ihrer Express-Anwendung. Beispiel:</p>
<pre><code class="language-javascript" translate="no">
var compression = require('compression');
var express = require('express');
var app = express();
app.use(compression());
</code>
</pre>
<p>Bei Websites mit hohem Datenverkehr in Produktionsumgebungen l√§sst sich die Komprimierung am besten installieren, indem sie auf Reverse Proxy-Ebene implementiert wird (siehe <a href="#proxy">Reverse Proxy verwenden</a>). In diesem Fall wird die Middleware ‚Äúcompression‚Äù nicht ben√∂tigt. Details zur Aktivierung der GZIP-Komprimierung in Nginx siehe <a href="http://nginx.org/en/docs/http/ngx_http_gzip_module.html">Modul ngx_http_gzip_module</a> in der Nginx-Dokumentation.</p>
<h3 id="keine-synchronen-funktionen-verwenden">Keine synchronen Funktionen verwenden</h3>
<p>Synchrone Funktionen und Methoden belasten den Ausf√ºhrungsprozess, bis sie zur√ºckgegeben werden. Ein einzelner Aufruf f√ºr eine synchrone Funktion kann in wenigen Mikrosekunden oder Millisekunden zur√ºckgegeben werden. Bei Websites mit hohem Datenverkehr hingegen summieren sich diese Aufrufe und verringern die Leistung der Anwendung. Sie sollten also deren Verwendung in Produktionsumgebungen vermeiden.</p>
<p>Auch wenn Node und viele andere Module synchrone und asynchrone Versionen ihrer Funktionen bieten, sollten Sie in Produktionsumgebungen immer die asynchrone Version verwenden. Nur beim ersten Systemstart ist die Verwendung einer synchronen Funktion begr√ºndet.</p>
<p>Wenn Sie Node.js 4.0 und h√∂her oder io.js 2.1.0 und h√∂her verwenden, k√∂nnen Sie √ºber das Befehlszeilenflag <code>--trace-sync-io</code> eine Warnung und einen Stack-Trace ausgeben, wenn Ihre Anwendung eine synchrone API verwendet. Auch wenn Sie diese nat√ºrlich nicht in der Produktionsumgebung verwenden werden, soll dadurch trotzdem sichergestellt werden, dass Ihr Code in der Produktionsumgebung eingesetzt werden kann. Weitere Informationen hierzu siehe <a href="https://nodejs.org/en/blog/weekly-updates/weekly-update.2015-05-22/#2-1-0">W√∂chentliches Update f√ºr io.js 2.1.0</a>.</p>
<h3 id="f√ºr-statische-dateien-middleware-verwenden">F√ºr statische Dateien Middleware verwenden</h3>
<p>Bei der Entwicklung k√∂nnen Sie <a href="../4x/api.html#res.sendFile">res.sendFile()</a> f√ºr statische Dateien verwenden. Dies gilt jedoch nicht f√ºr die Produktionsumgebung, da diese Funktion bei jeder Dateianforderung aus dem Dateisystem lesen muss. Dadurch kommt es zu deutlichen Latenzen, die sich negativ auf die Gesamtleistung der Anwendung auswirken. Beachten Sie, dass <code>res.sendFile()</code> <em>nicht</em> mit dem Systemaufruf <a href="http://linux.die.net/man/2/sendfile">sendfile</a> implementiert wird, wodurch dieser deutlich effizienter w√§re.</p>
<p>Verwenden Sie stattdessen die Middleware <a href="https://www.npmjs.com/package/serve-static">serve-static</a> (oder etwas Vergleichbares), die f√ºr die Bereitstellung von Dateien f√ºr Express-Anwendungen optimiert ist.</p>
<p>Die bessere Option w√§re, f√ºr statische Dateien einen Reverse Proxy zu verwenden. Weitere Informationen siehe <a href="#proxy">Reverse Proxy verwenden</a>.</p>
<h3 id="auf-ordnungsgem√§√üe-protokollierung-achten">Auf ordnungsgem√§√üe Protokollierung achten</h3>
<p>Im Allgemeinen gibt es f√ºr die Protokollierung Ihrer Anwendung zwei Gr√ºnde: 1) Debugging und 2) Protokollierung von Anwendungsaktivit√§ten (im Wesentlichen alles andere, au√üer Debugging). Die Verwendung von<code>console.log()</code> oder <code>console.err()</code> zur Ausgabe von Protokollnachrichten an das Terminal ist in der Entwicklung g√§ngige Praxis. <a href="https://nodejs.org/api/console.html#console_console_1">Diese Funktionen sind jedoch synchron</a>, wenn das Ziel ein Terminal oder eine Datei ist. Sie sind also f√ºr Produktionsumgebungen nicht geeignet, es sei denn, Sie leiten die Ausgabe per Pipe zu einem anderen Programm um.</p>
<h4 id="f√ºr-debuggingzwecke">F√ºr Debuggingzwecke</h4>
<p>Wenn Sie die Protokollierung f√ºr Debuggingzwecke nutzen, sollten Sie statt <code>console.log()</code> besser ein spezielles Debuggingmodul wie <a href="https://www.npmjs.com/package/debug">debug</a> verwenden. Mit einem solchen Modul k√∂nnen Sie √ºber die Umgebungsvariable DEBUG steuern, welche Debugnachrichten an <code>console.err()</code> gesendet werden (falls vorhanden). Um Ihre Anwendung rein asynchron zu halten, k√∂nnen Sie trotzdem <code>console.err()</code> per Pipe zu einem anderen Programm umleiten. Sie nehmen dann aber kein Debugging in der Produktionsumgebung vor, richtig?</p>
<h4 id="f√ºr-anwendungsaktivit√§ten">F√ºr Anwendungsaktivit√§ten</h4>
<p>Wenn Sie Anwendungsaktivit√§ten protokollieren (z. B. den Datenverkehr oder API-Aufrufe aufzeichnen), sollten Sie statt <code>console.log()</code> eine Protokollierungsbibliothek wie <a href="https://www.npmjs.com/package/winston">Winston</a> oder <a href="https://www.npmjs.com/package/bunyan">Bunyan</a> verwenden. Einen ausf√ºhrlichen Vergleich dieser beiden Bibliotheken finden Sie im StrongLoop-Blogbeitrag <a href="https://strongloop.com/strongblog/compare-node-js-logging-winston-bunyan/">Vergleich von Winston und Bunyan f√ºr die Node.js-Protokollierung</a>.</p>
<p><a name="exceptions"></a></p>
<h3 id="ausnahmebedingungen-ordnungsgem√§√ü-handhaben">Ausnahmebedingungen ordnungsgem√§√ü handhaben</h3>
<p>Node-Anwendungen st√ºrzen ab, wenn eine nicht abgefangene Ausnahmebedingung vorkommt. Wenn diese Ausnahmebedingungen nicht behandelt und entsprechende Ma√ünahmen eingeleitet werden, st√ºrzt Ihre Express-Anwendung ab und geht offline. Wenn Sie dem nachfolgenden Rat in <a href="#restart">Sicherstellen, dass Ihre Anwendung automatisch neu gestartet wird</a> folgen, wird Ihre Anwendung nach einem Absturz wiederhergestellt. Gl√ºcklicherweise haben Express-Anwendungen nur eine kurze Initialisierungszeit. Nichtsdestotrotz sollten Sie in erster Linie solche Abst√ºrze vermeiden. Und hierzu m√ºssen Sie Ausnahmebedingungen ordnungsgem√§√ü handhaben.</p>
<p>Mit folgenden Verfahren stellen Sie sicher, dass alle Ausnahmebedingungen gehandhabt werden:</p>
<ul>
<li><a href="#try-catch">‚Äútry-catch‚Äù verwenden</a></li>
<li><a href="#promises">‚ÄúPromises‚Äù verwenden</a></li>
</ul>
<p>Um n√§her auf diese Themen eingehen zu k√∂nnen, m√ºssen Sie sich ein grundlegendes Verst√§ndnis der Fehlerbehandlung in Node und Express aneignen: Verwendung von Error-first-Callbacks und Propagieren von Fehlern in Middleware. Node verwendet die Konvention ‚ÄúError-first-Callback‚Äù f√ºr die R√ºckgabe von Fehlern von asynchronen Funktionen, bei denen der erste Parameter zur Callback-Funktion das Fehlerobjekt ist, gefolgt von Ergebnisdaten in den nachfolgenden Parametern. Um anzugeben, dass kein Fehler vorliegt, m√ºssen Sie ‚Äúnull‚Äù als ersten Parameter √ºbergeben. Die Callback-Funktion muss der Konvention ‚ÄúError-first-Callback‚Äù folgen, um den Fehler sinnvoll bearbeiten zu k√∂nnen. In Express hat sich bew√§hrt, die Funktion ‚Äúnext()‚Äù zu verwenden, um Fehler √ºber die Middleware-Chain zu propagieren.</p>
<p>Weitere Informationen zu den Grundlagen der Fehlerbehandlung siehe:</p>
<ul>
<li><a href="https://www.joyent.com/developers/node/design/errors">Fehlerbehandlung in Node.js</a></li>
<li><a href="https://strongloop.com/strongblog/robust-node-applications-error-handling/">Aufbau leistungsf√§higer Node-Anwendungen: Fehlerbehandlung</a> (StrongLoop-Blog)</li>
</ul>
<h4 id="was-sie-unterlassen-sollten">Was Sie unterlassen sollten</h4>
<p>Sie sollten <em>auf keinen</em> Fall per Listener das Ereignis <code>uncaughtException</code> √ºberwachen, das ausgegeben wird, wenn eine Ausnahmebedingung bis zur√ºck zur Ereignisschleife bestehen bleibt. Durch das Hinzuf√ºgen eines Ereignislisteners f√ºr <code>uncaughtException</code> ver√§ndert sich das Standardverhalten des Prozesses, √ºber das eine Ausnahmebedingung festgestellt wird. Der Prozess l√§uft dann trotz der Ausnahmebedingung weiter. Dies mag sich vielleicht gut anh√∂ren, um einem Absturz Ihrer Anwendung vorzubeugen. Das Ausf√ºhren einer Anwendung nach einer nicht abgefangenen Ausnahmebedingung ist aber eine durchaus riskante Vorgehensweise und wird nicht empfohlen, da der Prozessstatus st√∂ranf√§llig und unvorhersehbar wird.</p>
<p>Au√üerdem wird die Verwendung von <code>uncaughtException</code> offiziell als <a href="https://nodejs.org/api/process.html#process_event_uncaughtexception">grobes Vorgehen</a> angesehen, sodass es den <a href="https://github.com/nodejs/node-v0.x-archive/issues/2582">Vorschlag</a> gibt, die Funktion aus dem Kern zu entfernen. Das √úberwachen von <code>uncaughtException</code> per Listener ist also keine gute Idee. Daher empfehlen wir Dinge wie Mehrfachprozesse und Supervisoren: Ein Absturz und anschlie√üender Neustart ist h√§ufig die zuverl√§ssigste Art der Fehlerbehebung.</p>
<p>Zudem empfehlen wir, <a href="https://nodejs.org/api/domain.html">domains</a> nicht zu verwenden. Mit diesem Modul, das zudem veraltet ist, l√§sst sich das Problem in der Regel nicht l√∂sen.</p>
<p><a name="try-catch"></a></p>
<h4 id="try-catch-verwenden">‚Äútry-catch‚Äù verwenden</h4>
<p>‚Äútry-catch‚Äù ist ein JavaScript-Sprachkonstrukt, mit dem Sie Ausnahmebedingungen in synchronem Code abfangen k√∂nnen. Verwenden Sie ‚Äútry-catch‚Äù beispielsweise, um JSON-Parsing-Fehler wie unten gezeigt zu bearbeiten.</p>
<p>Verwenden Sie ein Tool wie <a href="http://jshint.com/">JSHint</a> oder <a href="http://www.jslint.com/">JSLint</a>, um implizite Ausnahmebedingungen wie <a href="http://www.jshint.com/docs/options/#undef">Referenzfehler bei nicht definierten Variablen</a> zu finden.</p>
<p>Dies ist ein Beispiel zur Verwendung von ‚Äútry-catch‚Äù, um eine potenzielle ‚Äúprocess-crashing‚Äù-Ausnahmebedingung zu handhaben. Diese Middlewarefunktion akzeptiert einen Abfragefeldparameter mit dem Namen ‚Äúparams‚Äù, der ein JSON-Objekt ist.</p>
<pre><code class="language-javascript" translate="no">
app.get('/search', function (req, res) {
  // Simulating async operation
  setImmediate(function () {
    var jsonStr = req.query.params;
    try {
      var jsonObj = JSON.parse(jsonStr);
      res.send('Success');
    } catch (e) {
      res.status(400).send('Invalid JSON string');
    }
  });
});
</code>
</pre>
<p>‚Äútry-catch‚Äù funktioniert jedoch nur in synchronem Code. Da die Node-Plattform prim√§r asynchron ist (insbesondere in einer Produktionsumgebung), lassen sich mit ‚Äútry-catch‚Äù nicht besonders viele Ausnahmebedingungen abfangen.</p>
<p><a name="promises"></a></p>
<h4 id="promises-verwenden">‚ÄúPromises‚Äù verwenden</h4>
<p>Mit ‚ÄúPromises‚Äù werden alle Ausnahmebedingungen (explizite und implizite) in asynchronen Codebl√∂cken gehandhabt, die <code>then()</code> verwenden. Sie m√ºssen nur <code>.catch(next)</code> am Ende der Promises-Ketten hinzuf√ºgen. Beispiel:</p>
<pre><code class="language-javascript" translate="no">
app.get('/', function (req, res, next) {
  // do some sync stuff
  queryDb()
    .then(function (data) {
      // handle data
      return makeCsv(data)
    })
    .then(function (csv) {
      // handle csv
    })
    .catch(next);
});

app.use(function (err, req, res, next) {
  // handle error
});
</code>
</pre>
<p>Jetzt werden alle asynchronen und synchronen Fehler zur Middleware ‚Äúerror‚Äù propagiert.</p>
<p>Es gibt jedoch zwei Vorbehalte:</p>
<ol>
<li>Der gesamte asynchrone Code muss ‚ÄúPromises‚Äù zur√ºckgeben (au√üer Emitter). Wenn eine bestimmte Bibliothek keine ‚ÄúPromises‚Äù zur√ºckgibt, m√ºssen Sie das Basisobjekt mit einer Helper-Funktion wie <a href="http://bluebirdjs.com/docs/api/promise.promisifyall.html">Bluebird.promisifyAll()</a> konvertieren.</li>
<li>Ereignisemitter (wie Streams) k√∂nnen nach wie vor nicht abgefangene Ausnahmebedingungen verursachen. Sie m√ºssen also sicherstellen, dass Sie das Fehlerereignis ordnungsgem√§√ü handhaben. Beispiel:</li>
</ol>
<pre><code class="language-javascript" translate="no">
app.get('/', wrap(async (req, res, next) =&gt; {
  let company = await getCompanyById(req.query.id)
  let stream = getLogoStreamById(company.id)
  stream.on('error', next).pipe(res)
}));
</code>
</pre>
<p>Weitere Informationen zur Fehlerbehandlung mithilfe von ‚ÄúPromises‚Äù siehe:</p>
<ul>
<li><a href="https://strongloop.com/strongblog/async-error-handling-expressjs-es7-promises-generators/">Asynchrone Fehlerbehandlung in Express mit ‚ÄúPromises‚Äù, Generatoren und ES7</a></li>
<li><a href="https://strongloop.com/strongblog/promises-in-node-js-with-q-an-alternative-to-callbacks/">‚ÄúPromises‚Äù in Node.js mit Q ‚Äì eine Alternative zu Callbacks</a></li>
</ul>
<p><a name="env"></a></p>
<h2 id="empfehlungen-f√ºr-ma√ünahmen-an-ihrer-umgebungihrem-setup">Empfehlungen f√ºr Ma√ünahmen an Ihrer Umgebung/Ihrem Setup</h2>
<p>Dies sind einige Beispiele f√ºr Ma√ünahmen, die Sie an Ihrer Systemumgebung vornehmen k√∂nnen, um die Anwendungsleistung zu verbessern:</p>
<ul>
<li>NODE_ENV auf ‚Äúproduction‚Äù festlegen</li>
<li>Automatischen Neustart Ihrer Anwendung sicherstellen</li>
<li>Anwendung in einem Cluster ausf√ºhren</li>
<li>Anforderungsergebnisse im Cache speichern</li>
<li>Load Balancer verwenden</li>
<li>Reverse Proxy verwenden</li>
</ul>
<h3 id="node_env-auf-production-festlegen">NODE_ENV auf ‚Äúproduction‚Äù festlegen</h3>
<p>In der Umgebungsvariablen NODE_ENV wird die Umgebung angegeben, in der eine Anwendung ausgef√ºhrt wird (in der Regel ist dies die Entwicklungs- oder Produktionsumgebung). Am einfachsten l√§sst sich die Leistung verbessern, indem NODE_ENV auf ‚Äúproduction‚Äù festgelegt wird.</p>
<p>Durch das Festlegen von NODE_ENV auf ‚Äúproduction‚Äù f√ºhrt Express Folgendes aus:</p>
<ul>
<li>Speichern von Anzeigevorlagen im Cache.</li>
<li>Speichern von CSS-Dateien, die aus CSS-Erweiterungen generiert wurden, im Cache.</li>
<li>Generieren von weniger ausf√ºhrlichen Fehlernachrichten.</li>
</ul>
<p><a href="http://apmblog.dynatrace.com/2015/07/22/the-drastic-effects-of-omitting-node_env-in-your-express-js-applications/">Tests deuten darauf hin</a>, dass alleine dadurch die Anwendungsleistung um den Faktor 3 verbessert werden kann!</p>
<p>Wenn Sie umgebungsspezifischen Code schreiben m√ºssen, k√∂nnen Sie den Wert von NODE_ENV mit <code>process.env.NODE_ENV</code> √ºberpr√ºfen. Beachten Sie, dass die √úberpr√ºfung des Werts seiner Umgebungsvariablen eine leistungsbezogene Penalisierung nach sich zieht. Sie sollten also sehr sparsam damit umgehen.</p>
<p>In einer Entwicklungsumgebung wird die Umgebungsvariable in der Regel in Ihrer interaktiven Shell festgelegt, indem Sie beispielsweise <code>export</code> oder Ihre Datei <code>.bash_profile</code> verwenden. Im Allgemeinen sollten Sie dies nicht auf dem Produktionsserver vornehmen. Verwenden Sie stattdessen das Init-System (systemd oder Upstart) Ihres Betriebssystems. Der n√§chste Abschnitt enth√§lt weitere Details zur Verwendung des Init-Systems im Allgemeinen. Die Festlegung von NODE_ENV ist jedoch f√ºr das Leistungsverhalten so wichtig (und so einfach durchzuf√ºhren), dass hier besonders darauf eingegangen wird.</p>
<p>Verwenden Sie bei Upstart das Schl√ºsselwort <code>env</code> in Ihrer Jobdatei. Beispiel:</p>
<pre><code class="language-sh" translate="no">
# /etc/init/env.conf
 env NODE_ENV=production
</code>
</pre>
<p>Weitere Informationen hierzu siehe <a href="http://upstart.ubuntu.com/cookbook/#environment-variables">Upstart Intro, Cookbook and Best Practices</a>.</p>
<p>Verwenden Sie bei systemd die Anweisung <code>Environment</code> in Ihrer Einheitendatei. Beispiel:</p>
<pre><code class="language-sh" translate="no">
# /etc/systemd/system/myservice.service
Environment=NODE_ENV=production
</code>
</pre>
<p>Weitere Informationen siehe <a href="https://coreos.com/os/docs/latest/using-environment-variables-in-systemd-units.html">Umgebungsvariablen in systemd-Einheiten verwenden</a>.</p>
<p>Wenn Sie StrongLoop Process Manager verwenden, k√∂nnen Sie auch die <a href="https://docs.strongloop.com/display/SLC/Setting+up+a+production+host#Settingupaproductionhost-Setenvironmentvariables">Umgebungsvariable festlegen, wenn Sie StrongLoop Process Manager als Service installieren</a>.</p>
<h3 id="automatischen-neustart-ihrer-anwendung-sicherstellen">Automatischen Neustart Ihrer Anwendung sicherstellen</h3>
<p>In der Produktionsumgebung sollte die Anwendung nie offline sein. Das bedeutet, dass Sie sicherstellen m√ºssen, dass die Anwendung bei einem Absturz der Anwendung oder des Servers immer wieder neu gestartet wird. Auch wenn man hofft, das keines dieser Ereignisse jemals eintritt, muss man doch mit beiden M√∂glichkeiten rechnen und:</p>
<ul>
<li>einen Prozessmanager verwenden, um die Anwendung (und Node) bei einem Absturz neu zu starten.</li>
<li>das Init-System Ihres Betriebssystems verwenden, um den Prozessmanager bei einem Absturz des Betriebssystems neu zu starten. Au√üerdem kann das Init-System auch ohne einen Prozessmanager verwendet werden.</li>
</ul>
<p>Node-Anwendungen st√ºrzen ab, wenn eine nicht abgefangene Ausnahmebedingung auftritt. Als Erstes m√ºssen Sie in einem solchen Fall sicherstellen, dass Ihre Anwendung ausreichend getestet wurde und in der Lage ist, alle Ausnahmebedingungen zu handhaben (weitere Informationen siehe <a href="#exceptions">Ausnahmebedingungen ordnungsgem√§√ü handhaben</a>). Die sicherste Ma√ünahme ist jedoch, einen Mechanismus zu implementieren, √ºber den bei einem Absturz der Anwendung ein automatischer Neustart der Anwendung ausgef√ºhrt wird.</p>
<h4 id="prozessmanager-verwenden">Prozessmanager verwenden</h4>
<p>In Entwicklungumgebungen wird die Anwendung einfach √ºber die Befehlszeile mit <code>node server.js</code> oder einer vergleichbaren Datei gestartet. In der Produktionsumgebung hingegen ist durch diese Vorgehensweise die Katastrophe bereits vorprogrammiert. Wenn die Anwendung abst√ºrzt, ist sie solange offline, bis Sie sie erneut starten. Um sicherzustellen, dass Ihre Anwendung nach einem Absturz neu gestartet wird, sollten Sie einen Prozessmanager verwenden. Ein Prozessmanager ist ein ‚ÄúContainer‚Äù f√ºr Anwendungen, der die Bereitstellung erleichtert, eine hohe Verf√ºgbarkeit sicherstellt und die Verwaltung der Anwendung zur Laufzeit erm√∂glicht.</p>
<p>Neben einem Neustart der Anwendung nach einem Absturz bietet ein Prozessmanager noch weitere M√∂glichkeiten:</p>
<ul>
<li>Einblicke in die Laufzeitleistung und die Ressourcennutzung</li>
<li>Dynamische √Ñnderung der Einstellungen zur Verbesserung des Leistungsverhaltens</li>
<li>Steuerung des Clustering (StrongLoop PM und PM2)</li>
</ul>
<p>Die g√§ngigsten Prozessmanager f√ºr Node sind:</p>
<ul>
<li><a href="http://strong-pm.io/">StrongLoop Process Manager</a></li>
<li><a href="https://github.com/Unitech/pm2">PM2</a></li>
<li><a href="https://www.npmjs.com/package/forever">Forever</a></li>
</ul>
<p>Einen Vergleich der Features und Funktionen dieser Prozessmanager finden Sie hier: <a href="http://strong-pm.io/compare/">http://strong-pm.io/compare/</a>. Eine ausf√ºhrliche Einf√ºhrung in diese drei Prozessmanager finden Sie hier: <a href="pm.html">Prozessmanager f√ºr Express-Anwendungen</a>.</p>
<p>Die Verwendung eines dieser Prozessmanager reicht aus, um Ihre Anwendung betriebsbereit zu halten, selbst wenn sie hin und wieder abst√ºrzt.</p>
<p>StrongLoop PM verf√ºgt jedoch √ºber zahlreiche Features und Funktionen, die sich speziell auf Implementierungen in der Produktionsumgebung beziehen. Sie k√∂nnen diesen Prozessmanager und die zugeh√∂rigen StrongLoop-Tools f√ºr folgende Zwecke verwenden:</p>
<ul>
<li>Lokales Erstellen und Packen Ihrer Anwendung mit anschlie√üender sicherer Bereitstellung auf Ihrem Produktionssystem</li>
<li>Automatischer Neustart Ihrer Anwendung nach einem Absturz aus irgendeinem Grund</li>
<li>Verwaltung Ihrer Cluster √ºber Fernzugriff</li>
<li>Anzeige von CPU-Profilen und Heapspeichermomentaufnahmen (Heap-Snapshots) zur Optimierung der Leistung und Diagnose von Speicherlecks</li>
<li>Anzeige von Leistungsmessdaten f√ºr Ihre Anwendung</li>
<li>Einfache Skalierung auf mehrere Hosts mit integrierter Steuerung f√ºr Nginx Load Balancer</li>
</ul>
<p>Wie unten beschrieben, erfolgt ein automatischer Neustart beim Systemwiederanlauf, wenn Sie StrongLoop Process Manager √ºber Ihr Init-System als Betriebssystemservice installieren. Dadurch bleiben Ihre Anwendungsprozesse und Cluster dauerhaft betriebsbereit.</p>
<h4 id="init-system-verwenden">Init-System verwenden</h4>
<p>Als n√§chste Ebene der Zuverl√§ssigkeit m√ºssen Sie sicherstellen, dass Ihre Anwendung bei einem Serverneustart neu gestartet wird. Systeme k√∂nnen immer wieder aus verschiedenen Gr√ºnden abst√ºrzen. Um sicherzustellen, dass Ihre Anwendung bei einem Serverabsturz neu gestartet wird, k√∂nnen Sie das in Ihr Betriebssystem integrierte Init-System verwenden. Die beiden wichtigsten Init-Systeme sind aktuell <a href="https://wiki.debian.org/systemd">systemd</a> und <a href="http://upstart.ubuntu.com/">Upstart</a>.</p>
<p>Es gibt zwei M√∂glichkeiten, Init-Systeme mit Ihrer Express-Anwendung zu verwenden:</p>
<ul>
<li>Ausf√ºhrung Ihrer Anwendung in einem Prozessmanager und Installation des Prozessmanagers als Service mit dem Init-System. Der Prozessmanager wird neu gestartet, wenn Ihre Anwendung abst√ºrzt. Das Init-System startet dann den Prozessmanager neu, sobald das Betriebssystem neu gestartet wird. Dies ist die empfohlene Vorgehensweise.</li>
<li>Ausf√ºhrung Ihrer Anwendung (und von Node) direkt mit dem Init-System. Diese Vorgehensweise ist zwar etwas einfacher, Sie profitieren jedoch nicht von den zus√§tzlichen Vorteilen des Einsatzes eines Prozessmanagers.</li>
</ul>
<h5 id="systemd">systemd</h5>
<p>‚Äúsystemd‚Äù ist ein Linux-System und Service-Manager. Die meisten wichtigen Linux-Distributionen haben ‚Äúsystemd‚Äù als Init-Standardsystem √ºbernommen.</p>
<p>Eine ‚Äúsystemd‚Äù-Servicekonfigurationsdatei wird als <em>Einheitendatei</em> bezeichnet, die die Endung ‚Äú.service‚Äù hat. Dies ist ein Beispiel f√ºr eine Einheitendatei zur direkten Verwaltung einer Node-Anwendung (ersetzen Sie den Text in Fettdruck durch Werte f√ºr Ihr System und Ihre Anwendung):</p>
<pre><code class="language-sh" translate="no">
[Unit]
Description=Awesome Express App

[Service]
Type=simple
ExecStart=/usr/local/bin/node /projects/myapp/index.js
WorkingDirectory=/projects/myapp

User=nobody
Group=nogroup

# Environment variables:
Environment=NODE_ENV=production

# Allow many incoming connections
LimitNOFILE=infinity

# Allow core dumps for debugging
LimitCORE=infinity

StandardInput=null
StandardOutput=syslog
StandardError=syslog
Restart=always

[Install]
WantedBy=multi-user.target
</code>
</pre>
<p>Weitere Informationen zu ‚Äúsystemd‚Äù siehe <a href="http://www.freedesktop.org/software/systemd/man/systemd.unit.html">systemd-Referenz (Man-Page)</a>.</p>
<h5 id="strongloop-process-manager-als-systemd-service">StrongLoop Process Manager als ‚Äúsystemd‚Äù-Service</h5>
<p>Sie k√∂nnen StrongLoop Process Manager problemlos als ‚Äúsystemd‚Äù-Service installieren. Dadurch wird beim Serverneustart StrongLoop Process Manager automatisch neu gestartet. Dadurch wiederum werden alle Anwendungen neu gestartet, die von diesem Prozessmanager verwaltet werden.</p>
<p>So installieren Sie StrongLoop Process Manager als ‚Äúsystemd‚Äù-Service:</p>
<pre><code class="language-sh" translate="no">
$ sudo sl-pm-install --systemd
</code>
</pre>
<p>Starten Sie dann den Service mit:</p>
<pre><code class="language-sh" translate="no">
$ sudo /usr/bin/systemctl start strong-pm
</code>
</pre>
<p>Weitere Informationen hierzu finden Sie im Thema <a href="https://docs.strongloop.com/display/SLC/Setting+up+a+production+host#Settingupaproductionhost-RHEL7+,Ubuntu15.04or15.10">Produktionshost einrichten (in der StrongLoop-Dokumentation)</a>.</p>
<h5 id="upstart">Upstart</h5>
<p>‚ÄúUpstart‚Äù ist ein Systemtool, das auf vielen Linux-Distributionen verf√ºgbar ist. Mit diesem Tool k√∂nnen Aufgaben (Tasks) und Services beim Systemstart gestartet, beim Herunterfahren gestoppt und auch √ºberwacht werden. Sie k√∂nnen Ihre Express-Anwendung oder einen Prozessmanager als Service konfigurieren. ‚ÄúUpstart‚Äù startet diese dann bei einem Absturz automatisch neu.</p>
<p>Ein ‚ÄúUpstart‚Äù-Service wird als Jobkonfigurationsdatei (auch als ‚ÄúJob‚Äù bezeichnet) definiert, deren Dateiname mit <code>.conf</code> endet. Das folgende Beispiel zeigt, wie ein Job namens ‚Äúmyapp‚Äù f√ºr eine Anwendung namens ‚Äúmyapp‚Äù erstellt wird, wobei sich die Hauptdatei im Verzeichnis <code>/projects/myapp/index.js</code> befindet.</p>
<p>Erstellen Sie eine Datei namens <code>myapp.conf</code> unter <code>/etc/init/</code> mit dem folgenden Inhalt (ersetzen Sie den Text in Fettdruck durch Werte f√ºr Ihr System und Ihre Anwendung):</p>
<pre><code class="language-sh" translate="no">
# When to start the process
start on runlevel [2345]

# When to stop the process
stop on runlevel [016]

# Increase file descriptor limit to be able to handle more requests
limit nofile 50000 50000

# Use production mode
env NODE_ENV=production

# Run as www-data
setuid www-data
setgid www-data

# Run from inside the app dir
chdir /projects/myapp

# The process to start
exec /usr/local/bin/node /projects/myapp/index.js

# Restart the process if it is down
respawn

# Limit restart attempt to 10 times within 10 seconds
respawn limit 10 10
</code>
</pre>
<p>Hinweis: Dieses Script erfordert Upstart 1.4 oder h√∂her mit Unterst√ºtzung auf Ubuntu 12.04-14.10.</p>
<p>Da der Job so konfiguriert ist, dass er beim Systemstart ausgef√ºhrt wird, wird Ihre Anwendung zusammen mit dem Betriebssystem gestartet und automatisch neu gestartet, wenn die Anwendung abst√ºrzt oder das System heruntergefahren wird.</p>
<p>Neben dem automatischen Neustart der Anwendung k√∂nnen Sie mit Upstart die folgenden Befehle verwenden:</p>
<ul>
<li><code>start myapp</code> ‚Äì Anwendung starten</li>
<li><code>restart myapp</code> ‚Äì Anwendung neu starten</li>
<li><code>stop myapp</code> ‚Äì Anwendung stoppen</li>
</ul>
<p>Weitere Informationen zu ‚ÄúUpstart‚Äù siehe <a href="http://upstart.ubuntu.com/cookbook">Upstart Intro, Cookbook and Best Practises</a>.</p>
<h5 id="strongloop-process-manager-als-upstart-service">StrongLoop Process Manager als ‚ÄúUpstart‚Äù-Service</h5>
<p>Sie k√∂nnen StrongLoop Process Manager problemlos als ‚ÄúUpstart‚Äù-Service installieren. Dadurch wird beim Serverneustart StrongLoop Process Manager automatisch neu gestartet. Dadurch wiederum werden alle Anwendungen neu gestartet, die von diesem Prozessmanager verwaltet werden.</p>
<p>So installieren Sie StrongLoop Process Manager als ‚ÄúUpstart 1.4‚Äù-Service:</p>
<pre><code class="language-sh" translate="no">
$ sudo sl-pm-install
</code>
</pre>
<p>F√ºhen Sie dann den Service aus mit:</p>
<pre><code class="language-sh" translate="no">
$ sudo /sbin/initctl start strong-pm
</code>
</pre>
<p>Hinweis: Auf Systemen, die Upstart 1.4 nicht unterst√ºtzen, sind die Befehle leicht unterschiedlich. Weitere Informationen hierzu siehe das
Thema <a href="https://docs.strongloop.com/display/SLC/Setting+up+a+production+host#Settingupaproductionhost-RHELLinux5and6,Ubuntu10.04-.10,11.04-.10">Einrichtung eines Produktionshosts (in der StrongLoop-Dokumentation)</a>.</p>
<h3 id="anwendung-in-einem-cluster-ausf√ºhren">Anwendung in einem Cluster ausf√ºhren</h3>
<p>In einem Multi-Core-System k√∂nnen Sie die Leistung einer Node-Anwendung mehrmals erh√∂hen, indem Sie einen Cluster von Prozessen starten. Ein Cluster f√ºhrt mehrere Instanzen der Anwendung aus, idealerweise eine Instanz auf jedem CPU-Core. Dadurch werden die Arbeitslasten und die Tasks auf die Instanzen verteilt.</p>

<p>Wichtig. Da die Anwendungsinstanzen als separate Prozesse ausgef√ºhrt werden, nutzen sie nicht dieselbe Hauptspeicherkapazit√§t gemeinsam. Das hei√üt, Objekte befinden sich f√ºr jede Instanz der Anwendung auf lokaler Ebene. Daher kann der Status im Anwendungscode nicht beibehalten werden. Sie k√∂nnen jedoch einen speicherinternen Datenspeicher wie <a href="http://redis.io/">Redis</a> verwenden, um sitzungsrelevante Daten und Statusinformationen zu speichern. Diese Einschr√§nkung trifft im Wesentlichen auf alle Formen der horizontalen Skalierung zu, unabh√§ngig davon, ob es sich um Clustering mit mehreren Prozessen oder mehreren physischen Servern handelt.</p>
<p>Bei in Gruppen zusammengefassten Anwendungen (geclusterte Anwendungen) k√∂nnen Verarbeitungsprozesse einzeln ausfallen, ohne dass sich dies auf die restlichen Prozesse auswirkt. Neben den Leistungsvorteilen ist die Fehlerisolierung ein weiterer Grund, einen Cluster von Anwendungsprozessen auszuf√ºhren. Wenn ein Verarbeitungsprozess abst√ºrzt, m√ºssen Sie sicherstellen, dass das Ereignis protokolliert und ein neuer Prozess mithilfe von ‚Äúcluster.fork()‚Äù gestartet wird.</p>
<h4 id="clustermodule-von-node-verwenden">Clustermodule von Node verwenden</h4>
<p>Das Clustering erfolgt √ºber das <a href="https://nodejs.org/docs/latest/api/cluster.html">Clustermodul</a> von Node. Dadurch wird ein Masterprozess eingeleitet, um Verarbeitungsprozesse zu starten und eingehende Verbindungen auf die Verarbeitungsprozesse zu verteilen. Anstatt dieses Modul jedoch direkt zu verwenden, ist es deutlich besser, eines der vielen angebotenen Tools einzusetzen, das diesen Vorgang automatisch f√ºr Sie ausf√ºhrt, wie beispielsweise <a href="https://www.npmjs.com/package/node-pm">node-pm</a> oder <a href="https://www.npmjs.com/package/cluster-service">cluster-service</a>.</p>
<h4 id="strongloop-process-manager-verwenden">StrongLoop Process Manager verwenden</h4>
<p>Wenn Sie Ihre Anwendung auf StrongLoop Process Manager (PM) bereitstellen, k√∂nnen Sie die Vorteile des Clustering nutzen, <em>ohne</em> Ihren Anwendungscode √§ndern zu m√ºssen.</p>
<p>Wenn StrongLoop Process Manager (PM) eine Anwendung ausf√ºhrt, wird diese automatisch in einem Cluster ausgef√ºhrt. Die Anzahl der Verarbeitungsprozesse entspricht dabei der Anzahl der CPU-Cores im System. Sie k√∂nnen die Anzahl der Verarbeitungsprozesse manuell im Cluster √§ndern. Hierf√ºr verwenden Sie das Befehlszeilentool ‚Äúslc‚Äù, ohne die Anwendung stoppen zu m√ºssen.</p>
<p>Beispiel: Angenommen, Sie haben Ihre Anwendung auf prod.foo.com bereitgestellt, und StrongLoop PM ist auf Port 8701 (Standardport) empfangsbereit. Dann m√ºssen Sie die Clustergr√∂√üe mithilfe von ‚Äúslc‚Äù auf ‚Äú8‚Äù einstellen.</p>
<pre><code class="language-sh" translate="no">
$ slc ctl -C http://prod.foo.com:8701 set-size my-app 8
</code>
</pre>
<p>Weitere Informationen zum Clustering mit StrongLoop PM finden Sie im Thema <a href="https://docs.strongloop.com/display/SLC/Clustering">Clustering</a> in der StrongLoop-Dokumentation.</p>
<h3 id="anforderungsergebnisse-im-cache-speichern">Anforderungsergebnisse im Cache speichern</h3>
<p>Eine weitere Strategie zur Verbesserung des Leistungsverhaltens in Produktionsumgebungen ist das Speichern von Anforderungergebnissen im Cache. Ihre Anwendung muss also diese Operation nicht wiederholt ausf√ºhren, um dieselbe Anforderung wiederholt zu bedienen.</p>
<p>Mithilfe eines Caching-Servers wie <a href="https://www.varnish-cache.org/">Varnish</a> oder <a href="https://www.nginx.com/resources/wiki/start/topics/examples/reverseproxycachingexample/">Nginx</a> (siehe auch <a href="https://serversforhackers.com/nginx-caching/">Nginx Caching</a>) lassen sich Geschwindigkeit und Leistung Ihrer Anwendung hervorragend verbessern.</p>
<h3 id="load-balancer-verwenden">Load Balancer verwenden</h3>
<p>Unabh√§ngig davon, wie gut eine Anwendung optimiert wurde, kann eine Einzelinstanz nur eine begrenzte Arbeitslast oder einen begrenzten Datenverkehr handhaben. Eine M√∂glichkeit, eine Anwendung zu skalieren, ist die Ausf√ºhrung mehrerer Instanzen dieser Anwendung und die Verteilung des Datenverkehrs √ºber eine Lastausgleichsfunktion (Load Balancer) vorzunehmen. Die Einrichtung eines solchen Load Balancer kann helfen, Leistung und Geschwindigkeit Ihrer Anwendung zu verbessern. Zudem l√§sst sich dadurch die Anwendung besser skalieren als mit einer Einzelinstanz.</p>
<p>Ein Load Balancer ist in der Regel ein Reverse Proxy, der den Datenverkehr zu und von mehreren Anwendungsinstanzen und Servern koordiniert. Sie k√∂nnen ohne gro√üen Aufwand einen Load Balancer f√ºr Ihre Anwendung einrichten. Verwenden Sie hierzu <a href="http://nginx.org/en/docs/http/load_balancing.html">Nginx</a> oder <a href="https://www.digitalocean.com/community/tutorials/an-introduction-to-haproxy-and-load-balancing-concepts">HAProxy</a>.</p>
<p>Bei einer solchen Lastverteilung m√ºssen Sie sicherstellen, dass Anforderungen, die einer bestimmten Sitzungs-ID zugeordnet sind, mit dem Prozess verbunden sind, von dem sie urspr√ºnglich stammen. Dies wird auch als <em>Sitzungsaffinit√§t</em> oder <em>Affine Sitzungen</em> bezeichnet und kann durch den obigen Vorschlag, einen Datenspeicher wie Redis f√ºr Sitzungsdaten zu verwenden (je nach Anwendung), umgesetzt werden. Eine Beschreibung hierzu siehe <a href="http://socket.io/docs/using-multiple-nodes/">Mehrere Knoten verwenden</a>.</p>
<h4 id="strongloop-process-manager-mit-einem-nginx-load-balancer-verwenden">StrongLoop Process Manager mit einem Nginx Load Balancer verwenden</h4>
<p><a href="http://strong-pm.io/">StrongLoop Process Manager</a> l√§sst sich in einen Nginx-Controller integrieren und erleichtert dadurch das Konfigurieren von Produktionsumgebungen mit mehreren Hosts. Weitere Informationen finden Sie im Thema zum <a href="https://docs.strongloop.com/display/SLC/Scaling+to+multiple+servers">Skalieren auf mehrere Server</a> (in der StrongLoop-Dokumentation).
<a name="proxy"></a></p>
<h3 id="reverse-proxy-verwenden">Reverse Proxy verwenden</h3>
<p>Ein Reverse Proxy befindet sich vor einer Webanwendung und f√ºhrt Unterst√ºtzungsoperationen f√ºr die Anforderungen aus (au√üer das Weiterleiten von Anforderungen an die Anwendung). Er kann u. a. Fehlerseiten, Komprimierungen und Caching bearbeiten, Dateien bereitstellen und Lastverteilungen vornehmen.</p>
<p>Durch die √úbergabe von Tasks, die keine Kenntnis des Anwendungsstatus erfordern, an einen Reverse Proxy muss Express keine speziellen Anwendungstasks mehr ausf√ºhren. Aus diesem Grund wird empfohlen, in Produktionsumgebungen Express hinter einem Reverse Proxy wie <a href="https://www.nginx.com/">Nginx</a> oder <a href="http://www.haproxy.org/">HAProxy</a> auszuf√ºhren.</p>
</div>
</section>

<noscript>
    <iframe src="http://www.googletagmanager.com/ns.html?id=GTM-5XL76H" height="0" width="0" style="display: none; visibility: hidden;"></iframe>
</noscript>
<script type="915611525b02aa72a301b7e6-text/javascript">
(function(w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
        'gtm.start': new Date().getTime(),
        event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
        '../../../www.googletagmanager.com/gtm5445.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
})(window, document, 'script', 'dataLayer', 'GTM-5XL76H');
</script>
<a id="top" href="#"><img src="../../images/arrow.png"></a>
<footer>
<div id="footer-content">
<div id="github">
<iframe src="http://ghbtns.com/github-btn.html?user=expressjs&amp;repo=express&amp;type=watch&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>
</div>
<div id="sponsor"><a href="https://github.com/expressjs/express">Express</a> ist ein Projekt der Stiftung Node.js.</div>
<div id="fork"><a href="https://github.com/expressjs/expressjs.com">Verzweigung der Website auf GitHub</a>. </div>
<div>Copyright &copy; StrongLoop, Inc. und andere Mitwirkende an expressjs.com.</div>
</div>
<div id="license">
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/us/"><img alt="Creative Commons Lizenzvertrag" style="border-width:0" src="../../../i.creativecommons.org/l/by-sa/3.0/us/80x15.png" /></a> Dieses Werk ist lizenziert unter einer <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/us/">Creative Commons Namensnennung - Weitergabe unter gleichen Bedingungen 3.0 Vereinigte Staaten von Amerika Lizenz</a>.
</div>
</footer>
<script type="915611525b02aa72a301b7e6-text/javascript" src="../../../cdn.jsdelivr.net/npm/docsearch.js%402/dist/cdn/docsearch.min.js" onload="docsearch({
  apiKey: '7164e33055faa6ecddefd9e08fc59f5d',
  indexName: 'expressjs',
  inputSelector: '#q',
  algoliaOptions: { 'facetFilters': ['lang:de'] }
})" async></script>
<script src="../../../ajax.cloudflare.com/cdn-cgi/scripts/a2bd7673/cloudflare-static/rocket-loader.min.js" data-cf-settings="915611525b02aa72a301b7e6-|49" defer=""></script></body>

<!-- Mirrored from expressjs.com/de/advanced/best-practice-performance.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 10 Jul 2019 00:23:46 GMT -->
</html>
