<!DOCTYPE html>

<html lang="en" prefix="og: http://ogp.me/ns#">

<!-- Mirrored from expressjs.com/th/resources/middleware/errorhandler.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 10 Jul 2019 00:24:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<title>Express errorhandler middleware</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="og:image" content="../../../images/express-facebook-share.png">
<link rel="icon" type="image/png" href="../../../images/favicon.png" />
<link rel="stylesheet" href="../../../css/style.css">
<link rel="stylesheet" href="../../../css/dropit.css">
<link rel="stylesheet" href="../../../css/prism.css">
<link rel="stylesheet" href="../../../css/font-awesome.min.css">
<link rel="stylesheet" href="../../../../fonts.googleapis.com/css2a1d.css?family=Open+Sans:300,400,600,700&amp;amp;subset=latin,latin-ext">
<link rel="stylesheet" href="../../../css/en.css">
<link rel="stylesheet" href="../../../css/nodeinteractive.css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script data-cfasync="false" src="../../../../ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script data-cfasync="false" src="../../../js/ismobile.js"></script>
<script data-cfasync="false" src="../../../js/app.js"></script>
<script data-cfasync="false" src="../../../js/retina.js"></script>
<script data-cfasync="false" src="../../../js/dropit.js"></script>
<script data-cfasync="false" src="../../../js/prism.js"></script>
<link rel="stylesheet" href="../../../../cdn.jsdelivr.net/npm/docsearch.js%402/dist/cdn/docsearch.min.css" />
</head>
<body class="en-doc">
<section class="page content">
<header>
<div id="mobile-menu">
<div id="nav-button" class="fa fa-bars fa-2x button"></div>
</div>
<section id="logo"><a href="../../../index.html" class="express">Express</a>
</section>
<div id="navbar">
<input id="q" placeholder="ðŸ”Ž search">
<ul id="navmenu">
<li><a href="../../../index.html" id="home-menu">Home</a></li>
<li>
<ul id="getting-started-menu" class="menu">
<li><a href="../../../en/starter/installing.html">Getting started</a>
<ul>
<li>
<a href="../../../en/starter/installing.html">
Installing
</a>
</li>
<li>
<a href="../../../en/starter/hello-world.html">
Hello world
</a>
</li>
<li>
<a href="../../../en/starter/generator.html">
Express generator
</a>
</li>
<li>
<a href="../../../en/starter/basic-routing.html">
Basic routing
</a>
</li>
<li>
<a href="../../../en/starter/static-files.html">
Static files
</a>
</li>
<li>
<a href="../../../en/starter/faq.html">
FAQ
</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul id="guide-menu" class="menu">
<li><a href="../../../en/guide/routing.html">Guide</a>
<ul>
<li><a href="../../../en/guide/routing.html">Routing</a>
</li>
<li><a href="../../../en/guide/writing-middleware.html">Writing middleware</a>
</li>
<li><a href="../../../en/guide/using-middleware.html">Using middleware</a>
</li>
<li><a href="../../../en/guide/using-template-engines.html">Using template engines</a>
</li>
<li><a href="../../../en/guide/error-handling.html">Error handling</a>
</li>
<li><a href="../../../en/guide/debugging.html">Debugging</a>
</li>
<li><a href="../../../en/guide/behind-proxies.html">Express behind proxies</a>
</li>
<li><a href="../../../en/guide/migrating-4.html">Moving to Express 4</a>
</li>
<li><a href="../../../en/guide/migrating-5.html">Moving to Express 5</a>
</li>
<li><a href="../../../en/guide/database-integration.html">Database integration</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul id="application-menu" class="menu">
<li><a href="../../../en/4x/api.html">API reference</a>
<ul>
<li><a href="../../../en/5x/api.html">5.x (alpha)</a>
</li>
<li><a href="../../../en/4x/api.html">4.x</a>
</li>
<li><a href="../../../en/3x/api.html">3.x (deprecated)</a>
</li>
<li><a href="../../../2x/index.html">2.x (deprecated)</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul id="advanced-topics-menu" class="menu">
<li><a href="../../../en/advanced/developing-template-engines.html">Advanced topics</a>
<ul>
<li><a href="../../../en/advanced/developing-template-engines.html">Template engines</a>
</li>
<li><a href="../../../en/advanced/pm.html">Process managers</a>
</li>
<li><a href="../../../en/advanced/security-updates.html">Security updates</a>
</li>
<li><a href="../../../en/advanced/best-practice-security.html">Security best practices</a>
</li>
<li><a href="../../../en/advanced/best-practice-performance.html">Performance best practices</a>
</li>
<li><a href="../../../en/advanced/healthcheck-graceful-shutdown.html">Health checks and graceful shutdown</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul id="resources-menu" class="menu">
<li><a href="../../../en/resources/glossary.html" class="active">Resources</a>
<ul>
<li>
<a href="../../../en/resources/community.html">Community</a>
</li>
<li>
<a href="../../../en/resources/glossary.html">Glossary</a>
</li>
<li>
<a href="../../../en/resources/template-engines.html">Template Engines</a>
</li>
<li>
<a href="../../../en/resources/middleware.html">Middleware</a>
</li>
<li>
<a href="../../../en/resources/utils.html">Utility modules</a>
</li>
<li>
<a href="../../../en/resources/frameworks.html">Frameworks</a>
</li>
<li>
<a href="../../../en/resources/companies-using-express.html">Companies using Express</a>
</li>
<li>
<a href="../../../en/resources/open-source-using-express.html">Open-source projects</a>
</li>
<li>
<a href="../../../en/resources/books-blogs.html">Books and blogs</a>
</li>
<li>
<a href="../../../en/resources/contributing.html">Contributing to Express</a>
</li>
<li>
<a href="../../../en/changelog/4x.html">Release Change Log</a>
</li>
</ul>
</li>
</ul>
</li>

</ul>
</div>
</header>
<div id="overlay"></div>
<div id="page-doc" markdown="1">
<div id="mw-container">
<div id="mw-list">
<ul>
<li><a href="../../../en/resources/middleware/body-parser.html">body-parser</a></li>
<li><a href="../../../en/resources/middleware/compression.html">compression</a></li>
<li><a href="../../../en/resources/middleware/connect-rid.html">connect-rid</a></li>
<li><a href="../../../en/resources/middleware/cookie-parser.html">cookie-parser</a></li>
<li><a href="../../../en/resources/middleware/cookie-session.html">cookie-session</a></li>
<li><a href="../../../en/resources/middleware/cors.html">cors</a></li>
<li><a href="../../../en/resources/middleware/csurf.html">csurf</a></li>
<li><a href="../../../en/resources/middleware/errorhandler.html">errorhandler</a></li>
<li><a href="../../../en/resources/middleware/method-override.html">method-override</a></li>
<li><a href="../../../en/resources/middleware/morgan.html">morgan</a></li>
<li><a href="../../../en/resources/middleware/multer.html">multer</a></li>
<li><a href="../../../en/resources/middleware/response-time.html">response-time</a></li>
<li><a href="../../../en/resources/middleware/serve-favicon.html">serve-favicon</a></li>
<li><a href="../../../en/resources/middleware/serve-index.html">serve-index</a></li>
<li><a href="../../../en/resources/middleware/serve-static.html">serve-static</a></li>
<li><a href="../../../en/resources/middleware/session.html">session</a></li>
<li><a href="../../../en/resources/middleware/timeout.html">timeout</a></li>
<li><a href="../../../en/resources/middleware/vhost.html">vhost</a></li>
</ul>
</div>
<div id="middleware-content">
<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i>
<b>Note:</b> This page was generated from the
<a target="_blank" href="https://github.com/expressjs/errorhandler">errorhandler README</a>.
</div>
<h1 id="errorhandler">errorhandler</h1>
<p><a href="https://npmjs.org/package/errorhandler"><img src="https://badgen.net/npm/v/errorhandler" alt="NPM Version" /></a>
<a href="https://npmjs.org/package/errorhandler"><img src="https://badgen.net/npm/dm/errorhandler" alt="NPM Downloads" /></a>
<a href="https://travis-ci.org/expressjs/errorhandler"><img src="https://badgen.net/travis/expressjs/errorhandler/master" alt="Build Status" /></a>
<a href="https://coveralls.io/r/expressjs/errorhandler?branch=master"><img src="https://badgen.net/coveralls/c/github/expressjs/errorhandler/master" alt="Test Coverage" /></a></p>
<p>Development-only error handler middleware.</p>
<p>This middleware is only intended to be used in a development environment, as
the <em>full error stack traces and internal details of any object passed to this
module</em> will be sent back to the client when an error occurs.</p>
<p>When an object is provided to Express as an error, this module will display
as much about this object as possible, and will do so by using content negotiation
for the response between HTML, JSON, and plain text.</p>
<ul>
<li>When the object is a standard <code>Error</code> object, the string provided by the
<code>stack</code> property will be returned in HTML/text responses.</li>
<li>When the object is a non-<code>Error</code> object, the result of
<a href="https://nodejs.org/api/util.html#util_util_inspect_object_options">util.inspect</a>
will be returned in HTML/text responses.</li>
<li>For JSON responses, the result will be an object with all enumerable properties
from the object in the response.</li>
</ul>
<h2 id="install">Install</h2>
<p>This is a <a href="https://nodejs.org/en/">Node.js</a> module available through the
<a href="https://www.npmjs.com/">npm registry</a>. Installation is done using the
<a href="https://docs.npmjs.com/getting-started/installing-npm-packages-locally"><code>npm install</code> command</a>:</p>
<pre><code class="language-sh">$ npm install errorhandler
</code></pre>
<h2 id="api">API</h2>

<pre><code class="language-js">var errorhandler = require('errorhandler')
</code></pre>
<h3 id="errorhandleroptions">errorhandler(options)</h3>
<p>Create new middleware to handle errors and respond with content negotiation.</p>
<h4 id="options">Options</h4>
<p>Error handler accepts these properties in the options object.</p>
<h5 id="log">log</h5>
<p>Provide a function to be called with the error and a string representation of
the error. Can be used to write the error to any desired location, or set to
<code>false</code> to only send the error back in the response. Called as
<code>log(err, str, req, res)</code> where <code>err</code> is the <code>Error</code> object, <code>str</code> is a string
representation of the error, <code>req</code> is the request object and <code>res</code> is the
response object (note, this function is invoked <em>after</em> the response has been
written).</p>
<p>The default value for this option is <code>true</code> unless <code>process.env.NODE_ENV === 'test'</code>.</p>
<p>Possible values:</p>
<ul>
<li><code>true</code>: Log errors using <code>console.error(str)</code>.</li>
<li><code>false</code>: Only send the error back in the response.</li>
<li>A function: pass the error to a function for handling.</li>
</ul>
<h2 id="examples">Examples</h2>
<h3 id="simple-example">Simple example</h3>
<p>Basic example of adding this middleware as the error handler only in development
with <code>connect</code> (<code>express</code> also can be used in this example).</p>
<pre><code class="language-js">var connect = require('connect')
var errorhandler = require('errorhandler')

var app = connect()

if (process.env.NODE_ENV === 'development') {
  // only use in development
  app.use(errorhandler())
}
</code></pre>
<h3 id="custom-output-location">Custom output location</h3>
<p>Sometimes you may want to output the errors to a different location than STDERR
during development, like a system notification, for example.</p>

<pre><code class="language-js">var connect = require('connect')
var errorhandler = require('errorhandler')
var notifier = require('node-notifier')

var app = connect()

if (process.env.NODE_ENV === 'development') {
  // only use in development
  app.use(errorhandler({ log: errorNotification }))
}

function errorNotification (err, str, req) {
  var title = 'Error in ' + req.method + ' ' + req.url

  notifier.notify({
    title: title,
    message: str
  })
}
</code></pre>
<h2 id="license">License</h2>
<p><a href="LICENSE.html">MIT</a></p>
</div>
</div>
</div>
</section>
<noscript>
    <iframe src="http://www.googletagmanager.com/ns.html?id=GTM-5XL76H" height="0" width="0" style="display: none; visibility: hidden;"></iframe>
</noscript>
<script type="5c55ce384c20fb3e0dc4d41e-text/javascript">
(function(w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
        'gtm.start': new Date().getTime(),
        event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
        '../../../../www.googletagmanager.com/gtm5445.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
})(window, document, 'script', 'dataLayer', 'GTM-5XL76H');
</script>
<a id="top" href="#"><img src="../../../images/arrow.png"></a>
<footer>
<section id="doc-langs">
Documentation translations provided by <a href="http://strongloop.com/">StrongLoop/IBM</a>:
<a href="../../../fr/index.html">French</a>, <a href="../../../de/index.html">German</a>, <a href="../../../es/index.html">Spanish</a>, <a href="../../../it/index.html">Italian</a>, <a href="../../../ja/index.html">Japanese</a>, <a href="../../../ru/index.html">Russian</a>, <a href="../../../zh-cn/index.html">Chinese</a>, <a href="../../../zh-tw/index.html">Traditional Chinese</a>, <a href="../../../ko/index.html">Korean</a>, <a href="../../../pt-br/index.html">Portuguese</a>.
<br>
Community translation available for: <a href="../../../sk/index.html">Slovak</a>, <a href="../../../uk/index.html">Ukrainian</a>, <a href="../../../uz/index.html">Uzbek</a>, <a href="../../../tr/index.html">Turkish</a> and <a href="../../index.html">Thai</a>.
</section>
<div id="footer-content">
<div id="github">
<a class="github-button" href="https://github.com/expressjs/expressjs.com" data-icon="octicon-star" aria-label="Star expressjs/expressjs.com on GitHub">Star</a>
</div>
<div id="sponsor"><a href="https://github.com/expressjs/express/">Express</a>
is a project of the <a href="http://nodejs.org/foundation"></a>Node.js Foundation</a>.</div>
<div id="fork"><a href="https://github.com/expressjs/expressjs.com">Fork the website on GitHub</a>.
</div>
<div>Copyright &copy; 2017 StrongLoop, IBM, and other expressjs.com contributors.</div>
</div>
<div id="license">
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/us/"><img alt="Creative Commons License" style="border-width:0" src="../../../../i.creativecommons.org/l/by-sa/3.0/us/80x15.png" /></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/us/">Creative Commons Attribution-ShareAlike 3.0 United States License</a>.
</div>
</footer>
<script async defer src="../../../../buttons.github.io/buttons.js" type="5c55ce384c20fb3e0dc4d41e-text/javascript"></script>
<script type="5c55ce384c20fb3e0dc4d41e-text/javascript" src="../../../../cdn.jsdelivr.net/npm/docsearch.js%402/dist/cdn/docsearch.min.js" onload="docsearch({
  apiKey: '7164e33055faa6ecddefd9e08fc59f5d',
  indexName: 'expressjs',
  inputSelector: '#q',
  algoliaOptions: { 'facetFilters': ['lang:en'] }
})" async></script>
<script src="../../../../ajax.cloudflare.com/cdn-cgi/scripts/a2bd7673/cloudflare-static/rocket-loader.min.js" data-cf-settings="5c55ce384c20fb3e0dc4d41e-|49" defer=""></script></body>

<!-- Mirrored from expressjs.com/th/resources/middleware/errorhandler.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 10 Jul 2019 00:24:03 GMT -->
</html>
