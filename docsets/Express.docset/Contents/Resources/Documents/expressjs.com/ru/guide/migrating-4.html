<!DOCTYPE html>

<html lang="ru" prefix="og: http://ogp.me/ns#">

<!-- Mirrored from expressjs.com/ru/guide/migrating-4.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 10 Jul 2019 00:23:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<title>–ú–∏–≥—Ä–∞—Ü–∏—è –¥–æ –≤–µ—Ä—Å–∏–∏ Express 4</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="og:image" content="../../images/express-facebook-share.png">
<link rel="icon" type="image/png" href="../../images/favicon.png" />
<link rel="stylesheet" href="../../css/style.css">
<link rel="stylesheet" href="../../css/dropit.css">
<link rel="stylesheet" href="../../css/prism.css">
<link rel="stylesheet" href="../../css/font-awesome.min.css">
<link rel="stylesheet" href="../../../fonts.googleapis.com/css2a1d.css?family=Open+Sans:300,400,600,700&amp;amp;subset=latin,latin-ext">
<link rel="stylesheet" href="../../css/ru.css">
<link rel="stylesheet" href="../../css/nodeinteractive.css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script data-cfasync="false" src="../../../ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script data-cfasync="false" src="../../js/ismobile.js"></script>
<script data-cfasync="false" src="../../js/app.js"></script>
<script data-cfasync="false" src="../../js/retina.js"></script>
<script data-cfasync="false" src="../../js/dropit.js"></script>
<script data-cfasync="false" src="../../js/prism.js"></script>
<link rel="stylesheet" href="../../../cdn.jsdelivr.net/npm/docsearch.js%402/dist/cdn/docsearch.min.css" />
</head>
<body class="non-en-doc">
<section class="page content">
<header>
<div id="mobile-menu">
<div id="nav-button" class="fa fa-bars fa-2x button"></div>
</div>
<section id="logo"><a href="../../index.html" class="express">Express</a>
</section>
<div id="navbar">
<input id="q" placeholder="üîé search">
<ul id="navmenu">
<li><a href="../index.html" id="home-menu">–ù–∞—á–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</a></li>
<li>
<ul id="getting-started-menu" class="menu">
<li><a href="../starter/installing.html">–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã</a>
<ul>
<li>
<a href="../starter/installing.html">
–£—Å—Ç–∞–Ω–æ–≤–∫–∞
</a>
</li>
<li>
<a href="../starter/hello-world.html">
Hello world
</a>
</li>
<li>
<a href="../starter/generator.html">
–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π Express
</a>
</li>
<li>
<a href="../starter/basic-routing.html">
–û—Å–Ω–æ–≤—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
</a>
</li>
<li>
<a href="../starter/static-files.html">
–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
</a>
</li>
<li>
<a href="../starter/faq.html">
FAQ
</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul id="guide-menu" class="menu">
<li><a href="routing.html" class="active">–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ</a>
<ul>
<li><a href="routing.html">–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è</a>
</li>
<li><a href="writing-middleware.html">–ù–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</a>
</li>
<li><a href="using-middleware.html">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</a>
</li>
<li><a href="using-template-engines.html">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤</a>
</li>
<li><a href="error-handling.html">–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫</a>
</li>
<li><a href="debugging.html">–û—Ç–ª–∞–¥–∫–∞</a>
</li>
<li><a href="behind-proxies.html">Express –∑–∞ –ø—Ä–æ–∫—Å–∏</a>
</li>
<li><a href="migrating-4.html">–ü–µ—Ä–µ—Ö–æ–¥ –∫ Express 4</a>
</li>
<li><a href="migrating-5.html">–ü–µ—Ä–µ—Ö–æ–¥ –∫ Express 5</a>
</li>
<li><a href="database-integration.html">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul id="application-menu" class="menu">
<li><a href="../4x/api.html">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ API</a>
<ul>
<li><a href="../4x/api.html">4.x</a>
</li>
<li><a href="../3x/api.html">3.x (—É—Å—Ç–∞—Ä–µ–ª)</a>
</li>
<li><a href="../../2x/index.html">2.x (—É—Å—Ç–∞—Ä–µ–ª)</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul id="advanced-topics-menu" class="menu">
<li><a href="../advanced/developing-template-engines.html">–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</a>
<ul>
<li><a href="../advanced/developing-template-engines.html">–®–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä—ã</a>
</li>
<li><a href="../advanced/pm.html">–†–∞–±–æ—Ç–∞ —Å –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤</a>
</li>
<li><a href="../advanced/security-updates.html">–û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</a>
</li>
<li><a href="../advanced/best-practice-security.html">–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –≤ –æ–±–ª–∞—Å—Ç–∏ –∑–∞—â–∏—Ç—ã</a>
</li>
<li><a href="../advanced/best-practice-performance.html">–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul id="resources-menu" class="menu">
<li><a href="../resources/glossary.html">–†–µ—Å—É—Ä—Å—ã</a>
<ul>
<li><a href="../resources/glossary.html">–ì–ª–æ—Å—Å–∞—Ä–∏–π</a>
</li>
<li><a href="../resources/middleware.html">–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫</a>
</li>
<li><a href="../resources/community.html">–°–æ–æ–±—â–µ—Å—Ç–≤–æ</a>
</li>
<li><a href="../resources/books-blogs.html">–ö–Ω–∏–≥–∏ –∏ –±–ª–æ–≥–∏</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</header>
<div id="overlay"></div>
<div id="i18n-notice-box" class="doc-box doc-warn">
<p><p>–≠—Ç–æ—Ç –ø–µ—Ä–µ–≤–æ–¥ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è <a href="http://strongloop.com/">StrongLoop / IBM</a>.</p>
–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ. –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –≤ <a href="../../index.html">–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ</a>.
</p>
<div id="close-i18n-notice-box" title="Close">‚úñ</div>
</div>
<div id="page-doc" markdown="1">
<h1 id="–ø–µ—Ä–µ—Ö–æ–¥-–∫-express-4">–ü–µ—Ä–µ—Ö–æ–¥ –∫ Express 4</h1>
<h2 id="overview">–û–±–∑–æ—Ä</h2>
<p>Express 4, –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ Express 3. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Express 3 –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –µ—Å–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é Express –≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.</p>
<p>–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è —Å–ª–µ–¥—É—é—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</p>
<ul class="doclist">
<li><a href="#changes">–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Express 4.</a></li>
<li><a href="#example-migration">–ü—Ä–∏–º–µ—Ä</a> –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Express 3 –≤ Express 4.</li>
<li><a href="#app-gen">–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ –≤–µ—Ä—Å–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π Express 4.</a></li>
</ul>
<h2 id="changes">–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Express 4</h2>
<p>–í Express 4 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:</p>
<ul class="doclist">
<li><a href="#core-changes">–ò–∑–º–µ–Ω–µ–Ω–∏—è —è–¥—Ä–∞ Express –∏ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.</a> –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç Connect –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã, –ø–æ—ç—Ç–æ–º—É –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.
</li>
<li><a href="#routing">–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏.</a></li>
<li><a href="#other-changes">–ü—Ä–æ—á–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.</a></li>
</ul>
<p>–°–º. —Ç–∞–∫–∂–µ:</p>
<ul>
<li><a href="https://github.com/strongloop/express/wiki/New-features-in-4.x">–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ 4.x.</a></li>
<li><a href="https://github.com/strongloop/express/wiki/Migrating-from-3.x-to-4.x">–ú–∏–≥—Ä–∞—Ü–∏—è –∏–∑ 3.x –≤ 4.x.</a></li>
</ul>
<h3 id="core-changes">
–ò–∑–º–µ–Ω–µ–Ω–∏—è —è–¥—Ä–∞ Express –∏ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
</h3>
<p>Express 4 –±–æ–ª—å—à–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∑–∞–≤–∏—Å–∏–º—ã–º –æ—Ç Connect, –∏ –∏–∑ –µ–≥–æ —è–¥—Ä–∞ —É–¥–∞–ª–µ–Ω—ã –≤—Å–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏,
–∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ <code>express.static</code>. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ç–µ–ø–µ—Ä—å
Express –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏, –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –Ω–∏–∫–∞–∫ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ –∏ –≤—ã–ø—É—Å–∫–∏ Express.</p>
<p>–ë–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —è–≤–Ω—ã–º –æ–±—Ä–∞–∑–æ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:</p>
<ol>
<li>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –º–æ–¥—É–ª—å: <code>npm install --save &lt;module-name&gt;</code></li>
<li>–í —Å–≤–æ–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–∞—Ç—Ä–µ–±—É–π—Ç–µ –º–æ–¥—É–ª—å: <code>require('module-name')</code></li>
<li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–¥—É–ª—å —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫ –Ω–µ–º—É: <code>app.use( ... )</code></li>
</ol>
<p>–í —Ç–∞–±–ª–∏—Ü–µ –Ω–∏–∂–µ –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π –º–µ–∂–¥—É –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ Express 3 –∏ Express 4.</p>
<table class="doctable" border="1">
<tr><th>Express 3</th><th>Express 4</th></tr>
<tr><td><code>express.bodyParser</code></td>
<td><a href="https://github.com/expressjs/body-parser">body-parser</a> +
<a href="https://github.com/expressjs/multer">multer</a></td></tr>
<tr><td><code>express.compress</code></td>
<td><a href="https://github.com/expressjs/compression">compression</a></td></tr>
<tr><td><code>express.cookieSession</code></td>
<td><a href="https://github.com/expressjs/cookie-session">cookie-session</a></td></tr>
<tr><td><code>express.cookieParser</code></td>
<td><a href="https://github.com/expressjs/cookie-parser">cookie-parser</a></td></tr>
<tr><td><code>express.logger</code></td>
<td><a href="https://github.com/expressjs/morgan">morgan</a></td></tr>
<tr><td><code>express.session</code></td>
<td><a href="https://github.com/expressjs/session">express-session</a></td></tr>
<tr><td><code>express.favicon</code></td>
<td><a href="https://github.com/expressjs/serve-favicon">serve-favicon</a></td></tr>
<tr><td><code>express.responseTime</code></td>
<td><a href="https://github.com/expressjs/response-time">response-time</a></td></tr>
<tr><td><code>express.errorHandler</code></td>
<td><a href="https://github.com/expressjs/errorhandler">errorhandler</a></td></tr>
<tr><td><code>express.methodOverride</code></td>
<td><a href="https://github.com/expressjs/method-override">method-override</a></td></tr>
<tr><td><code>express.timeout</code></td>
<td><a href="https://github.com/expressjs/timeout">connect-timeout</a></td></tr>
<tr><td><code>express.vhost</code></td>
<td><a href="https://github.com/expressjs/vhost">vhost</a></td></tr>
<tr><td><code>express.csrf</code></td>
<td><a href="https://github.com/expressjs/csurf">csurf</a></td></tr>
<tr><td><code>express.directory</code></td>
<td><a href="https://github.com/expressjs/serve-index">serve-index</a></td></tr>
<tr><td><code>express.static</code></td>
<td><a href="https://github.com/expressjs/serve-static">serve-static</a></td></tr>
</table>
<p>–≠—Ç–æ <a href="https://github.com/senchalabs/connect#middleware">–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫</a> –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ Express 4.</p>
<p>–í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å—Ç–∞—Ä–æ–π, 3-–π, –≤–µ—Ä—Å–∏–∏ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Express 4. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫ –º–æ–¥—É–ª—é –≤ GitHub.</p>
<h4 id="app-use"><code>app.use</code> –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h4>
<p>–í –≤–µ—Ä—Å–∏–∏ 4 –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—É—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏, –ø–æ—Å–ª–µ —á–µ–≥–æ —Å—á–∏—Ç–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –∏–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞.
–ù–∞–ø—Ä–∏–º–µ—Ä:</p>
<pre><code class="language-javascript" translate="no">
app.use('/book/:id', function(req, res, next) {
  console.log('ID:', req.params.id);
  next();
});
</code>
</pre>
<h3 id="routing">
–°–∏—Å—Ç–µ–º–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
</h3>
<p>–¢–µ–ø–µ—Ä—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ—è–≤–Ω—ã–º –æ–±—Ä–∞–∑–æ–º, –ø–æ—ç—Ç–æ–º—É –≤–∞–º –Ω–µ –Ω—É–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ <code>router</code>.</p>
<p>–°–ø–æ—Å–æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º, –Ω–æ –≤ —Å–∏—Å—Ç–µ–º–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ –¥–≤–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –¥–ª—è —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤:</p>
<ul class="doclist">
<li>–ù–æ–≤—ã–π –º–µ—Ç–æ–¥ <code>app.route()</code> - –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –º–∞—Ä—à—Ä—É—Ç–æ–≤, –æ–±—Ä–∞–∑—É—é—â–∏—Ö —Ü–µ–ø–æ—á–∫–∏, –¥–ª—è –ø—É—Ç–∏ –º–∞—Ä—à—Ä—É—Ç–∞.</li>
<li>–ù–æ–≤—ã–π –∫–ª–∞—Å—Å <code>express.Router</code> - –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥—É–ª—å–Ω—ã—Ö –º–æ–Ω—Ç–∏—Ä—É–µ–º—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –º–∞—Ä—à—Ä—É—Ç–æ–≤.</li>
</ul>
<h4 id="app-route">–ú–µ—Ç–æ–¥ <code>app.route()</code></h4>
<p>–ù–æ–≤—ã–π –º–µ—Ç–æ–¥ <code>app.route()</code> –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤, –æ–±—Ä–∞–∑—É—é—â–∏–µ —Ü–µ–ø–æ—á–∫–∏, –¥–ª—è –ø—É—Ç–∏ –º–∞—Ä—à—Ä—É—Ç–∞. –ü–æ—Å–∫–æ–ª—å–∫—É –ø—É—Ç—å —É–∫–∞–∑–∞–Ω –≤ –æ–¥–Ω–æ–º —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–∏, —É–¥–æ–±–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–æ–¥—É–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã, —á—Ç–æ–±—ã –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—á–∞—Ç–æ–∫. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
–æ –º–∞—Ä—à—Ä—É—Ç–∞—Ö –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ <a href="../4x/api.html#router"><code>Router()</code></a>.</p>
<p>–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω –ø—Ä–∏–º–µ—Ä –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã—Ö –≤ —Ü–µ–ø–æ—á–∫—É –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –º–∞—Ä—à—Ä—É—Ç–æ–≤, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ <code>app.route()</code>.</p>
<pre><code class="language-javascript" translate="no">
app.route('/book')
  .get(function(req, res) {
    res.send('Get a random book');
  })
  .post(function(req, res) {
    res.send('Add a book');
  })
  .put(function(req, res) {
    res.send('Update the book');
  });
</code>
</pre>
<h4 id="express-router">–ö–ª–∞—Å—Å <code>express.Router</code></h4>
<p>–ï—â–µ –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π, –ø–æ–∑–≤–æ–ª—è—é—â–µ–π —É–ø–æ—Ä—è–¥–æ—á–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã, —è–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–π –∫–ª–∞—Å—Å <code>express.Router</code>, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–æ–¥—É–ª—å–Ω—ã–µ –º–æ–Ω—Ç–∏—Ä—É–µ–º—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤. –≠–∫–∑–µ–º–ø–ª—è—Ä <code>Router</code> –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏; –ø–æ —ç—Ç–æ–π –ø—Ä–∏—á–∏–Ω–µ –µ–≥–æ —á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞—é—Ç ‚Äú–º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º‚Äù.</p>
<p>–í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –Ω–∏–∂–µ –ø—Ä–∏–º–µ—Ä–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –≤ –≤–∏–¥–µ –º–æ–¥—É–ª—è, –≤ –Ω–µ–≥–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤, –∏ –º–æ–¥—É–ª—å –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –ø—É—Ç—å –≤ –≥–ª–∞–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.</p>
<p>–ù–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞ —Å –∏–º–µ–Ω–µ–º <code>birds.js</code> –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º:</p>
<pre><code class="language-javascript" translate="no">
var express = require('express');
var router = express.Router();

// middleware specific to this router
router.use(function timeLog(req, res, next) {
  console.log('Time: ', Date.now());
  next();
});
// define the home page route
router.get('/', function(req, res) {
  res.send('Birds home page');
});
// define the about route
router.get('/about', function(req, res) {
  res.send('About birds');
});

module.exports = router;
</code>
</pre>
<p>–ü–æ—Ç–æ–º –∑–∞–≥—Ä—É–∑–∏—Ç–µ –º–æ–¥—É–ª—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:</p>
<pre><code class="language-javascript" translate="no">
var birds = require('./birds');
...
app.use('/birds', birds);
</code>
</pre>
<p>–î–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å —Å–º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã, –∞–¥—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å–∞–º –≤ –ø—É—Ç—è—Ö <code>/birds</code> –∏
<code>/birds/about</code>, –∏ –≤—ã–∑—ã–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ <code>timeLog</code> –¥–∞–Ω–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞.</p>
<h3 id="other-changes">
–ü—Ä–æ—á–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
</h3>
<p>–í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–π –Ω–∏–∂–µ —Ç–∞–±–ª–∏—Ü–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –ø—Ä–æ—á–∏–µ, –Ω–µ —Å–ª–∏—à–∫–æ–º –º–∞—Å—à—Ç–∞–±–Ω—ã–µ, –Ω–æ –≤–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –≤–Ω–µ—Å–µ–Ω–Ω—ã–µ –≤ –≤–µ—Ä—Å–∏–∏ Express 4:</p>
<table class="doctable" border="1">
<tr>
<th>–û–±—ä–µ–∫—Ç</th>
<th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
</tr>
<tr>
<td>Node.js</td>
<td>Express 4 —Ç—Ä–µ–±—É–µ—Ç—Å—è Node.js 0.10.x –∏–ª–∏ –±–æ–ª–µ–µ –ø–æ–∑–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π; –ø–æ–¥–¥–µ—Ä–∂–∫–∞
Node.js 0.8.x –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.</td>
</tr>
<tr>
<td>
<p><code>http.createServer()</code></p>
</td>
<td>
<p>–ú–æ–¥—É–ª—å <code>http</code> —Ç–µ–ø–µ—Ä—å –Ω–µ–æ–±—Ö–æ–¥–∏–º —Ç–æ–ª—å–∫–æ –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤–∞–º —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–∏–º –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ (socket.io/SPDY/HTTPS). –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ <code>app.listen()</code>.</p>
</td>
</tr>
<tr>
<td>
<p><code>app.configure()</code></p>
</td>
<td>
<p>–§—É–Ω–∫—Ü–∏—è <code>app.configure()</code> —É–¥–∞–ª–µ–Ω–∞. –î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ä–µ–¥—ã –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ
<code>process.env.NODE_ENV</code> –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é
<code>app.get('env')</code>.</p>
</td>
</tr>
<tr>
<td>
<p><code>json spaces</code></p>
</td>
<td>
<p>–°–≤–æ–π—Å—Ç–≤–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è <code>json spaces</code> –≤ Express 4 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–∫–ª—é—á–µ–Ω–æ.</p>
</td>
</tr>
<tr>
<td>
<p><code>req.accepted()</code></p>
</td>
<td>
<p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ <code>req.accepts()</code>, <code>req.acceptsEncodings()</code>,
<code>req.acceptsCharsets()</code> –∏ <code>req.acceptsLanguages()</code>.</p>
</td>
</tr>
<tr>
<td>
<p><code>res.location()</code></p>
</td>
<td>
<p>–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ URL-–∞–¥—Ä–µ—Å–∞ –±–æ–ª–µ–µ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç—Å—è.</p>
</td>
</tr>
<tr>
<td>
<p><code>req.params</code></p>
</td>
<td>
<p>–ë—ã–ª –º–∞—Å—Å–∏–≤; —Ç–µ–ø–µ—Ä—å –æ–±—ä–µ–∫—Ç.</p>
</td>
</tr>
<tr>
<td>
<p><code>res.locals</code></p>
</td>
<td>
<p>–ë—ã–ª–∞ —Ñ—É–Ω–∫—Ü–∏—è; —Ç–µ–ø–µ—Ä—å –æ–±—ä–µ–∫—Ç.</p>
</td>
</tr>
<tr>
<td>
<p><code>res.headerSent</code></p>
</td>
<td>
<p>–ò–∑–º–µ–Ω–µ–Ω –Ω–∞ <code>res.headersSent</code>.</p>
</td>
</tr>
<tr>
<td>
<p><code>app.route</code></p>
</td>
<td>
<p>–¢–µ–ø–µ—Ä—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –∫–∞–∫ <code>app.mountpath</code>.</p>
</td>
</tr>
<tr>
<td>
<p><code>res.on('header')</code></p>
</td>
<td>
<p>–£–¥–∞–ª–µ–Ω.</p>
</td>
</tr>
<tr>
<td>
<p><code>res.charset</code></p>
</td>
<td>
<p>–£–¥–∞–ª–µ–Ω.</p>
</td>
</tr>
<tr>
<td>
<p><code>res.setHeader('Set-Cookie', val)</code></p>
</td>
<td>
<p>–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è cookie. –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
<code>res.cookie()</code>.</p>
</td>
</tr>
</table>
<h2 id="example-migration">–ü—Ä–∏–º–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h2>
<p>–ù–∏–∂–µ –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Express 3 –≤ Express 4.
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ñ–∞–π–ª—ã <code>app.js</code> –∏ <code>package.json</code>.</p>
<h3>
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ 3
</h3>
<h4><code>app.js</code></h4>
<p>–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Express v.3, –≤–∫–ª—é—á–∞—é—â–µ–µ –≤ —Å–µ–±—è —Å–ª–µ–¥—É—é—â–∏–π —Ñ–∞–π–ª <code>app.js</code>:</p>
<pre><code class="language-javascript" translate="no">
var express = require('express');
var routes = require('./routes');
var user = require('./routes/user');
var http = require('http');
var path = require('path');

var app = express();

// all environments
app.set('port', process.env.PORT || 3000);
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'pug');
app.use(express.favicon());
app.use(express.logger('dev'));
app.use(express.methodOverride());
app.use(express.session({ secret: 'your secret here' }));
app.use(express.bodyParser());
app.use(app.router);
app.use(express.static(path.join(__dirname, 'public')));

// development only
if ('development' == app.get('env')) {
  app.use(express.errorHandler());
}

app.get('/', routes.index);
app.get('/users', user.list);

http.createServer(app).listen(app.get('port'), function(){
  console.log('Express server listening on port ' + app.get('port'));
});
</code>
</pre>
<h4><code>package.json</code></h4>
<p>–°–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏–π –µ–º—É —Ñ–∞–π–ª <code>package.json</code> –≤–µ—Ä—Å–∏–∏ 3, –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:</p>
<pre><code class="language-javascript" translate="no">
{
  "name": "application-name",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "node app.js"
  },
  "dependencies": {
    "express": "3.12.0",
    "pug": "*"
  }
}
</code>
</pre>
<h3>
–ü—Ä–æ—Ü–µ—Å—Å
</h3>
<p>–ü—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Express 4 –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Express –∏ Pug –¥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥—ã:</p>
<pre><code class="language-sh" translate="no">
$ npm install serve-favicon morgan method-override express-session body-parser multer errorhandler express@latest pug@latest --save
</code>
</pre>
<p>–í–Ω–µ—Å–∏—Ç–µ –≤ —Ñ–∞–π–ª <code>app.js</code> —Å–ª–µ–¥—É—é—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:</p>
<ol>
<li>
<p>–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ Express <code>express.favicon</code>,
<code>express.logger</code>, <code>express.methodOverride</code>,
<code>express.session</code>, <code>express.bodyParser</code> –∏
<code>express.errorHandler</code> –±–æ–ª–µ–µ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –æ–±—ä–µ–∫—Ç–µ
<code>express</code>. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—Ä—É—á–Ω—É—é —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∏–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏—Ö –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.</p>
</li>
<li>
<p>–§—É–Ω–∫—Ü–∏—é <code>app.router</code> –∑–∞–≥—Ä—É–∂–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.
–û–Ω–∞ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Express 4, –ø–æ—ç—Ç–æ–º—É —É–¥–∞–ª–∏—Ç–µ –∫–æ–¥
<code>app.use(app.router);</code>.</p>
</li>
<li>
<p>–£–±–µ–¥–∏—Ç–µ—Å—å –≤ —Ç–æ–º, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ, - –∑–∞–≥—Ä—É–∑–∏—Ç–µ <code>errorHandler</code> –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.</p>
</li>
</ol>
<h3>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ 4</h3>
<h4><code>package.json</code></h4>
<p>–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤—ã—à–µ –∫–æ–º–∞–Ω–¥—ã <code>npm</code> –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ <code>package.json</code> —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p>
<pre><code class="language-javascript" translate="no">
{
  "name": "application-name",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "node app.js"
  },
  "dependencies": {
    "body-parser": "^1.5.2",
    "errorhandler": "^1.1.1",
    "express": "^4.8.0",
    "express-session": "^1.7.2",
    "pug": "^2.0.0-beta6",
    "method-override": "^2.1.2",
    "morgan": "^1.2.2",
    "multer": "^0.1.3",
    "serve-favicon": "^2.0.1"
  }
}
</code>
</pre>
<h4><code>app.js</code></h4>
<p>–ó–∞—Ç–µ–º —É–¥–∞–ª–∏—Ç–µ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥, –∑–∞–≥—Ä—É–∑–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ –≤–Ω–µ—Å–∏—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –§–∞–π–ª <code>app.js</code> –±—É–¥–µ—Ç –∏–º–µ—Ç—å –≤–∏–¥:</p>
<pre><code class="language-javascript" translate="no">
var http = require('http');
var express = require('express');
var routes = require('./routes');
var user = require('./routes/user');
var path = require('path');

var favicon = require('serve-favicon');
var logger = require('morgan');
var methodOverride = require('method-override');
var session = require('express-session');
var bodyParser = require('body-parser');
var multer = require('multer');
var errorHandler = require('errorhandler');

var app = express();

// all environments
app.set('port', process.env.PORT || 3000);
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'pug');
app.use(favicon(__dirname + '/public/favicon.ico'));
app.use(logger('dev'));
app.use(methodOverride());
app.use(session({ resave: true,
                  saveUninitialized: true,
                  secret: 'uwotm8' }));
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: true }));
app.use(multer());
app.use(express.static(path.join(__dirname, 'public')));

app.get('/', routes.index);
app.get('/users', user.list);

// error handling middleware should be loaded after the loading the routes
if ('development' == app.get('env')) {
  app.use(errorHandler());
}

var server = http.createServer(app);
server.listen(app.get('port'), function(){
  console.log('Express server listening on port ' + app.get('port'));
});
</code>
</pre>
<div class="doc-box doc-info">
<p>–ï—Å–ª–∏ –≤–∞–º –Ω–µ –Ω—É–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Å –º–æ–¥—É–ª–µ–º <code>http</code> (socket.io/SPDY/HTTPS), –∑–∞–≥—Ä—É–∂–∞—Ç—å –µ–≥–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p>
<pre><code class="language-js" translate="no">app.listen(app.get('port'), function(){
  console.log('Express server listening on port ' + app.get('port'));
});</code>
</pre>
</div>
<h3>–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</h3>
<p>–ü—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω, –∏ –¥–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –≤–µ—Ä—Å–∏–∏
Express 4. –î–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥—ã:</p>
<pre><code class="language-sh" translate="no">
$ node .
</code>
</pre>
<p>–ó–∞–≥—Ä—É–∑–∏—Ç–µ <a href="http://localhost:3000/">http://localhost:3000</a>. –ë—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∞ –¥–æ–º–∞—à–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤ Express 4.</p>
<h2 id="app-gen">–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ –≤–µ—Ä—Å–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π Express 4</h2>
<p>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π Express –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º -
<code>express</code>, –Ω–æ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –µ–≥–æ –¥–æ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–¥–∞–ª–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π Express 3, –∞ –∑–∞—Ç–µ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤—ã–π <code>express-generator</code>.</p>
<h3>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ </h3>
<p>–ï—Å–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π Express 3, –µ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–¥–∞–ª–∏—Ç—å:</p>
<pre><code class="language-sh" translate="no">
$ npm uninstall -g express
</code>
</pre>
<p>–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º –∏ –∫–∞—Ç–∞–ª–æ–≥–∞–º, —ç—Ç—É –∫–æ–º–∞–Ω–¥—É, –≤–æ–∑–º–æ–∂–Ω–æ, —Å–ª–µ–¥—É–µ—Ç –≤—ã–∑–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é <code>sudo</code>.</p>
<p>–¢–µ–ø–µ—Ä—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä:</p>
<pre><code class="language-sh" translate="no">
$ npm install -g express-generator
</code>
</pre>
<p>–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º –∏ –∫–∞—Ç–∞–ª–æ–≥–∞–º, —ç—Ç—É –∫–æ–º–∞–Ω–¥—É, –≤–æ–∑–º–æ–∂–Ω–æ, —Å–ª–µ–¥—É–µ—Ç –≤—ã–∑–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é <code>sudo</code>.</p>
<p>–ò—Ç–∞–∫, –∫–æ–º–∞–Ω–¥–∞ <code>express</code> –≤ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ –≤–µ—Ä—Å–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞
Express 4.</p>
<h3>–ò–∑–º–µ–Ω–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π </h3>
<p>–û–ø—Ü–∏–∏ –∫–æ–º–∞–Ω–¥ –∏ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º, –æ—Å—Ç–∞–ª–∏—Å—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Å–ª–µ–¥—É—é—â–∏—Ö:</p>
<ul class="doclist">
<li>–£–¥–∞–ª–µ–Ω–∞ –æ–ø—Ü–∏—è <code>--sessions</code>.</li>
<li>–£–¥–∞–ª–µ–Ω–∞ –æ–ø—Ü–∏—è <code>--jshtml</code>.</li>
<li>–î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–ø—Ü–∏—è <code>--hogan</code> –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ <a href="http://twitter.github.io/hogan.js/">Hogan.js</a>.</li>
</ul>
<h3>–ü—Ä–∏–º–µ—Ä</h3>
<p>–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Express 4:</p>
<pre><code class="language-sh" translate="no">
$ express app4
</code>
</pre>
<p>–û–±—Ä–∞—Ç–∏–≤ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ <code>app4/app.js</code>, –≤—ã –∑–∞–º–µ—Ç–∏—Ç–µ, —á—Ç–æ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
–ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–∫—Ä–æ–º–µ <code>express.static</code>), –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
–∫–∞–∫ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –º–æ–¥—É–ª–∏, –∞ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ <code>router</code> –±–æ–ª—å—à–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —è–≤–Ω—ã–º –æ–±—Ä–∞–∑–æ–º.</p>
<p>–¢–∞–∫–∂–µ –≤—ã –∑–∞–º–µ—Ç–∏—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª <code>app.js</code> —Ç–µ–ø–µ—Ä—å —è–≤–ª—è–µ—Ç—Å—è –º–æ–¥—É–ª–µ–º Node.js, –∞ –Ω–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º, –∫–æ—Ç–æ—Ä–æ–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–æ—Å—å —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–µ–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞.</p>
<p>–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥—ã:</p>
<pre><code class="language-sh" translate="no">
$ npm start
</code>
</pre>
<p>–û–±—Ä–∞—Ç–∏–≤ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å—Ü–µ–Ω–∞—Ä–∏–π –∑–∞–ø—É—Å–∫–∞ npm –≤ —Ñ–∞–π–ª–µ <code>package.json</code>,
–≤—ã –∑–∞–º–µ—Ç–∏—Ç–µ, —á—Ç–æ, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏, –∫–æ–º–∞–Ω–¥–æ–π, –∑–∞–ø—É—Å–∫–∞—é—â–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —è–≤–ª—è–µ—Ç—Å—è
<code>node ./bin/www</code>, –∫–æ—Ç–æ—Ä–æ–π –≤ Express 3 —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –∫–æ–º–∞–Ω–¥–∞ <code>node app.js</code>.</p>
<p>–ü–æ—Å–∫–æ–ª—å–∫—É —Ñ–∞–π–ª <code>app.js</code>, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º Express 4, —Ç–µ–ø–µ—Ä—å —è–≤–ª—è–µ—Ç—Å—è –º–æ–¥—É–ª–µ–º
Node.js, –µ–≥–æ —É–∂–µ –Ω–µ–ª—å–∑—è –∑–∞–ø—É—Å–∫–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–¥). –ú–æ–¥—É–ª—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤ —Ñ–∞–π–ª Node.js –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ —Ñ–∞–π–ª Node.js. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, —Ñ–∞–π–ª–æ–º Node.js —è–≤–ª—è–µ—Ç—Å—è <code>./bin/www</code>.</p>
<p>–ù–∏ –∫–∞—Ç–∞–ª–æ–≥ <code>bin</code>, –Ω–∏ —Ñ–∞–π–ª <code>www</code> –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
–Ω–µ —è–≤–ª—è—é—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Express –∏–ª–∏ –∑–∞–ø—É—Å–∫–∞ —Ç–∞–∫–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –≠—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å
—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –≤–∞—à–∏–º–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è–º–∏.</p>
<p>–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –∫–∞—Ç–∞–ª–æ–≥–∞ <code>www</code> –∏ –æ—Å—Ç–∞–≤–∏—Ç—å –≤—Å–µ, ‚Äú–∫–∞–∫ –±—ã–ª–æ –≤ Express 3‚Äù,
—É–¥–∞–ª–∏—Ç–µ —Å—Ç—Ä–æ–∫—É <code>module.exports = app;</code> –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞
<code>app.js</code>, –∞ –≤–º–µ—Å—Ç–æ –Ω–µ–µ –≤—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:</p>
<pre><code class="language-javascript" translate="no">
app.set('port', process.env.PORT || 3000);

var server = app.listen(app.get('port'), function() {
  debug('Express server listening on port ' + server.address().port);
});
</code>
</pre>
<p>–£–±–µ–¥–∏—Ç–µ—Å—å –≤ —Ç–æ–º, —á—Ç–æ –≤—ã –∑–∞–≥—Ä—É–∑–∏–ª–∏ –º–æ–¥—É–ª—å <code>debug</code> –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞ <code>app.js</code> —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–æ–¥–∞:</p>
<pre><code class="language-javascript" translate="no">
var debug = require('debug')('app4');
</code>
</pre>
<p>–î–∞–ª–µ–µ, –∑–∞–º–µ–Ω–∏—Ç–µ <code>"start": "node ./bin/www"</code> –≤ —Ñ–∞–π–ª–µ <code>package.json</code> –Ω–∞ <code>"start": "node app.js"</code>.</p>
<p>–ò—Ç–∞–∫, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å <code>./bin/www</code> –±—ã–ª–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–æ –≤
<code>app.js</code>. –¢–∞–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–º, –Ω–æ —Ü–µ–ª—å –¥–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –∑–∞–∫–ª—é—á–∞–ª–∞—Å—å –≤ —Ç–æ–º, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å –≤–∞–º —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö —Ä–∞–±–æ—Ç—ã —Ñ–∞–π–ª–∞ <code>./bin/www</code> –∏ –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É —Ñ–∞–π–ª <code>app.js</code> —Ç–µ–ø–µ—Ä—å –Ω–µ–ª—å–∑—è –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–∞–∫ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π.</p>
</div>
</section>

<noscript>
    <iframe src="http://www.googletagmanager.com/ns.html?id=GTM-5XL76H" height="0" width="0" style="display: none; visibility: hidden;"></iframe>
</noscript>
<script type="3670caf5909136c4c84cf6c5-text/javascript">
(function(w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
        'gtm.start': new Date().getTime(),
        event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
        '../../../www.googletagmanager.com/gtm5445.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
})(window, document, 'script', 'dataLayer', 'GTM-5XL76H');
</script>
<a id="top" href="#"><img src="../../images/arrow.png"></a>
<footer>
<div id="footer-content">
<div id="github">
<iframe src="http://ghbtns.com/github-btn.html?user=expressjs&amp;repo=express&amp;type=watch&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>
</div>
<div id="sponsor"><a href="https://github.com/expressjs/express">Express</a> –ø—Ä–æ–µ–∫—Ç –§–æ–Ω–¥–∞ Node.js.</div>
<div id="fork"><a href="https://github.com/expressjs/expressjs.com">–°–æ–∑–¥–∞–π—Ç–µ –∫–ª–æ–Ω –≤–µ–±-—Å–∞–π—Ç–∞ –Ω–∞ GitHub</a>.
</div>
<div>Copyright &copy; StrongLoop, Inc. –∏ –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ expressjs.com.</div>
</div>
<div id="license">
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/us/"><img alt="–õ–∏—Ü–µ–Ω–∑–∏—è Creative Commons" style="border-width:0" src="../../../i.creativecommons.org/l/by-sa/3.0/us/80x15.png" /></a> –≠—Ç–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/us/">–ª–∏—Ü–µ–Ω–∑–∏–∏ Creative Commons ¬´Attribution-ShareAlike¬ª (¬´–ê—Ç—Ä–∏–±—É—Ü–∏—è ‚Äî –ù–∞ —Ç–µ—Ö –∂–µ —É—Å–ª–æ–≤–∏—è—Ö¬ª) 3.0 –°–®–ê</a>.
</div>
</footer>
<script type="3670caf5909136c4c84cf6c5-text/javascript" src="../../../cdn.jsdelivr.net/npm/docsearch.js%402/dist/cdn/docsearch.min.js" onload="docsearch({
  apiKey: '7164e33055faa6ecddefd9e08fc59f5d',
  indexName: 'expressjs',
  inputSelector: '#q',
  algoliaOptions: { 'facetFilters': ['lang:ru'] }
})" async></script>
<script src="../../../ajax.cloudflare.com/cdn-cgi/scripts/a2bd7673/cloudflare-static/rocket-loader.min.js" data-cf-settings="3670caf5909136c4c84cf6c5-|49" defer=""></script></body>

<!-- Mirrored from expressjs.com/ru/guide/migrating-4.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 10 Jul 2019 00:23:49 GMT -->
</html>
